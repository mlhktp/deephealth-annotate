!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("cornerstone-core",[],e):"object"==typeof exports?exports["cornerstone-core"]=e():t.cornerstone=e()}(window,function(){return function(b){var e=window.webpackHotUpdate;window.webpackHotUpdate=function(x,_){(function I(L,x){if(P[L]&&O[L]){for(var _ in O[L]=!1,x)Object.prototype.hasOwnProperty.call(x,_)&&(D[_]=x[_]);0==--h&&0===E&&S()}})(x,_),e&&e(x,_)};var f,l=!0,s="4d8d88ba53621f59b9a9",g=1e4,i={},m=[],o=[];function n(L){var x=H[L];if(!x)return W;var _=function(p){return x.hot.active?(H[p]?-1===H[p].parents.indexOf(L)&&H[p].parents.push(L):(m=[L],f=p),-1===x.children.indexOf(p)&&x.children.push(p)):(console.warn("[HMR] unexpected require("+p+") from disposed module "+L),m=[]),W(p)},R=function(U){return{configurable:!0,enumerable:!0,get:function(){return W[U]},set:function(F){W[U]=F}}};for(var A in W)Object.prototype.hasOwnProperty.call(W,A)&&"e"!==A&&"t"!==A&&Object.defineProperty(_,A,R(A));return _.e=function(p){return"ready"===c&&v("prepare"),E++,W.e(p).then(U,function(F){throw U(),F});function U(){E--,"prepare"===c&&(M[p]||B(p),0===E&&0===h&&S())}},_.t=function(p,U){return 1&U&&(p=_(p)),W.t(p,-2&U)},_}function a(L){var x={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:f!==L,active:!0,accept:function(_,R){if(void 0===_)x._selfAccepted=!0;else if("function"==typeof _)x._selfAccepted=_;else if("object"==typeof _)for(var A=0;A<_.length;A++)x._acceptedDependencies[_[A]]=R||function(){};else x._acceptedDependencies[_]=R||function(){}},decline:function(_){if(void 0===_)x._selfDeclined=!0;else if("object"==typeof _)for(var R=0;R<_.length;R++)x._declinedDependencies[_[R]]=!0;else x._declinedDependencies[_]=!0},dispose:function(_){x._disposeHandlers.push(_)},addDisposeHandler:function(_){x._disposeHandlers.push(_)},removeDisposeHandler:function(_){var R=x._disposeHandlers.indexOf(_);R>=0&&x._disposeHandlers.splice(R,1)},check:C,apply:K,status:function(_){if(!_)return c;u.push(_)},addStatusHandler:function(_){u.push(_)},removeStatusHandler:function(_){var R=u.indexOf(_);R>=0&&u.splice(R,1)},data:i[L]};return f=void 0,x}var u=[],c="idle";function v(L){c=L;for(var x=0;x<u.length;x++)u[x].call(null,L)}var T,D,y,h=0,E=0,M={},O={},P={};function j(L){return+L+""===L?+L:L}function C(L){if("idle"!==c)throw new Error("check() is only allowed in idle status");return l=L,v("check"),function d(L){return L=L||1e4,new Promise(function(x,_){if(typeof XMLHttpRequest>"u")return _(new Error("No browser support"));try{var R=new XMLHttpRequest,A=W.p+""+s+".hot-update.json";R.open("GET",A,!0),R.timeout=L,R.send(null)}catch(p){return _(p)}R.onreadystatechange=function(){if(4===R.readyState)if(0===R.status)_(new Error("Manifest request to "+A+" timed out."));else if(404===R.status)x();else if(200!==R.status&&304!==R.status)_(new Error("Manifest request to "+A+" failed."));else{try{var p=JSON.parse(R.responseText)}catch(U){return void _(U)}x(p)}}})}(g).then(function(x){if(!x)return v("idle"),null;O={},M={},P=x.c,y=x.h,v("prepare");var _=new Promise(function(A,p){T={resolve:A,reject:p}});return D={},B("cornerstone"),"prepare"===c&&0===E&&0===h&&S(),_})}function B(L){P[L]?(O[L]=!0,h++,function r(L){var x=document.getElementsByTagName("head")[0],_=document.createElement("script");_.charset="utf-8",_.src=W.p+""+L+"."+s+".hot-update.js",x.appendChild(_)}(L)):M[L]=!0}function S(){v("ready");var L=T;if(T=null,L)if(l)Promise.resolve().then(function(){return K(l)}).then(function(R){L.resolve(R)},function(R){L.reject(R)});else{var x=[];for(var _ in D)Object.prototype.hasOwnProperty.call(D,_)&&x.push(j(_));L.resolve(x)}}function K(L){if("ready"!==c)throw new Error("apply() is only allowed in ready status");var x,_,R,A,p;function U(re){for(var de=[re],Me={},Ee=de.slice().map(function(je){return{chain:[je],id:je}});Ee.length>0;){var Oe=Ee.pop(),ge=Oe.id,Te=Oe.chain;if((A=H[ge])&&!A.hot._selfAccepted){if(A.hot._selfDeclined)return{type:"self-declined",chain:Te,moduleId:ge};if(A.hot._main)return{type:"unaccepted",chain:Te,moduleId:ge};for(var me=0;me<A.parents.length;me++){var De=A.parents[me],Ce=H[De];if(Ce){if(Ce.hot._declinedDependencies[ge])return{type:"declined",chain:Te.concat([De]),moduleId:ge,parentId:De};if(-1===de.indexOf(De)){if(Ce.hot._acceptedDependencies[ge]){Me[De]||(Me[De]=[]),F(Me[De],[ge]);continue}delete Me[De],de.push(De),Ee.push({chain:Te.concat([De]),id:De})}}}}}return{type:"accepted",moduleId:re,outdatedModules:de,outdatedDependencies:Me}}function F(re,de){for(var Me=0;Me<de.length;Me++){var Ee=de[Me];-1===re.indexOf(Ee)&&re.push(Ee)}}L=L||{};var N={},V=[],Y={},J=function(){console.warn("[HMR] unexpected require("+q.moduleId+") to disposed module")};for(var ee in D)if(Object.prototype.hasOwnProperty.call(D,ee)){var q;p=j(ee);var le=!1,Q=!1,X=!1,w="";switch((q=D[ee]?U(p):{type:"disposed",moduleId:ee}).chain&&(w="\nUpdate propagation: "+q.chain.join(" -> ")),q.type){case"self-declined":L.onDeclined&&L.onDeclined(q),L.ignoreDeclined||(le=new Error("Aborted because of self decline: "+q.moduleId+w));break;case"declined":L.onDeclined&&L.onDeclined(q),L.ignoreDeclined||(le=new Error("Aborted because of declined dependency: "+q.moduleId+" in "+q.parentId+w));break;case"unaccepted":L.onUnaccepted&&L.onUnaccepted(q),L.ignoreUnaccepted||(le=new Error("Aborted because "+p+" is not accepted"+w));break;case"accepted":L.onAccepted&&L.onAccepted(q),Q=!0;break;case"disposed":L.onDisposed&&L.onDisposed(q),X=!0;break;default:throw new Error("Unexception type "+q.type)}if(le)return v("abort"),Promise.reject(le);if(Q)for(p in Y[p]=D[p],F(V,q.outdatedModules),q.outdatedDependencies)Object.prototype.hasOwnProperty.call(q.outdatedDependencies,p)&&(N[p]||(N[p]=[]),F(N[p],q.outdatedDependencies[p]));X&&(F(V,[q.moduleId]),Y[p]=J)}var fe,$=[];for(_=0;_<V.length;_++)H[p=V[_]]&&H[p].hot._selfAccepted&&$.push({module:p,errorHandler:H[p].hot._selfAccepted});v("dispose"),Object.keys(P).forEach(function(re){!1===P[re]&&function t(L){delete installedChunks[L]}(re)});for(var k,ae=V.slice();ae.length>0;)if(p=ae.pop(),A=H[p]){var te={},oe=A.hot._disposeHandlers;for(R=0;R<oe.length;R++)(x=oe[R])(te);for(i[p]=te,A.hot.active=!1,delete H[p],delete N[p],R=0;R<A.children.length;R++){var se=H[A.children[R]];se&&(k=se.parents.indexOf(p))>=0&&se.parents.splice(k,1)}}for(p in N)if(Object.prototype.hasOwnProperty.call(N,p)&&(A=H[p]))for(fe=N[p],R=0;R<fe.length;R++)(k=A.children.indexOf(fe[R]))>=0&&A.children.splice(k,1);for(p in v("apply"),s=y,Y)Object.prototype.hasOwnProperty.call(Y,p)&&(b[p]=Y[p]);var ue=null;for(p in N)if(Object.prototype.hasOwnProperty.call(N,p)&&(A=H[p])){fe=N[p];var ve=[];for(_=0;_<fe.length;_++)if(x=A.hot._acceptedDependencies[fe[_]]){if(-1!==ve.indexOf(x))continue;ve.push(x)}for(_=0;_<ve.length;_++){x=ve[_];try{x(fe)}catch(re){L.onErrored&&L.onErrored({type:"accept-errored",moduleId:p,dependencyId:fe[_],error:re}),L.ignoreErrored||ue||(ue=re)}}}for(_=0;_<$.length;_++){var he=$[_];m=[p=he.module];try{W(p)}catch(re){if("function"==typeof he.errorHandler)try{he.errorHandler(re)}catch(de){L.onErrored&&L.onErrored({type:"self-accept-error-handler-errored",moduleId:p,error:de,originalError:re}),L.ignoreErrored||ue||(ue=de),ue||(ue=re)}else L.onErrored&&L.onErrored({type:"self-accept-errored",moduleId:p,error:re}),L.ignoreErrored||ue||(ue=re)}}return ue?(v("fail"),Promise.reject(ue)):(v("idle"),new Promise(function(re){re(V)}))}var H={};function W(L){if(H[L])return H[L].exports;var x=H[L]={i:L,l:!1,exports:{},hot:a(L),parents:(o=m,m=[],o),children:[]};return b[L].call(x.exports,x,x.exports,n(L)),x.l=!0,x.exports}return W.m=b,W.c=H,W.d=function(L,x,_){W.o(L,x)||Object.defineProperty(L,x,{enumerable:!0,get:_})},W.r=function(L){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(L,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(L,"__esModule",{value:!0})},W.t=function(L,x){if(1&x&&(L=W(L)),8&x||4&x&&"object"==typeof L&&L&&L.__esModule)return L;var _=Object.create(null);if(W.r(_),Object.defineProperty(_,"default",{enumerable:!0,value:L}),2&x&&"string"!=typeof L)for(var R in L)W.d(_,R,function(A){return L[A]}.bind(null,R));return _},W.n=function(L){var x=L&&L.__esModule?function(){return L.default}:function(){return L};return W.d(x,"a",x),x},W.o=function(L,x){return Object.prototype.hasOwnProperty.call(L,x)},W.p="",W.h=function(){return s},n("./index.js")(W.s="./index.js")}({"./canvasToPixel.js":
/*!**************************!*\
          !*** ./canvasToPixel.js ***!
          \**************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./enabledElements.js */
"./enabledElements.js"),d=e(
/*! ./internal/getTransform.js */
"./internal/getTransform.js");t.default=function(l,s){var g=Object(r.getEnabledElement)(l),i=Object(d.default)(g);return i.invert(),i.transformPoint(s.x,s.y)}},"./colors/colormap.js":
/*!****************************!*\
          !*** ./colors/colormap.js ***!
          \****************************/
/*! exports provided: getColormapsList, getColormap */function(b,t,e){"use strict";e.r(t),e.d(t,"getColormapsList",function(){return o}),e.d(t,"getColormap",function(){return n});var r=e(
/*! ./lookupTable.js */
"./colors/lookupTable.js"),d=[0,0,0,0],l={hotIron:{name:"Hot Iron",numOfColors:256,colors:[[0,0,0,255],[2,0,0,255],[4,0,0,255],[6,0,0,255],[8,0,0,255],[10,0,0,255],[12,0,0,255],[14,0,0,255],[16,0,0,255],[18,0,0,255],[20,0,0,255],[22,0,0,255],[24,0,0,255],[26,0,0,255],[28,0,0,255],[30,0,0,255],[32,0,0,255],[34,0,0,255],[36,0,0,255],[38,0,0,255],[40,0,0,255],[42,0,0,255],[44,0,0,255],[46,0,0,255],[48,0,0,255],[50,0,0,255],[52,0,0,255],[54,0,0,255],[56,0,0,255],[58,0,0,255],[60,0,0,255],[62,0,0,255],[64,0,0,255],[66,0,0,255],[68,0,0,255],[70,0,0,255],[72,0,0,255],[74,0,0,255],[76,0,0,255],[78,0,0,255],[80,0,0,255],[82,0,0,255],[84,0,0,255],[86,0,0,255],[88,0,0,255],[90,0,0,255],[92,0,0,255],[94,0,0,255],[96,0,0,255],[98,0,0,255],[100,0,0,255],[102,0,0,255],[104,0,0,255],[106,0,0,255],[108,0,0,255],[110,0,0,255],[112,0,0,255],[114,0,0,255],[116,0,0,255],[118,0,0,255],[120,0,0,255],[122,0,0,255],[124,0,0,255],[126,0,0,255],[128,0,0,255],[130,0,0,255],[132,0,0,255],[134,0,0,255],[136,0,0,255],[138,0,0,255],[140,0,0,255],[142,0,0,255],[144,0,0,255],[146,0,0,255],[148,0,0,255],[150,0,0,255],[152,0,0,255],[154,0,0,255],[156,0,0,255],[158,0,0,255],[160,0,0,255],[162,0,0,255],[164,0,0,255],[166,0,0,255],[168,0,0,255],[170,0,0,255],[172,0,0,255],[174,0,0,255],[176,0,0,255],[178,0,0,255],[180,0,0,255],[182,0,0,255],[184,0,0,255],[186,0,0,255],[188,0,0,255],[190,0,0,255],[192,0,0,255],[194,0,0,255],[196,0,0,255],[198,0,0,255],[200,0,0,255],[202,0,0,255],[204,0,0,255],[206,0,0,255],[208,0,0,255],[210,0,0,255],[212,0,0,255],[214,0,0,255],[216,0,0,255],[218,0,0,255],[220,0,0,255],[222,0,0,255],[224,0,0,255],[226,0,0,255],[228,0,0,255],[230,0,0,255],[232,0,0,255],[234,0,0,255],[236,0,0,255],[238,0,0,255],[240,0,0,255],[242,0,0,255],[244,0,0,255],[246,0,0,255],[248,0,0,255],[250,0,0,255],[252,0,0,255],[254,0,0,255],[255,0,0,255],[255,2,0,255],[255,4,0,255],[255,6,0,255],[255,8,0,255],[255,10,0,255],[255,12,0,255],[255,14,0,255],[255,16,0,255],[255,18,0,255],[255,20,0,255],[255,22,0,255],[255,24,0,255],[255,26,0,255],[255,28,0,255],[255,30,0,255],[255,32,0,255],[255,34,0,255],[255,36,0,255],[255,38,0,255],[255,40,0,255],[255,42,0,255],[255,44,0,255],[255,46,0,255],[255,48,0,255],[255,50,0,255],[255,52,0,255],[255,54,0,255],[255,56,0,255],[255,58,0,255],[255,60,0,255],[255,62,0,255],[255,64,0,255],[255,66,0,255],[255,68,0,255],[255,70,0,255],[255,72,0,255],[255,74,0,255],[255,76,0,255],[255,78,0,255],[255,80,0,255],[255,82,0,255],[255,84,0,255],[255,86,0,255],[255,88,0,255],[255,90,0,255],[255,92,0,255],[255,94,0,255],[255,96,0,255],[255,98,0,255],[255,100,0,255],[255,102,0,255],[255,104,0,255],[255,106,0,255],[255,108,0,255],[255,110,0,255],[255,112,0,255],[255,114,0,255],[255,116,0,255],[255,118,0,255],[255,120,0,255],[255,122,0,255],[255,124,0,255],[255,126,0,255],[255,128,4,255],[255,130,8,255],[255,132,12,255],[255,134,16,255],[255,136,20,255],[255,138,24,255],[255,140,28,255],[255,142,32,255],[255,144,36,255],[255,146,40,255],[255,148,44,255],[255,150,48,255],[255,152,52,255],[255,154,56,255],[255,156,60,255],[255,158,64,255],[255,160,68,255],[255,162,72,255],[255,164,76,255],[255,166,80,255],[255,168,84,255],[255,170,88,255],[255,172,92,255],[255,174,96,255],[255,176,100,255],[255,178,104,255],[255,180,108,255],[255,182,112,255],[255,184,116,255],[255,186,120,255],[255,188,124,255],[255,190,128,255],[255,192,132,255],[255,194,136,255],[255,196,140,255],[255,198,144,255],[255,200,148,255],[255,202,152,255],[255,204,156,255],[255,206,160,255],[255,208,164,255],[255,210,168,255],[255,212,172,255],[255,214,176,255],[255,216,180,255],[255,218,184,255],[255,220,188,255],[255,222,192,255],[255,224,196,255],[255,226,200,255],[255,228,204,255],[255,230,208,255],[255,232,212,255],[255,234,216,255],[255,236,220,255],[255,238,224,255],[255,240,228,255],[255,242,232,255],[255,244,236,255],[255,246,240,255],[255,248,244,255],[255,250,248,255],[255,252,252,255],[255,255,255,255]]},pet:{name:"PET",numColors:256,colors:[[0,0,0,255],[0,2,1,255],[0,4,3,255],[0,6,5,255],[0,8,7,255],[0,10,9,255],[0,12,11,255],[0,14,13,255],[0,16,15,255],[0,18,17,255],[0,20,19,255],[0,22,21,255],[0,24,23,255],[0,26,25,255],[0,28,27,255],[0,30,29,255],[0,32,31,255],[0,34,33,255],[0,36,35,255],[0,38,37,255],[0,40,39,255],[0,42,41,255],[0,44,43,255],[0,46,45,255],[0,48,47,255],[0,50,49,255],[0,52,51,255],[0,54,53,255],[0,56,55,255],[0,58,57,255],[0,60,59,255],[0,62,61,255],[0,65,63,255],[0,67,65,255],[0,69,67,255],[0,71,69,255],[0,73,71,255],[0,75,73,255],[0,77,75,255],[0,79,77,255],[0,81,79,255],[0,83,81,255],[0,85,83,255],[0,87,85,255],[0,89,87,255],[0,91,89,255],[0,93,91,255],[0,95,93,255],[0,97,95,255],[0,99,97,255],[0,101,99,255],[0,103,101,255],[0,105,103,255],[0,107,105,255],[0,109,107,255],[0,111,109,255],[0,113,111,255],[0,115,113,255],[0,117,115,255],[0,119,117,255],[0,121,119,255],[0,123,121,255],[0,125,123,255],[0,128,125,255],[1,126,127,255],[3,124,129,255],[5,122,131,255],[7,120,133,255],[9,118,135,255],[11,116,137,255],[13,114,139,255],[15,112,141,255],[17,110,143,255],[19,108,145,255],[21,106,147,255],[23,104,149,255],[25,102,151,255],[27,100,153,255],[29,98,155,255],[31,96,157,255],[33,94,159,255],[35,92,161,255],[37,90,163,255],[39,88,165,255],[41,86,167,255],[43,84,169,255],[45,82,171,255],[47,80,173,255],[49,78,175,255],[51,76,177,255],[53,74,179,255],[55,72,181,255],[57,70,183,255],[59,68,185,255],[61,66,187,255],[63,64,189,255],[65,63,191,255],[67,61,193,255],[69,59,195,255],[71,57,197,255],[73,55,199,255],[75,53,201,255],[77,51,203,255],[79,49,205,255],[81,47,207,255],[83,45,209,255],[85,43,211,255],[86,41,213,255],[88,39,215,255],[90,37,217,255],[92,35,219,255],[94,33,221,255],[96,31,223,255],[98,29,225,255],[100,27,227,255],[102,25,229,255],[104,23,231,255],[106,21,233,255],[108,19,235,255],[110,17,237,255],[112,15,239,255],[114,13,241,255],[116,11,243,255],[118,9,245,255],[120,7,247,255],[122,5,249,255],[124,3,251,255],[126,1,253,255],[128,0,255,255],[130,2,252,255],[132,4,248,255],[134,6,244,255],[136,8,240,255],[138,10,236,255],[140,12,232,255],[142,14,228,255],[144,16,224,255],[146,18,220,255],[148,20,216,255],[150,22,212,255],[152,24,208,255],[154,26,204,255],[156,28,200,255],[158,30,196,255],[160,32,192,255],[162,34,188,255],[164,36,184,255],[166,38,180,255],[168,40,176,255],[170,42,172,255],[171,44,168,255],[173,46,164,255],[175,48,160,255],[177,50,156,255],[179,52,152,255],[181,54,148,255],[183,56,144,255],[185,58,140,255],[187,60,136,255],[189,62,132,255],[191,64,128,255],[193,66,124,255],[195,68,120,255],[197,70,116,255],[199,72,112,255],[201,74,108,255],[203,76,104,255],[205,78,100,255],[207,80,96,255],[209,82,92,255],[211,84,88,255],[213,86,84,255],[215,88,80,255],[217,90,76,255],[219,92,72,255],[221,94,68,255],[223,96,64,255],[225,98,60,255],[227,100,56,255],[229,102,52,255],[231,104,48,255],[233,106,44,255],[235,108,40,255],[237,110,36,255],[239,112,32,255],[241,114,28,255],[243,116,24,255],[245,118,20,255],[247,120,16,255],[249,122,12,255],[251,124,8,255],[253,126,4,255],[255,128,0,255],[255,130,4,255],[255,132,8,255],[255,134,12,255],[255,136,16,255],[255,138,20,255],[255,140,24,255],[255,142,28,255],[255,144,32,255],[255,146,36,255],[255,148,40,255],[255,150,44,255],[255,152,48,255],[255,154,52,255],[255,156,56,255],[255,158,60,255],[255,160,64,255],[255,162,68,255],[255,164,72,255],[255,166,76,255],[255,168,80,255],[255,170,85,255],[255,172,89,255],[255,174,93,255],[255,176,97,255],[255,178,101,255],[255,180,105,255],[255,182,109,255],[255,184,113,255],[255,186,117,255],[255,188,121,255],[255,190,125,255],[255,192,129,255],[255,194,133,255],[255,196,137,255],[255,198,141,255],[255,200,145,255],[255,202,149,255],[255,204,153,255],[255,206,157,255],[255,208,161,255],[255,210,165,255],[255,212,170,255],[255,214,174,255],[255,216,178,255],[255,218,182,255],[255,220,186,255],[255,222,190,255],[255,224,194,255],[255,226,198,255],[255,228,202,255],[255,230,206,255],[255,232,210,255],[255,234,214,255],[255,236,218,255],[255,238,222,255],[255,240,226,255],[255,242,230,255],[255,244,234,255],[255,246,238,255],[255,248,242,255],[255,250,246,255],[255,252,250,255],[255,255,255,255]]},hotMetalBlue:{name:"Hot Metal Blue",numColors:256,colors:[[0,0,0,255],[0,0,2,255],[0,0,4,255],[0,0,6,255],[0,0,8,255],[0,0,10,255],[0,0,12,255],[0,0,14,255],[0,0,16,255],[0,0,17,255],[0,0,19,255],[0,0,21,255],[0,0,23,255],[0,0,25,255],[0,0,27,255],[0,0,29,255],[0,0,31,255],[0,0,33,255],[0,0,35,255],[0,0,37,255],[0,0,39,255],[0,0,41,255],[0,0,43,255],[0,0,45,255],[0,0,47,255],[0,0,49,255],[0,0,51,255],[0,0,53,255],[0,0,55,255],[0,0,57,255],[0,0,59,255],[0,0,61,255],[0,0,63,255],[0,0,65,255],[0,0,67,255],[0,0,69,255],[0,0,71,255],[0,0,73,255],[0,0,75,255],[0,0,77,255],[0,0,79,255],[0,0,81,255],[0,0,83,255],[0,0,84,255],[0,0,86,255],[0,0,88,255],[0,0,90,255],[0,0,92,255],[0,0,94,255],[0,0,96,255],[0,0,98,255],[0,0,100,255],[0,0,102,255],[0,0,104,255],[0,0,106,255],[0,0,108,255],[0,0,110,255],[0,0,112,255],[0,0,114,255],[0,0,116,255],[0,0,117,255],[0,0,119,255],[0,0,121,255],[0,0,123,255],[0,0,125,255],[0,0,127,255],[0,0,129,255],[0,0,131,255],[0,0,133,255],[0,0,135,255],[0,0,137,255],[0,0,139,255],[0,0,141,255],[0,0,143,255],[0,0,145,255],[0,0,147,255],[0,0,149,255],[0,0,151,255],[0,0,153,255],[0,0,155,255],[0,0,157,255],[0,0,159,255],[0,0,161,255],[0,0,163,255],[0,0,165,255],[0,0,167,255],[3,0,169,255],[6,0,171,255],[9,0,173,255],[12,0,175,255],[15,0,177,255],[18,0,179,255],[21,0,181,255],[24,0,183,255],[26,0,184,255],[29,0,186,255],[32,0,188,255],[35,0,190,255],[38,0,192,255],[41,0,194,255],[44,0,196,255],[47,0,198,255],[50,0,200,255],[52,0,197,255],[55,0,194,255],[57,0,191,255],[59,0,188,255],[62,0,185,255],[64,0,182,255],[66,0,179,255],[69,0,176,255],[71,0,174,255],[74,0,171,255],[76,0,168,255],[78,0,165,255],[81,0,162,255],[83,0,159,255],[85,0,156,255],[88,0,153,255],[90,0,150,255],[93,2,144,255],[96,4,138,255],[99,6,132,255],[102,8,126,255],[105,9,121,255],[108,11,115,255],[111,13,109,255],[114,15,103,255],[116,17,97,255],[119,19,91,255],[122,21,85,255],[125,23,79,255],[128,24,74,255],[131,26,68,255],[134,28,62,255],[137,30,56,255],[140,32,50,255],[143,34,47,255],[146,36,44,255],[149,38,41,255],[152,40,38,255],[155,41,35,255],[158,43,32,255],[161,45,29,255],[164,47,26,255],[166,49,24,255],[169,51,21,255],[172,53,18,255],[175,55,15,255],[178,56,12,255],[181,58,9,255],[184,60,6,255],[187,62,3,255],[190,64,0,255],[194,66,0,255],[198,68,0,255],[201,70,0,255],[205,72,0,255],[209,73,0,255],[213,75,0,255],[217,77,0,255],[221,79,0,255],[224,81,0,255],[228,83,0,255],[232,85,0,255],[236,87,0,255],[240,88,0,255],[244,90,0,255],[247,92,0,255],[251,94,0,255],[255,96,0,255],[255,98,3,255],[255,100,6,255],[255,102,9,255],[255,104,12,255],[255,105,15,255],[255,107,18,255],[255,109,21,255],[255,111,24,255],[255,113,26,255],[255,115,29,255],[255,117,32,255],[255,119,35,255],[255,120,38,255],[255,122,41,255],[255,124,44,255],[255,126,47,255],[255,128,50,255],[255,130,53,255],[255,132,56,255],[255,134,59,255],[255,136,62,255],[255,137,65,255],[255,139,68,255],[255,141,71,255],[255,143,74,255],[255,145,76,255],[255,147,79,255],[255,149,82,255],[255,151,85,255],[255,152,88,255],[255,154,91,255],[255,156,94,255],[255,158,97,255],[255,160,100,255],[255,162,103,255],[255,164,106,255],[255,166,109,255],[255,168,112,255],[255,169,115,255],[255,171,118,255],[255,173,121,255],[255,175,124,255],[255,177,126,255],[255,179,129,255],[255,181,132,255],[255,183,135,255],[255,184,138,255],[255,186,141,255],[255,188,144,255],[255,190,147,255],[255,192,150,255],[255,194,153,255],[255,196,156,255],[255,198,159,255],[255,200,162,255],[255,201,165,255],[255,203,168,255],[255,205,171,255],[255,207,174,255],[255,209,176,255],[255,211,179,255],[255,213,182,255],[255,215,185,255],[255,216,188,255],[255,218,191,255],[255,220,194,255],[255,222,197,255],[255,224,200,255],[255,226,203,255],[255,228,206,255],[255,229,210,255],[255,231,213,255],[255,233,216,255],[255,235,219,255],[255,237,223,255],[255,239,226,255],[255,240,229,255],[255,242,232,255],[255,244,236,255],[255,246,239,255],[255,248,242,255],[255,250,245,255],[255,251,249,255],[255,253,252,255],[255,255,255,255]]},pet20Step:{name:"PET 20 Step",numColors:256,colors:[[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255]]},gray:{name:"Gray",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[1,1,1]],green:[[0,0,0],[1,1,1]],blue:[[0,0,0],[1,1,1]]}},jet:{name:"Jet",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[.35,0,0],[.66,1,1],[.89,1,1],[1,.5,.5]],green:[[0,0,0],[.125,0,0],[.375,1,1],[.64,1,1],[.91,0,0],[1,0,0]],blue:[[0,.5,.5],[.11,1,1],[.34,1,1],[.65,0,0],[1,0,0]]}},hsv:{name:"HSV",numColors:256,gamma:1,segmentedData:{red:[[0,1,1],[.15873,1,1],[.174603,.96875,.96875],[.333333,.03125,.03125],[.349206,0,0],[.666667,0,0],[.68254,.03125,.03125],[.84127,.96875,.96875],[.857143,1,1],[1,1,1]],green:[[0,0,0],[.15873,.9375,.9375],[.174603,1,1],[.507937,1,1],[.666667,.0625,.0625],[.68254,0,0],[1,0,0]],blue:[[0,0,0],[.333333,0,0],[.349206,.0625,.0625],[.507937,1,1],[.84127,1,1],[.857143,.9375,.9375],[1,.09375,.09375]]}},hot:{name:"Hot",numColors:256,gamma:1,segmentedData:{red:[[0,.0416,.0416],[.365079,1,1],[1,1,1]],green:[[0,0,0],[.365079,0,0],[.746032,1,1],[1,1,1]],blue:[[0,0,0],[.746032,0,0],[1,1,1]]}},cool:{name:"Cool",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[1,1,1]],green:[[0,1,1],[1,0,0]],blue:[[0,1,1],[1,1,1]]}},spring:{name:"Spring",numColors:256,gamma:1,segmentedData:{red:[[0,1,1],[1,1,1]],green:[[0,0,0],[1,1,1]],blue:[[0,1,1],[1,0,0]]}},summer:{name:"Summer",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[1,1,1]],green:[[0,.5,.5],[1,1,1]],blue:[[0,.4,.4],[1,.4,.4]]}},autumn:{name:"Autumn",numColors:256,gamma:1,segmentedData:{red:[[0,1,1],[1,1,1]],green:[[0,0,0],[1,1,1]],blue:[[0,0,0],[1,0,0]]}},winter:{name:"Winter",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[1,0,0]],green:[[0,0,0],[1,1,1]],blue:[[0,1,1],[1,.5,.5]]}},bone:{name:"Bone",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[.746032,.652778,.652778],[1,1,1]],green:[[0,0,0],[.365079,.319444,.319444],[.746032,.777778,.777778],[1,1,1]],blue:[[0,0,0],[.365079,.444444,.444444],[1,1,1]]}},copper:{name:"Copper",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[.809524,1,1],[1,1,1]],green:[[0,0,0],[1,.7812,.7812]],blue:[[0,0,0],[1,.4975,.4975]]}},spectral:{name:"Spectral",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[.05,.4667,.4667],[.1,.5333,.5333],[.15,0,0],[.2,0,0],[.25,0,0],[.3,0,0],[.35,0,0],[.4,0,0],[.45,0,0],[.5,0,0],[.55,0,0],[.6,0,0],[.65,.7333,.7333],[.7,.9333,.9333],[.75,1,1],[.8,1,1],[.85,1,1],[.9,.8667,.8667],[.95,.8,.8],[1,.8,.8]],green:[[0,0,0],[.05,0,0],[.1,0,0],[.15,0,0],[.2,0,0],[.25,.4667,.4667],[.3,.6,.6],[.35,.6667,.6667],[.4,.6667,.6667],[.45,.6,.6],[.5,.7333,.7333],[.55,.8667,.8667],[.6,1,1],[.65,1,1],[.7,.9333,.9333],[.75,.8,.8],[.8,.6,.6],[.85,0,0],[.9,0,0],[.95,0,0],[1,.8,.8]],blue:[[0,0,0],[.05,.5333,.5333],[.1,.6,.6],[.15,.6667,.6667],[.2,.8667,.8667],[.25,.8667,.8667],[.3,.8667,.8667],[.35,.6667,.6667],[.4,.5333,.5333],[.45,0,0],[.5,0,0],[.55,0,0],[.6,0,0],[.65,0,0],[.7,0,0],[.75,0,0],[.8,0,0],[.85,0,0],[.9,0,0],[.95,0,0],[1,.8,.8]]}},coolwarm:{name:"CoolWarm",numColors:256,gamma:1,segmentedData:{red:[[0,.2298057,.2298057],[.03125,.26623388,.26623388],[.0625,.30386891,.30386891],[.09375,.342804478,.342804478],[.125,.38301334,.38301334],[.15625,.424369608,.424369608],[.1875,.46666708,.46666708],[.21875,.509635204,.509635204],[.25,.552953156,.552953156],[.28125,.596262162,.596262162],[.3125,.639176211,.639176211],[.34375,.681291281,.681291281],[.375,.722193294,.722193294],[.40625,.761464949,.761464949],[.4375,.798691636,.798691636],[.46875,.833466556,.833466556],[.5,.865395197,.865395197],[.53125,.897787179,.897787179],[.5625,.924127593,.924127593],[.59375,.944468518,.944468518],[.625,.958852946,.958852946],[.65625,.96732803,.96732803],[.6875,.969954137,.969954137],[.71875,.966811177,.966811177],[.75,.958003065,.958003065],[.78125,.943660866,.943660866],[.8125,.923944917,.923944917],[.84375,.89904617,.89904617],[.875,.869186849,.869186849],[.90625,.834620542,.834620542],[.9375,.795631745,.795631745],[.96875,.752534934,.752534934],[1,.705673158,.705673158]],green:[[0,.298717966,.298717966],[.03125,.353094838,.353094838],[.0625,.406535296,.406535296],[.09375,.458757618,.458757618],[.125,.50941904,.50941904],[.15625,.558148092,.558148092],[.1875,.604562568,.604562568],[.21875,.648280772,.648280772],[.25,.688929332,.688929332],[.28125,.726149107,.726149107],[.3125,.759599947,.759599947],[.34375,.788964712,.788964712],[.375,.813952739,.813952739],[.40625,.834302879,.834302879],[.4375,.849786142,.849786142],[.46875,.860207984,.860207984],[.5,.86541021,.86541021],[.53125,.848937047,.848937047],[.5625,.827384882,.827384882],[.59375,.800927443,.800927443],[.625,.769767752,.769767752],[.65625,.734132809,.734132809],[.6875,.694266682,.694266682],[.71875,.650421156,.650421156],[.75,.602842431,.602842431],[.78125,.551750968,.551750968],[.8125,.49730856,.49730856],[.84375,.439559467,.439559467],[.875,.378313092,.378313092],[.90625,.312874446,.312874446],[.9375,.24128379,.24128379],[.96875,.157246067,.157246067],[1,.01555616,.01555616]],blue:[[0,.753683153,.753683153],[.03125,.801466763,.801466763],[.0625,.84495867,.84495867],[.09375,.883725899,.883725899],[.125,.917387822,.917387822],[.15625,.945619588,.945619588],[.1875,.968154911,.968154911],[.21875,.98478814,.98478814],[.25,.995375608,.995375608],[.28125,.999836203,.999836203],[.3125,.998151185,.998151185],[.34375,.990363227,.990363227],[.375,.976574709,.976574709],[.40625,.956945269,.956945269],[.4375,.931688648,.931688648],[.46875,.901068838,.901068838],[.5,.865395561,.865395561],[.53125,.820880546,.820880546],[.5625,.774508472,.774508472],[.59375,.726736146,.726736146],[.625,.678007945,.678007945],[.65625,.628751763,.628751763],[.6875,.579375448,.579375448],[.71875,.530263762,.530263762],[.75,.481775914,.481775914],[.78125,.434243684,.434243684],[.8125,.387970225,.387970225],[.84375,.343229596,.343229596],[.875,.300267182,.300267182],[.90625,.259301199,.259301199],[.9375,.220525627,.220525627],[.96875,.184115123,.184115123],[1,.150232812,.150232812]]}},blues:{name:"Blues",numColors:256,gamma:1,segmentedData:{red:[[0,.9686274528503418,.9686274528503418],[.125,.8705882430076599,.8705882430076599],[.25,.7764706015586853,.7764706015586853],[.375,.6196078658103943,.6196078658103943],[.5,.41960784792900085,.41960784792900085],[.625,.25882354378700256,.25882354378700256],[.75,.12941177189350128,.12941177189350128],[.875,.0313725508749485,.0313725508749485],[1,.0313725508749485,.0313725508749485]],green:[[0,.9843137264251709,.9843137264251709],[.125,.9215686321258545,.9215686321258545],[.25,.8588235378265381,.8588235378265381],[.375,.7921568751335144,.7921568751335144],[.5,.6823529601097107,.6823529601097107],[.625,.572549045085907,.572549045085907],[.75,.4431372582912445,.4431372582912445],[.875,.3176470696926117,.3176470696926117],[1,.1882352977991104,.1882352977991104]],blue:[[0,1,1],[.125,.9686274528503418,.9686274528503418],[.25,.9372549057006836,.9372549057006836],[.375,.8823529481887817,.8823529481887817],[.5,.8392156958580017,.8392156958580017],[.625,.7764706015586853,.7764706015586853],[.75,.7098039388656616,.7098039388656616],[.875,.6117647290229797,.6117647290229797],[1,.41960784792900085,.41960784792900085]]}}};function g(a,u){for(var c=0,v=a.length-1;c<=v;){var h=c+Math.floor((v-c)/2),E=a[h];if(E===u)return h;u<E?v=h-1:c=h+1}return c}function f(a,u,c){var v,h=[],E=[],M=[],O=[];for(c=null===c?1:c,v=0;v<u.length;v++){var P=u[v];h.push((a-1)*P[0]),E.push(P[1]),M.push(P[1])}var T=function s(a,u,c){for(var v=(u-a)/((c=null===c?100:c)-1),h=[];c-- >0;)h.push(a),a+=v;return h[h.length-1]=u,h}(0,1,a);for(v=0;v<a;v++)T[v]=(a-1)*Math.pow(T[v],c);var D=function i(a,u){var c,v=[],h=u.length;for(a.sort(function(E,M){return E-M}),c=0;c<h;c++)v[c]=g(a,u[c]);return v}(h,T);for(v=1;v<a-1;v++){var y=D[v];O[v]=(T[v]-h[y-1])/(h[y]-h[y-1])*(E[y]-M[y-1])+M[y-1]}return O[0]=M[0],O[a-1]=E[u.length-1],O}function o(){var a=[];return Object.keys(l).forEach(function(c){l.hasOwnProperty(c)&&a.push({id:c,name:l[c].name})}),a.sort(function(c,v){var h=c.name.toLowerCase(),E=v.name.toLowerCase();return h===E?0:h<E?-1:1}),a}function n(a,u){var c=l[a];return c||(c=l[a]=u||{name:"",colors:[]}),!c.colors&&c.segmentedData&&(c.colors=function m(a,u,c){var v,h=[],E=f(u=null===u?256:u,a.red,c=null===c?1:c),M=f(u,a.green,c),O=f(u,a.blue,c);for(v=0;v<u;v++){var P=Math.round(255*E[v]),T=Math.round(255*M[v]),D=Math.round(255*O[v]);h.push([P,T,D,255])}return h}(c.segmentedData,c.numColors,c.gamma)),{getId:function(){return a},getColorSchemeName:function(){return c.name},setColorSchemeName:function(h){c.name=h},getNumberOfColors:function(){return c.colors.length},setNumberOfColors:function(h){for(;c.colors.length<h;)c.colors.push(d);c.colors.length=h},getColor:function(h){return this.isValidIndex(h)?c.colors[h]:d},getColorRepeating:function(h){var E=c.colors.length;return this.getColor(h=E?h%E:0)},setColor:function(h,E){this.isValidIndex(h)&&(c.colors[h]=E)},addColor:function(h){c.colors.push(h)},insertColor:function(h,E){this.isValidIndex(h)&&c.colors.splice(h,1,E)},removeColor:function(h){this.isValidIndex(h)&&c.colors.splice(h,1)},clearColors:function(){c.colors=[]},buildLookupTable:function(h){if(h){var E=c.colors.length;h.setNumberOfTableValues(E);for(var M=0;M<E;M++)h.setTableValue(M,c.colors[M])}},createLookupTable:function(){var h=new r.default;return this.buildLookupTable(h),h},isValidIndex:function(h){return h>=0&&h<c.colors.length}}}},"./colors/index.js":
/*!*************************!*\
          !*** ./colors/index.js ***!
          \*************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./colormap.js */
"./colors/colormap.js"),d=e(
/*! ./lookupTable.js */
"./colors/lookupTable.js");t.default={getColormap:r.getColormap,getColormapsList:r.getColormapsList,LookupTable:d.default}},"./colors/lookupTable.js":
/*!*******************************!*\
          !*** ./colors/lookupTable.js ***!
          \*******************************/
/*! exports provided: default */function(b,t,e){"use strict";function d(n,a){for(var u=0;u<a.length;u++){var c=a[u];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(n,c.key,c)}}function f(n,a,u){if(n>1)throw new Error("HSVToRGB expects hue < 1");var c=[];if(0===a)return c[0]=u,c[1]=u,c[2]=u,c;var v=Math.floor(6*n),h=6*n-v,E=u*(1-a),M=u*(1-a*h),O=u*(1-a*(1-h));switch(v){case 0:case 6:c[0]=u,c[1]=O,c[2]=E;break;case 1:c[0]=M,c[1]=u,c[2]=E;break;case 2:c[0]=E,c[1]=u,c[2]=O;break;case 3:c[0]=E,c[1]=M,c[2]=u;break;case 4:c[0]=O,c[1]=E,c[2]=u;break;case 5:c[0]=u,c[1]=E,c[2]=M}return c}e.r(t);var o=function(){function n(){(function r(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")})(this,n),this.NumberOfColors=256,this.Ramp="linear",this.TableRange=[0,255],this.HueRange=[0,.66667],this.SaturationRange=[1,1],this.ValueRange=[1,1],this.AlphaRange=[1,1],this.NaNColor=[128,0,0,255],this.BelowRangeColor=[0,0,0,255],this.UseBelowRangeColor=!0,this.AboveRangeColor=[255,255,255,255],this.UseAboveRangeColor=!0,this.InputRange=[0,255],this.Table=[]}return function l(n,a,u){a&&d(n.prototype,a),u&&d(n,u)}(n,[{key:"setNumberOfTableValues",value:function(u){this.NumberOfColors=u}},{key:"setRamp",value:function(u){this.Ramp=u}},{key:"setTableRange",value:function(u,c){this.TableRange[0]=u,this.TableRange[1]=c}},{key:"setHueRange",value:function(u,c){this.HueRange[0]=u,this.HueRange[1]=c}},{key:"setSaturationRange",value:function(u,c){this.SaturationRange[0]=u,this.SaturationRange[1]=c}},{key:"setValueRange",value:function(u,c){this.ValueRange[0]=u,this.ValueRange[1]=c}},{key:"setRange",value:function(u,c){this.InputRange[0]=u,this.InputRange[1]=c}},{key:"setAlphaRange",value:function(u,c){this.AlphaRange[0]=u,this.AlphaRange[1]=c}},{key:"getColor",value:function(u){return this.mapValue(u)}},{key:"build",value:function(u){if(!(this.Table.length>1)||u){this.Table=[];var v,h,E,M,c=this.NumberOfColors-1;c?(v=(this.HueRange[1]-this.HueRange[0])/c,h=(this.SaturationRange[1]-this.SaturationRange[0])/c,E=(this.ValueRange[1]-this.ValueRange[0])/c,M=(this.AlphaRange[1]-this.AlphaRange[0])/c):v=h=E=M=0;for(var O=0;O<=c;O++){var y=this.AlphaRange[0]+O*M,j=f(this.HueRange[0]+O*v,this.SaturationRange[0]+O*h,this.ValueRange[0]+O*E),C=[];switch(this.Ramp){case"scurve":C[0]=Math.floor(127.5*(1+Math.cos((1-j[0])*Math.PI))),C[1]=Math.floor(127.5*(1+Math.cos((1-j[1])*Math.PI))),C[2]=Math.floor(127.5*(1+Math.cos((1-j[2])*Math.PI))),C[3]=Math.floor(255*y);break;case"linear":C[0]=Math.floor(255*j[0]+.5),C[1]=Math.floor(255*j[1]+.5),C[2]=Math.floor(255*j[2]+.5),C[3]=Math.floor(255*y+.5);break;case"sqrt":C[0]=Math.floor(255*Math.sqrt(j[0])+.5),C[1]=Math.floor(255*Math.sqrt(j[1])+.5),C[2]=Math.floor(255*Math.sqrt(j[2])+.5),C[3]=Math.floor(255*Math.sqrt(y)+.5);break;default:throw new Error("Invalid Ramp value (".concat(this.Ramp,")"))}this.Table.push(C)}this.buildSpecialColors()}}},{key:"buildSpecialColors",value:function(){var u=this.NumberOfColors,v=u+1,h=u+2;this.Table[u+0]=this.UseBelowRangeColor||0===u?this.BelowRangeColor:this.Table[0],this.Table[v]=this.UseAboveRangeColor||0===u?this.AboveRangeColor:this.Table[u-1],this.Table[h]=this.NaNColor}},{key:"mapValue",value:function(u){var c=this.getIndex(u);if(c<0)return this.NaNColor;if(0===c){if(this.UseBelowRangeColor&&u<this.TableRange[0])return this.BelowRangeColor}else if(c===this.NumberOfColors-1&&this.UseAboveRangeColor&&u>this.TableRange[1])return this.AboveRangeColor;return this.Table[c]}},{key:"getIndex",value:function(u){var c={Range:[]};if(c.MaxIndex=this.NumberOfColors-1,c.Shift=-this.TableRange[0],c.Scale=this.TableRange[1]<=this.TableRange[0]?Number.MAX_VALUE:c.MaxIndex/(this.TableRange[1]-this.TableRange[0]),c.Range[0]=this.TableRange[0],c.Range[1]=this.TableRange[1],isNaN(u))return-1;var v=function m(n,a){return Math.floor(n<a.Range[0]?a.MaxIndex+0+1.5:n>a.Range[1]?a.MaxIndex+1+1.5:(n+a.Shift)*a.Scale)}(u,c);return v===this.NumberOfColors+0?v=0:v===this.NumberOfColors+1&&(v=this.NumberOfColors-1),v}},{key:"setTableValue",value:function(u,c){if(5===arguments.length&&(c=Array.prototype.slice.call(arguments,1)),u<0)throw new Error("Can't set the table value for negative index (".concat(u,")"));u>=this.NumberOfColors&&new Error("Index ".concat(u," is greater than the number of colors ").concat(this.NumberOfColors)),this.Table[u]=c,(0===u||u===this.NumberOfColors-1)&&this.buildSpecialColors()}}]),n}();t.default=o},"./disable.js":
/*!********************!*\
          !*** ./disable.js ***!
          \********************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./enabledElements.js */
"./enabledElements.js"),d=e(
/*! ./triggerEvent.js */
"./triggerEvent.js"),l=e(
/*! ./events.js */
"./events.js");t.default=function(s){if(void 0===s)throw new Error("disable: element must not be undefined");for(var g=Object(r.getEnabledElements)(),i=0;i<g.length;i++)if(g[i].element===s){var f={element:s};Object(d.default)(s,l.default.ELEMENT_DISABLED,f),Object(d.default)(l.events,l.default.ELEMENT_DISABLED,f),g[i].element.removeChild(g[i].canvas),g[i].canvas=void 0,g.splice(i,1);break}}},"./displayImage.js":
/*!*************************!*\
          !*** ./displayImage.js ***!
          \*************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./enabledElements.js */
"./enabledElements.js"),d=e(
/*! ./internal/getDefaultViewport.js */
"./internal/getDefaultViewport.js"),l=e(
/*! ./updateImage.js */
"./updateImage.js"),s=e(
/*! ./internal/now.js */
"./internal/now.js"),g=e(
/*! ./layers.js */
"./layers.js"),i=e(
/*! ./triggerEvent.js */
"./triggerEvent.js"),f=e(
/*! ./events.js */
"./events.js");t.default=function(m,o,n){if(void 0===m)throw new Error("displayImage: parameter element must not be undefined");if(void 0===o)throw new Error("displayImage: parameter image must not be undefined");var v,a=Object(r.getEnabledElement)(m),u=a.image;if(a.image=o,a.layers&&a.layers.length&&Object(g.setLayerImage)(m,o),void 0===a.viewport&&(a.viewport=Object(d.default)(a.canvas,o)),n)for(var c in n)null!==n[c]&&(a.viewport[c]=n[c]);void 0!==a.lastImageTimeStamp&&(v=(1e3/(Object(s.default)()-a.lastImageTimeStamp)).toFixed()),a.lastImageTimeStamp=Object(s.default)();var E={viewport:a.viewport,element:a.element,image:a.image,oldImage:u,enabledElement:a,frameRate:v};Object(i.default)(a.element,f.default.NEW_IMAGE,E),Object(l.default)(m)}},"./draw.js":
/*!*****************!*\
          !*** ./draw.js ***!
          \*****************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./enabledElements.js */
"./enabledElements.js"),d=e(
/*! ./internal/drawImage.js */
"./internal/drawImage.js");t.default=function(l){var s=Object(r.getEnabledElement)(l);Object(d.default)(s)}},"./drawInvalidated.js":
/*!****************************!*\
          !*** ./drawInvalidated.js ***!
          \****************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./enabledElements.js */
"./enabledElements.js"),d=e(
/*! ./internal/drawImage.js */
"./internal/drawImage.js");t.default=function(){for(var l=Object(r.getEnabledElements)(),s=0;s<l.length;s++){var g=l[s];!0===g.invalid&&Object(d.default)(g,!0)}}},"./enable.js":
/*!*******************!*\
          !*** ./enable.js ***!
          \*******************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./enabledElements.js */
"./enabledElements.js"),d=e(
/*! ./resize.js */
"./resize.js"),l=e(
/*! ./internal/drawImageSync.js */
"./internal/drawImageSync.js"),s=e(
/*! ./internal/requestAnimationFrame.js */
"./internal/requestAnimationFrame.js"),g=e(
/*! ./internal/tryEnableWebgl.js */
"./internal/tryEnableWebgl.js"),i=e(
/*! ./triggerEvent.js */
"./triggerEvent.js"),f=e(
/*! ./generateUUID.js */
"./generateUUID.js"),m=e(
/*! ./events.js */
"./events.js"),o=e(
/*! ./internal/getCanvas.js */
"./internal/getCanvas.js");t.default=function(a,u){if(void 0===a)throw new Error("enable: parameter element cannot be undefined");u&&u.renderer&&"webgl"===u.renderer.toLowerCase()&&Object(g.default)(u);var v={element:a,canvas:Object(o.default)(a),image:void 0,invalid:!1,needsRedraw:!0,options:Object.assign({},u),layers:[],data:{},renderingTools:{},uuid:Object(f.default)()};Object(r.addEnabledElement)(v),Object(i.default)(m.events,m.default.ELEMENT_ENABLED,v),Object(d.default)(a,!0),function h(E){if(void 0!==v.canvas){var M={enabledElement:v,timestamp:E};Object(i.default)(v.element,m.default.PRE_RENDER,M),v.needsRedraw&&function n(a){return void 0!==a.image||a.layers.length>0}(v)&&Object(l.default)(v,v.invalid),Object(s.default)(h)}}()}},"./enabledElementData.js":
/*!*******************************!*\
          !*** ./enabledElementData.js ***!
          \*******************************/
/*! exports provided: getElementData, removeElementData */function(b,t,e){"use strict";e.r(t),e.d(t,"getElementData",function(){return d}),e.d(t,"removeElementData",function(){return l});var r=e(
/*! ./enabledElements.js */
"./enabledElements.js");function d(s,g){var i=Object(r.getEnabledElement)(s);return!1===i.data.hasOwnProperty(g)&&(i.data[g]={}),i.data[g]}function l(s,g){delete Object(r.getEnabledElement)(s).data[g]}},"./enabledElements.js":
/*!****************************!*\
          !*** ./enabledElements.js ***!
          \****************************/
/*! exports provided: getEnabledElement, addEnabledElement, getEnabledElementsByImageId, getEnabledElements */function(b,t,e){"use strict";e.r(t),e.d(t,"getEnabledElement",function(){return d}),e.d(t,"addEnabledElement",function(){return l}),e.d(t,"getEnabledElementsByImageId",function(){return s}),e.d(t,"getEnabledElements",function(){return g});var r=[];function d(i){if(void 0===i)throw new Error("getEnabledElement: parameter element must not be undefined");for(var f=0;f<r.length;f++)if(r[f].element===i)return r[f];throw new Error("element not enabled")}function l(i){if(void 0===i)throw new Error("getEnabledElement: enabledElement element must not be undefined");r.push(i)}function s(i){var f=[];return r.forEach(function(m){m.image&&m.image.imageId===i&&f.push(m)}),f}function g(){return r}},"./events.js":
/*!*******************!*\
          !*** ./events.js ***!
          \*******************/
/*! exports provided: default, events */function(b,t,e){"use strict";function d(f,m){for(var o=0;o<m.length;o++){var n=m[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(f,n.key,n)}}e.r(t),e.d(t,"events",function(){return i}),t.default={NEW_IMAGE:"cornerstonenewimage",INVALIDATED:"cornerstoneinvalidated",PRE_RENDER:"cornerstoneprerender",IMAGE_CACHE_MAXIMUM_SIZE_CHANGED:"cornerstoneimagecachemaximumsizechanged",IMAGE_CACHE_PROMISE_REMOVED:"cornerstoneimagecachepromiseremoved",IMAGE_CACHE_FULL:"cornerstoneimagecachefull",IMAGE_CACHE_CHANGED:"cornerstoneimagecachechanged",WEBGL_TEXTURE_REMOVED:"cornerstonewebgltextureremoved",WEBGL_TEXTURE_CACHE_FULL:"cornerstonewebgltexturecachefull",IMAGE_LOADED:"cornerstoneimageloaded",IMAGE_LOAD_PROGRESS:"cornerstoneimageloadprogress",IMAGE_LOAD_FAILED:"cornerstoneimageloadfailed",ELEMENT_RESIZED:"cornerstoneelementresized",IMAGE_RENDERED:"cornerstoneimagerendered",LAYER_ADDED:"cornerstonelayeradded",LAYER_REMOVED:"cornerstonelayerremoved",ACTIVE_LAYER_CHANGED:"cornerstoneactivelayerchanged",ELEMENT_DISABLED:"cornerstoneelementdisabled",ELEMENT_ENABLED:"cornerstoneelementenabled"};var i=new(function(){function f(){(function r(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")})(this,f),this.listeners={},this.namespaces={}}return function l(f,m,o){m&&d(f.prototype,m),o&&d(f,o)}(f,[{key:"addEventNamespaceListener",value:function(o,n){o.indexOf(".")<=0||(this.namespaces[o]=n,this.addEventListener(o.split(".")[0],n))}},{key:"removeEventNamespaceListener",value:function(o){o.indexOf(".")<=0||!this.namespaces[o]||(this.removeEventListener(o.split(".")[0],this.namespaces[o]),delete this.namespaces[o])}},{key:"addEventListener",value:function(o,n){o.indexOf(".")>0?this.addEventNamespaceListener(o,n):(o in this.listeners||(this.listeners[o]=[]),this.listeners[o].push(n))}},{key:"removeEventListener",value:function(o,n){if(o.indexOf(".")>0)this.removeEventNamespaceListener(o);else if(o in this.listeners)for(var a=this.listeners[o],u=0,c=a.length;u<c;u++)if(a[u]===n)return void a.splice(u,1)}},{key:"dispatchEvent",value:function(o){if(!(o.type in this.listeners))return!0;for(var n=this.listeners[o.type].slice(),a=0,u=n.length;a<u;a++)n[a].call(this,o);return!o.defaultPrevented}}]),f}())},"./falseColorMapping.js":
/*!******************************!*\
          !*** ./falseColorMapping.js ***!
          \******************************/
/*! exports provided: convertImageToFalseColorImage, convertToFalseColorImage, restoreImage */function(b,t,e){"use strict";e.r(t),e.d(t,"convertImageToFalseColorImage",function(){return m}),e.d(t,"convertToFalseColorImage",function(){return o}),e.d(t,"restoreImage",function(){return f});var r=e(
/*! ./enabledElements.js */
"./enabledElements.js"),d=e(
/*! ./pixelDataToFalseColorData.js */
"./pixelDataToFalseColorData.js"),l=e(
/*! ./colors/colormap.js */
"./colors/colormap.js");function f(n){return!(!n.restore||"function"!=typeof n.restore||(n.restore(),0))}function m(n,a){if(n.color&&!n.falseColor)throw new Error("Color transforms are not implemented yet");a=function i(n){return n&&"string"==typeof n&&(n=Object(l.getColormap)(n)),n}(a);var u=a.getId();if(n.colormapId===u)return!1;if(f(n),u){var c=n.minPixelValue||0,v=n.maxPixelValue||255;n.restore=function g(n){if(n.restore)return n.restore;var a=n.color,u=n.rgba,c=n.cachedLut,v=n.slope,h=n.windowWidth,E=n.windowCenter,M=n.minPixelValue,O=n.maxPixelValue;return function(){if(n.color=a,n.rgba=u,n.cachedLut=c,n.slope=v,n.windowWidth=h,n.windowCenter=E,n.minPixelValue=M,n.maxPixelValue=O,n.origPixelData){var P=n.origPixelData;n.getPixelData=function(){return P}}n.origPixelData=void 0,n.colormapId=void 0,n.falseColor=void 0}}(n);var h=a.createLookupTable();h.setTableRange(c,v),Object(d.default)(n,h);var E=function s(n){for(var v,a=Number.MAX_VALUE,u=Number.MIN_VALUE,c=n.length,h=0;h<c;h++)a=a<(v=n[h])?a:v,u=u>v?u:v;return{minPixelValue:a,maxPixelValue:u}}(n.getPixelData());n.minPixelValue=E.minPixelValue,n.maxPixelValue=E.maxPixelValue,n.windowWidth=255,n.windowCenter=128,n.colormapId=u}return!0}function o(n,a){return m(Object(r.getEnabledElement)(n).image,a)}},"./fitToWindow.js":
/*!************************!*\
          !*** ./fitToWindow.js ***!
          \************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./enabledElements.js */
"./enabledElements.js"),d=e(
/*! ./updateImage.js */
"./updateImage.js"),l=e(
/*! ./internal/getImageFitScale.js */
"./internal/getImageFitScale.js");t.default=function(s){var g=Object(r.getEnabledElement)(s),i=g.image;g.viewport.scale=Object(l.default)(g.canvas,i,g.viewport.rotation).scaleFactor,g.viewport.translation.x=0,g.viewport.translation.y=0,Object(d.default)(s)}},"./generateUUID.js":
/*!*************************!*\
          !*** ./generateUUID.js ***!
          \*************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),t.default=function(){var r=(new Date).getTime();return typeof performance<"u"&&"function"==typeof performance.now&&(r+=performance.now()),"x.x.x.x.x.x.xxxx.xxx.x.x.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".replace(/[xy]/g,function(d){var l=(r+16*Math.random())%16|0;return r=Math.floor(r/16),("x"===d?l:3&l|8).toString(16)})}},"./getDefaultViewportForImage.js":
/*!***************************************!*\
          !*** ./getDefaultViewportForImage.js ***!
          \***************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./enabledElements.js */
"./enabledElements.js"),d=e(
/*! ./internal/getDefaultViewport.js */
"./internal/getDefaultViewport.js");t.default=function(l,s){var g=Object(r.getEnabledElement)(l);return Object(d.default)(g.canvas,s)}},"./getImage.js":
/*!*********************!*\
          !*** ./getImage.js ***!
          \*********************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./enabledElements.js */
"./enabledElements.js");t.default=function(d){return Object(r.getEnabledElement)(d).image}},"./getPixels.js":
/*!**********************!*\
          !*** ./getPixels.js ***!
          \**********************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./enabledElements.js */
"./enabledElements.js"),d=e(
/*! ./getStoredPixels.js */
"./getStoredPixels.js"),l=e(
/*! ./internal/getModalityLUT.js */
"./internal/getModalityLUT.js");t.default=function(s,g,i,f,m){var o=Object(d.default)(s,g,i,f,m),n=Object(r.getEnabledElement)(s),a=Object(l.default)(n.image.slope,n.image.intercept,n.viewport.modalityLUT);return o.map(a)}},"./getStoredPixels.js":
/*!****************************!*\
          !*** ./getStoredPixels.js ***!
          \****************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./enabledElements.js */
"./enabledElements.js");t.default=function(d,l,s,g,i){if(void 0===d)throw new Error("getStoredPixels: parameter element must not be undefined");l=Math.round(l),s=Math.round(s);for(var f=Object(r.getEnabledElement)(d),m=[],o=0,n=f.image.getPixelData(),a=0;a<i;a++)for(var u=0;u<g;u++)m[o++]=n[(a+s)*f.image.columns+(u+l)];return m}},"./getViewport.js":
/*!************************!*\
          !*** ./getViewport.js ***!
          \************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./enabledElements.js */
"./enabledElements.js");t.default=function(d){var s=Object(r.getEnabledElement)(d).viewport;if(void 0!==s)return Object.assign({},s)}},"./imageCache.js":
/*!***********************!*\
          !*** ./imageCache.js ***!
          \***********************/
/*! exports provided: cachedImages, setMaximumSizeBytes, putImageLoadObject, getImageLoadObject, removeImageLoadObject, getCacheInfo, purgeCache, changeImageIdCacheSize, default */function(b,t,e){"use strict";e.r(t),e.d(t,"cachedImages",function(){return i}),e.d(t,"setMaximumSizeBytes",function(){return f}),e.d(t,"putImageLoadObject",function(){return o}),e.d(t,"getImageLoadObject",function(){return n}),e.d(t,"removeImageLoadObject",function(){return a}),e.d(t,"getCacheInfo",function(){return u}),e.d(t,"purgeCache",function(){return v}),e.d(t,"changeImageIdCacheSize",function(){return h});var r=e(
/*! ./events.js */
"./events.js"),d=e(
/*! ./triggerEvent.js */
"./triggerEvent.js"),l=1073741824,s=0,g={},i=[];function f(E){if(void 0===E)throw new Error("setMaximumSizeBytes: parameter numBytes must not be undefined");if(void 0===E.toFixed)throw new Error("setMaximumSizeBytes: parameter numBytes must be a number");l=E,Object(d.default)(r.events,r.default.IMAGE_CACHE_MAXIMUM_SIZE_CHANGED),m()}function m(){if(!(s<=l)){for(i.sort(function E(T,D){return T.timeStamp>D.timeStamp?-1:T.timeStamp<D.timeStamp?1:0});s>l;){var O=i[i.length-1].imageId;a(O),Object(d.default)(r.events,r.default.IMAGE_CACHE_PROMISE_REMOVED,{imageId:O})}var P=u();Object(d.default)(r.events,r.default.IMAGE_CACHE_FULL,P)}}function o(E,M){if(void 0===E)throw new Error("putImageLoadObject: imageId must not be undefined");if(void 0===M.promise)throw new Error("putImageLoadObject: imageLoadObject.promise must not be undefined");if(!0===g.hasOwnProperty(E))throw new Error("putImageLoadObject: imageId already in cache");if(M.cancelFn&&"function"!=typeof M.cancelFn)throw new Error("putImageLoadObject: imageLoadObject.cancelFn must be a function");var O={loaded:!1,imageId:E,sharedCacheKey:void 0,imageLoadObject:M,timeStamp:Date.now(),sizeInBytes:0};g[E]=O,i.push(O),M.promise.then(function(P){if(-1!==i.indexOf(O)){if(O.loaded=!0,O.image=P,void 0===P.sizeInBytes)throw new Error("putImageLoadObject: image.sizeInBytes must not be undefined");if(void 0===P.sizeInBytes.toFixed)throw new Error("putImageLoadObject: image.sizeInBytes is not a number");O.sizeInBytes=P.sizeInBytes,s+=O.sizeInBytes;var T={action:"addImage",image:O};Object(d.default)(r.events,r.default.IMAGE_CACHE_CHANGED,T),O.sharedCacheKey=P.sharedCacheKey,m()}},function(){i.splice(i.indexOf(g[E]),1),delete g[E]})}function n(E){if(void 0===E)throw new Error("getImageLoadObject: imageId must not be undefined");var M=g[E];if(void 0!==M)return M.timeStamp=Date.now(),M.imageLoadObject}function a(E){if(void 0===E)throw new Error("removeImageLoadObject: imageId must not be undefined");var M=g[E];if(void 0===M)throw new Error("removeImageLoadObject: imageId was not present in imageCache");i.splice(i.indexOf(M),1),s-=M.sizeInBytes;var O={action:"deleteImage",image:M};Object(d.default)(r.events,r.default.IMAGE_CACHE_CHANGED,O),function c(E){E.promise.then(function(){E.decache&&E.decache()},function(){E.decache&&E.decache()})}(M.imageLoadObject),delete g[E]}function u(){return{maximumSizeInBytes:l,cacheSizeInBytes:s,numberOfImagesCached:i.length}}function v(){for(;i.length>0;)a(i[0].imageId)}function h(E,M){var O=g[E];O&&O.imageLoadObject.promise.then(function(P){var T=M-P.sizeInBytes;P.sizeInBytes=M,O.sizeInBytes=M,s+=T;var D={action:"changeImageSize",image:P};Object(d.default)(r.events,r.default.IMAGE_CACHE_CHANGED,D)})}t.default={imageCache:g,cachedImages:i,setMaximumSizeBytes:f,putImageLoadObject:o,getImageLoadObject:n,removeImageLoadObject:a,getCacheInfo:u,purgeCache:v,changeImageIdCacheSize:h}},"./imageLoader.js":
/*!************************!*\
          !*** ./imageLoader.js ***!
          \************************/
/*! exports provided: loadImage, loadAndCacheImage, registerImageLoader, registerUnknownImageLoader */function(b,t,e){"use strict";e.r(t),e.d(t,"loadImage",function(){return f}),e.d(t,"loadAndCacheImage",function(){return m}),e.d(t,"registerImageLoader",function(){return o}),e.d(t,"registerUnknownImageLoader",function(){return n});var g,r=e(
/*! ./imageCache.js */
"./imageCache.js"),d=e(
/*! ./events.js */
"./events.js"),l=e(
/*! ./triggerEvent.js */
"./triggerEvent.js"),s={};function i(a,u){var c=a.indexOf(":"),v=a.substring(0,c),h=s[v];if(null==h){if(void 0!==g)return g(a);throw new Error("loadImageFromImageLoader: no image loader for imageId")}var E=h(a,u);return E.promise.then(function(M){Object(l.default)(d.events,d.default.IMAGE_LOADED,{image:M})},function(M){var O={imageId:a,error:M};Object(l.default)(d.events,d.default.IMAGE_LOAD_FAILED,O)}),E}function f(a,u){if(void 0===a)throw new Error("loadImage: parameter imageId must not be undefined");var c=Object(r.getImageLoadObject)(a);return void 0!==c?c.promise:i(a,u).promise}function m(a,u){if(void 0===a)throw new Error("loadAndCacheImage: parameter imageId must not be undefined");var c=Object(r.getImageLoadObject)(a);return void 0!==c||(c=i(a,u),Object(r.putImageLoadObject)(a,c)),c.promise}function o(a,u){s[a]=u}function n(a){var u=g;return g=a,u}},"./index.js":
/*!******************!*\
          !*** ./index.js ***!
          \******************/
/*! exports provided: drawImage, generateLut, getDefaultViewport, setDefaultViewport, requestAnimationFrame, storedPixelDataToCanvasImageData, storedColorPixelDataToCanvasImageData, storedPixelDataToCanvasImageDataColorLUT, storedPixelDataToCanvasImageDataPseudocolorLUT, internal, renderLabelMapImage, renderPseudoColorImage, renderColorImage, renderGrayscaleImage, renderWebImage, renderToCanvas, canvasToPixel, disable, displayImage, draw, drawInvalidated, enable, getElementData, removeElementData, getEnabledElement, addEnabledElement, getEnabledElementsByImageId, getEnabledElements, addLayer, removeLayer, getLayer, getLayers, getVisibleLayers, setActiveLayer, getActiveLayer, purgeLayers, setLayerImage, fitToWindow, getDefaultViewportForImage, getDisplayedArea, getImage, getPixels, getStoredPixels, getViewport, loadImage, loadAndCacheImage, registerImageLoader, registerUnknownImageLoader, invalidate, invalidateImageId, pageToPixel, pixelToCanvas, reset, resize, setToPixelCoordinateSystem, setViewport, updateImage, pixelDataToFalseColorData, rendering, imageCache, metaData, webGL, colors, convertImageToFalseColorImage, convertToFalseColorImage, restoreImage, EVENTS, events, triggerEvent, imageLoadPoolManager, imageRetrievalPoolManager, RequestPoolManager, default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./events.js */
"./events.js");e.d(t,"EVENTS",function(){return r.default}),e.d(t,"events",function(){return r.events});var d=e(
/*! ./enabledElements.js */
"./enabledElements.js");e.d(t,"getEnabledElement",function(){return d.getEnabledElement}),e.d(t,"addEnabledElement",function(){return d.addEnabledElement}),e.d(t,"getEnabledElementsByImageId",function(){return d.getEnabledElementsByImageId}),e.d(t,"getEnabledElements",function(){return d.getEnabledElements});var l=e(
/*! ./layers.js */
"./layers.js");e.d(t,"addLayer",function(){return l.addLayer}),e.d(t,"removeLayer",function(){return l.removeLayer}),e.d(t,"getLayer",function(){return l.getLayer}),e.d(t,"getLayers",function(){return l.getLayers}),e.d(t,"getVisibleLayers",function(){return l.getVisibleLayers}),e.d(t,"setActiveLayer",function(){return l.setActiveLayer}),e.d(t,"getActiveLayer",function(){return l.getActiveLayer}),e.d(t,"purgeLayers",function(){return l.purgeLayers}),e.d(t,"setLayerImage",function(){return l.setLayerImage});var s=e(
/*! ./falseColorMapping.js */
"./falseColorMapping.js");e.d(t,"convertImageToFalseColorImage",function(){return s.convertImageToFalseColorImage}),e.d(t,"convertToFalseColorImage",function(){return s.convertToFalseColorImage}),e.d(t,"restoreImage",function(){return s.restoreImage});var g=e(
/*! ./enabledElementData.js */
"./enabledElementData.js");e.d(t,"getElementData",function(){return g.getElementData}),e.d(t,"removeElementData",function(){return g.removeElementData});var i=e(
/*! ./imageLoader.js */
"./imageLoader.js");e.d(t,"loadImage",function(){return i.loadImage}),e.d(t,"loadAndCacheImage",function(){return i.loadAndCacheImage}),e.d(t,"registerImageLoader",function(){return i.registerImageLoader}),e.d(t,"registerUnknownImageLoader",function(){return i.registerUnknownImageLoader});var f=e(
/*! ./requestPool/imageLoadPoolManager.ts */
"./requestPool/imageLoadPoolManager.ts");e.d(t,"imageLoadPoolManager",function(){return f.default});var m=e(
/*! ./requestPool/imageRetrievalPoolManager.ts */
"./requestPool/imageRetrievalPoolManager.ts");e.d(t,"imageRetrievalPoolManager",function(){return m.default});var o=e(
/*! ./requestPool/RequestPoolManager.ts */
"./requestPool/RequestPoolManager.ts");e.d(t,"RequestPoolManager",function(){return o.RequestPoolManager});var n=e(
/*! ./canvasToPixel.js */
"./canvasToPixel.js");e.d(t,"canvasToPixel",function(){return n.default});var a=e(
/*! ./colors/index.js */
"./colors/index.js");e.d(t,"colors",function(){return a.default});var u=e(
/*! ./disable.js */
"./disable.js");e.d(t,"disable",function(){return u.default});var c=e(
/*! ./displayImage.js */
"./displayImage.js");e.d(t,"displayImage",function(){return c.default});var v=e(
/*! ./draw.js */
"./draw.js");e.d(t,"draw",function(){return v.default});var h=e(
/*! ./internal/drawImage.js */
"./internal/drawImage.js");e.d(t,"drawImage",function(){return h.default});var E=e(
/*! ./drawInvalidated.js */
"./drawInvalidated.js");e.d(t,"drawInvalidated",function(){return E.default});var M=e(
/*! ./enable.js */
"./enable.js");e.d(t,"enable",function(){return M.default});var O=e(
/*! ./fitToWindow.js */
"./fitToWindow.js");e.d(t,"fitToWindow",function(){return O.default});var P=e(
/*! ./internal/generateLut.js */
"./internal/generateLut.js");e.d(t,"generateLut",function(){return P.default});var T=e(
/*! ./internal/getDefaultViewport.js */
"./internal/getDefaultViewport.js");e.d(t,"getDefaultViewport",function(){return T.default});var D=e(
/*! ./getDefaultViewportForImage.js */
"./getDefaultViewportForImage.js");e.d(t,"getDefaultViewportForImage",function(){return D.default});var y=e(
/*! ./internal/getDisplayedArea.js */
"./internal/getDisplayedArea.js");e.d(t,"getDisplayedArea",function(){return y.default});var j=e(
/*! ./getImage.js */
"./getImage.js");e.d(t,"getImage",function(){return j.default});var C=e(
/*! ./getPixels.js */
"./getPixels.js");e.d(t,"getPixels",function(){return C.default});var I=e(
/*! ./getStoredPixels.js */
"./getStoredPixels.js");e.d(t,"getStoredPixels",function(){return I.default});var B=e(
/*! ./getViewport.js */
"./getViewport.js");e.d(t,"getViewport",function(){return B.default});var S=e(
/*! ./imageCache.js */
"./imageCache.js");e.d(t,"imageCache",function(){return S.default});var K=e(
/*! ./internal/index.js */
"./internal/index.js");e.d(t,"internal",function(){return K.default});var H=e(
/*! ./invalidate.js */
"./invalidate.js");e.d(t,"invalidate",function(){return H.default});var W=e(
/*! ./invalidateImageId.js */
"./invalidateImageId.js");e.d(t,"invalidateImageId",function(){return W.default});var L=e(
/*! ./metaData.js */
"./metaData.js");e.d(t,"metaData",function(){return L.default});var x=e(
/*! ./pageToPixel.js */
"./pageToPixel.js");e.d(t,"pageToPixel",function(){return x.default});var _=e(
/*! ./pixelDataToFalseColorData.js */
"./pixelDataToFalseColorData.js");e.d(t,"pixelDataToFalseColorData",function(){return _.default});var R=e(
/*! ./pixelToCanvas.js */
"./pixelToCanvas.js");e.d(t,"pixelToCanvas",function(){return R.default});var A=e(
/*! ./rendering/renderColorImage.js */
"./rendering/renderColorImage.js");e.d(t,"renderColorImage",function(){return A.renderColorImage});var p=e(
/*! ./rendering/renderGrayscaleImage.js */
"./rendering/renderGrayscaleImage.js");e.d(t,"renderGrayscaleImage",function(){return p.renderGrayscaleImage});var U=e(
/*! ./rendering/renderLabelMapImage.js */
"./rendering/renderLabelMapImage.js");e.d(t,"renderLabelMapImage",function(){return U.renderLabelMapImage});var F=e(
/*! ./rendering/renderPseudoColorImage.js */
"./rendering/renderPseudoColorImage.js");e.d(t,"renderPseudoColorImage",function(){return F.renderPseudoColorImage});var N=e(
/*! ./rendering/renderToCanvas.js */
"./rendering/renderToCanvas.js");e.d(t,"renderToCanvas",function(){return N.default});var V=e(
/*! ./rendering/renderWebImage.js */
"./rendering/renderWebImage.js");e.d(t,"renderWebImage",function(){return V.renderWebImage});var Y=e(
/*! ./rendering/index.js */
"./rendering/index.js");e.d(t,"rendering",function(){return Y.default});var J=e(
/*! ./internal/requestAnimationFrame.js */
"./internal/requestAnimationFrame.js");e.d(t,"requestAnimationFrame",function(){return J.default});var ee=e(
/*! ./reset.js */
"./reset.js");e.d(t,"reset",function(){return ee.default});var q=e(
/*! ./resize.js */
"./resize.js");e.d(t,"resize",function(){return q.default});var le=e(
/*! ./internal/setDefaultViewport.js */
"./internal/setDefaultViewport.js");e.d(t,"setDefaultViewport",function(){return le.default});var Q=e(
/*! ./setToPixelCoordinateSystem.js */
"./setToPixelCoordinateSystem.js");e.d(t,"setToPixelCoordinateSystem",function(){return Q.default});var X=e(
/*! ./setViewport.js */
"./setViewport.js");e.d(t,"setViewport",function(){return X.default});var w=e(
/*! ./internal/storedColorPixelDataToCanvasImageData.js */
"./internal/storedColorPixelDataToCanvasImageData.js");e.d(t,"storedColorPixelDataToCanvasImageData",function(){return w.default});var $=e(
/*! ./internal/storedPixelDataToCanvasImageData.js */
"./internal/storedPixelDataToCanvasImageData.js");e.d(t,"storedPixelDataToCanvasImageData",function(){return $.default});var k=e(
/*! ./internal/storedPixelDataToCanvasImageDataColorLUT.js */
"./internal/storedPixelDataToCanvasImageDataColorLUT.js");e.d(t,"storedPixelDataToCanvasImageDataColorLUT",function(){return k.default});var ae=e(
/*! ./internal/storedPixelDataToCanvasImageDataPseudocolorLUT.js */
"./internal/storedPixelDataToCanvasImageDataPseudocolorLUT.js");e.d(t,"storedPixelDataToCanvasImageDataPseudocolorLUT",function(){return ae.default});var te=e(
/*! ./triggerEvent.js */
"./triggerEvent.js");e.d(t,"triggerEvent",function(){return te.default});var oe=e(
/*! ./updateImage.js */
"./updateImage.js");e.d(t,"updateImage",function(){return oe.default});var se=e(
/*! ./webgl/index.js */
"./webgl/index.js");e.d(t,"webGL",function(){return se.default}),t.default={drawImage:h.default,generateLut:P.default,getDefaultViewport:T.default,requestAnimationFrame:J.default,storedPixelDataToCanvasImageData:$.default,storedColorPixelDataToCanvasImageData:w.default,storedPixelDataToCanvasImageDataColorLUT:k.default,storedPixelDataToCanvasImageDataPseudocolorLUT:ae.default,internal:K.default,renderLabelMapImage:U.renderLabelMapImage,renderPseudoColorImage:F.renderPseudoColorImage,renderColorImage:A.renderColorImage,renderGrayscaleImage:p.renderGrayscaleImage,renderWebImage:V.renderWebImage,renderToCanvas:N.default,canvasToPixel:n.default,disable:u.default,displayImage:c.default,draw:v.default,drawInvalidated:E.default,enable:M.default,getElementData:g.getElementData,removeElementData:g.removeElementData,getEnabledElement:d.getEnabledElement,addEnabledElement:d.addEnabledElement,getEnabledElementsByImageId:d.getEnabledElementsByImageId,getEnabledElements:d.getEnabledElements,addLayer:l.addLayer,removeLayer:l.removeLayer,getLayer:l.getLayer,getLayers:l.getLayers,getVisibleLayers:l.getVisibleLayers,setActiveLayer:l.setActiveLayer,getActiveLayer:l.getActiveLayer,purgeLayers:l.purgeLayers,setLayerImage:l.setLayerImage,fitToWindow:O.default,getDefaultViewportForImage:D.default,getDisplayedArea:y.default,setDefaultViewport:le.default,getImage:j.default,getPixels:C.default,getStoredPixels:I.default,getViewport:B.default,loadImage:i.loadImage,loadAndCacheImage:i.loadAndCacheImage,registerImageLoader:i.registerImageLoader,registerUnknownImageLoader:i.registerUnknownImageLoader,invalidate:H.default,invalidateImageId:W.default,pageToPixel:x.default,pixelToCanvas:R.default,reset:ee.default,resize:q.default,setToPixelCoordinateSystem:Q.default,setViewport:X.default,updateImage:oe.default,pixelDataToFalseColorData:_.default,rendering:Y.default,imageCache:S.default,metaData:L.default,webGL:se.default,colors:a.default,convertImageToFalseColorImage:s.convertImageToFalseColorImage,convertToFalseColorImage:s.convertToFalseColorImage,restoreImage:s.restoreImage,EVENTS:r.default,events:r.events,triggerEvent:te.default,imageLoadPoolManager:f.default,imageRetrievalPoolManager:m.default,RequestPoolManager:o.RequestPoolManager}},"./internal/calculateTransform.js":
/*!****************************************!*\
          !*** ./internal/calculateTransform.js ***!
          \****************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./transform.js */
"./internal/transform.js"),d=e(
/*! ./getDisplayedArea.js */
"./internal/getDisplayedArea.js");t.default=function(l,s){var g=new r.Transform;g.translate(l.canvas.width/2,l.canvas.height/2);var i=l.viewport.rotation;0!==i&&g.rotate(i*Math.PI/180);var f=l.viewport.scale,m=l.viewport.scale,o=Object(d.default)(l.image,l.viewport),n=o.tlhc.x-1,a=o.tlhc.y-1,u=o.brhc.x-n,c=o.brhc.y-a;return"NONE"===o.presentationSizeMode?l.image.rowPixelSpacing<l.image.columnPixelSpacing?f*=l.image.columnPixelSpacing/l.image.rowPixelSpacing:l.image.columnPixelSpacing<l.image.rowPixelSpacing&&(m*=l.image.rowPixelSpacing/l.image.columnPixelSpacing):(f=o.columnPixelSpacing,m=o.rowPixelSpacing,"SCALE TO FIT"===o.presentationSizeMode&&(f=m=Math.min(l.canvas.width/(u*f),l.canvas.height/(c*m)),o.rowPixelSpacing<o.columnPixelSpacing?f*=o.columnPixelSpacing/o.rowPixelSpacing:o.columnPixelSpacing<o.rowPixelSpacing&&(m*=o.rowPixelSpacing/o.columnPixelSpacing))),g.scale(f,m),0!==i&&g.rotate(-i*Math.PI/180),g.translate(l.viewport.translation.x,l.viewport.translation.y),0!==i&&g.rotate(i*Math.PI/180),void 0!==s&&g.scale(s,s),l.viewport.hflip&&g.scale(-1,1),l.viewport.vflip&&g.scale(1,-1),g.translate(-u/2,-c/2),g.translate(-n,-a),g}},"./internal/computeAutoVoi.js":
/*!************************************!*\
          !*** ./internal/computeAutoVoi.js ***!
          \************************************/
/*! exports provided: default */function(b,t,e){"use strict";function r(l,s){if(!function d(l){return l.voiLUT&&l.voiLUT.lut&&l.voiLUT.lut.length>0||void 0!==l.voi.windowWidth&&void 0!==l.voi.windowCenter}(l)){var g=s.maxPixelValue*s.slope+s.intercept,i=s.minPixelValue*s.slope+s.intercept,f=g-i,m=(g+i)/2;void 0===l.voi?l.voi={windowWidth:f,windowCenter:m}:(l.voi.windowWidth=f,l.voi.windowCenter=m)}}e.r(t),e.d(t,"default",function(){return r})},"./internal/createViewport.js":
/*!************************************!*\
          !*** ./internal/createViewport.js ***!
          \************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./setDefaultViewport.js */
"./internal/setDefaultViewport.js");t.default=function(){return Object.assign({},{scale:1,translation:{x:0,y:0},voi:{windowWidth:void 0,windowCenter:void 0},invert:!1,pixelReplication:!1,rotation:0,hflip:!1,vflip:!1,modalityLUT:void 0,voiLUT:void 0,colormap:void 0,labelmap:!1,displayedArea:void 0},r.state.viewport)}},"./internal/drawCompositeImage.js":
/*!****************************************!*\
          !*** ./internal/drawCompositeImage.js ***!
          \****************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../layers.js */
"./layers.js"),d=e(
/*! ../rendering/renderGrayscaleImage.js */
"./rendering/renderGrayscaleImage.js"),l=e(
/*! ../rendering/renderColorImage.js */
"./rendering/renderColorImage.js"),s=e(
/*! ../rendering/renderPseudoColorImage.js */
"./rendering/renderPseudoColorImage.js"),g=e(
/*! ../rendering/renderLabelMapImage.js */
"./rendering/renderLabelMapImage.js"),i=e(
/*! ../setToPixelCoordinateSystem.js */
"./setToPixelCoordinateSystem.js"),f=e(
/*! ./getDisplayedArea.js */
"./internal/getDisplayedArea.js");function o(u){var c=u.syncProps||{};c.originalScale=u.viewport.scale,u.syncProps=c}t.default=function(u,c){var v=u.element,h=Object(r.getLayers)(v),E=Object(r.getActiveLayer)(v),M=Object(r.getVisibleLayers)(v),O=!u.lastSyncViewportsState&&u.syncViewports;u.lastSyncViewportsState=u.syncViewports,O&&h.forEach(function(T){T.viewport&&o(T)}),!0===u.syncViewports&&function n(u,c){u.forEach(function(v){if(v!==c&&v.viewport&&c.viewport){v.syncProps||o(v);var h=function m(u,c){return u.syncProps||o(u),c.syncProps||o(c),c.syncProps.originalScale/u.syncProps.originalScale}(c,v);v.viewport.scale=c.viewport.scale*h,v.viewport.rotation=c.viewport.rotation,v.viewport.translation={x:c.viewport.translation.x/h,y:c.viewport.translation.y/h},v.viewport.hflip=c.viewport.hflip,v.viewport.vflip=c.viewport.vflip}})}(M,E);var P=u.canvas.getContext("2d",{desynchronized:!0});P.setTransform(1,0,0,1,0,0),P.fillStyle="black",P.fillRect(0,0,u.canvas.width,u.canvas.height),function a(u,c,v){c.forEach(function(h,E){if(h.image){u.save(),h.canvas=u.canvas,Object(i.default)(h,u);var M=h.viewport.colormap||h.options.colormap,P=h.invalid||v;if(M&&""!==M&&!0===h.viewport.labelmap)Object(g.addLabelMapLayer)(h,P);else if(M&&""!==M)Object(s.addPseudoColorLayer)(h,P);else if(!0===h.image.color)Object(l.addColorLayer)(h,P);else{var T=0===E;Object(d.addGrayscaleLayer)(h,P,T)}u.globalAlpha=h.options&&h.options.opacity?h.options.opacity:1,h.options&&h.options.fillStyle&&(u.fillStyle=h.options.fillStyle),u.imageSmoothingEnabled=!h.viewport.pixelReplication,u.mozImageSmoothingEnabled=u.imageSmoothingEnabled;var D=Object(f.default)(h.image,h.viewport),y=D.tlhc.x-1,j=D.tlhc.y-1,C=D.brhc.x-y,I=D.brhc.y-j;u.drawImage(h.canvas,y,j,C,I,y,j,C,I),u.restore(),h.invalid=!1}})}(P,M,c)}},"./internal/drawImage.js":
/*!*******************************!*\
          !*** ./internal/drawImage.js ***!
          \*******************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),t.default=function(r){var d=arguments.length>1&&void 0!==arguments[1]&&arguments[1];r.needsRedraw=!0,d&&(r.invalid=!0)}},"./internal/drawImageSync.js":
/*!***********************************!*\
          !*** ./internal/drawImageSync.js ***!
          \***********************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./now.js */
"./internal/now.js"),d=e(
/*! ./drawCompositeImage.js */
"./internal/drawCompositeImage.js"),l=e(
/*! ../rendering/renderColorImage.js */
"./rendering/renderColorImage.js"),s=e(
/*! ../rendering/renderGrayscaleImage.js */
"./rendering/renderGrayscaleImage.js"),g=e(
/*! ../rendering/renderPseudoColorImage.js */
"./rendering/renderPseudoColorImage.js"),i=e(
/*! ../rendering/renderLabelMapImage.js */
"./rendering/renderLabelMapImage.js"),f=e(
/*! ../triggerEvent.js */
"./triggerEvent.js"),m=e(
/*! ../events.js */
"./events.js");t.default=function(o,n){var a=o.image,u=o.element,c=o.layers||[];if(o.canvas&&o.image){var v=Object(r.default)();if(a.stats={lastGetPixelDataTime:-1,lastStoredPixelDataToCanvasImageDataTime:-1,lastPutImageDataTime:-1,lastRenderTime:-1,lastLutGenerateTime:-1},c&&c.length)Object(d.default)(o,n);else if(a){var h=a.render;h||(h=o.viewport.colormap&&""!==o.viewport.colormap&&!0===o.image.labelmap?i.renderLabelMapImage:o.viewport.colormap&&""!==o.viewport.colormap?g.renderPseudoColorImage:a.color?l.renderColorImage:s.renderGrayscaleImage),h(o,n)}var E=Object(r.default)()-v,M={viewport:o.viewport,element:u,image:a,enabledElement:o,canvasContext:o.canvas.getContext("2d",{desynchronized:!0}),renderTimeInMs:E};a.stats.lastRenderTime=E,o.invalid=!1,o.needsRedraw=!1,Object(f.default)(u,m.default.IMAGE_RENDERED,M)}}},"./internal/generateColorLut.js":
/*!**************************************!*\
          !*** ./internal/generateColorLut.js ***!
          \**************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./getVOILut.js */
"./internal/getVOILut.js");t.default=function(d,l,s,g,i){var f=d.maxPixelValue,m=d.minPixelValue,o=Math.min(m,0);if(void 0===d.cachedLut){var n=f-o+1;d.cachedLut={},d.cachedLut.lutArray=new Uint8ClampedArray(n)}var a=d.cachedLut.lutArray,u=Object(r.default)(l,s,i);if(!0===g)for(var c=m;c<=f;c++)a[c+-o]=255-u(c);else for(var v=m;v<=f;v++)a[v+-o]=u(v);return a}},"./internal/generateLut.js":
/*!*********************************!*\
          !*** ./internal/generateLut.js ***!
          \*********************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./getModalityLUT.js */
"./internal/getModalityLUT.js"),d=e(
/*! ./getVOILut.js */
"./internal/getVOILut.js");t.default=function(l,s,g,i,f,m){var o=l.maxPixelValue,n=l.minPixelValue,a=Math.min(n,0);if(void 0===l.cachedLut){var u=o-a+1;l.cachedLut={},l.cachedLut.lutArray=new Uint8ClampedArray(u)}var c=l.cachedLut.lutArray,v=!!(l.slope%1)||!!(l.intercept%1),h=Object(r.default)(l.slope,l.intercept,f),E=Object(d.default)(s,g,m,v);if(!0===i)for(var M=n;M<=o;M++)c[M+-a]=255-E(h(M));else for(var O=n;O<=o;O++)c[O+-a]=E(h(O));return c}},"./internal/getCanvas.js":
/*!*******************************!*\
          !*** ./internal/getCanvas.js ***!
          \*******************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return l});var r="cornerstone-canvas";function l(s){var g="canvas.".concat(r);return s.querySelector(g)||function d(s){var g=document.createElement("canvas");return g.style.display="block",g.classList.add(r),s.appendChild(g),g}(s)}},"./internal/getDefaultViewport.js":
/*!****************************************!*\
          !*** ./internal/getDefaultViewport.js ***!
          \****************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./createViewport.js */
"./internal/createViewport.js"),d=e(
/*! ./getImageFitScale.js */
"./internal/getImageFitScale.js");t.default=function(l,s){if(void 0===l)throw new Error("getDefaultViewport: parameter canvas must not be undefined");return void 0===s?Object(r.default)():{scale:Object(d.default)(l,s,0).scaleFactor,translation:{x:0,y:0},voi:{windowWidth:s.windowWidth,windowCenter:s.windowCenter},invert:s.invert,pixelReplication:!1,rotation:0,hflip:!1,vflip:!1,modalityLUT:s.modalityLUT,voiLUT:s.voiLUT,colormap:s.colormap,labelmap:!!s.labelmap,displayedArea:void 0}}},"./internal/getDisplayedArea.js":
/*!**************************************!*\
          !*** ./internal/getDisplayedArea.js ***!
          \**************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),t.default=function(r){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(d&&d.displayedArea)return d.displayedArea;if(void 0===r)throw new Error("getDisplayedArea: parameter image must not be undefined");return{tlhc:{x:1,y:1},brhc:{x:r.columns,y:r.rows},rowPixelSpacing:void 0===r.rowPixelSpacing?1:r.rowPixelSpacing,columnPixelSpacing:void 0===r.columnPixelSpacing?1:r.columnPixelSpacing,presentationSizeMode:"NONE"}}},"./internal/getFillStyle.js":
/*!**********************************!*\
          !*** ./internal/getFillStyle.js ***!
          \**********************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),t.default=function(r){var l=(r.viewport||{}).invert;return-1!==["black","white"].indexOf((r.options||{}).fillStyle)&&l?"white":"black"}},"./internal/getImageFitScale.js":
/*!**************************************!*\
          !*** ./internal/getImageFitScale.js ***!
          \**************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./validator.js */
"./internal/validator.js"),d=e(
/*! ./getImageSize.js */
"./internal/getImageSize.js");t.default=function(l,s){var g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(r.validateParameterUndefinedOrNull)(l,"getImageScale: parameter windowSize must not be undefined"),Object(r.validateParameterUndefinedOrNull)(s,"getImageScale: parameter image must not be undefined");var i=Object(d.default)(s,g),f=s.rowPixelSpacing||1,m=s.columnPixelSpacing||1,o=1,n=1;f<m?n=m/f:o=f/m;var a=l.height/i.height/o,u=l.width/i.width/n;return{verticalScale:a,horizontalScale:u,scaleFactor:Math.min(u,a)}}},"./internal/getImageSize.js":
/*!**********************************!*\
          !*** ./internal/getImageSize.js ***!
          \**********************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./validator.js */
"./internal/validator.js");t.default=function(l){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Object(r.validateParameterUndefinedOrNull)(l,"getImageSize: parameter image must not be undefined"),Object(r.validateParameterUndefinedOrNull)(l.width,"getImageSize: parameter image must have width"),Object(r.validateParameterUndefinedOrNull)(l.height,"getImageSize: parameter image must have height"),function d(l){return!(null==l||0===l||180===l)}(s)?{height:l.width,width:l.height}:{width:l.width,height:l.height}}},"./internal/getModalityLUT.js":
/*!************************************!*\
          !*** ./internal/getModalityLUT.js ***!
          \************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),t.default=function(l,s,g){return g?function d(l){var s=l.lut[0],g=l.lut[l.lut.length-1],i=l.firstValueMapped+l.lut.length;return function(f){return f<l.firstValueMapped?s:f>=i?g:l.lut[f]}}(g):function r(l,s){return function(g){return g*l+s}}(l,s)}},"./internal/getTransform.js":
/*!**********************************!*\
          !*** ./internal/getTransform.js ***!
          \**********************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./calculateTransform.js */
"./internal/calculateTransform.js");t.default=function(d){return Object(r.default)(d)}},"./internal/getVOILut.js":
/*!*******************************!*\
          !*** ./internal/getVOILut.js ***!
          \*******************************/
/*! exports provided: default */function(b,t,e){"use strict";function i(o,n){(null==n||n>o.length)&&(n=o.length);for(var a=0,u=new Array(n);a<n;a++)u[a]=o[a];return u}e.r(t),t.default=function(o,n,a,u){return a?function m(o,n){var u=Math.max.apply(Math,function r(o){return function g(o){if(Array.isArray(o))return i(o)}(o)||function s(o){if(typeof Symbol<"u"&&null!=o[Symbol.iterator]||null!=o["@@iterator"])return Array.from(o)}(o)||function l(o,n){if(o){if("string"==typeof o)return i(o,n);var a=Object.prototype.toString.call(o).slice(8,-1);if("Object"===a&&o.constructor&&(a=o.constructor.name),"Map"===a||"Set"===a)return Array.from(o);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return i(o,n)}}(o)||function d(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(o.lut)).toString(2).length-8,c=o.lut[0]>>u,v=o.lut[o.lut.length-1]>>u,h=o.firstValueMapped+o.lut.length-1;return function(E){return E<o.firstValueMapped?c:E>=h?v:n?o.lut[Math.round(E)-o.firstValueMapped]>>u:o.lut[E-o.firstValueMapped]>>u}}(a,u):function f(o,n){return function(a){return 255*((a-n)/o+.5)}}(o,n)}},"./internal/guid.js":
/*!**************************!*\
          !*** ./internal/guid.js ***!
          \**************************/
/*! exports provided: default */function(b,t,e){"use strict";function r(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}e.r(t),t.default=function(){return"".concat(r()+r(),"-").concat(r(),"-").concat(r(),"-").concat(r(),"-").concat(r()).concat(r()).concat(r())}},"./internal/index.js":
/*!***************************!*\
          !*** ./internal/index.js ***!
          \***************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./transform.js */
"./internal/transform.js"),d=e(
/*! ./calculateTransform.js */
"./internal/calculateTransform.js"),l=e(
/*! ./drawImage.js */
"./internal/drawImage.js"),s=e(
/*! ./generateLut.js */
"./internal/generateLut.js"),g=e(
/*! ./getDefaultViewport.js */
"./internal/getDefaultViewport.js"),i=e(
/*! ./getTransform.js */
"./internal/getTransform.js"),f=e(
/*! ./requestAnimationFrame.js */
"./internal/requestAnimationFrame.js"),m=e(
/*! ./setDefaultViewport.js */
"./internal/setDefaultViewport.js"),o=e(
/*! ./storedColorPixelDataToCanvasImageData.js */
"./internal/storedColorPixelDataToCanvasImageData.js"),n=e(
/*! ./storedPixelDataToCanvasImageData.js */
"./internal/storedPixelDataToCanvasImageData.js"),a=e(
/*! ./storedPixelDataToCanvasImageDataColorLUT.js */
"./internal/storedPixelDataToCanvasImageDataColorLUT.js"),u=e(
/*! ./storedPixelDataToCanvasImageDataPseudocolorLUT.js */
"./internal/storedPixelDataToCanvasImageDataPseudocolorLUT.js"),c=e(
/*! ./storedPixelDataToCanvasImageDataRGBA.js */
"./internal/storedPixelDataToCanvasImageDataRGBA.js");t.default={drawImage:l.default,generateLut:s.default,getDefaultViewport:g.default,requestAnimationFrame:f.default,setDefaultViewport:m.default,storedPixelDataToCanvasImageData:n.default,storedPixelDataToCanvasImageDataRGBA:c.default,storedPixelDataToCanvasImageDataColorLUT:a.default,storedPixelDataToCanvasImageDataPseudocolorLUT:u.default,storedColorPixelDataToCanvasImageData:o.default,getTransform:i.default,calculateTransform:d.default,Transform:r.Transform}},"./internal/now.js":
/*!*************************!*\
          !*** ./internal/now.js ***!
          \*************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),t.default=function(){return window.performance?performance.now():Date.now()}},"./internal/requestAnimationFrame.js":
/*!*******************************************!*\
          !*** ./internal/requestAnimationFrame.js ***!
          \*******************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),t.default=function(d){return window.requestAnimationFrame(d)||window.webkitRequestAnimationFrame(d)||window.mozRequestAnimationFrame(d)||window.oRequestAnimationFrame(d)||window.msRequestAnimationFrame(d)||function r(d){window.setTimeout(d,1e3/60)}(d)}},"./internal/setDefaultViewport.js":
/*!****************************************!*\
          !*** ./internal/setDefaultViewport.js ***!
          \****************************************/
/*! exports provided: default, state */function(b,t,e){"use strict";e.r(t),e.d(t,"state",function(){return r});var r={viewport:{}};t.default=function(d){r.viewport=d||{}}},"./internal/storedColorPixelDataToCanvasImageData.js":
/*!***********************************************************!*\
          !*** ./internal/storedColorPixelDataToCanvasImageData.js ***!
          \***********************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./now.js */
"./internal/now.js");t.default=function(d,l,s){var g=Object(r.default)(),i=d.getPixelData();d.stats.lastGetPixelDataTime=Object(r.default)()-g;var f=d.minPixelValue,m=0,o=0,n=i.length;if(g=Object(r.default)(),f<0)for(;o<n;)s[m++]=l[i[o++]+-f],s[m++]=l[i[o++]+-f],s[m]=l[i[o]+-f],o+=2,m+=2;else for(;o<n;)s[m++]=l[i[o++]],s[m++]=l[i[o++]],s[m]=l[i[o]],o+=2,m+=2;d.stats.lastStoredPixelDataToCanvasImageDataTime=Object(r.default)()-g}},"./internal/storedPixelDataToCanvasImageData.js":
/*!******************************************************!*\
          !*** ./internal/storedPixelDataToCanvasImageData.js ***!
          \******************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./now.js */
"./internal/now.js");t.default=function(d,l,s){var g=Object(r.default)(),i=d.getPixelData();d.stats.lastGetPixelDataTime=Object(r.default)()-g;var f=i.length,m=d.minPixelValue,o=3,n=0;if(g=Object(r.default)(),i instanceof Int16Array)if(m<0)for(;n<f;)s[o]=l[i[n++]+-m],o+=4;else for(;n<f;)s[o]=l[i[n++]],o+=4;else if(i instanceof Uint16Array)for(;n<f;)s[o]=l[i[n++]],o+=4;else if(m<0)for(;n<f;)s[o]=l[i[n++]+-m],o+=4;else for(;n<f;)s[o]=l[i[n++]],o+=4;d.stats.lastStoredPixelDataToCanvasImageDataTime=Object(r.default)()-g}},"./internal/storedPixelDataToCanvasImageDataColorLUT.js":
/*!**************************************************************!*\
          !*** ./internal/storedPixelDataToCanvasImageDataColorLUT.js ***!
          \**************************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../colors/index.js */
"./colors/index.js"),d=e(
/*! ./now.js */
"./internal/now.js");t.default=function l(s,g,i){var f=Object(d.default)(),m=s.getPixelData();s.stats.lastGetPixelDataTime=Object(d.default)()-f;var c,v,o=m.length,n=s.minPixelValue,a=0,u=0;if(f=Object(d.default)(),v=g instanceof r.default.LookupTable?g.Table:g,n<0)for(;u<o;)c=v[m[u++]+-n],i[a++]=c[0],i[a++]=c[1],i[a++]=c[2],i[a++]=c[3];else for(;u<o;)c=v[m[u++]],i[a++]=c[0],i[a++]=c[1],i[a++]=c[2],i[a++]=c[3];s.stats.lastStoredPixelDataToCanvasImageDataTime=Object(d.default)()-f}},"./internal/storedPixelDataToCanvasImageDataPseudocolorLUT.js":
/*!********************************************************************!*\
          !*** ./internal/storedPixelDataToCanvasImageDataPseudocolorLUT.js ***!
          \********************************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../colors/index.js */
"./colors/index.js"),d=e(
/*! ./now.js */
"./internal/now.js");t.default=function l(s,g,i,f){var m=Object(d.default)(),o=s.getPixelData();s.stats.lastGetPixelDataTime=Object(d.default)()-m;var v,h,E,n=o.length,a=s.minPixelValue,u=0,c=0;if(m=Object(d.default)(),E=i instanceof r.default.LookupTable?i.Table:i,a<0)for(;c<n;)v=g[o[c++]+-a],f[u++]=(h=E[v])[0],f[u++]=h[1],f[u++]=h[2],f[u++]=h[3];else for(;c<n;)v=g[o[c++]],f[u++]=(h=E[v])[0],f[u++]=h[1],f[u++]=h[2],f[u++]=h[3];s.stats.lastStoredPixelDataToCanvasImageDataTime=Object(d.default)()-m}},"./internal/storedPixelDataToCanvasImageDataRGBA.js":
/*!**********************************************************!*\
          !*** ./internal/storedPixelDataToCanvasImageDataRGBA.js ***!
          \**********************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./now.js */
"./internal/now.js");t.default=function(d,l,s){var g=Object(r.default)(),i=d.getPixelData();d.stats.lastGetPixelDataTime=Object(r.default)()-g;var a,f=i.length,m=d.minPixelValue,o=0,n=0;if(g=Object(r.default)(),i instanceof Int16Array)if(m<0)for(;n<f;)a=l[i[n++]+-m],s[o++]=a,s[o++]=a,s[o++]=a,s[o++]=255;else for(;n<f;)a=l[i[n++]],s[o++]=a,s[o++]=a,s[o++]=a,s[o++]=255;else if(i instanceof Uint16Array)for(;n<f;)a=l[i[n++]],s[o++]=a,s[o++]=a,s[o++]=a,s[o++]=255;else if(m<0)for(;n<f;)a=l[i[n++]+-m],s[o++]=a,s[o++]=a,s[o++]=a,s[o++]=255;else for(;n<f;)a=l[i[n++]],s[o++]=a,s[o++]=a,s[o++]=a,s[o++]=255;d.stats.lastStoredPixelDataToCanvasImageDataTime=Object(r.default)()-g}},"./internal/storedRGBAPixelDataToCanvasImageData.js":
/*!**********************************************************!*\
          !*** ./internal/storedRGBAPixelDataToCanvasImageData.js ***!
          \**********************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./now.js */
"./internal/now.js");t.default=function(d,l,s){var g=Object(r.default)(),i=d.getPixelData();d.stats.lastGetPixelDataTime=Object(r.default)()-g;var f=d.minPixelValue,m=0,o=0,n=i.length;if(g=Object(r.default)(),f<0)for(;o<n;)s[m++]=l[i[o++]+-f],s[m++]=l[i[o++]+-f],s[m++]=l[i[o++]+-f],s[m++]=i[o++];else for(;o<n;)s[m++]=l[i[o++]],s[m++]=l[i[o++]],s[m++]=l[i[o++]],s[m++]=i[o++];d.stats.lastStoredPixelDataToCanvasImageDataTime=Object(r.default)()-g}},"./internal/transform.js":
/*!*******************************!*\
          !*** ./internal/transform.js ***!
          \*******************************/
/*! exports provided: Transform */function(b,t,e){"use strict";function d(g,i){for(var f=0;f<i.length;f++){var m=i[f];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(g,m.key,m)}}e.r(t),e.d(t,"Transform",function(){return s});var s=function(){function g(){(function r(g,i){if(!(g instanceof i))throw new TypeError("Cannot call a class as a function")})(this,g),this.reset()}return function l(g,i,f){i&&d(g.prototype,i),f&&d(g,f)}(g,[{key:"reset",value:function(){this.m=[1,0,0,1,0,0]}},{key:"clone",value:function(){var f=new g;return f.m[0]=this.m[0],f.m[1]=this.m[1],f.m[2]=this.m[2],f.m[3]=this.m[3],f.m[4]=this.m[4],f.m[5]=this.m[5],f}},{key:"multiply",value:function(f){var o=this.m[1]*f.m[0]+this.m[3]*f.m[1],n=this.m[0]*f.m[2]+this.m[2]*f.m[3],a=this.m[1]*f.m[2]+this.m[3]*f.m[3],u=this.m[0]*f.m[4]+this.m[2]*f.m[5]+this.m[4],c=this.m[1]*f.m[4]+this.m[3]*f.m[5]+this.m[5];this.m[0]=this.m[0]*f.m[0]+this.m[2]*f.m[1],this.m[1]=o,this.m[2]=n,this.m[3]=a,this.m[4]=u,this.m[5]=c}},{key:"invert",value:function(){var f=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),o=-this.m[1]*f,n=-this.m[2]*f,a=this.m[0]*f,u=f*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),c=f*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);this.m[0]=this.m[3]*f,this.m[1]=o,this.m[2]=n,this.m[3]=a,this.m[4]=u,this.m[5]=c}},{key:"rotate",value:function(f){var m=Math.cos(f),o=Math.sin(f),a=this.m[1]*m+this.m[3]*o,u=this.m[0]*-o+this.m[2]*m,c=this.m[1]*-o+this.m[3]*m;this.m[0]=this.m[0]*m+this.m[2]*o,this.m[1]=a,this.m[2]=u,this.m[3]=c}},{key:"translate",value:function(f,m){this.m[4]+=this.m[0]*f+this.m[2]*m,this.m[5]+=this.m[1]*f+this.m[3]*m}},{key:"scale",value:function(f,m){this.m[0]*=f,this.m[1]*=f,this.m[2]*=m,this.m[3]*=m}},{key:"transformPoint",value:function(f,m){var o=f;return{x:f=o*this.m[0]+m*this.m[2]+this.m[4],y:m=o*this.m[1]+m*this.m[3]+this.m[5]}}}]),g}()},"./internal/tryEnableWebgl.js":
/*!************************************!*\
          !*** ./internal/tryEnableWebgl.js ***!
          \************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../webgl/index.js */
"./webgl/index.js");t.default=function(d){return r.default.renderer.isWebGLAvailable()?(r.default.renderer.initRenderer(),d.renderer="webgl",d.desynchronized=!0,d.preserveDrawingBuffer=!0,!0):(console.error("WebGL not available, falling back to Canvas renderer"),delete d.renderer,delete d.preserveDrawingBuffer,!1)}},"./internal/validator.js":
/*!*******************************!*\
          !*** ./internal/validator.js ***!
          \*******************************/
/*! exports provided: validateParameterUndefined, validateParameterUndefinedOrNull */function(b,t,e){"use strict";function r(l,s){if(void 0===l)throw new Error(s)}function d(l,s){if(null==l)throw new Error(s)}e.r(t),e.d(t,"validateParameterUndefined",function(){return r}),e.d(t,"validateParameterUndefinedOrNull",function(){return d})},"./invalidate.js":
/*!***********************!*\
          !*** ./invalidate.js ***!
          \***********************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./enabledElements.js */
"./enabledElements.js"),d=e(
/*! ./triggerEvent.js */
"./triggerEvent.js"),l=e(
/*! ./events.js */
"./events.js");t.default=function(s){var g=Object(r.getEnabledElement)(s);g.invalid=!0,g.needsRedraw=!0;var i={element:s};Object(d.default)(s,l.default.INVALIDATED,i)}},"./invalidateImageId.js":
/*!******************************!*\
          !*** ./invalidateImageId.js ***!
          \******************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./enabledElements.js */
"./enabledElements.js"),d=e(
/*! ./internal/drawImage.js */
"./internal/drawImage.js");t.default=function(l){Object(r.getEnabledElementsByImageId)(l).forEach(function(g){Object(d.default)(g,!0)})}},"./layers.js":
/*!*******************!*\
          !*** ./layers.js ***!
          \*******************/
/*! exports provided: rescaleImage, addLayer, removeLayer, getLayer, getLayers, getVisibleLayers, setActiveLayer, setLayerImage, getActiveLayer, purgeLayers */function(b,t,e){"use strict";e.r(t),e.d(t,"rescaleImage",function(){return o}),e.d(t,"addLayer",function(){return n}),e.d(t,"removeLayer",function(){return a}),e.d(t,"getLayer",function(){return u}),e.d(t,"getLayers",function(){return c}),e.d(t,"getVisibleLayers",function(){return v}),e.d(t,"setActiveLayer",function(){return h}),e.d(t,"setLayerImage",function(){return E}),e.d(t,"getActiveLayer",function(){return M}),e.d(t,"purgeLayers",function(){return O});var r=e(
/*! ./internal/guid.js */
"./internal/guid.js"),d=e(
/*! ./enabledElements.js */
"./enabledElements.js"),l=e(
/*! ./internal/getDefaultViewport.js */
"./internal/getDefaultViewport.js"),s=e(
/*! ./internal/getDisplayedArea.js */
"./internal/getDisplayedArea.js"),g=e(
/*! ./updateImage.js */
"./updateImage.js"),i=e(
/*! ./triggerEvent.js */
"./triggerEvent.js"),f=e(
/*! ./events.js */
"./events.js");function m(P,T,D){var y=T.element,j={viewport:T.viewport,element:T.element,image:T.image,enabledElement:T,layerId:D};Object(i.default)(y,P,j)}function o(P,T){if(P.layerId===T.layerId)throw new Error("rescaleImage: both arguments represent the same layer");var D=P.image,y=T.image;if(D.imageId&&y.imageId){var j=Object(s.default)(y,T.viewport),C=Object(s.default)(D,P.viewport);T.viewport.scale=P.viewport.scale*(T.viewport.scale/P.viewport.scale*(j.columnPixelSpacing*y.width/(C.columnPixelSpacing*D.width)))}}function n(P,T,D){var I,y=Object(r.default)(),j=Object(d.getEnabledElement)(P),C=j.layers;T&&(I=Object(l.default)(j.canvas,T),D&&D.viewport&&(I=Object.assign(I,D.viewport))),!1!==j.syncViewports&&(j.syncViewports=!0);var B={image:T,layerId:y,viewport:I,options:D||{},renderingTools:{}};return C.length&&T&&o(C[0],B),C.push(B),m(f.default.LAYER_ADDED,j,y),1===C.length&&T&&h(P,y),y}function a(P,T){var D=Object(d.getEnabledElement)(P),y=D.layers,j=D.layers.findIndex(function(C){return C.layerId===T});-1!==j&&(y.splice(j,1),T===D.activeLayerId&&y.length&&h(P,y[0].layerId),m(f.default.LAYER_REMOVED,D,T))}function u(P,T){return Object(d.getEnabledElement)(P).layers.find(function(y){return y.layerId===T})}function c(P){return Object(d.getEnabledElement)(P).layers}function v(P){return Object(d.getEnabledElement)(P).layers.filter(function(D){return D.options&&!1!==D.options.visible&&0!==D.options.opacity})}function h(P,T){var D=Object(d.getEnabledElement)(P);if(D.activeLayerId!==T){var y=D.layers.findIndex(function(C){return C.layerId===T});if(-1===y)throw new Error("setActiveLayer: layer not found in layers array");var j=D.layers[y];if(!j.image)throw new Error("setActiveLayer: layer with undefined image cannot be set as active.");D.activeLayerId=T,D.image=j.image,D.viewport=j.viewport,Object(g.default)(P),m(f.default.ACTIVE_LAYER_CHANGED,D,T)}}function E(P,T,D){var C,y=Object(d.getEnabledElement)(P),j=y.layers[0];if(!(C=D?u(P,D):M(P)))throw new Error("setLayerImage: Layer not found");if(C.image=T,T){if(!C.viewport){var I=Object(l.default)(y.canvas,T);C.options&&C.options.viewport&&(C.viewport=Object.assign(I,C.options.viewport)),j.layerId!==D&&o(j,C)}}else C.viewport=void 0}function M(P){var T=Object(d.getEnabledElement)(P);return T.layers.find(function(D){return D.layerId===T.activeLayerId})}function O(P){var T=Object(d.getEnabledElement)(P);T.layers=[],delete T.activeLayerId,delete T.lastSyncViewportsState}},"./metaData.js":
/*!*********************!*\
          !*** ./metaData.js ***!
          \*********************/
/*! exports provided: addProvider, removeProvider, default */function(b,t,e){"use strict";e.r(t),e.d(t,"addProvider",function(){return d}),e.d(t,"removeProvider",function(){return l});var r=[];function d(g){var f,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(f=0;f<r.length&&!(r[f].priority<=i);f++);r.splice(f,0,{priority:i,provider:g})}function l(g){for(var i=0;i<r.length;i++)if(r[i].provider===g){r.splice(i,1);break}}t.default={addProvider:d,removeProvider:l,get:function s(g,i){for(var f=0;f<r.length;f++){var m=r[f].provider(g,i);if(void 0!==m)return m}}}},"./pageToPixel.js":
/*!************************!*\
          !*** ./pageToPixel.js ***!
          \************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./enabledElements.js */
"./enabledElements.js"),d=e(
/*! ./internal/getTransform.js */
"./internal/getTransform.js");t.default=function(l,s,g){var i=Object(r.getEnabledElement)(l);if(void 0===i.image)throw new Error("image has not been loaded yet");var f=l.getBoundingClientRect(),n={x:s-f.left-window.pageXOffset,y:g-f.top-window.pageYOffset},a=Object(d.default)(i);return a.invert(),a.transformPoint(n.x,n.y)}},"./pixelDataToFalseColorData.js":
/*!**************************************!*\
          !*** ./pixelDataToFalseColorData.js ***!
          \**************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return d});var r=e(
/*! ./colors/index.js */
"./colors/index.js");function d(l,s){if(l.color&&!l.falseColor)throw new Error("Color transforms are not implemented yet");var a,u,g=l.minPixelValue,i=0,f=0,m=l.width*l.height,o=l.origPixelData||l.getPixelData(),n=new Uint8Array(4*m);if(l.color=!0,l.falseColor=!0,l.origPixelData=o,s instanceof r.default.LookupTable)for(s.build();f<m;)a=o[f++],u=s.mapValue(a),n[i++]=u[0],n[i++]=u[1],n[i++]=u[2],n[i++]=u[3];else if(g<0)for(;f<m;)a=o[f++],n[i++]=s[a+-g][0],n[i++]=s[a+-g][1],n[i++]=s[a+-g][2],n[i++]=s[a+-g][3];else for(;f<m;)a=o[f++],n[i++]=s[a][0],n[i++]=s[a][1],n[i++]=s[a][2],n[i++]=s[a][3];l.rgba=!0,l.cachedLut=void 0,l.render=void 0,l.slope=1,l.intercept=0,l.minPixelValue=0,l.maxPixelValue=255,l.windowWidth=255,l.windowCenter=128,l.getPixelData=function(){return n}}},"./pixelToCanvas.js":
/*!**************************!*\
          !*** ./pixelToCanvas.js ***!
          \**************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./enabledElements.js */
"./enabledElements.js"),d=e(
/*! ./internal/getTransform.js */
"./internal/getTransform.js");t.default=function(l,s){var g=Object(r.getEnabledElement)(l);return Object(d.default)(g).transformPoint(s.x,s.y)}},"./rendering/doesImageNeedToBeRendered.js":
/*!************************************************!*\
          !*** ./rendering/doesImageNeedToBeRendered.js ***!
          \************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),t.default=function(r,d){var s=r.renderingTools.lastRenderedViewport;return d.imageId!==r.renderingTools.lastRenderedImageId||!s||s.windowCenter!==r.viewport.voi.windowCenter||s.windowWidth!==r.viewport.voi.windowWidth||s.invert!==r.viewport.invert||s.rotation!==r.viewport.rotation||s.hflip!==r.viewport.hflip||s.vflip!==r.viewport.vflip||s.modalityLUT!==r.viewport.modalityLUT||s.voiLUT!==r.viewport.voiLUT||s.colormap!==r.viewport.colormap}},"./rendering/getLut.js":
/*!*****************************!*\
          !*** ./rendering/getLut.js ***!
          \*****************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../internal/computeAutoVoi.js */
"./internal/computeAutoVoi.js"),d=e(
/*! ./lutMatches.js */
"./rendering/lutMatches.js"),l=e(
/*! ../internal/generateLut.js */
"./internal/generateLut.js");t.default=function(s,g,i){return void 0!==s.cachedLut&&s.cachedLut.windowCenter===g.voi.windowCenter&&s.cachedLut.windowWidth===g.voi.windowWidth&&Object(d.default)(s.cachedLut.modalityLUT,g.modalityLUT)&&Object(d.default)(s.cachedLut.voiLUT,g.voiLUT)&&s.cachedLut.invert===g.invert&&!0!==i||(Object(r.default)(g,s),Object(l.default)(s,g.voi.windowWidth,g.voi.windowCenter,g.invert,g.modalityLUT,g.voiLUT),s.cachedLut.windowWidth=g.voi.windowWidth,s.cachedLut.windowCenter=g.voi.windowCenter,s.cachedLut.invert=g.invert,s.cachedLut.voiLUT=g.voiLUT,s.cachedLut.modalityLUT=g.modalityLUT),s.cachedLut.lutArray}},"./rendering/index.js":
/*!****************************!*\
          !*** ./rendering/index.js ***!
          \****************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./renderColorImage.js */
"./rendering/renderColorImage.js"),d=e(
/*! ./renderGrayscaleImage.js */
"./rendering/renderGrayscaleImage.js"),l=e(
/*! ./renderWebImage.js */
"./rendering/renderWebImage.js"),s=e(
/*! ./renderPseudoColorImage.js */
"./rendering/renderPseudoColorImage.js"),g=e(
/*! ./renderLabelMapImage.js */
"./rendering/renderLabelMapImage.js"),i=e(
/*! ./renderToCanvas.js */
"./rendering/renderToCanvas.js");t.default={colorImage:r.renderColorImage,grayscaleImage:d.renderGrayscaleImage,webImage:l.renderWebImage,pseudoColorImage:s.renderPseudoColorImage,labelMapImage:g.renderLabelMapImage,toCanvas:i.default}},"./rendering/initializeRenderCanvas.js":
/*!*********************************************!*\
          !*** ./rendering/initializeRenderCanvas.js ***!
          \*********************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),t.default=function(r,d){var l=r.renderingTools.renderCanvas;l.width=d.width,l.height=d.height;var s=l.getContext("2d",{desynchronized:!0});s.fillStyle="white",s.fillRect(0,0,l.width,l.height);var g=s.getImageData(0,0,d.width,d.height);r.renderingTools.renderCanvasContext=s,r.renderingTools.renderCanvasData=g}},"./rendering/lutMatches.js":
/*!*********************************!*\
          !*** ./rendering/lutMatches.js ***!
          \*********************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),t.default=function(r,d){return!r&&!d||!(!r||!d)&&r.id===d.id}},"./rendering/renderColorImage.js":
/*!***************************************!*\
          !*** ./rendering/renderColorImage.js ***!
          \***************************************/
/*! exports provided: renderColorImage, addColorLayer */function(b,t,e){"use strict";e.r(t),e.d(t,"renderColorImage",function(){return v}),e.d(t,"addColorLayer",function(){return h});var r=e(
/*! ../internal/now.js */
"./internal/now.js"),d=e(
/*! ../internal/getFillStyle.js */
"./internal/getFillStyle.js"),l=e(
/*! ../internal/generateColorLut.js */
"./internal/generateColorLut.js"),s=e(
/*! ../internal/storedColorPixelDataToCanvasImageData.js */
"./internal/storedColorPixelDataToCanvasImageData.js"),g=e(
/*! ../internal/storedRGBAPixelDataToCanvasImageData.js */
"./internal/storedRGBAPixelDataToCanvasImageData.js"),i=e(
/*! ../setToPixelCoordinateSystem.js */
"./setToPixelCoordinateSystem.js"),f=e(
/*! ../webgl/index.js */
"./webgl/index.js"),m=e(
/*! ./doesImageNeedToBeRendered.js */
"./rendering/doesImageNeedToBeRendered.js"),o=e(
/*! ./initializeRenderCanvas.js */
"./rendering/initializeRenderCanvas.js"),n=e(
/*! ./saveLastRendered.js */
"./rendering/saveLastRendered.js"),a=e(
/*! ../internal/getDisplayedArea.js */
"./internal/getDisplayedArea.js");function c(E,M,O){(!E.renderingTools.renderCanvas||!0!==E.renderingTools.lastRenderedIsColor)&&(E.renderingTools.renderCanvas=document.createElement("canvas"));var T=E.renderingTools.renderCanvas;if(255===E.viewport.voi.windowWidth&&128===E.viewport.voi.windowCenter&&!1===E.viewport.invert&&M.getCanvas&&M.getCanvas())return M.getCanvas();if(!1===Object(m.default)(E,M)&&!0!==O)return T;(T.width!==M.width||T.height!==M.height)&&Object(o.default)(E,M);var D=Object(r.default)(),y=function u(E,M){return void 0!==E.cachedLut&&E.cachedLut.windowCenter===M.voi.windowCenter&&E.cachedLut.windowWidth===M.voi.windowWidth&&E.cachedLut.invert===M.invert||(Object(l.default)(E,M.voi.windowWidth,M.voi.windowCenter,M.invert),E.cachedLut.windowWidth=M.voi.windowWidth,E.cachedLut.windowCenter=M.voi.windowCenter,E.cachedLut.invert=M.invert),E.cachedLut.lutArray}(M,E.viewport);M.stats=M.stats||{},M.stats.lastLutGenerateTime=Object(r.default)()-D;var j=E.renderingTools.renderCanvasData,C=E.renderingTools.renderCanvasContext;return M.rgba?Object(g.default)(M,y,j.data):Object(s.default)(M,y,j.data),D=Object(r.default)(),C.putImageData(j,0,0),M.stats.lastPutImageDataTime=Object(r.default)()-D,T}function v(E,M){if(void 0===E)throw new Error("renderColorImage: enabledElement parameter must not be undefined");var O=E.image;if(void 0===O)throw new Error("renderColorImage: image must be loaded before it can be drawn");var T,P=E.canvas.getContext("2d",{desynchronized:!0});P.setTransform(1,0,0,1,0,0),P.fillStyle=Object(d.default)(E),P.fillRect(0,0,E.canvas.width,E.canvas.height),P.imageSmoothingEnabled=!E.viewport.pixelReplication,P.mozImageSmoothingEnabled=P.imageSmoothingEnabled,Object(i.default)(E,P),T=E.options&&E.options.renderer&&"webgl"===E.options.renderer.toLowerCase()?f.default.renderer.render(E):c(E,O,M);var D=Object(a.default)(E.image,E.viewport),y=D.tlhc.x-1,j=D.tlhc.y-1,C=D.brhc.x-y,I=D.brhc.y-j;P.drawImage(T,y,j,C,I,y,j,C,I),E.renderingTools=Object(n.default)(E)}function h(E,M){if(void 0===E)throw new Error("addColorLayer: layer parameter must not be undefined");var O=E.image;if(void 0===O)throw new Error("addColorLayer: image must be loaded before it can be drawn");O.rgba=!0,E.canvas=c(E,O,M);var P=E.canvas.getContext("2d",{desynchronized:!0});P.imageSmoothingEnabled=!E.viewport.pixelReplication,P.mozImageSmoothingEnabled=P.imageSmoothingEnabled,E.renderingTools=Object(n.default)(E)}},"./rendering/renderGrayscaleImage.js":
/*!*******************************************!*\
          !*** ./rendering/renderGrayscaleImage.js ***!
          \*******************************************/
/*! exports provided: renderGrayscaleImage, addGrayscaleLayer */function(b,t,e){"use strict";e.r(t),e.d(t,"renderGrayscaleImage",function(){return c}),e.d(t,"addGrayscaleLayer",function(){return v});var r=e(
/*! ../internal/getFillStyle.js */
"./internal/getFillStyle.js"),d=e(
/*! ../internal/storedPixelDataToCanvasImageData.js */
"./internal/storedPixelDataToCanvasImageData.js"),l=e(
/*! ../internal/storedPixelDataToCanvasImageDataRGBA.js */
"./internal/storedPixelDataToCanvasImageDataRGBA.js"),s=e(
/*! ../setToPixelCoordinateSystem.js */
"./setToPixelCoordinateSystem.js"),g=e(
/*! ../internal/now.js */
"./internal/now.js"),i=e(
/*! ../webgl/index.js */
"./webgl/index.js"),f=e(
/*! ./getLut.js */
"./rendering/getLut.js"),m=e(
/*! ./doesImageNeedToBeRendered.js */
"./rendering/doesImageNeedToBeRendered.js"),o=e(
/*! ./initializeRenderCanvas.js */
"./rendering/initializeRenderCanvas.js"),n=e(
/*! ./saveLastRendered.js */
"./rendering/saveLastRendered.js"),a=e(
/*! ../internal/getDisplayedArea.js */
"./internal/getDisplayedArea.js");function u(h,E,M){var O=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];(!h.renderingTools.renderCanvas||!0===h.renderingTools.lastRenderedIsColor)&&(h.renderingTools.renderCanvas=document.createElement("canvas"),Object(o.default)(h,E));var T=h.renderingTools.renderCanvas;if(!1===Object(m.default)(h,E)&&!0!==M)return T;(T.width!==E.width||T.height!==E.height)&&Object(o.default)(h,E);var D=Object(g.default)(),y=Object(f.default)(E,h.viewport,M);E.stats=E.stats||{},E.stats.lastLutGenerateTime=Object(g.default)()-D;var j=h.renderingTools.renderCanvasData,C=h.renderingTools.renderCanvasContext;return O?Object(d.default)(E,y,j.data):Object(l.default)(E,y,j.data),D=Object(g.default)(),C.putImageData(j,0,0),E.stats.lastPutImageDataTime=Object(g.default)()-D,T}function c(h,E){if(void 0===h)throw new Error("drawImage: enabledElement parameter must not be undefined");var M=h.image;if(void 0===M)throw new Error("drawImage: image must be loaded before it can be drawn");var P,O=h.canvas.getContext("2d",{desynchronized:!0});O.setTransform(1,0,0,1,0,0),O.fillStyle=Object(r.default)(h),O.fillRect(0,0,h.canvas.width,h.canvas.height),O.imageSmoothingEnabled=!h.viewport.pixelReplication,O.mozImageSmoothingEnabled=O.imageSmoothingEnabled,Object(s.default)(h,O),P=h.options&&h.options.renderer&&"webgl"===h.options.renderer.toLowerCase()?i.default.renderer.render(h):u(h,M,E);var T=Object(a.default)(h.image,h.viewport),D=T.tlhc.x-1,y=T.tlhc.y-1,j=T.brhc.x-D,C=T.brhc.y-y;O.drawImage(P,D,y,j,C,D,y,j,C),h.renderingTools=Object(n.default)(h)}function v(h,E){var M=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(void 0===h)throw new Error("addGrayscaleLayer: layer parameter must not be undefined");var O=h.image;if(void 0===O)throw new Error("addGrayscaleLayer: image must be loaded before it can be drawn");h.canvas=u(h,O,E,M);var P=h.canvas.getContext("2d",{desynchronized:!0});P.imageSmoothingEnabled=!h.viewport.pixelReplication,P.mozImageSmoothingEnabled=P.imageSmoothingEnabled,h.renderingTools=Object(n.default)(h)}},"./rendering/renderLabelMapImage.js":
/*!******************************************!*\
          !*** ./rendering/renderLabelMapImage.js ***!
          \******************************************/
/*! exports provided: renderLabelMapImage, addLabelMapLayer */function(b,t,e){"use strict";e.r(t),e.d(t,"renderLabelMapImage",function(){return a}),e.d(t,"addLabelMapLayer",function(){return u});var r=e(
/*! ../setToPixelCoordinateSystem.js */
"./setToPixelCoordinateSystem.js"),d=e(
/*! ../internal/now.js */
"./internal/now.js"),l=e(
/*! ../internal/getFillStyle.js */
"./internal/getFillStyle.js"),s=e(
/*! ./initializeRenderCanvas.js */
"./rendering/initializeRenderCanvas.js"),g=e(
/*! ./saveLastRendered.js */
"./rendering/saveLastRendered.js"),i=e(
/*! ./doesImageNeedToBeRendered.js */
"./rendering/doesImageNeedToBeRendered.js"),f=e(
/*! ../internal/storedPixelDataToCanvasImageDataColorLUT.js */
"./internal/storedPixelDataToCanvasImageDataColorLUT.js"),m=e(
/*! ../colors/index.js */
"./colors/index.js"),o=e(
/*! ../internal/getDisplayedArea.js */
"./internal/getDisplayedArea.js");function n(c,v,h){c.renderingTools.renderCanvas||(c.renderingTools.renderCanvas=document.createElement("canvas"));var E=c.renderingTools.renderCanvas,M=c.viewport.colormap||c.options.colormap;if(c.options.colormap&&console.warn("enabledElement.options.colormap is deprecated. Use enabledElement.viewport.colormap instead"),M&&"string"==typeof M&&(M=m.default.getColormap(M)),!M)throw new Error("renderLabelMapImage: colormap not found.");var O=M.getId();if(!1===Object(i.default)(c,v)&&!0!==h&&c.renderingTools.colormapId===O)return E;(E.width!==v.width||E.height!==v.height)&&Object(s.default)(c,v);var P=Object(d.default)();(!c.renderingTools.colorLut||h||c.renderingTools.colormapId!==O)&&(c.renderingTools.colorLut=M.createLookupTable(),c.renderingTools.colormapId=O),v.stats=v.stats||{},v.stats.lastLutGenerateTime=Object(d.default)()-P;var T=c.renderingTools.colorLut,D=c.renderingTools.renderCanvasData,y=c.renderingTools.renderCanvasContext;return Object(f.default)(v,T,D.data),P=Object(d.default)(),y.putImageData(D,0,0),v.stats.lastPutImageDataTime=Object(d.default)()-P,E}function a(c,v){if(void 0===c)throw new Error("renderLabelMapImage: enabledElement parameter must not be undefined");var h=c.image;if(void 0===h)throw new Error("renderLabelMapImage: image must be loaded before it can be drawn");var E=c.canvas.getContext("2d",{desynchronized:!0});E.setTransform(1,0,0,1,0,0),E.fillStyle=Object(l.default)(c),E.fillRect(0,0,c.canvas.width,c.canvas.height),E.imageSmoothingEnabled=!c.viewport.pixelReplication,E.mozImageSmoothingEnabled=E.imageSmoothingEnabled,Object(r.default)(c,E);var M=n(c,h,v),O=Object(o.default)(c.image,c.viewport),P=O.tlhc.x-1,T=O.tlhc.y-1,D=O.brhc.x-P,y=O.brhc.y-T;E.drawImage(M,P,T,D,y,P,T,D,y),c.renderingTools=Object(g.default)(c)}function u(c,v){if(void 0===c)throw new Error("addLabelMapLayer: layer parameter must not be undefined");var h=c.image;if(void 0===h)throw new Error("addLabelMapLayer: image must be loaded before it can be drawn");c.canvas=n(c,h,v);var E=c.canvas.getContext("2d",{desynchronized:!0});E.imageSmoothingEnabled=!c.viewport.pixelReplication,E.mozImageSmoothingEnabled=E.imageSmoothingEnabled,c.renderingTools=Object(g.default)(c)}},"./rendering/renderPseudoColorImage.js":
/*!*********************************************!*\
          !*** ./rendering/renderPseudoColorImage.js ***!
          \*********************************************/
/*! exports provided: renderPseudoColorImage, addPseudoColorLayer */function(b,t,e){"use strict";e.r(t),e.d(t,"renderPseudoColorImage",function(){return u}),e.d(t,"addPseudoColorLayer",function(){return c});var r=e(
/*! ../setToPixelCoordinateSystem.js */
"./setToPixelCoordinateSystem.js"),d=e(
/*! ../internal/now.js */
"./internal/now.js"),l=e(
/*! ../internal/getFillStyle.js */
"./internal/getFillStyle.js"),s=e(
/*! ./initializeRenderCanvas.js */
"./rendering/initializeRenderCanvas.js"),g=e(
/*! ./getLut.js */
"./rendering/getLut.js"),i=e(
/*! ./saveLastRendered.js */
"./rendering/saveLastRendered.js"),f=e(
/*! ./doesImageNeedToBeRendered.js */
"./rendering/doesImageNeedToBeRendered.js"),m=e(
/*! ../internal/storedPixelDataToCanvasImageDataPseudocolorLUT.js */
"./internal/storedPixelDataToCanvasImageDataPseudocolorLUT.js"),o=e(
/*! ../colors/index.js */
"./colors/index.js"),n=e(
/*! ../internal/getDisplayedArea.js */
"./internal/getDisplayedArea.js");function a(v,h,E){v.renderingTools.renderCanvas||(v.renderingTools.renderCanvas=document.createElement("canvas"));var M=v.renderingTools.renderCanvas,O=v.viewport.colormap||v.options.colormap;if(v.options&&v.options.colormap&&console.warn("enabledElement.options.colormap is deprecated. Use enabledElement.viewport.colormap instead"),O&&"string"==typeof O&&(O=o.default.getColormap(O)),!O)throw new Error("renderPseudoColorImage: colormap not found.");var P=O.getId();if(!1===Object(f.default)(v,h)&&!0!==E&&v.renderingTools.colormapId===P)return M;(M.width!==h.width||M.height!==h.height)&&Object(s.default)(v,h);var T=Object(d.default)();(!v.renderingTools.colorLut||E||v.renderingTools.colormapId!==P)&&(O.setNumberOfColors(256),v.renderingTools.colorLut=O.createLookupTable(),v.renderingTools.colormapId=P);var D=Object(g.default)(h,v.viewport,E);h.stats=h.stats||{},h.stats.lastLutGenerateTime=Object(d.default)()-T;var y=v.renderingTools.colorLut,j=v.renderingTools.renderCanvasData,C=v.renderingTools.renderCanvasContext;return Object(m.default)(h,D,y,j.data),T=Object(d.default)(),C.putImageData(j,0,0),h.stats.lastPutImageDataTime=Object(d.default)()-T,M}function u(v,h){if(void 0===v)throw new Error("drawImage: enabledElement parameter must not be undefined");var E=v.image;if(void 0===E)throw new Error("drawImage: image must be loaded before it can be drawn");var M=v.canvas.getContext("2d",{desynchronized:!0});M.setTransform(1,0,0,1,0,0),M.fillStyle=Object(l.default)(v),M.fillRect(0,0,v.canvas.width,v.canvas.height),M.imageSmoothingEnabled=!v.viewport.pixelReplication,M.mozImageSmoothingEnabled=M.imageSmoothingEnabled,Object(r.default)(v,M);var O=a(v,E,h),P=Object(n.default)(v.image,v.viewport),T=P.tlhc.x-1,D=P.tlhc.y-1,y=P.brhc.x-T,j=P.brhc.y-D;M.drawImage(O,T,D,y,j,T,D,y,j),v.renderingTools=Object(i.default)(v)}function c(v,h){if(void 0===v)throw new Error("addPseudoColorLayer: layer parameter must not be undefined");var E=v.image;if(void 0===E)throw new Error("addPseudoColorLayer: image must be loaded before it can be drawn");v.canvas=a(v,E,h);var M=v.canvas.getContext("2d",{desynchronized:!0});M.imageSmoothingEnabled=!v.viewport.pixelReplication,M.mozImageSmoothingEnabled=M.imageSmoothingEnabled,v.renderingTools=Object(i.default)(v)}},"./rendering/renderToCanvas.js":
/*!*************************************!*\
          !*** ./rendering/renderToCanvas.js ***!
          \*************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../triggerEvent.js */
"./triggerEvent.js"),d=e(
/*! ../events.js */
"./events.js"),l=e(
/*! ../internal/drawImageSync.js */
"./internal/drawImageSync.js"),s=e(
/*! ../internal/getDefaultViewport.js */
"./internal/getDefaultViewport.js"),g=e(
/*! ../internal/tryEnableWebgl.js */
"./internal/tryEnableWebgl.js");t.default=function(f,m){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(void 0===f)throw new Error("renderToCanvas: parameter canvas cannot be undefined");n&&n.renderer&&"webgl"===n.renderer.toLowerCase()&&Object(g.default)(n);var a=Object(s.default)(f,m);o&&Object.assign(a,o);var u=function i(f,m,o,n){return{element:f,canvas:f,image:m,invalid:!0,needsRedraw:!0,options:o,layers:[],data:{},renderingTools:{},viewport:n}}(f,m,n,a),c={enabledElement:u,timestamp:Date.now()};Object(r.default)(u.element,d.default.PRE_RENDER,c),Object(l.default)(u,u.invalid)}},"./rendering/renderWebImage.js":
/*!*************************************!*\
          !*** ./rendering/renderWebImage.js ***!
          \*************************************/
/*! exports provided: renderWebImage */function(b,t,e){"use strict";e.r(t),e.d(t,"renderWebImage",function(){return s});var r=e(
/*! ../setToPixelCoordinateSystem.js */
"./setToPixelCoordinateSystem.js"),d=e(
/*! ./renderColorImage.js */
"./rendering/renderColorImage.js"),l=e(
/*! ../internal/getDisplayedArea.js */
"./internal/getDisplayedArea.js");function s(g,i){if(void 0===g)throw new Error("renderWebImage: enabledElement parameter must not be undefined");var f=g.image;if(void 0===f)throw new Error("renderWebImage: image must be loaded before it can be drawn");if(g.viewport.voi.windowWidth===g.image.windowWidth&&g.viewport.voi.windowCenter===g.image.windowCenter&&!1===g.viewport.invert){var m=g.canvas.getContext("2d",{desynchronized:!0});m.setTransform(1,0,0,1,0,0),m.fillStyle="black",m.fillRect(0,0,g.canvas.width,g.canvas.height),m.imageSmoothingEnabled=!g.viewport.pixelReplication,m.mozImageSmoothingEnabled=m.imageSmoothingEnabled,Object(r.default)(g,m);var o=Object(l.default)(g.image,g.viewport),n=o.tlhc.x-1,a=o.tlhc.y-1,u=o.brhc.x-n,c=o.brhc.y-a;m.drawImage(f.getImage(),n,a,u,c,n,a,u,c)}else Object(d.renderColorImage)(g,i)}},"./rendering/saveLastRendered.js":
/*!***************************************!*\
          !*** ./rendering/saveLastRendered.js ***!
          \***************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),t.default=function(r){var l=r.viewport,s=r.image.color;return r.renderingTools.lastRenderedImageId=r.image.imageId,r.renderingTools.lastRenderedIsColor=s,r.renderingTools.lastRenderedViewport={windowCenter:l.voi.windowCenter,windowWidth:l.voi.windowWidth,invert:l.invert,rotation:l.rotation,hflip:l.hflip,vflip:l.vflip,modalityLUT:l.modalityLUT,voiLUT:l.voiLUT,colormap:l.colormap},r.renderingTools}},"./requestPool/RequestPoolManager.ts":
/*!*******************************************!*\
          !*** ./requestPool/RequestPoolManager.ts ***!
          \*******************************************/
/*! exports provided: RequestPoolManager */function(b,t,e){"use strict";function r(o,n){var a=typeof Symbol<"u"&&o[Symbol.iterator]||o["@@iterator"];if(!a){if(Array.isArray(o)||(a=function d(o,n){if(o){if("string"==typeof o)return l(o,n);var a=Object.prototype.toString.call(o).slice(8,-1);if("Object"===a&&o.constructor&&(a=o.constructor.name),"Map"===a||"Set"===a)return Array.from(o);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return l(o,n)}}(o))||n&&o&&"number"==typeof o.length){a&&(o=a);var u=0,c=function(){};return{s:c,n:function(){return u>=o.length?{done:!0}:{done:!1,value:o[u++]}},e:function(O){throw O},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var E,v=!0,h=!1;return{s:function(){a=a.call(o)},n:function(){var O=a.next();return v=O.done,O},e:function(O){h=!0,E=O},f:function(){try{!v&&null!=a.return&&a.return()}finally{if(h)throw E}}}}function l(o,n){(null==n||n>o.length)&&(n=o.length);for(var a=0,u=new Array(n);a<n;a++)u[a]=o[a];return u}function g(o,n){for(var a=0;a<n.length;a++){var u=n[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(o,u.key,u)}}function f(o,n,a){return n in o?Object.defineProperty(o,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[n]=a,o}e.r(t),e.d(t,"RequestPoolManager",function(){return m});var m=function(){function o(){(function s(o,n){if(!(o instanceof n))throw new TypeError("Cannot call a class as a function")})(this,o),f(this,"requestPool",void 0),f(this,"awake",void 0),f(this,"numRequests",void 0),f(this,"maxNumRequests",void 0),f(this,"grabDelay",void 0),f(this,"timeoutHandle",void 0),this.requestPool={interaction:{0:[]},thumbnail:{0:[]},prefetch:{0:[]}},this.awake=!1,this.grabDelay=5,this.numRequests={interaction:0,thumbnail:0,prefetch:0},this.maxNumRequests={interaction:6,thumbnail:6,prefetch:5}}return function i(o,n,a){n&&g(o.prototype,n),a&&g(o,a)}(o,[{key:"destroy",value:function(){this.timeoutHandle&&window.clearTimeout(this.timeoutHandle)}},{key:"addRequest",value:function(a,u,c){var v=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,h=arguments.length>4&&void 0!==arguments[4]&&arguments[4],E={requestFn:a,type:u,additionalDetails:c};void 0===this.requestPool[u][v]&&(this.requestPool[u][v]=[]),h?this.requestPool[u][v].unshift(E):this.requestPool[u][v].push(E),this.awake||(this.awake=!0,this.startGrabbing())}},{key:"filterRequests",value:function(a){var u=this;Object.keys(this.requestPool).forEach(function(c){var v=u.requestPool[c];Object.keys(v).forEach(function(h){v[h]=v[h].filter(function(E){return a(E)})})})}},{key:"clearRequestStack",value:function(a){if(!this.requestPool[a])throw new Error("No category for the type ".concat(a," found"));this.requestPool[a]={0:[]}}},{key:"sendRequest",value:function(a){var u=this,c=a.requestFn,v=a.type;this.numRequests[v]++,this.awake=!0,c().finally(function(){u.numRequests[v]--,u.startAgain()})}},{key:"startGrabbing",value:function(){for(var c=this.maxNumRequests.interaction+this.maxNumRequests.thumbnail+this.maxNumRequests.prefetch-(this.numRequests.interaction+this.numRequests.thumbnail+this.numRequests.prefetch),v=0;v<c;v++){var h=this.getNextRequest();if(!1===h)break;h&&this.sendRequest(h)}}},{key:"startAgain",value:function(){var a=this;this.awake&&(this.grabDelay?this.timeoutHandle=window.setTimeout(function(){a.startGrabbing()},this.grabDelay):this.startGrabbing())}},{key:"getSortedPriorityGroups",value:function(a){var u=this;return Object.keys(this.requestPool[a]).map(Number).filter(function(v){return u.requestPool[a][v].length}).sort()}},{key:"getNextRequest",value:function(){var c,a=this.getSortedPriorityGroups("interaction"),u=r(a);try{for(u.s();!(c=u.n()).done;){var v=c.value;if(this.requestPool.interaction[v].length&&this.numRequests.interaction<this.maxNumRequests.interaction)return this.requestPool.interaction[v].shift()}}catch(j){u.e(j)}finally{u.f()}var M,h=this.getSortedPriorityGroups("thumbnail"),E=r(h);try{for(E.s();!(M=E.n()).done;){var O=M.value;if(this.requestPool.thumbnail[O].length&&this.numRequests.thumbnail<this.maxNumRequests.thumbnail)return this.requestPool.thumbnail[O].shift()}}catch(j){E.e(j)}finally{E.f()}var D,P=this.getSortedPriorityGroups("prefetch"),T=r(P);try{for(T.s();!(D=T.n()).done;){var y=D.value;if(this.requestPool.prefetch[y].length&&this.numRequests.prefetch<this.maxNumRequests.prefetch)return this.requestPool.prefetch[y].shift()}}catch(j){T.e(j)}finally{T.f()}return!a.length&&!h.length&&!P.length&&(this.awake=!1),!1}},{key:"getRequestPool",value:function(){return this.requestPool}}]),o}()},"./requestPool/imageLoadPoolManager.ts":
/*!*********************************************!*\
          !*** ./requestPool/imageLoadPoolManager.ts ***!
          \*********************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var d=new(e(
/*! ./RequestPoolManager.ts */
"./requestPool/RequestPoolManager.ts").RequestPoolManager);d.maxNumRequests={interaction:1e3,thumbnail:1e3,prefetch:1e3},d.grabDelay=0,t.default=d},"./requestPool/imageRetrievalPoolManager.ts":
/*!**************************************************!*\
          !*** ./requestPool/imageRetrievalPoolManager.ts ***!
          \**************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var d=new(e(
/*! ./RequestPoolManager.ts */
"./requestPool/RequestPoolManager.ts").RequestPoolManager);d.maxNumRequests={interaction:20,thumbnail:20,prefetch:20},d.grabDelay=0,t.default=d},"./reset.js":
/*!******************!*\
          !*** ./reset.js ***!
          \******************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./internal/getDefaultViewport.js */
"./internal/getDefaultViewport.js"),d=e(
/*! ./enabledElements.js */
"./enabledElements.js"),l=e(
/*! ./updateImage.js */
"./updateImage.js");t.default=function(s){var g=Object(d.getEnabledElement)(s);g.viewport=Object(r.default)(g.canvas,g.image),Object(l.default)(s)}},"./resize.js":
/*!*******************!*\
          !*** ./resize.js ***!
          \*******************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./enabledElements.js */
"./enabledElements.js"),d=e(
/*! ./fitToWindow.js */
"./fitToWindow.js"),l=e(
/*! ./updateImage.js */
"./updateImage.js"),s=e(
/*! ./triggerEvent.js */
"./triggerEvent.js"),g=e(
/*! ./internal/getImageSize.js */
"./internal/getImageSize.js"),i=e(
/*! ./events.js */
"./events.js");t.default=function(n,a){var u=Object(r.getEnabledElement)(n),c=u.canvas.width,v=u.canvas.height;!function f(n,a){a.width!==n.clientWidth&&(a.width=n.clientWidth,a.style.width="".concat(n.clientWidth,"px")),a.height!==n.clientHeight&&(a.height=n.clientHeight,a.style.height="".concat(n.clientHeight,"px"))}(n,u.canvas);var h={element:n};Object(s.default)(n,i.default.ELEMENT_RESIZED,h),void 0!==u.image&&(a||function m(n,a,u){var c=n.viewport.scale,v=Object(g.default)(n.image,n.viewport.rotation),h=Math.round(v.width*c),E=Math.round(v.height*c);return h===a&&E<=u||h<=a&&E===u&&0===n.viewport.translation.x&&0===n.viewport.translation.y}(u,c,v)?Object(d.default)(n):(function o(n,a,u){var c=n.viewport.scale,O=Math.sqrt(n.canvas.width/a*(n.canvas.height/u));n.viewport.scale=O*c}(u,c,v),Object(l.default)(n)))}},"./setToPixelCoordinateSystem.js":
/*!***************************************!*\
          !*** ./setToPixelCoordinateSystem.js ***!
          \***************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./internal/calculateTransform.js */
"./internal/calculateTransform.js");t.default=function(d,l,s){if(void 0===d)throw new Error("setToPixelCoordinateSystem: parameter enabledElement must not be undefined");if(void 0===l)throw new Error("setToPixelCoordinateSystem: parameter context must not be undefined");var g=Object(r.default)(d,s);l.setTransform(g.m[0],g.m[1],g.m[2],g.m[3],g.m[4],g.m[5])}},"./setViewport.js":
/*!************************!*\
          !*** ./setViewport.js ***!
          \************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./internal/getDefaultViewport.js */
"./internal/getDefaultViewport.js"),d=e(
/*! ./enabledElements.js */
"./enabledElements.js"),l=e(
/*! ./updateImage.js */
"./updateImage.js");t.default=function(i,f){var m=Object(d.getEnabledElement)(i);if(void 0===m.viewport&&(m.viewport=Object(r.default)(m.canvas)),f)for(var o in f)null!==f[o]&&(m.viewport[o]=f[o]);m.viewport.voi.windowWidth&&(m.viewport.voi.windowWidth=Math.max(m.viewport.voi.windowWidth,1e-6)),m.viewport.scale&&(m.viewport.scale=Math.max(m.viewport.scale,1e-4)),m.viewport.rotation%=360,m.viewport.rotation<0&&(m.viewport.rotation+=360),m.image&&Object(l.default)(i)}},"./triggerEvent.js":
/*!*************************!*\
          !*** ./triggerEvent.js ***!
          \*************************/
/*! exports provided: default */function(b,t,e){"use strict";function r(d,l){var g,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return"function"==typeof window.CustomEvent?g=new CustomEvent(l,{detail:s,cancelable:!0}):(g=document.createEvent("CustomEvent")).initCustomEvent(l,!0,!0,s),d.dispatchEvent(g)}e.r(t),e.d(t,"default",function(){return r})},"./updateImage.js":
/*!************************!*\
          !*** ./updateImage.js ***!
          \************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./enabledElements.js */
"./enabledElements.js"),d=e(
/*! ./internal/drawImage.js */
"./internal/drawImage.js");t.default=function(l){var s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],g=Object(r.getEnabledElement)(l);Object(d.default)(g,s)}},"./webgl/createProgramFromString.js":
/*!******************************************!*\
          !*** ./webgl/createProgramFromString.js ***!
          \******************************************/
/*! exports provided: default */function(b,t,e){"use strict";function r(l,s,g){var i=l.createShader(g);if(l.shaderSource(i,s),l.compileShader(i),!l.getShaderParameter(i,l.COMPILE_STATUS)&&!l.isContextLost()){var m=l.getShaderInfoLog(i);console.error("Could not compile shader:\n".concat(m))}return i}e.r(t),t.default=function(l,s,g){return function d(l,s,g){var i=l.createProgram();if(l.attachShader(i,s),l.attachShader(i,g),l.linkProgram(i),!l.getProgramParameter(i,l.LINK_STATUS)&&!l.isContextLost()){var m=l.getProgramInfoLog(i);console.error("WebGL program filed to link:\n".concat(m))}return i}(l,r(l,s,l.VERTEX_SHADER),r(l,g,l.FRAGMENT_SHADER))}},"./webgl/index.js":
/*!************************!*\
          !*** ./webgl/index.js ***!
          \************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./renderer.js */
"./webgl/renderer.js"),d=e(
/*! ./createProgramFromString.js */
"./webgl/createProgramFromString.js"),l=e(
/*! ./textureCache.js */
"./webgl/textureCache.js"),s={createProgramFromString:d.default,renderer:{render:r.render,initRenderer:r.initRenderer,getRenderCanvas:r.getRenderCanvas,isWebGLAvailable:r.isWebGLAvailable},textureCache:l.default};Object.defineProperty(s,"isWebGLInitialized",{enumerable:!0,configurable:!1,get:function(){return r.isWebGLInitialized}}),t.default=s},"./webgl/renderer.js":
/*!***************************!*\
          !*** ./webgl/renderer.js ***!
          \***************************/
/*! exports provided: isWebGLInitialized, getRenderCanvas, initRenderer, render, isWebGLAvailable */function(b,t,e){"use strict";e.r(t),e.d(t,"isWebGLInitialized",function(){return o}),e.d(t,"getRenderCanvas",function(){return n}),e.d(t,"initRenderer",function(){return u}),e.d(t,"render",function(){return j}),e.d(t,"isWebGLAvailable",function(){return C});var i,f,m,r=e(
/*! ./shaders/index.js */
"./webgl/shaders/index.js"),d=e(
/*! ./vertexShader.js */
"./webgl/vertexShader.js"),l=e(
/*! ./textureCache.js */
"./webgl/textureCache.js"),s=e(
/*! ./createProgramFromString.js */
"./webgl/createProgramFromString.js"),g=document.createElement("canvas"),o=!1;function n(){return g}function u(){!0!==o&&function E(I){i=null;try{var B={desynchronized:!0,preserveDrawingBuffer:!0};i=I.getContext("webgl",B)||I.getContext("experimental-webgl",B),I.removeEventListener("webglcontextlost",v,!1),I.addEventListener("webglcontextlost",v,!1),I.removeEventListener("webglcontextrestored",h,!1),I.addEventListener("webglcontextrestored",h,!1)}catch{throw new Error("Error creating WebGL context")}return i||(console.error("Unable to initialize WebGL. Your browser may not support it."),i=null),i}(g)&&(function D(){m=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,m),i.bufferData(i.ARRAY_BUFFER,new Float32Array([1,1,0,1,1,0,0,0]),i.STATIC_DRAW),f=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,f),i.bufferData(i.ARRAY_BUFFER,new Float32Array([1,1,0,1,1,0,0,0]),i.STATIC_DRAW)}(),function a(){for(var I in r.shaders){var B=r.shaders[I];B.attributes={},B.uniforms={},B.vert=d.vertexShader,B.program=Object(s.default)(i,B.vert,B.frag),B.attributes.texCoordLocation=i.getAttribLocation(B.program,"a_texCoord"),i.enableVertexAttribArray(B.attributes.texCoordLocation),B.attributes.positionLocation=i.getAttribLocation(B.program,"a_position"),i.enableVertexAttribArray(B.attributes.positionLocation),B.uniforms.resolutionLocation=i.getUniformLocation(B.program,"u_resolution")}}(),o=!0)}function v(I){I.preventDefault(),console.warn("WebGL Context Lost!")}function h(I){I.preventDefault(),o=!1,l.default.purgeCache(),u()}function M(I){if(I.color)return"rgb";var B=I.getPixelData();return B instanceof Int16Array?"int16":B instanceof Uint16Array?"uint16":B instanceof Int8Array?"int8":"uint8"}function j(I){var B=I.image;g.width=B.width,g.height=B.height;var S=I.viewport,K=function O(I){var B=M(I);return r.shaders.hasOwnProperty(B)?r.shaders[B]:r.shaders.rgb}(B),H=function T(I){var B=l.default.getImageTexture(I.imageId);return B||(B=function P(I){var B={uint8:i.LUMINANCE,int8:i.LUMINANCE_ALPHA,uint16:i.LUMINANCE_ALPHA,int16:i.RGB,rgb:i.RGB},K=M(I),H=B[K],W=i.createTexture();i.bindTexture(i.TEXTURE_2D,W),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.pixelStorei(i.UNPACK_ALIGNMENT,1);var L=r.dataUtilities[K].storedPixelDataToImageData(I,I.width,I.height);return i.texImage2D(i.TEXTURE_2D,0,H,I.width,I.height,0,H,i.UNSIGNED_BYTE,L),{texture:W,sizeInBytes:I.width*I.height*{int8:1,uint16:2,int16:3,rgb:3}[K]}}(I),l.default.putImageTexture(I,B)),B.texture}(B);return function y(I,B,S,K,H){for(var W in i.clearColor(1,0,0,1),i.viewport(0,0,K,H),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.useProgram(I.program),i.bindBuffer(i.ARRAY_BUFFER,f),i.vertexAttribPointer(I.attributes.texCoordLocation,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,m),i.vertexAttribPointer(I.attributes.positionLocation,2,i.FLOAT,!1,0,0),B){var L=i.getUniformLocation(I.program,W);if(L){var x=B[W],_=x.type,R=x.value;"i"===_?i.uniform1i(L,R):"f"===_?i.uniform1f(L,R):"2f"===_&&i.uniform2f(L,R[0],R[1])}}(function c(I,B,S){I.bufferData(I.ARRAY_BUFFER,new Float32Array([B,S,0,S,B,0,0,0]),I.STATIC_DRAW)})(i,K,H),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,S),i.drawArrays(i.TRIANGLE_STRIP,0,4)}(K,{u_resolution:{type:"2f",value:[B.width,B.height]},wc:{type:"f",value:S.voi.windowCenter},ww:{type:"f",value:S.voi.windowWidth},slope:{type:"f",value:B.slope},intercept:{type:"f",value:B.intercept},minPixelValue:{type:"f",value:B.minPixelValue},invert:{type:"i",value:S.invert?1:0}},H,B.width,B.height),g}function C(){var I={failIfMajorPerformanceCaveat:!0};try{var B=document.createElement("canvas");return!!window.WebGLRenderingContext&&(B.getContext("webgl",I)||B.getContext("experimental-webgl",I))}catch{return!1}}},"./webgl/shaders/index.js":
/*!********************************!*\
          !*** ./webgl/shaders/index.js ***!
          \********************************/
/*! exports provided: shaders, dataUtilities */function(b,t,e){"use strict";e.r(t),e.d(t,"shaders",function(){return i}),e.d(t,"dataUtilities",function(){return f});var r=e(
/*! ./int16.js */
"./webgl/shaders/int16.js"),d=e(
/*! ./int8.js */
"./webgl/shaders/int8.js"),l=e(
/*! ./rgb.js */
"./webgl/shaders/rgb.js"),s=e(
/*! ./uint16.js */
"./webgl/shaders/uint16.js"),g=e(
/*! ./uint8.js */
"./webgl/shaders/uint8.js"),i={int16:r.int16Shader,int8:d.int8Shader,rgb:l.rgbShader,uint16:s.uint16Shader,uint8:g.uint8Shader},f={int16:r.int16DataUtilities,int8:d.int8DataUtilities,rgb:l.rgbDataUtilities,uint16:s.uint16DataUtilities,uint8:g.uint8DataUtilities}},"./webgl/shaders/int16.js":
/*!********************************!*\
          !*** ./webgl/shaders/int16.js ***!
          \********************************/
/*! exports provided: int16DataUtilities, int16Shader */function(b,t,e){"use strict";e.r(t),e.d(t,"int16DataUtilities",function(){return l}),e.d(t,"int16Shader",function(){return r});var r={},l={storedPixelDataToImageData:function d(s){for(var g=s.getPixelData(),f=new Uint8Array(s.width*s.height*3),m=0,o=0;o<g.length;o++){var n=Math.abs(g[o]);f[m++]=255&n,f[m++]=n>>8,f[m++]=g[o]<0?0:1}return f}};r.frag="precision mediump float;uniform sampler2D u_image;uniform float ww;uniform float wc;uniform float slope;uniform float intercept;uniform int invert;varying vec2 v_texCoord;void main() {vec4 color = texture2D(u_image, v_texCoord);float intensity = color.r*256.0 + color.g*65536.0;if (color.b == 0.0)intensity = -intensity;intensity = intensity * slope + intercept;float center0 = wc - 0.5;float width0 = max(ww, 1.0);intensity = (intensity - center0) / width0 + 0.5;intensity = clamp(intensity, 0.0, 1.0);gl_FragColor = vec4(intensity, intensity, intensity, 1.0);if (invert == 1)gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;}"},"./webgl/shaders/int8.js":
/*!*******************************!*\
          !*** ./webgl/shaders/int8.js ***!
          \*******************************/
/*! exports provided: int8DataUtilities, int8Shader */function(b,t,e){"use strict";e.r(t),e.d(t,"int8DataUtilities",function(){return l}),e.d(t,"int8Shader",function(){return r});var r={},l={storedPixelDataToImageData:function d(s){for(var g=s.getPixelData(),f=new Uint8Array(s.width*s.height*2),m=0,o=0;o<g.length;o++)f[m++]=g[o],f[m++]=g[o]<0?0:1;return f}};r.frag="precision mediump float;uniform sampler2D u_image;uniform float ww;uniform float wc;uniform float slope;uniform float intercept;uniform int invert;varying vec2 v_texCoord;void main() {vec4 color = texture2D(u_image, v_texCoord);float intensity = color.r*256.;if (color.a == 0.0)intensity = -intensity;intensity = intensity * slope + intercept;float center0 = wc - 0.5;float width0 = max(ww, 1.0);intensity = (intensity - center0) / width0 + 0.5;intensity = clamp(intensity, 0.0, 1.0);gl_FragColor = vec4(intensity, intensity, intensity, 1.0);if (invert == 1)gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;}"},"./webgl/shaders/rgb.js":
/*!******************************!*\
          !*** ./webgl/shaders/rgb.js ***!
          \******************************/
/*! exports provided: rgbDataUtilities, rgbShader */function(b,t,e){"use strict";e.r(t),e.d(t,"rgbDataUtilities",function(){return l}),e.d(t,"rgbShader",function(){return r});var r={},l={storedPixelDataToImageData:function d(s){var g=s.minPixelValue,i=0,f=0,m=s.width*s.height*4,o=s.width*s.height*3,n=s.getPixelData(),a=new Uint8Array(o);if(g<0)for(;f<m;)a[i++]=n[f++]+-g,a[i++]=n[f++]+-g,a[i++]=n[f++]+-g,f+=1;else for(;f<m;)a[i++]=n[f++],a[i++]=n[f++],a[i++]=n[f++],f+=1;return a}};r.frag="precision mediump float;uniform sampler2D u_image;uniform float ww;uniform float wc;uniform float slope;uniform float intercept;uniform float minPixelValue;uniform int invert;varying vec2 v_texCoord;void main() {vec3 color = texture2D(u_image, v_texCoord).xyz;color = color * 256.0 * slope + intercept;float center0 = wc - 0.5 - minPixelValue;float width0 = max(ww, 1.0);color = (color - center0) / width0 + 0.5;gl_FragColor = vec4(color, 1);if (invert == 1)gl_FragColor.rgb = 1. - gl_FragColor.rgb;}"},"./webgl/shaders/uint16.js":
/*!*********************************!*\
          !*** ./webgl/shaders/uint16.js ***!
          \*********************************/
/*! exports provided: uint16DataUtilities, uint16Shader */function(b,t,e){"use strict";e.r(t),e.d(t,"uint16DataUtilities",function(){return l}),e.d(t,"uint16Shader",function(){return r});var r={},l={storedPixelDataToImageData:function d(s){for(var g=s.getPixelData(),f=new Uint8Array(s.width*s.height*2),m=0,o=0;o<g.length;o++){var n=g[o];f[m++]=255&n,f[m++]=n>>8}return f}};r.frag="precision mediump float;uniform sampler2D u_image;uniform float ww;uniform float wc;uniform float slope;uniform float intercept;uniform int invert;varying vec2 v_texCoord;void main() {vec4 color = texture2D(u_image, v_texCoord);float intensity = color.r*256.0 + color.a*65536.0;intensity = intensity * slope + intercept;float center0 = wc - 0.5;float width0 = max(ww, 1.0);intensity = (intensity - center0) / width0 + 0.5;intensity = clamp(intensity, 0.0, 1.0);gl_FragColor = vec4(intensity, intensity, intensity, 1.0);if (invert == 1)gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;}"},"./webgl/shaders/uint8.js":
/*!********************************!*\
          !*** ./webgl/shaders/uint8.js ***!
          \********************************/
/*! exports provided: uint8DataUtilities, uint8Shader */function(b,t,e){"use strict";e.r(t),e.d(t,"uint8DataUtilities",function(){return l}),e.d(t,"uint8Shader",function(){return r});var r={},l={storedPixelDataToImageData:function d(s){return s.getPixelData()}};r.frag="precision mediump float;uniform sampler2D u_image;uniform float ww;uniform float wc;uniform float slope;uniform float intercept;uniform int invert;varying vec2 v_texCoord;void main() {vec4 color = texture2D(u_image, v_texCoord);float intensity = color.r*256.0;intensity = intensity * slope + intercept;float center0 = wc - 0.5;float width0 = max(ww, 1.0);intensity = (intensity - center0) / width0 + 0.5;intensity = clamp(intensity, 0.0, 1.0);gl_FragColor = vec4(intensity, intensity, intensity, 1.0);if (invert == 1)gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;}"},"./webgl/textureCache.js":
/*!*******************************!*\
          !*** ./webgl/textureCache.js ***!
          \*******************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../events.js */
"./events.js"),d=e(
/*! ../triggerEvent.js */
"./triggerEvent.js"),l={},s=[],g=268435456,i=0;function m(){if(!(i<=g)){for(s.sort(function v(M,O){return M.timeStamp>O.timeStamp?-1:M.timeStamp<O.timeStamp?1:0});i>g;){var h=s[s.length-1];i-=h.sizeInBytes,delete l[h.imageId],s.pop(),Object(d.default)(r.events,r.default.WEBGL_TEXTURE_REMOVED,{imageId:h.imageId})}var E=function f(){return{maximumSizeInBytes:g,cacheSizeInBytes:i,numberOfImagesCached:s.length}}();Object(d.default)(r.events,r.default.WEBGL_TEXTURE_CACHE_FULL,E)}}t.default={purgeCache:function c(){for(;s.length>0;){var v=s.pop();delete l[v.imageId]}i=0},getImageTexture:function a(v){if(void 0===v)throw new Error("getImageTexture: imageId must not be undefined");var h=l[v];if(void 0!==h)return h.timeStamp=new Date,h.imageTexture},putImageTexture:function n(v,h){var E=v.imageId;if(void 0===v)throw new Error("putImageTexture: image must not be undefined");if(void 0===E)throw new Error("putImageTexture: imageId must not be undefined");if(void 0===h)throw new Error("putImageTexture: imageTexture must not be undefined");if(!0===Object.prototype.hasOwnProperty.call(l,E))throw new Error("putImageTexture: imageId already in cache");var M={imageId:E,imageTexture:h,timeStamp:new Date,sizeInBytes:h.sizeInBytes};if(l[E]=M,s.push(M),void 0===h.sizeInBytes)throw new Error("putImageTexture: imageTexture.sizeInBytes must not be undefined");if(void 0===h.sizeInBytes.toFixed)throw new Error("putImageTexture: imageTexture.sizeInBytes is not a number");i+=M.sizeInBytes,m()},removeImageTexture:function u(v){if(void 0===v)throw new Error("removeImageTexture: imageId must not be undefined");var h=l[v];if(void 0===h)throw new Error("removeImageTexture: imageId must not be undefined");return s.splice(s.indexOf(h),1),i-=h.sizeInBytes,delete l[v],h.imageTexture},setMaximumSizeBytes:function o(v){if(void 0===v)throw new Error("setMaximumSizeBytes: parameter numBytes must not be undefined");if(void 0===v.toFixed)throw new Error("setMaximumSizeBytes: parameter numBytes must be a number");g=v,m()}}},"./webgl/vertexShader.js":
/*!*******************************!*\
          !*** ./webgl/vertexShader.js ***!
          \*******************************/
/*! exports provided: vertexShader */function(b,t,e){"use strict";e.r(t),e.d(t,"vertexShader",function(){return r});var r="attribute vec2 a_position;attribute vec2 a_texCoord;uniform vec2 u_resolution;varying vec2 v_texCoord;void main() {vec2 zeroToOne = a_position / u_resolution;vec2 zeroToTwo = zeroToOne * 2.0;vec2 clipSpace = zeroToTwo - 1.0;gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);v_texCoord = a_texCoord;}"}})}),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("cornerstone-math",[],e):"object"==typeof exports?exports["cornerstone-math"]=e():t.cornerstoneMath=e()}(window,function(){return function(b){var e=window.webpackHotUpdate;window.webpackHotUpdate=function(p,U){(function B(A,p){if(P[A]&&O[A]){for(var U in O[A]=!1,p)Object.prototype.hasOwnProperty.call(p,U)&&(D[U]=p[U]);0==--h&&0===E&&K()}})(p,U),e&&e(p,U)};var f,l=!0,s="d9f71be1fa337ff6cfe7",g=1e4,i={},m=[],o=[];function n(A){var p=_[A];if(!p)return R;var U=function(V){return p.hot.active?(_[V]?-1===_[V].parents.indexOf(A)&&_[V].parents.push(A):(m=[A],f=V),-1===p.children.indexOf(V)&&p.children.push(V)):(console.warn("[HMR] unexpected require("+V+") from disposed module "+A),m=[]),R(V)},F=function(Y){return{configurable:!0,enumerable:!0,get:function(){return R[Y]},set:function(J){R[Y]=J}}};for(var N in R)Object.prototype.hasOwnProperty.call(R,N)&&"e"!==N&&"t"!==N&&Object.defineProperty(U,N,F(N));return U.e=function(V){return"ready"===c&&v("prepare"),E++,R.e(V).then(Y,function(J){throw Y(),J});function Y(){E--,"prepare"===c&&(M[V]||S(V),0===E&&0===h&&K())}},U.t=function(V,Y){return 1&Y&&(V=U(V)),R.t(V,-2&Y)},U}function a(A){var p={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:f!==A,active:!0,accept:function(U,F){if(void 0===U)p._selfAccepted=!0;else if("function"==typeof U)p._selfAccepted=U;else if("object"==typeof U)for(var N=0;N<U.length;N++)p._acceptedDependencies[U[N]]=F||function(){};else p._acceptedDependencies[U]=F||function(){}},decline:function(U){if(void 0===U)p._selfDeclined=!0;else if("object"==typeof U)for(var F=0;F<U.length;F++)p._declinedDependencies[U[F]]=!0;else p._declinedDependencies[U]=!0},dispose:function(U){p._disposeHandlers.push(U)},addDisposeHandler:function(U){p._disposeHandlers.push(U)},removeDisposeHandler:function(U){var F=p._disposeHandlers.indexOf(U);F>=0&&p._disposeHandlers.splice(F,1)},invalidate:function(){switch(this._selfInvalidated=!0,c){case"idle":(D={})[A]=b[A],v("ready");break;case"ready":x(A);break;case"prepare":case"check":case"dispose":case"apply":(j=j||[]).push(A)}},check:I,apply:H,status:function(U){if(!U)return c;u.push(U)},addStatusHandler:function(U){u.push(U)},removeStatusHandler:function(U){var F=u.indexOf(U);F>=0&&u.splice(F,1)},data:i[A]};return f=void 0,p}var u=[],c="idle";function v(A){c=A;for(var p=0;p<u.length;p++)u[p].call(null,A)}var T,D,y,j,h=0,E=0,M={},O={},P={};function C(A){return+A+""===A?+A:A}function I(A){if("idle"!==c)throw new Error("check() is only allowed in idle status");return l=A,v("check"),function d(A){return A=A||1e4,new Promise(function(p,U){if(typeof XMLHttpRequest>"u")return U(new Error("No browser support"));try{var F=new XMLHttpRequest,N=R.p+""+s+".hot-update.json";F.open("GET",N,!0),F.timeout=A,F.send(null)}catch(V){return U(V)}F.onreadystatechange=function(){if(4===F.readyState)if(0===F.status)U(new Error("Manifest request to "+N+" timed out."));else if(404===F.status)p();else if(200!==F.status&&304!==F.status)U(new Error("Manifest request to "+N+" failed."));else{try{var V=JSON.parse(F.responseText)}catch(Y){return void U(Y)}p(V)}}})}(g).then(function(p){if(!p)return v(L()?"ready":"idle"),null;O={},M={},P=p.c,y=p.h,v("prepare");var U=new Promise(function(N,V){T={resolve:N,reject:V}});return D={},S("cornerstoneMath"),"prepare"===c&&0===E&&0===h&&K(),U})}function S(A){P[A]?(O[A]=!0,h++,function r(A){var p=document.createElement("script");p.charset="utf-8",p.src=R.p+""+A+"."+s+".hot-update.js",document.head.appendChild(p)}(A)):M[A]=!0}function K(){v("ready");var A=T;if(T=null,A)if(l)Promise.resolve().then(function(){return H(l)}).then(function(F){A.resolve(F)},function(F){A.reject(F)});else{var p=[];for(var U in D)Object.prototype.hasOwnProperty.call(D,U)&&p.push(C(U));A.resolve(p)}}function H(A){if("ready"!==c)throw new Error("apply() is only allowed in ready status");return W(A=A||{})}function W(A){var p,U,F,N,V;function Y(Oe){for(var ge=[Oe],Te={},me=ge.map(function(Ae){return{chain:[Ae],id:Ae}});me.length>0;){var De=me.pop(),Ce=De.id,je=De.chain;if((N=_[Ce])&&(!N.hot._selfAccepted||N.hot._selfInvalidated)){if(N.hot._selfDeclined)return{type:"self-declined",chain:je,moduleId:Ce};if(N.hot._main)return{type:"unaccepted",chain:je,moduleId:Ce};for(var ye=0;ye<N.parents.length;ye++){var Le=N.parents[ye],_e=_[Le];if(_e){if(_e.hot._declinedDependencies[Ce])return{type:"declined",chain:je.concat([Le]),moduleId:Ce,parentId:Le};if(-1===ge.indexOf(Le)){if(_e.hot._acceptedDependencies[Ce]){Te[Le]||(Te[Le]=[]),J(Te[Le],[Ce]);continue}delete Te[Le],ge.push(Le),me.push({chain:je.concat([Le]),id:Le})}}}}}return{type:"accepted",moduleId:Oe,outdatedModules:ge,outdatedDependencies:Te}}function J(Oe,ge){for(var Te=0;Te<ge.length;Te++){var me=ge[Te];-1===Oe.indexOf(me)&&Oe.push(me)}}L();var ee={},q=[],le={},Q=function(){console.warn("[HMR] unexpected require("+w.moduleId+") to disposed module")};for(var X in D)if(Object.prototype.hasOwnProperty.call(D,X)){var w;V=C(X);var $=!1,k=!1,ae=!1,te="";switch((w=D[X]?Y(V):{type:"disposed",moduleId:X}).chain&&(te="\nUpdate propagation: "+w.chain.join(" -> ")),w.type){case"self-declined":A.onDeclined&&A.onDeclined(w),A.ignoreDeclined||($=new Error("Aborted because of self decline: "+w.moduleId+te));break;case"declined":A.onDeclined&&A.onDeclined(w),A.ignoreDeclined||($=new Error("Aborted because of declined dependency: "+w.moduleId+" in "+w.parentId+te));break;case"unaccepted":A.onUnaccepted&&A.onUnaccepted(w),A.ignoreUnaccepted||($=new Error("Aborted because "+V+" is not accepted"+te));break;case"accepted":A.onAccepted&&A.onAccepted(w),k=!0;break;case"disposed":A.onDisposed&&A.onDisposed(w),ae=!0;break;default:throw new Error("Unexception type "+w.type)}if($)return v("abort"),Promise.reject($);if(k)for(V in le[V]=D[V],J(q,w.outdatedModules),w.outdatedDependencies)Object.prototype.hasOwnProperty.call(w.outdatedDependencies,V)&&(ee[V]||(ee[V]=[]),J(ee[V],w.outdatedDependencies[V]));ae&&(J(q,[w.moduleId]),le[V]=Q)}var re,oe=[];for(U=0;U<q.length;U++)_[V=q[U]]&&_[V].hot._selfAccepted&&le[V]!==Q&&!_[V].hot._selfInvalidated&&oe.push({module:V,parents:_[V].parents.slice(),errorHandler:_[V].hot._selfAccepted});v("dispose"),Object.keys(P).forEach(function(Oe){!1===P[Oe]&&function t(A){delete installedChunks[A]}(Oe)});for(var se,ie=q.slice();ie.length>0;)if(V=ie.pop(),N=_[V]){var fe={},ue=N.hot._disposeHandlers;for(F=0;F<ue.length;F++)(p=ue[F])(fe);for(i[V]=fe,N.hot.active=!1,delete _[V],delete ee[V],F=0;F<N.children.length;F++){var ve=_[N.children[F]];ve&&(se=ve.parents.indexOf(V))>=0&&ve.parents.splice(se,1)}}for(V in ee)if(Object.prototype.hasOwnProperty.call(ee,V)&&(N=_[V]))for(re=ee[V],F=0;F<re.length;F++)(se=N.children.indexOf(re[F]))>=0&&N.children.splice(se,1);for(V in v("apply"),void 0!==y&&(s=y,y=void 0),D=void 0,le)Object.prototype.hasOwnProperty.call(le,V)&&(b[V]=le[V]);var de=null;for(V in ee)if(Object.prototype.hasOwnProperty.call(ee,V)&&(N=_[V])){re=ee[V];var Me=[];for(U=0;U<re.length;U++)if(p=N.hot._acceptedDependencies[re[U]]){if(-1!==Me.indexOf(p))continue;Me.push(p)}for(U=0;U<Me.length;U++){p=Me[U];try{p(re)}catch(Oe){A.onErrored&&A.onErrored({type:"accept-errored",moduleId:V,dependencyId:re[U],error:Oe}),A.ignoreErrored||de||(de=Oe)}}}for(U=0;U<oe.length;U++){var Ee=oe[U];m=Ee.parents,f=V=Ee.module;try{R(V)}catch(Oe){if("function"==typeof Ee.errorHandler)try{Ee.errorHandler(Oe)}catch(ge){A.onErrored&&A.onErrored({type:"self-accept-error-handler-errored",moduleId:V,error:ge,originalError:Oe}),A.ignoreErrored||de||(de=ge),de||(de=Oe)}else A.onErrored&&A.onErrored({type:"self-accept-errored",moduleId:V,error:Oe}),A.ignoreErrored||de||(de=Oe)}}return de?(v("fail"),Promise.reject(de)):j?W(A).then(function(Oe){return q.forEach(function(ge){Oe.indexOf(ge)<0&&Oe.push(ge)}),Oe}):(v("idle"),new Promise(function(Oe){Oe(q)}))}function L(){if(j)return D||(D={}),j.forEach(x),j=void 0,!0}function x(A){Object.prototype.hasOwnProperty.call(D,A)||(D[A]=b[A])}var _={};function R(A){if(_[A])return _[A].exports;var p=_[A]={i:A,l:!1,exports:{},hot:a(A),parents:(o=m,m=[],o),children:[]};return b[A].call(p.exports,p,p.exports,n(A)),p.l=!0,p.exports}return R.m=b,R.c=_,R.d=function(A,p,U){R.o(A,p)||Object.defineProperty(A,p,{enumerable:!0,get:U})},R.r=function(A){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(A,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(A,"__esModule",{value:!0})},R.t=function(A,p){if(1&p&&(A=R(A)),8&p||4&p&&"object"==typeof A&&A&&A.__esModule)return A;var U=Object.create(null);if(R.r(U),Object.defineProperty(U,"default",{enumerable:!0,value:A}),2&p&&"string"!=typeof A)for(var F in A)R.d(U,F,function(N){return A[N]}.bind(null,F));return U},R.n=function(A){var p=A&&A.__esModule?function(){return A.default}:function(){return A};return R.d(p,"a",p),p},R.o=function(A,p){return Object.prototype.hasOwnProperty.call(A,p)},R.p="",R.h=function(){return s},n("./index.js")(R.s="./index.js")}({"./Line3.js":
/*!******************!*\
          !*** ./Line3.js ***!
          \******************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function m(o,n){for(var a=0;a<n.length;a++){var u=n[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(o,u.key,u)}}return function(o,n,a){return n&&m(o.prototype,n),a&&m(o,a),o}}(),l=function g(m){return m&&m.__esModule?m:{default:m}}(e(
/*! ./vector3.js */
"./vector3.js")),s=e(
/*! ./math.js */
"./math.js"),f=function(){function m(o,n){(function i(m,o){if(!(m instanceof o))throw new TypeError("Cannot call a class as a function")})(this,m),this.start=void 0!==o?o:new l.default,this.end=void 0!==n?n:new l.default}return r(m,[{key:"set",value:function(n,a){return this.start.copy(n),this.end.copy(a),this}},{key:"copy",value:function(n){return this.start.copy(n.start),this.end.copy(n.end),this}},{key:"center",value:function(n){return(n||new l.default).addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(n){return(n||new l.default).subVectors(this.end,this.start)}},{key:"distanceSq",value:function(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(n,a){var u=a||new l.default;return this.delta(u).multiplyScalar(n).add(this.start)}},{key:"closestPointToPointParameter",value:function(n,a){var u=new l.default,c=new l.default;u.subVectors(n,this.start),c.subVectors(this.end,this.start);var v=c.dot(c),E=c.dot(u)/v;return a&&(E=(0,s.clamp)(E,0,1)),E}},{key:"closestPointToPoint",value:function(n,a,u){var c=this.closestPointToPointParameter(n,a),v=u||new l.default;return this.delta(v).multiplyScalar(c).add(this.start)}},{key:"applyMatrix4",value:function(n){return this.start.applyMatrix4(n),this.end.applyMatrix4(n),this}},{key:"equals",value:function(n){return n.start.equals(this.start)&&n.end.equals(this.end)}},{key:"clone",value:function(){return(new m).copy(this)}},{key:"intersectLine",value:function(n){var a=this.end.clone().sub(this.start),u=n.end.clone().sub(n.start),c=n.start.clone().sub(this.start),v=a.clone().cross(u),h=c.clone().cross(u),M=c.dot(v)/(c.lengthSq()*v.lengthSq());if((0,s.approximatelyEquals)(M,0)){var O=h.dot(v)/v.lengthSq();if(!(O>1||isNaN(O))){var P=this.start.clone().add(a.clone().multiplyScalar(O));if(P.clone().sub(n.start).lengthSq()+P.clone().sub(n.end).lengthSq()<=n.distanceSq())return P}}}}]),m}();t.default=f},"./index.js":
/*!******************!*\
          !*** ./index.js ***!
          \******************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Vector3=t.rect=t.quaternion=t.point=t.Plane=t.Matrix4=t.sign=t.radToDeg=t.degToRad=t.clamp=t.lineSegment=t.Line3=void 0;var d=O(e(
/*! ./Line3.js */
"./Line3.js")),s=O(e(
/*! ./lineSegment.js */
"./lineSegment.js")),g=e(
/*! ./math.js */
"./math.js"),f=O(e(
/*! ./matrix4.js */
"./matrix4.js")),o=O(e(
/*! ./plane.js */
"./plane.js")),a=O(e(
/*! ./point.js */
"./point.js")),c=O(e(
/*! ./quaternion.js */
"./quaternion.js")),h=O(e(
/*! ./rect.js */
"./rect.js")),M=O(e(
/*! ./vector3.js */
"./vector3.js"));function O(T){return T&&T.__esModule?T:{default:T}}var P={Line3:d.default,lineSegment:s.default,clamp:g.clamp,degToRad:g.degToRad,radToDeg:g.radToDeg,sign:g.sign,Matrix4:f.default,Plane:o.default,point:a.default,quaternion:c.default,rect:h.default,Vector3:M.default};t.Line3=d.default,t.lineSegment=s.default,t.clamp=g.clamp,t.degToRad=g.degToRad,t.radToDeg=g.radToDeg,t.sign=g.sign,t.Matrix4=f.default,t.Plane=o.default,t.point=a.default,t.quaternion=c.default,t.rect=h.default,t.Vector3=M.default,t.default=P},"./lineSegment.js":
/*!************************!*\
          !*** ./lineSegment.js ***!
          \************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(
/*! ./math.js */
"./math.js");function d(m){return m*m}function l(m,o){return d(m.x-o.x)+d(m.y-o.y)}t.default={distanceToPoint:function g(m,o){return Math.sqrt(function s(m,o){var n=l(m.start,m.end);if(0===n)return l(o,m.start);var a=((o.x-m.start.x)*(m.end.x-m.start.x)+(o.y-m.start.y)*(m.end.y-m.start.y))/n;return l(o,a<0?m.start:a>1?m.end:{x:m.start.x+a*(m.end.x-m.start.x),y:m.start.y+a*(m.end.y-m.start.y)})}(m,o))},intersectLine:function i(m,o){var P,D,j,S,K,n={},a=m.start.x,u=m.start.y,c=m.end.x,v=m.end.y,h=o.start.x,E=o.start.y,M=o.end.x,O=o.end.y,T=void 0,y=void 0,C=void 0,I=void 0,B=void 0,H=void 0,W=void 0;if(K=(P=v-u)*M+(D=a-c)*O+(j=c*u-a*v),(0===(S=P*h+D*E+j)||0===K||(0,r.sign)(S)!==(0,r.sign)(K))&&(B=(T=O-E)*c+(y=h-M)*v+(C=M*E-h*O),0===(I=T*a+y*u+C)||0===B||(0,r.sign)(I)!==(0,r.sign)(B))){H=P*y-T*D,W=D*C-y*j;var L=parseFloat(W/H);W=T*j-P*C;var x=parseFloat(W/H);return n.x=L,n.y=x,n}}}},"./math.js":
/*!*****************!*\
          !*** ./math.js ***!
          \*****************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clamp=function d(f,m,o){return f<m?m:f>o?o:f},t.degToRad=function l(f){return f*(Math.PI/180)},t.approximatelyEquals=function i(f,m,o){var n=o||1e-4;return Math.abs(f-m)<=n*Math.max(1,Math.abs(f),Math.abs(m))},t.radToDeg=function s(f){return f*(180/Math.PI)},t.sign=function g(f){return"number"==typeof f?f?f<0?-1:1:f==f?0:NaN:NaN}},"./matrix4.js":
/*!********************!*\
          !*** ./matrix4.js ***!
          \********************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function f(m,o){for(var n=0;n<o.length;n++){var a=o[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(m,a.key,a)}}return function(m,o,n){return o&&f(m.prototype,o),n&&f(m,n),m}}(),l=function s(f){return f&&f.__esModule?f:{default:f}}(e(
/*! ./vector3.js */
"./vector3.js")),i=function(){function f(m,o,n,a,u,c,v,h,E,M,O,P,T,D,y,j){(function g(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")})(this,f),this.elements=new Float32Array(16);var C=this.elements;C[0]=void 0!==m?m:1,C[4]=o||0,C[8]=n||0,C[12]=a||0,C[1]=u||0,C[5]=void 0!==c?c:1,C[9]=v||0,C[13]=h||0,C[2]=E||0,C[6]=M||0,C[10]=void 0!==O?O:1,C[14]=P||0,C[3]=T||0,C[7]=D||0,C[11]=y||0,C[15]=void 0!==j?j:1}return r(f,[{key:"makeRotationFromQuaternion",value:function(o){var n=this.elements,a=o.x,u=o.y,c=o.z,v=o.w,h=a+a,E=u+u,M=c+c,O=a*h,P=a*E,T=a*M,D=u*E,y=u*M,j=c*M,C=v*h,I=v*E,B=v*M;return n[0]=1-(D+j),n[4]=P-B,n[8]=T+I,n[1]=P+B,n[5]=1-(O+j),n[9]=y-C,n[2]=T-I,n[6]=y+C,n[10]=1-(O+D),n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}},{key:"multiplyMatrices",value:function(o,n){var a=o.elements,u=n.elements,c=this.elements,v=a[0],h=a[4],E=a[8],M=a[12],O=a[1],P=a[5],T=a[9],D=a[13],y=a[2],j=a[6],C=a[10],I=a[14],B=a[3],S=a[7],K=a[11],H=a[15],W=u[0],L=u[4],x=u[8],_=u[12],R=u[1],A=u[5],p=u[9],U=u[13],F=u[2],N=u[6],V=u[10],Y=u[14],J=u[3],ee=u[7],q=u[11],le=u[15];return c[0]=v*W+h*R+E*F+M*J,c[4]=v*L+h*A+E*N+M*ee,c[8]=v*x+h*p+E*V+M*q,c[12]=v*_+h*U+E*Y+M*le,c[1]=O*W+P*R+T*F+D*J,c[5]=O*L+P*A+T*N+D*ee,c[9]=O*x+P*p+T*V+D*q,c[13]=O*_+P*U+T*Y+D*le,c[2]=y*W+j*R+C*F+I*J,c[6]=y*L+j*A+C*N+I*ee,c[10]=y*x+j*p+C*V+I*q,c[14]=y*_+j*U+C*Y+I*le,c[3]=B*W+S*R+K*F+H*J,c[7]=B*L+S*A+K*N+H*ee,c[11]=B*x+S*p+K*V+H*q,c[15]=B*_+S*U+K*Y+H*le,this}},{key:"multiply",value:function(o,n){return void 0!==n?(console.warn("DEPRECATED: Matrix4's .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(o,n)):this.multiplyMatrices(this,o)}},{key:"getInverse",value:function(o,n){var a=this.elements,u=o.elements,c=u[0],v=u[4],h=u[8],E=u[12],M=u[1],O=u[5],P=u[9],T=u[13],D=u[2],y=u[6],j=u[10],C=u[14],I=u[3],B=u[7],S=u[11],K=u[15];a[0]=P*C*B-T*j*B+T*y*S-O*C*S-P*y*K+O*j*K,a[4]=E*j*B-h*C*B-E*y*S+v*C*S+h*y*K-v*j*K,a[8]=h*T*B-E*P*B+E*O*S-v*T*S-h*O*K+v*P*K,a[12]=E*P*y-h*T*y-E*O*j+v*T*j+h*O*C-v*P*C,a[1]=T*j*I-P*C*I-T*D*S+M*C*S+P*D*K-M*j*K,a[5]=h*C*I-E*j*I+E*D*S-c*C*S-h*D*K+c*j*K,a[9]=E*P*I-h*T*I-E*M*S+c*T*S+h*M*K-c*P*K,a[13]=h*T*D-E*P*D+E*M*j-c*T*j-h*M*C+c*P*C,a[2]=O*C*I-T*y*I+T*D*B-M*C*B-O*D*K+M*y*K,a[6]=E*y*I-v*C*I-E*D*B+c*C*B+v*D*K-c*y*K,a[10]=v*T*I-E*O*I+E*M*B-c*T*B-v*M*K+c*O*K,a[14]=E*O*D-v*T*D-E*M*y+c*T*y+v*M*C-c*O*C,a[3]=P*y*I-O*j*I-P*D*B+M*j*B+O*D*S-M*y*S,a[7]=v*j*I-h*y*I+h*D*B-c*j*B-v*D*S+c*y*S,a[11]=h*O*I-v*P*I-h*M*B+c*P*B+v*M*S-c*O*S,a[15]=v*P*D-h*O*D+h*M*y-c*P*y-v*M*j+c*O*j;var H=c*a[0]+M*a[4]+D*a[8]+I*a[12];if(0===H){var W="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(n)throw new Error(W);return console.warn(W),this.identity(),this}return this.multiplyScalar(1/H),this}},{key:"applyToVector3Array",value:function(){var o=new l.default;return function(n,a,u){void 0===a&&(a=0),void 0===u&&(u=n.length);for(var c=0,v=a;c<u;c+=3,v+=3)o.x=n[v],o.y=n[v+1],o.z=n[v+2],o.applyMatrix4(this),n[v]=o.x,n[v+1]=o.y,n[v+2]=o.z;return n}}},{key:"makeTranslation",value:function(o,n,a){return this.set(1,0,0,o,0,1,0,n,0,0,1,a,0,0,0,1),this}},{key:"multiplyScalar",value:function(o){var n=this.elements;return n[0]*=o,n[4]*=o,n[8]*=o,n[12]*=o,n[1]*=o,n[5]*=o,n[9]*=o,n[13]*=o,n[2]*=o,n[6]*=o,n[10]*=o,n[14]*=o,n[3]*=o,n[7]*=o,n[11]*=o,n[15]*=o,this}},{key:"set",value:function(o,n,a,u,c,v,h,E,M,O,P,T,D,y,j,C){var I=this.elements;return I[0]=o,I[4]=n,I[8]=a,I[12]=u,I[1]=c,I[5]=v,I[9]=h,I[13]=E,I[2]=M,I[6]=O,I[10]=P,I[14]=T,I[3]=D,I[7]=y,I[11]=j,I[15]=C,this}},{key:"makeScale",value:function(o,n,a){return this.set(o,0,0,0,0,n,0,0,0,0,a,0,0,0,0,1),this}}]),f}();t.default=i},"./plane.js":
/*!******************!*\
          !*** ./plane.js ***!
          \******************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var f,m,r=function(){function f(m,o){for(var n=0;n<o.length;n++){var a=o[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(m,a.key,a)}}return function(m,o,n){return o&&f(m.prototype,o),n&&f(m,n),m}}(),l=function s(f){return f&&f.__esModule?f:{default:f}}(e(
/*! ./vector3.js */
"./vector3.js")),i=function(){function f(m,o){(function g(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")})(this,f),this.normal=void 0!==m?m:new l.default(1,0,0),this.constant=void 0!==o?o:0}return r(f,[{key:"set",value:function(o,n){return this.normal.copy(o),this.constant=n,this}},{key:"setComponents",value:function(o,n,a,u){return this.normal.set(o,n,a),this.constant=u,this}},{key:"setFromNormalAndCoplanarPoint",value:function(o,n){return this.normal.copy(o),this.constant=-n.dot(this.normal),this}},{key:"copy",value:function(o){return this.normal.copy(o.normal),this.constant=o.constant,this}},{key:"normalize",value:function(){var o=1/this.normal.length();return this.normal.multiplyScalar(o),this.constant*=o,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(o){return this.normal.dot(o)+this.constant}},{key:"distanceToSphere",value:function(o){return this.distanceToPoint(o.center)-o.radius}},{key:"projectPoint",value:function(o,n){return this.orthoPoint(o,n).sub(o).negate()}},{key:"orthoPoint",value:function(o,n){var a=this.distanceToPoint(o);return(n||new l.default).copy(this.normal).multiplyScalar(a)}},{key:"isIntersectionLine",value:function(o){var n=this.distanceToPoint(o.start),a=this.distanceToPoint(o.end);return n<0&&a>0||a<0&&n>0}},{key:"intersectPlane",value:function(o){var n=this.normal.clone().cross(o.normal),u={origin:new l.default,direction:n};if(this.normal.clone().cross(o.normal).length<1e-10)return u.direction=new l.default,u;var c=this.constant,v=o.constant,h=this.normal.clone().dot(o.normal),E=-(c-v*h)/(1-h*h),M=-(v-c*h)/(1-h*h);return u.origin=this.normal.clone().multiplyScalar(E).add(o.normal.clone().multiplyScalar(M)),u}},{key:"coplanarPoint",value:function(o){return(o||new l.default).copy(this.normal).multiplyScalar(-this.constant)}},{key:"translate",value:function(o){return this.constant=this.constant-o.dot(this.normal),this}},{key:"equals",value:function(o){return o.normal.equals(this.normal)&&o.constant===this.constant}},{key:"clone",value:function(){return(new f).copy(this)}}]),f}();i.prototype.setFromCoplanarPoints=(f=new l.default,m=new l.default,function(o,n,a){var u=f.subVectors(a,n).cross(m.subVectors(o,n)).normalize();return this.setFromNormalAndCoplanarPoint(u,o),this}),i.prototype.intersectLine=function(){var f=new l.default;return function(m,o){var n=o||new l.default,a=m.delta(f),u=this.normal.dot(a);if(0===u)return 0===this.distanceToPoint(m.start)?n.copy(m.start):void 0;var c=-(m.start.dot(this.normal)+this.constant)/u;return c<0||c>1?void 0:n.copy(a).multiplyScalar(c).add(m.start)}}(),t.default=i},"./point.js":
/*!******************!*\
          !*** ./point.js ***!
          \******************/
/*! no static exports found */function(b,t,e){"use strict";function d(o,n){return{x:o.x-n.x,y:o.y-n.y}}function s(o,n){return Math.sqrt(g(o,n))}function g(o,n){var a=d(o,n);return a.x*a.x+a.y*a.y}Object.defineProperty(t,"__esModule",{value:!0}),t.default={subtract:d,copy:function l(o){return{x:o.x,y:o.y}},pageToPoint:function r(o){return{x:o.pageX,y:o.pageY}},distance:s,distanceSquared:g,insideRect:function i(o,n){return!(o.x<n.left||o.x>n.left+n.width||o.y<n.top||o.y>n.top+n.height)},findClosestPoint:function f(o,n){var a=[],u=void 0;return o.forEach(function(v,h){var E=s(v,n);a.push(E),u=0===h?E:Math.min(E,u)}),o[a.indexOf(u)]}}},"./quaternion.js":
/*!***********************!*\
          !*** ./quaternion.js ***!
          \***********************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function s(g,i){for(var f=0;f<i.length;f++){var m=i[f];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(g,m.key,m)}}return function(g,i,f){return i&&s(g.prototype,i),f&&s(g,f),g}}(),l=function(){function s(g,i,f,m){(function d(s,g){if(!(s instanceof g))throw new TypeError("Cannot call a class as a function")})(this,s),this.x=g||0,this.y=i||0,this.z=f||0,this.w=void 0!==m?m:1}return r(s,[{key:"setFromAxisAngle",value:function(i,f){var m=f/2,o=Math.sin(m);return this.x=i.x*o,this.y=i.y*o,this.z=i.z*o,this.w=Math.cos(m),this}},{key:"multiplyQuaternions",value:function(i,f){var m=i.x,o=i.y,n=i.z,a=i.w,u=f.x,c=f.y,v=f.z,h=f.w;return this.x=m*h+a*u+o*v-n*c,this.y=o*h+a*c+n*u-m*v,this.z=n*h+a*v+m*c-o*u,this.w=a*h-m*u-o*c-n*v,this}},{key:"setFromRotationMatrix",value:function(i){var f=i.elements,m=f[0],o=f[4],n=f[8],a=f[1],u=f[5],c=f[9],v=f[2],h=f[6],E=f[10],M=m+u+E,O=void 0;return M>0?(O=.5/Math.sqrt(M+1),this.w=.25/O,this.x=(h-c)*O,this.y=(n-v)*O,this.z=(a-o)*O):m>u&&m>E?(O=2*Math.sqrt(1+m-u-E),this.w=(h-c)/O,this.x=.25*O,this.y=(o+a)/O,this.z=(n+v)/O):u>E?(O=2*Math.sqrt(1+u-m-E),this.w=(n-v)/O,this.x=(o+a)/O,this.y=.25*O,this.z=(c+h)/O):(O=2*Math.sqrt(1+E-m-u),this.w=(a-o)/O,this.x=(n+v)/O,this.y=(c+h)/O,this.z=.25*O),this}}]),s}();t.default=l},"./rect.js":
/*!*****************!*\
          !*** ./rect.js ***!
          \*****************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=function l(n){return n&&n.__esModule?n:{default:n}}(e(
/*! ./lineSegment.js */
"./lineSegment.js"));function i(n){return{topLeft:{x:n.left,y:n.top},bottomRight:{x:n.left+n.width,y:n.top+n.height}}}t.default={distanceToPoint:function g(n,a){var u=655535;return function s(n){return[{start:{x:n.left,y:n.top},end:{x:n.left+n.width,y:n.top}},{start:{x:n.left+n.width,y:n.top},end:{x:n.left+n.width,y:n.top+n.height}},{start:{x:n.left+n.width,y:n.top+n.height},end:{x:n.left,y:n.top+n.height}},{start:{x:n.left,y:n.top+n.height},end:{x:n.left,y:n.top}}]}(n).forEach(function(v){var h=d.default.distanceToPoint(v,a);h<u&&(u=h)}),u},getIntersectionRect:function m(n,a){var u={topLeft:{},bottomRight:{}};if(function f(n,a){var v=i(n),h=i(a);return(n.width>=0?a.width>=0?!(v.bottomRight.x<=h.topLeft.x||h.bottomRight.x<=v.topLeft.x):!(v.bottomRight.x<=h.bottomRight.x||h.topLeft.x<=v.topLeft.x):a.width>=0?!(v.topLeft.x<=h.topLeft.x||h.bottomRight.x<=v.bottomRight.x):!(v.topLeft.x<=h.bottomRight.x||h.topLeft.x<=v.bottomRight.x))&&(n.height>=0?a.height>=0?!(v.bottomRight.y<=h.topLeft.y||h.bottomRight.y<=v.topLeft.y):!(v.bottomRight.y<=h.bottomRight.y||h.topLeft.y<=v.topLeft.y):a.height>=0?!(v.topLeft.y<=h.topLeft.y||h.bottomRight.y<=v.bottomRight.y):!(v.topLeft.y<=h.bottomRight.y||h.top<=v.bottomRight.y))}(n,a)){var c=i(n),v=i(a);return n.width>=0?a.width>=0?(u.topLeft.x=Math.max(c.topLeft.x,v.topLeft.x),u.bottomRight.x=Math.min(c.bottomRight.x,v.bottomRight.x)):(u.topLeft.x=Math.max(c.topLeft.x,v.bottomRight.x),u.bottomRight.x=Math.min(c.bottomRight.x,v.topLeft.x)):a.width>=0?(u.topLeft.x=Math.min(c.topLeft.x,v.bottomRight.x),u.bottomRight.x=Math.max(c.bottomRight.x,v.topLeft.x)):(u.topLeft.x=Math.min(c.topLeft.x,v.topLeft.x),u.bottomRight.x=Math.max(c.bottomRight.x,v.bottomRight.x)),n.height>=0?a.height>=0?(u.topLeft.y=Math.max(c.topLeft.y,v.topLeft.y),u.bottomRight.y=Math.min(c.bottomRight.y,v.bottomRight.y)):(u.topLeft.y=Math.max(c.topLeft.y,v.bottomRight.y),u.bottomRight.y=Math.min(c.bottomRight.y,v.topLeft.y)):a.height>=0?(u.topLeft.y=Math.min(c.topLeft.y,v.bottomRight.y),u.bottomRight.y=Math.max(c.bottomRight.y,v.topLeft.y)):(u.topLeft.y=Math.min(c.topLeft.y,v.topLeft.y),u.bottomRight.y=Math.max(c.bottomRight.y,v.bottomRight.y)),u}}}},"./vector3.js":
/*!********************!*\
          !*** ./vector3.js ***!
          \********************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var m,o,r=function(){function m(o,n){for(var a=0;a<n.length;a++){var u=n[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(o,u.key,u)}}return function(o,n,a){return n&&m(o.prototype,n),a&&m(o,a),o}}(),l=function g(m){return m&&m.__esModule?m:{default:m}}(e(
/*! ./quaternion.js */
"./quaternion.js")),s=e(
/*! ./math.js */
"./math.js"),f=function(){function m(o,n,a){(function i(m,o){if(!(m instanceof o))throw new TypeError("Cannot call a class as a function")})(this,m),this.x=o||0,this.y=n||0,this.z=a||0}return r(m,[{key:"set",value:function(n,a,u){return this.x=n,this.y=a,this.z=u,this}},{key:"setX",value:function(n){return this.x=n,this}},{key:"setY",value:function(n){return this.y=n,this}},{key:"setZ",value:function(n){return this.z=n,this}},{key:"setComponent",value:function(n,a){switch(n){case 0:this.x=a;break;case 1:this.y=a;break;case 2:this.z=a;break;default:throw new Error("index is out of range: "+n)}}},{key:"getComponent",value:function(n){switch(n){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+n)}}},{key:"copy",value:function(n){return this.x=n.x,this.y=n.y,this.z=n.z,this}},{key:"add",value:function(n,a){return void 0!==a?(console.warn("DEPRECATED: Vector3's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(n,a)):(this.x+=n.x,this.y+=n.y,this.z+=n.z,this)}},{key:"addScalar",value:function(n){return this.x+=n,this.y+=n,this.z+=n,this}},{key:"addVectors",value:function(n,a){return this.x=n.x+a.x,this.y=n.y+a.y,this.z=n.z+a.z,this}},{key:"sub",value:function(n,a){return void 0!==a?(console.warn("DEPRECATED: Vector3's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(n,a)):(this.x-=n.x,this.y-=n.y,this.z-=n.z,this)}},{key:"subVectors",value:function(n,a){return this.x=n.x-a.x,this.y=n.y-a.y,this.z=n.z-a.z,this}},{key:"multiply",value:function(n,a){return void 0!==a?(console.warn("DEPRECATED: Vector3's .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(n,a)):(this.x*=n.x,this.y*=n.y,this.z*=n.z,this)}},{key:"multiplyScalar",value:function(n){return this.x*=n,this.y*=n,this.z*=n,this}},{key:"multiplyVectors",value:function(n,a){return this.x=n.x*a.x,this.y=n.y*a.y,this.z=n.z*a.z,this}},{key:"applyMatrix3",value:function(n){var a=this.x,u=this.y,c=this.z,v=n.elements;return this.x=v[0]*a+v[3]*u+v[6]*c,this.y=v[1]*a+v[4]*u+v[7]*c,this.z=v[2]*a+v[5]*u+v[8]*c,this}},{key:"applyMatrix4",value:function(n){var a=this.x,u=this.y,c=this.z,v=n.elements;return this.x=v[0]*a+v[4]*u+v[8]*c+v[12],this.y=v[1]*a+v[5]*u+v[9]*c+v[13],this.z=v[2]*a+v[6]*u+v[10]*c+v[14],this}},{key:"applyProjection",value:function(n){var a=this.x,u=this.y,c=this.z,v=n.elements,h=1/(v[3]*a+v[7]*u+v[11]*c+v[15]);return this.x=(v[0]*a+v[4]*u+v[8]*c+v[12])*h,this.y=(v[1]*a+v[5]*u+v[9]*c+v[13])*h,this.z=(v[2]*a+v[6]*u+v[10]*c+v[14])*h,this}},{key:"applyQuaternion",value:function(n){var a=this.x,u=this.y,c=this.z,v=n.x,h=n.y,E=n.z,M=n.w,O=M*a+h*c-E*u,P=M*u+E*a-v*c,T=M*c+v*u-h*a,D=-v*a-h*u-E*c;return this.x=O*M+D*-v+P*-E-T*-h,this.y=P*M+D*-h+T*-v-O*-E,this.z=T*M+D*-E+O*-h-P*-v,this}},{key:"transformDirection",value:function(n){var a=this.x,u=this.y,c=this.z,v=n.elements;return this.x=v[0]*a+v[4]*u+v[8]*c,this.y=v[1]*a+v[5]*u+v[9]*c,this.z=v[2]*a+v[6]*u+v[10]*c,this.normalize(),this}},{key:"divide",value:function(n){return this.x/=n.x,this.y/=n.y,this.z/=n.z,this}},{key:"divideScalar",value:function(n){if(0!==n){var a=1/n;this.x*=a,this.y*=a,this.z*=a}else this.x=0,this.y=0,this.z=0;return this}},{key:"min",value:function(n){return this.x>n.x&&(this.x=n.x),this.y>n.y&&(this.y=n.y),this.z>n.z&&(this.z=n.z),this}},{key:"max",value:function(n){return this.x<n.x&&(this.x=n.x),this.y<n.y&&(this.y=n.y),this.z<n.z&&(this.z=n.z),this}},{key:"clamp",value:function(n,a){return this.x<n.x?this.x=n.x:this.x>a.x&&(this.x=a.x),this.y<n.y?this.y=n.y:this.y>a.y&&(this.y=a.y),this.z<n.z?this.z=n.z:this.z>a.z&&(this.z=a.z),this}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.multiplyScalar(-1)}},{key:"dot",value:function(n){return this.x*n.x+this.y*n.y+this.z*n.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"lengthManhattan",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length())}},{key:"setLength",value:function(n){var a=this.length();return 0!==a&&n!==a&&this.multiplyScalar(n/a),this}},{key:"lerp",value:function(n,a){return this.x+=(n.x-this.x)*a,this.y+=(n.y-this.y)*a,this.z+=(n.z-this.z)*a,this}},{key:"cross",value:function(n,a){if(void 0!==a)return console.warn("DEPRECATED: Vector3's .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(n,a);var u=this.x,c=this.y,v=this.z;return this.x=c*n.z-v*n.y,this.y=v*n.x-u*n.z,this.z=u*n.y-c*n.x,this}},{key:"crossVectors",value:function(n,a){var u=n.x,c=n.y,v=n.z,h=a.x,E=a.y,M=a.z;return this.x=c*M-v*E,this.y=v*h-u*M,this.z=u*E-c*h,this}},{key:"angleTo",value:function(n){var a=this.dot(n)/(this.length()*n.length());return Math.acos((0,s.clamp)(a,-1,1))}},{key:"distanceTo",value:function(n){return Math.sqrt(this.distanceToSquared(n))}},{key:"distanceToSquared",value:function(n){var a=this.x-n.x,u=this.y-n.y,c=this.z-n.z;return a*a+u*u+c*c}},{key:"setFromMatrixPosition",value:function(n){return this.x=n.elements[12],this.y=n.elements[13],this.z=n.elements[14],this}},{key:"setFromMatrixScale",value:function(n){var a=this.set(n.elements[0],n.elements[1],n.elements[2]).length(),u=this.set(n.elements[4],n.elements[5],n.elements[6]).length(),c=this.set(n.elements[8],n.elements[9],n.elements[10]).length();return this.x=a,this.y=u,this.z=c,this}},{key:"setFromMatrixColumn",value:function(n,a){var u=4*n,c=a.elements;return this.x=c[u],this.y=c[u+1],this.z=c[u+2],this}},{key:"equals",value:function(n){return n.x===this.x&&n.y===this.y&&n.z===this.z}},{key:"fromArray",value:function(n){return this.x=n[0],this.y=n[1],this.z=n[2],this}},{key:"toArray",value:function(){return[this.x,this.y,this.z]}},{key:"clone",value:function(){return new m(this.x,this.y,this.z)}}]),m}();f.prototype.projectOnVector=(m=void 0,o=void 0,function(n){return void 0===m&&(m=new f),m.copy(n).normalize(),o=this.dot(m),this.copy(m).multiplyScalar(o)}),f.prototype.projectOnPlane=function(){var m=void 0;return function(o){return void 0===m&&(m=new f),m.copy(this).projectOnVector(o),this.sub(m)}}(),f.prototype.reflect=function(){var m=void 0;return function(o){return void 0===m&&(m=new f),this.sub(m.copy(o).multiplyScalar(2*this.dot(o)))}}(),f.prototype.clampScalar=function(){var m=void 0,o=void 0;return function(n,a){return void 0===m&&(m=new f,o=new f),m.set(n,n,n),o.set(a,a,a),this.clamp(m,o)}}(),f.prototype.applyAxisAngle=function(){var m=void 0;return function(o,n){return void 0===m&&(m=new l.default),this.applyQuaternion(m.setFromAxisAngle(o.normalize(),n)),this}}(),t.default=f}})}),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("cornerstone-tools",[],e):"object"==typeof exports?exports["cornerstone-tools"]=e():t.cornerstoneTools=e()}(window,function(){return function(b){var e=window.webpackHotUpdate;window.webpackHotUpdate=function(x,_){(function I(L,x){if(P[L]&&O[L]){for(var _ in O[L]=!1,x)Object.prototype.hasOwnProperty.call(x,_)&&(D[_]=x[_]);0==--h&&0===E&&S()}})(x,_),e&&e(x,_)};var f,l=!0,s="286e7d820af3fc74f409",g=1e4,i={},m=[],o=[];function n(L){var x=H[L];if(!x)return W;var _=function(p){return x.hot.active?(H[p]?-1===H[p].parents.indexOf(L)&&H[p].parents.push(L):(m=[L],f=p),-1===x.children.indexOf(p)&&x.children.push(p)):(console.warn("[HMR] unexpected require("+p+") from disposed module "+L),m=[]),W(p)},R=function(U){return{configurable:!0,enumerable:!0,get:function(){return W[U]},set:function(F){W[U]=F}}};for(var A in W)Object.prototype.hasOwnProperty.call(W,A)&&"e"!==A&&"t"!==A&&Object.defineProperty(_,A,R(A));return _.e=function(p){return"ready"===c&&v("prepare"),E++,W.e(p).then(U,function(F){throw U(),F});function U(){E--,"prepare"===c&&(M[p]||B(p),0===E&&0===h&&S())}},_.t=function(p,U){return 1&U&&(p=_(p)),W.t(p,-2&U)},_}function a(L){var x={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:f!==L,active:!0,accept:function(_,R){if(void 0===_)x._selfAccepted=!0;else if("function"==typeof _)x._selfAccepted=_;else if("object"==typeof _)for(var A=0;A<_.length;A++)x._acceptedDependencies[_[A]]=R||function(){};else x._acceptedDependencies[_]=R||function(){}},decline:function(_){if(void 0===_)x._selfDeclined=!0;else if("object"==typeof _)for(var R=0;R<_.length;R++)x._declinedDependencies[_[R]]=!0;else x._declinedDependencies[_]=!0},dispose:function(_){x._disposeHandlers.push(_)},addDisposeHandler:function(_){x._disposeHandlers.push(_)},removeDisposeHandler:function(_){var R=x._disposeHandlers.indexOf(_);R>=0&&x._disposeHandlers.splice(R,1)},check:C,apply:K,status:function(_){if(!_)return c;u.push(_)},addStatusHandler:function(_){u.push(_)},removeStatusHandler:function(_){var R=u.indexOf(_);R>=0&&u.splice(R,1)},data:i[L]};return f=void 0,x}var u=[],c="idle";function v(L){c=L;for(var x=0;x<u.length;x++)u[x].call(null,L)}var T,D,y,h=0,E=0,M={},O={},P={};function j(L){return+L+""===L?+L:L}function C(L){if("idle"!==c)throw new Error("check() is only allowed in idle status");return l=L,v("check"),function d(L){return L=L||1e4,new Promise(function(x,_){if(typeof XMLHttpRequest>"u")return _(new Error("No browser support"));try{var R=new XMLHttpRequest,A=W.p+""+s+".hot-update.json";R.open("GET",A,!0),R.timeout=L,R.send(null)}catch(p){return _(p)}R.onreadystatechange=function(){if(4===R.readyState)if(0===R.status)_(new Error("Manifest request to "+A+" timed out."));else if(404===R.status)x();else if(200!==R.status&&304!==R.status)_(new Error("Manifest request to "+A+" failed."));else{try{var p=JSON.parse(R.responseText)}catch(U){return void _(U)}x(p)}}})}(g).then(function(x){if(!x)return v("idle"),null;O={},M={},P=x.c,y=x.h,v("prepare");var _=new Promise(function(A,p){T={resolve:A,reject:p}});return D={},B("cornerstoneTools"),"prepare"===c&&0===E&&0===h&&S(),_})}function B(L){P[L]?(O[L]=!0,h++,function r(L){var x=document.createElement("script");x.charset="utf-8",x.src=W.p+""+L+"."+s+".hot-update.js",document.head.appendChild(x)}(L)):M[L]=!0}function S(){v("ready");var L=T;if(T=null,L)if(l)Promise.resolve().then(function(){return K(l)}).then(function(R){L.resolve(R)},function(R){L.reject(R)});else{var x=[];for(var _ in D)Object.prototype.hasOwnProperty.call(D,_)&&x.push(j(_));L.resolve(x)}}function K(L){if("ready"!==c)throw new Error("apply() is only allowed in ready status");var x,_,R,A,p;function U(re){for(var de=[re],Me={},Ee=de.map(function(je){return{chain:[je],id:je}});Ee.length>0;){var Oe=Ee.pop(),ge=Oe.id,Te=Oe.chain;if((A=H[ge])&&!A.hot._selfAccepted){if(A.hot._selfDeclined)return{type:"self-declined",chain:Te,moduleId:ge};if(A.hot._main)return{type:"unaccepted",chain:Te,moduleId:ge};for(var me=0;me<A.parents.length;me++){var De=A.parents[me],Ce=H[De];if(Ce){if(Ce.hot._declinedDependencies[ge])return{type:"declined",chain:Te.concat([De]),moduleId:ge,parentId:De};if(-1===de.indexOf(De)){if(Ce.hot._acceptedDependencies[ge]){Me[De]||(Me[De]=[]),F(Me[De],[ge]);continue}delete Me[De],de.push(De),Ee.push({chain:Te.concat([De]),id:De})}}}}}return{type:"accepted",moduleId:re,outdatedModules:de,outdatedDependencies:Me}}function F(re,de){for(var Me=0;Me<de.length;Me++){var Ee=de[Me];-1===re.indexOf(Ee)&&re.push(Ee)}}L=L||{};var N={},V=[],Y={},J=function(){console.warn("[HMR] unexpected require("+q.moduleId+") to disposed module")};for(var ee in D)if(Object.prototype.hasOwnProperty.call(D,ee)){var q;p=j(ee);var le=!1,Q=!1,X=!1,w="";switch((q=D[ee]?U(p):{type:"disposed",moduleId:ee}).chain&&(w="\nUpdate propagation: "+q.chain.join(" -> ")),q.type){case"self-declined":L.onDeclined&&L.onDeclined(q),L.ignoreDeclined||(le=new Error("Aborted because of self decline: "+q.moduleId+w));break;case"declined":L.onDeclined&&L.onDeclined(q),L.ignoreDeclined||(le=new Error("Aborted because of declined dependency: "+q.moduleId+" in "+q.parentId+w));break;case"unaccepted":L.onUnaccepted&&L.onUnaccepted(q),L.ignoreUnaccepted||(le=new Error("Aborted because "+p+" is not accepted"+w));break;case"accepted":L.onAccepted&&L.onAccepted(q),Q=!0;break;case"disposed":L.onDisposed&&L.onDisposed(q),X=!0;break;default:throw new Error("Unexception type "+q.type)}if(le)return v("abort"),Promise.reject(le);if(Q)for(p in Y[p]=D[p],F(V,q.outdatedModules),q.outdatedDependencies)Object.prototype.hasOwnProperty.call(q.outdatedDependencies,p)&&(N[p]||(N[p]=[]),F(N[p],q.outdatedDependencies[p]));X&&(F(V,[q.moduleId]),Y[p]=J)}var fe,$=[];for(_=0;_<V.length;_++)H[p=V[_]]&&H[p].hot._selfAccepted&&Y[p]!==J&&$.push({module:p,errorHandler:H[p].hot._selfAccepted});v("dispose"),Object.keys(P).forEach(function(re){!1===P[re]&&function t(L){delete installedChunks[L]}(re)});for(var k,ae=V.slice();ae.length>0;)if(p=ae.pop(),A=H[p]){var te={},oe=A.hot._disposeHandlers;for(R=0;R<oe.length;R++)(x=oe[R])(te);for(i[p]=te,A.hot.active=!1,delete H[p],delete N[p],R=0;R<A.children.length;R++){var se=H[A.children[R]];se&&(k=se.parents.indexOf(p))>=0&&se.parents.splice(k,1)}}for(p in N)if(Object.prototype.hasOwnProperty.call(N,p)&&(A=H[p]))for(fe=N[p],R=0;R<fe.length;R++)(k=A.children.indexOf(fe[R]))>=0&&A.children.splice(k,1);for(p in v("apply"),s=y,Y)Object.prototype.hasOwnProperty.call(Y,p)&&(b[p]=Y[p]);var ue=null;for(p in N)if(Object.prototype.hasOwnProperty.call(N,p)&&(A=H[p])){fe=N[p];var ve=[];for(_=0;_<fe.length;_++)if(x=A.hot._acceptedDependencies[fe[_]]){if(-1!==ve.indexOf(x))continue;ve.push(x)}for(_=0;_<ve.length;_++){x=ve[_];try{x(fe)}catch(re){L.onErrored&&L.onErrored({type:"accept-errored",moduleId:p,dependencyId:fe[_],error:re}),L.ignoreErrored||ue||(ue=re)}}}for(_=0;_<$.length;_++){var he=$[_];m=[p=he.module];try{W(p)}catch(re){if("function"==typeof he.errorHandler)try{he.errorHandler(re)}catch(de){L.onErrored&&L.onErrored({type:"self-accept-error-handler-errored",moduleId:p,error:de,originalError:re}),L.ignoreErrored||ue||(ue=de),ue||(ue=re)}else L.onErrored&&L.onErrored({type:"self-accept-errored",moduleId:p,error:re}),L.ignoreErrored||ue||(ue=re)}}return ue?(v("fail"),Promise.reject(ue)):(v("idle"),new Promise(function(re){re(V)}))}var H={};function W(L){if(H[L])return H[L].exports;var x=H[L]={i:L,l:!1,exports:{},hot:a(L),parents:(o=m,m=[],o),children:[]};return b[L].call(x.exports,x,x.exports,n(L)),x.l=!0,x.exports}return W.m=b,W.c=H,W.d=function(L,x,_){W.o(L,x)||Object.defineProperty(L,x,{enumerable:!0,get:_})},W.r=function(L){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(L,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(L,"__esModule",{value:!0})},W.t=function(L,x){if(1&x&&(L=W(L)),8&x||4&x&&"object"==typeof L&&L&&L.__esModule)return L;var _=Object.create(null);if(W.r(_),Object.defineProperty(_,"default",{enumerable:!0,value:L}),2&x&&"string"!=typeof L)for(var R in L)W.d(_,R,function(A){return L[A]}.bind(null,R));return _},W.n=function(L){var x=L&&L.__esModule?function(){return L.default}:function(){return L};return W.d(x,"a",x),x},W.o=function(L,x){return Object.prototype.hasOwnProperty.call(L,x)},W.p="",W.h=function(){return s},n("./index.js")(W.s="./index.js")}({"../node_modules/@babel/runtime/helpers/arrayWithHoles.js":
/*!****************************************************************!*\
          !*** ../node_modules/@babel/runtime/helpers/arrayWithHoles.js ***!
          \****************************************************************/
/*! no static exports found */function(b,t){b.exports=function e(r){if(Array.isArray(r))return r}},"../node_modules/@babel/runtime/helpers/arrayWithoutHoles.js":
/*!*******************************************************************!*\
          !*** ../node_modules/@babel/runtime/helpers/arrayWithoutHoles.js ***!
          \*******************************************************************/
/*! no static exports found */function(b,t){b.exports=function e(r){if(Array.isArray(r)){for(var d=0,l=new Array(r.length);d<r.length;d++)l[d]=r[d];return l}}},"../node_modules/@babel/runtime/helpers/assertThisInitialized.js":
/*!***********************************************************************!*\
          !*** ../node_modules/@babel/runtime/helpers/assertThisInitialized.js ***!
          \***********************************************************************/
/*! no static exports found */function(b,t){b.exports=function e(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}},"../node_modules/@babel/runtime/helpers/asyncToGenerator.js":
/*!******************************************************************!*\
          !*** ../node_modules/@babel/runtime/helpers/asyncToGenerator.js ***!
          \******************************************************************/
/*! no static exports found */function(b,t){function e(d,l,s,g,i,f,m){try{var o=d[f](m),n=o.value}catch(a){return void s(a)}o.done?l(n):Promise.resolve(n).then(g,i)}b.exports=function r(d){return function(){var l=this,s=arguments;return new Promise(function(g,i){var f=d.apply(l,s);function m(n){e(f,g,i,m,o,"next",n)}function o(n){e(f,g,i,m,o,"throw",n)}m(void 0)})}}},"../node_modules/@babel/runtime/helpers/classCallCheck.js":
/*!****************************************************************!*\
          !*** ../node_modules/@babel/runtime/helpers/classCallCheck.js ***!
          \****************************************************************/
/*! no static exports found */function(b,t){b.exports=function e(r,d){if(!(r instanceof d))throw new TypeError("Cannot call a class as a function")}},"../node_modules/@babel/runtime/helpers/createClass.js":
/*!*************************************************************!*\
          !*** ../node_modules/@babel/runtime/helpers/createClass.js ***!
          \*************************************************************/
/*! no static exports found */function(b,t){function e(d,l){for(var s=0;s<l.length;s++){var g=l[s];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(d,g.key,g)}}b.exports=function r(d,l,s){return l&&e(d.prototype,l),s&&e(d,s),d}},"../node_modules/@babel/runtime/helpers/defineProperty.js":
/*!****************************************************************!*\
          !*** ../node_modules/@babel/runtime/helpers/defineProperty.js ***!
          \****************************************************************/
/*! no static exports found */function(b,t){b.exports=function e(r,d,l){return d in r?Object.defineProperty(r,d,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[d]=l,r}},"../node_modules/@babel/runtime/helpers/getPrototypeOf.js":
/*!****************************************************************!*\
          !*** ../node_modules/@babel/runtime/helpers/getPrototypeOf.js ***!
          \****************************************************************/
/*! no static exports found */function(b,t){function e(r){return b.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(l){return l.__proto__||Object.getPrototypeOf(l)},e(r)}b.exports=e},"../node_modules/@babel/runtime/helpers/inherits.js":
/*!**********************************************************!*\
          !*** ../node_modules/@babel/runtime/helpers/inherits.js ***!
          \**********************************************************/
/*! no static exports found */function(b,t,e){var r=e(
/*! ./setPrototypeOf */
"../node_modules/@babel/runtime/helpers/setPrototypeOf.js");b.exports=function d(l,s){if("function"!=typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(s&&s.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),s&&r(l,s)}},"../node_modules/@babel/runtime/helpers/iterableToArray.js":
/*!*****************************************************************!*\
          !*** ../node_modules/@babel/runtime/helpers/iterableToArray.js ***!
          \*****************************************************************/
/*! no static exports found */function(b,t){b.exports=function e(r){if(Symbol.iterator in Object(r)||"[object Arguments]"===Object.prototype.toString.call(r))return Array.from(r)}},"../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js":
/*!**********************************************************************!*\
          !*** ../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js ***!
          \**********************************************************************/
/*! no static exports found */function(b,t){b.exports=function e(r,d){var l=[],s=!0,g=!1,i=void 0;try{for(var m,f=r[Symbol.iterator]();!(s=(m=f.next()).done)&&(l.push(m.value),!d||l.length!==d);s=!0);}catch(o){g=!0,i=o}finally{try{!s&&null!=f.return&&f.return()}finally{if(g)throw i}}return l}},"../node_modules/@babel/runtime/helpers/nonIterableRest.js":
/*!*****************************************************************!*\
          !*** ../node_modules/@babel/runtime/helpers/nonIterableRest.js ***!
          \*****************************************************************/
/*! no static exports found */function(b,t){b.exports=function e(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},"../node_modules/@babel/runtime/helpers/nonIterableSpread.js":
/*!*******************************************************************!*\
          !*** ../node_modules/@babel/runtime/helpers/nonIterableSpread.js ***!
          \*******************************************************************/
/*! no static exports found */function(b,t){b.exports=function e(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js":
/*!***************************************************************************!*\
          !*** ../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js ***!
          \***************************************************************************/
/*! no static exports found */function(b,t,e){var r=e(
/*! ../helpers/typeof */
"../node_modules/@babel/runtime/helpers/typeof.js"),d=e(
/*! ./assertThisInitialized */
"../node_modules/@babel/runtime/helpers/assertThisInitialized.js");b.exports=function l(s,g){return!g||"object"!==r(g)&&"function"!=typeof g?d(s):g}},"../node_modules/@babel/runtime/helpers/setPrototypeOf.js":
/*!****************************************************************!*\
          !*** ../node_modules/@babel/runtime/helpers/setPrototypeOf.js ***!
          \****************************************************************/
/*! no static exports found */function(b,t){function e(r,d){return b.exports=e=Object.setPrototypeOf||function(s,g){return s.__proto__=g,s},e(r,d)}b.exports=e},"../node_modules/@babel/runtime/helpers/slicedToArray.js":
/*!***************************************************************!*\
          !*** ../node_modules/@babel/runtime/helpers/slicedToArray.js ***!
          \***************************************************************/
/*! no static exports found */function(b,t,e){var r=e(
/*! ./arrayWithHoles */
"../node_modules/@babel/runtime/helpers/arrayWithHoles.js"),d=e(
/*! ./iterableToArrayLimit */
"../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js"),l=e(
/*! ./nonIterableRest */
"../node_modules/@babel/runtime/helpers/nonIterableRest.js");b.exports=function s(g,i){return r(g)||d(g,i)||l()}},"../node_modules/@babel/runtime/helpers/toConsumableArray.js":
/*!*******************************************************************!*\
          !*** ../node_modules/@babel/runtime/helpers/toConsumableArray.js ***!
          \*******************************************************************/
/*! no static exports found */function(b,t,e){var r=e(
/*! ./arrayWithoutHoles */
"../node_modules/@babel/runtime/helpers/arrayWithoutHoles.js"),d=e(
/*! ./iterableToArray */
"../node_modules/@babel/runtime/helpers/iterableToArray.js"),l=e(
/*! ./nonIterableSpread */
"../node_modules/@babel/runtime/helpers/nonIterableSpread.js");b.exports=function s(g){return r(g)||d(g)||l()}},"../node_modules/@babel/runtime/helpers/typeof.js":
/*!********************************************************!*\
          !*** ../node_modules/@babel/runtime/helpers/typeof.js ***!
          \********************************************************/
/*! no static exports found */function(b,t){function e(d){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(s){return typeof s}:function(s){return s&&"function"==typeof Symbol&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(d)}function r(d){return b.exports=r="function"==typeof Symbol&&"symbol"===e(Symbol.iterator)?function(s){return e(s)}:function(s){return s&&"function"==typeof Symbol&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":e(s)},r(d)}b.exports=r},"../node_modules/@babel/runtime/regenerator/index.js":
/*!***********************************************************!*\
          !*** ../node_modules/@babel/runtime/regenerator/index.js ***!
          \***********************************************************/
/*! no static exports found */function(b,t,e){b.exports=e(
/*! regenerator-runtime */
"../node_modules/regenerator-runtime/runtime-module.js")},"../node_modules/ms/index.js":
/*!***********************************!*\
          !*** ../node_modules/ms/index.js ***!
          \***********************************/
/*! no static exports found */function(b,t){var e=1e3,r=60*e,d=60*r,l=24*d;function o(n,a,u,c){var v=a>=1.5*u;return Math.round(n/u)+" "+c+(v?"s":"")}b.exports=function(n,a){a=a||{};var u=typeof n;if("string"===u&&n.length>0)return function i(n){if(!((n=String(n)).length>100)){var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(n);if(a){var u=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*u;case"weeks":case"week":case"w":return 6048e5*u;case"days":case"day":case"d":return u*l;case"hours":case"hour":case"hrs":case"hr":case"h":return u*d;case"minutes":case"minute":case"mins":case"min":case"m":return u*r;case"seconds":case"second":case"secs":case"sec":case"s":return u*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}}}(n);if("number"===u&&isFinite(n))return a.long?function m(n){var a=Math.abs(n);return a>=l?o(n,a,l,"day"):a>=d?o(n,a,d,"hour"):a>=r?o(n,a,r,"minute"):a>=e?o(n,a,e,"second"):n+" ms"}(n):function f(n){var a=Math.abs(n);return a>=l?Math.round(n/l)+"d":a>=d?Math.round(n/d)+"h":a>=r?Math.round(n/r)+"m":a>=e?Math.round(n/e)+"s":n+"ms"}(n);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(n))}},"../node_modules/process/browser.js":
/*!******************************************!*\
          !*** ../node_modules/process/browser.js ***!
          \******************************************/
/*! no static exports found */function(b,t){var r,d,e=b.exports={};function l(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function g(h){if(r===setTimeout)return setTimeout(h,0);if((r===l||!r)&&setTimeout)return r=setTimeout,setTimeout(h,0);try{return r(h,0)}catch{try{return r.call(null,h,0)}catch{return r.call(this,h,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:l}catch{r=l}try{d="function"==typeof clearTimeout?clearTimeout:s}catch{d=s}}();var o,f=[],m=!1,n=-1;function a(){!m||!o||(m=!1,o.length?f=o.concat(f):n=-1,f.length&&u())}function u(){if(!m){var h=g(a);m=!0;for(var E=f.length;E;){for(o=f,f=[];++n<E;)o&&o[n].run();n=-1,E=f.length}o=null,m=!1,function i(h){if(d===clearTimeout)return clearTimeout(h);if((d===s||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(h);try{return d(h)}catch{try{return d.call(null,h)}catch{return d.call(this,h)}}}(h)}}function c(h,E){this.fun=h,this.array=E}function v(){}e.nextTick=function(h){var E=new Array(arguments.length-1);if(arguments.length>1)for(var M=1;M<arguments.length;M++)E[M-1]=arguments[M];f.push(new c(h,E)),1===f.length&&!m&&g(u)},c.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=v,e.addListener=v,e.once=v,e.off=v,e.removeListener=v,e.removeAllListeners=v,e.emit=v,e.prependListener=v,e.prependOnceListener=v,e.listeners=function(h){return[]},e.binding=function(h){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(h){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},"../node_modules/regenerator-runtime/runtime-module.js":
/*!*************************************************************!*\
          !*** ../node_modules/regenerator-runtime/runtime-module.js ***!
          \*************************************************************/
/*! no static exports found */function(b,t,e){var r=function(){return this||"object"==typeof self&&self}()||Function("return this")(),d=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,l=d&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,b.exports=e(
/*! ./runtime */
"../node_modules/regenerator-runtime/runtime.js"),d)r.regeneratorRuntime=l;else try{delete r.regeneratorRuntime}catch{r.regeneratorRuntime=void 0}},"../node_modules/regenerator-runtime/runtime.js":
/*!******************************************************!*\
          !*** ../node_modules/regenerator-runtime/runtime.js ***!
          \******************************************************/
/*! no static exports found */function(b,t){!function(e){"use strict";var l,r=Object.prototype,d=r.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},g=s.iterator||"@@iterator",i=s.asyncIterator||"@@asyncIterator",f=s.toStringTag||"@@toStringTag",m="object"==typeof b,o=e.regeneratorRuntime;if(o)m&&(b.exports=o);else{(o=e.regeneratorRuntime=m?b.exports:{}).wrap=n;var u="suspendedStart",c="suspendedYield",v="executing",h="completed",E={},T={};T[g]=function(){return this};var D=Object.getPrototypeOf,y=D&&D(D(L([])));y&&y!==r&&d.call(y,g)&&(T=y);var j=P.prototype=M.prototype=Object.create(T);O.prototype=j.constructor=P,P.constructor=O,P[f]=O.displayName="GeneratorFunction",o.isGeneratorFunction=function(_){var R="function"==typeof _&&_.constructor;return!!R&&(R===O||"GeneratorFunction"===(R.displayName||R.name))},o.mark=function(_){return Object.setPrototypeOf?Object.setPrototypeOf(_,P):(_.__proto__=P,f in _||(_[f]="GeneratorFunction")),_.prototype=Object.create(j),_},o.awrap=function(_){return{__await:_}},C(I.prototype),I.prototype[i]=function(){return this},o.AsyncIterator=I,o.async=function(_,R,A,p){var U=new I(n(_,R,A,p));return o.isGeneratorFunction(R)?U:U.next().then(function(F){return F.done?F.value:U.next()})},C(j),j[f]="Generator",j[g]=function(){return this},j.toString=function(){return"[object Generator]"},o.keys=function(_){var R=[];for(var A in _)R.push(A);return R.reverse(),function p(){for(;R.length;){var U=R.pop();if(U in _)return p.value=U,p.done=!1,p}return p.done=!0,p}},o.values=L,W.prototype={constructor:W,reset:function(_){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(H),!_)for(var R in this)"t"===R.charAt(0)&&d.call(this,R)&&!isNaN(+R.slice(1))&&(this[R]=l)},stop:function(){this.done=!0;var R=this.tryEntries[0].completion;if("throw"===R.type)throw R.arg;return this.rval},dispatchException:function(_){if(this.done)throw _;var R=this;function A(Y,J){return F.type="throw",F.arg=_,R.next=Y,J&&(R.method="next",R.arg=l),!!J}for(var p=this.tryEntries.length-1;p>=0;--p){var U=this.tryEntries[p],F=U.completion;if("root"===U.tryLoc)return A("end");if(U.tryLoc<=this.prev){var N=d.call(U,"catchLoc"),V=d.call(U,"finallyLoc");if(N&&V){if(this.prev<U.catchLoc)return A(U.catchLoc,!0);if(this.prev<U.finallyLoc)return A(U.finallyLoc)}else if(N){if(this.prev<U.catchLoc)return A(U.catchLoc,!0)}else{if(!V)throw new Error("try statement without catch or finally");if(this.prev<U.finallyLoc)return A(U.finallyLoc)}}}},abrupt:function(_,R){for(var A=this.tryEntries.length-1;A>=0;--A){var p=this.tryEntries[A];if(p.tryLoc<=this.prev&&d.call(p,"finallyLoc")&&this.prev<p.finallyLoc){var U=p;break}}U&&("break"===_||"continue"===_)&&U.tryLoc<=R&&R<=U.finallyLoc&&(U=null);var F=U?U.completion:{};return F.type=_,F.arg=R,U?(this.method="next",this.next=U.finallyLoc,E):this.complete(F)},complete:function(_,R){if("throw"===_.type)throw _.arg;return"break"===_.type||"continue"===_.type?this.next=_.arg:"return"===_.type?(this.rval=this.arg=_.arg,this.method="return",this.next="end"):"normal"===_.type&&R&&(this.next=R),E},finish:function(_){for(var R=this.tryEntries.length-1;R>=0;--R){var A=this.tryEntries[R];if(A.finallyLoc===_)return this.complete(A.completion,A.afterLoc),H(A),E}},catch:function(_){for(var R=this.tryEntries.length-1;R>=0;--R){var A=this.tryEntries[R];if(A.tryLoc===_){var p=A.completion;if("throw"===p.type){var U=p.arg;H(A)}return U}}throw new Error("illegal catch attempt")},delegateYield:function(_,R,A){return this.delegate={iterator:L(_),resultName:R,nextLoc:A},"next"===this.method&&(this.arg=l),E}}}function n(_,R,A,p){var F=Object.create((R&&R.prototype instanceof M?R:M).prototype),N=new W(p||[]);return F._invoke=function B(_,R,A){var p=u;return function(F,N){if(p===v)throw new Error("Generator is already running");if(p===h){if("throw"===F)throw N;return x()}for(A.method=F,A.arg=N;;){var V=A.delegate;if(V){var Y=S(V,A);if(Y){if(Y===E)continue;return Y}}if("next"===A.method)A.sent=A._sent=A.arg;else if("throw"===A.method){if(p===u)throw p=h,A.arg;A.dispatchException(A.arg)}else"return"===A.method&&A.abrupt("return",A.arg);p=v;var J=a(_,R,A);if("normal"===J.type){if(p=A.done?h:c,J.arg===E)continue;return{value:J.arg,done:A.done}}"throw"===J.type&&(p=h,A.method="throw",A.arg=J.arg)}}}(_,A,N),F}function a(_,R,A){try{return{type:"normal",arg:_.call(R,A)}}catch(p){return{type:"throw",arg:p}}}function M(){}function O(){}function P(){}function C(_){["next","throw","return"].forEach(function(R){_[R]=function(A){return this._invoke(R,A)}})}function I(_){function R(U,F,N,V){var Y=a(_[U],_,F);if("throw"!==Y.type){var J=Y.arg,ee=J.value;return ee&&"object"==typeof ee&&d.call(ee,"__await")?Promise.resolve(ee.__await).then(function(q){R("next",q,N,V)},function(q){R("throw",q,N,V)}):Promise.resolve(ee).then(function(q){J.value=q,N(J)},function(q){return R("throw",q,N,V)})}V(Y.arg)}var A;this._invoke=function p(U,F){function N(){return new Promise(function(V,Y){R(U,F,V,Y)})}return A=A?A.then(N,N):N()}}function S(_,R){var A=_.iterator[R.method];if(A===l){if(R.delegate=null,"throw"===R.method){if(_.iterator.return&&(R.method="return",R.arg=l,S(_,R),"throw"===R.method))return E;R.method="throw",R.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var p=a(A,_.iterator,R.arg);if("throw"===p.type)return R.method="throw",R.arg=p.arg,R.delegate=null,E;var U=p.arg;return U?U.done?(R[_.resultName]=U.value,R.next=_.nextLoc,"return"!==R.method&&(R.method="next",R.arg=l),R.delegate=null,E):U:(R.method="throw",R.arg=new TypeError("iterator result is not an object"),R.delegate=null,E)}function K(_){var R={tryLoc:_[0]};1 in _&&(R.catchLoc=_[1]),2 in _&&(R.finallyLoc=_[2],R.afterLoc=_[3]),this.tryEntries.push(R)}function H(_){var R=_.completion||{};R.type="normal",delete R.arg,_.completion=R}function W(_){this.tryEntries=[{tryLoc:"root"}],_.forEach(K,this),this.reset(!0)}function L(_){if(_){var R=_[g];if(R)return R.call(_);if("function"==typeof _.next)return _;if(!isNaN(_.length)){var A=-1,p=function U(){for(;++A<_.length;)if(d.call(_,A))return U.value=_[A],U.done=!1,U;return U.value=l,U.done=!0,U};return p.next=p}}return{next:x}}function x(){return{value:l,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())},"./drawing/draw.js":
/*!*************************!*\
          !*** ./drawing/draw.js ***!
          \*************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),t.default=function(r,d){r.save(),d(r),r.restore()}},"./drawing/drawArrow.js":
/*!******************************!*\
          !*** ./drawing/drawArrow.js ***!
          \******************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./drawLine.js */
"./drawing/drawLine.js"),d=e(
/*! ./drawJoinedLines.js */
"./drawing/drawJoinedLines.js");t.default=function(l,s,g,i,f,m){var n=Math.atan2(g.y-s.y,g.x-s.x),a={color:i,lineWidth:f};m&&(a.lineDash=m),Object(r.default)(l,void 0,s,g,a,"canvas"),a={color:i,lineWidth:f,fillStyle:i};var u=[{x:g.x-10*Math.cos(n-Math.PI/7),y:g.y-10*Math.sin(n-Math.PI/7)},{x:g.x-10*Math.cos(n+Math.PI/7),y:g.y-10*Math.sin(n+Math.PI/7)},g];Object(d.default)(l,void 0,g,u,a,"canvas")}},"./drawing/drawCircle.js":
/*!*******************************!*\
          !*** ./drawing/drawCircle.js ***!
          \*******************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./../externalModules.js */
"./externalModules.js"),d=e(
/*! ./path.js */
"./drawing/path.js");t.default=function(l,s,g,i,f){"pixel"===(arguments.length>5&&void 0!==arguments[5]?arguments[5]:"pixel")&&(g=r.default.cornerstone.pixelToCanvas(s,g)),Object(d.default)(l,f,function(o){o.arc(g.x,g.y,i,0,2*Math.PI)})}},"./drawing/drawEllipse.js":
/*!********************************!*\
          !*** ./drawing/drawEllipse.js ***!
          \********************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./../externalModules.js */
"./externalModules.js"),d=e(
/*! ./path.js */
"./drawing/path.js"),l=e(
/*! ../util/pointProjector.js */
"./util/pointProjector.js");t.default=function(s,g,i,f,m){var n=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;"pixel"===(arguments.length>5&&void 0!==arguments[5]?arguments[5]:"pixel")&&(i=r.default.cornerstone.pixelToCanvas(g,i),f=r.default.cornerstone.pixelToCanvas(g,f));var a=r.default.cornerstone.getViewport(g),v=a.scale,h=a.translation,E=a.rotation-n,M={x:g.clientWidth/2+h.x*v,y:g.clientHeight/2+h.y*v};Math.abs(E)>.05&&(i=Object(l.rotatePoint)(i,M,-E),f=Object(l.rotatePoint)(f,M,-E));var O=Math.abs(i.x-f.x),P=Math.abs(i.y-f.y),T=Math.min(i.x,f.x),D=Math.min(i.y,f.y),y={x:T+O/2,y:D+P/2};Math.abs(E)>.05&&(y=Object(l.rotatePoint)(y,M,E));var j=E*Math.PI/180;Object(d.default)(s,m,function(C){C.ellipse(y.x,y.y,O/2,P/2,j,0,2*Math.PI),C.closePath()})}},"./drawing/drawHandles.js":
/*!********************************!*\
          !*** ./drawing/drawHandles.js ***!
          \********************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./../externalModules.js */
"./externalModules.js"),d=e(
/*! ./../stateManagement/toolStyle.js */
"./stateManagement/toolStyle.js"),l=e(
/*! ./../stateManagement/toolColors.js */
"./stateManagement/toolColors.js"),s=e(
/*! ./path.js */
"./drawing/path.js"),g=e(
/*! ./../store/index.js */
"./store/index.js");t.default=function(i,f,m){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=f.element,a=l.default.getToolColor();i.strokeStyle=o.color||a;for(var u=Object.keys(m),c=function(M){var P=m[u[M]];if(!0===P.drawnIndependently||!0===o.drawHandlesIfActive&&!P.active||o.hideHandlesIfMoving&&P.moving)return"continue";var y={lineWidth:P.active?d.default.getActiveWidth():d.default.getToolWidth(),fillStyle:o.fill};o.lineDash&&(y.lineDash=o.lineDash),Object(s.default)(i,y,function(j){var C=r.default.cornerstone.pixelToCanvas(n,P);j.arc(C.x,C.y,P.radius||o.handleRadius||g.state.handleRadius,0,2*Math.PI)})},v=0;v<u.length;v++)c(v)}},"./drawing/drawJoinedLines.js":
/*!************************************!*\
          !*** ./drawing/drawJoinedLines.js ***!
          \************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./../externalModules.js */
"./externalModules.js"),d=e(
/*! ./path.js */
"./drawing/path.js");t.default=function(l,s,g,i,f){var m=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"pixel";Object(d.default)(l,f,function(o){"pixel"===m&&(g=r.default.cornerstone.pixelToCanvas(s,g),i=i.map(function(n){return r.default.cornerstone.pixelToCanvas(s,n)})),o.moveTo(g.x,g.y),i.forEach(function(n){o.lineTo(n.x,n.y)})})}},"./drawing/drawLine.js":
/*!*****************************!*\
          !*** ./drawing/drawLine.js ***!
          \*****************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return l});var r=e(
/*! ./../externalModules.js */
"./externalModules.js"),d=e(
/*! ./path.js */
"./drawing/path.js");function l(s,g,i,f,m){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"pixel";Object(d.default)(s,m,function(n){"pixel"===o&&(i=r.default.cornerstone.pixelToCanvas(g,i),f=r.default.cornerstone.pixelToCanvas(g,f)),n.moveTo(i.x,i.y),n.lineTo(f.x,f.y)})}},"./drawing/drawLines.js":
/*!******************************!*\
          !*** ./drawing/drawLines.js ***!
          \******************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./../externalModules.js */
"./externalModules.js"),d=e(
/*! ./path.js */
"./drawing/path.js");t.default=function(l,s,g,i){var f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"pixel";Object(d.default)(l,i,function(m){g.forEach(function(o){var n=o.start,a=o.end;if("pixel"===f){var u=r.default.cornerstone;n=u.pixelToCanvas(s,n),a=u.pixelToCanvas(s,a)}m.moveTo(n.x,n.y),m.lineTo(a.x,a.y)})})}},"./drawing/drawLink.js":
/*!*****************************!*\
          !*** ./drawing/drawLink.js ***!
          \*****************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../externalModules.js */
"./externalModules.js"),d=e(
/*! ./drawLine.js */
"./drawing/drawLine.js");t.default=function(l,s,g,i,f,m){var o=l.length>0?r.default.cornerstoneMath.point.findClosestPoint(l,s):s,a=r.default.cornerstoneMath.point.findClosestPoint([{x:g.left+g.width/2,y:g.top},{x:g.left,y:g.top+g.height/2},{x:g.left+g.width/2,y:g.top+g.height},{x:g.left+g.width,y:g.top+g.height/2}],o),u={color:f,lineWidth:m,lineDash:[2,3]};Object(d.default)(i,void 0,o,a,u,"canvas")}},"./drawing/drawLinkedTextBox.js":
/*!**************************************!*\
          !*** ./drawing/drawLinkedTextBox.js ***!
          \**************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../externalModules.js */
"./externalModules.js"),d=e(
/*! ./drawTextBox.js */
"./drawing/drawTextBox.js"),l=e(
/*! ./drawLink.js */
"./drawing/drawLink.js"),s=e(
/*! ./../store/index.js */
"./store/index.js"),g=e(
/*! ../util/clip.js */
"./util/clip.js");t.default=function(i,f,m,o,n,a,u,c,v,h){var E=r.default.cornerstone.pixelToCanvas,M=E(f,m);v&&(M.x+=v);var O={centering:{x:!1,y:h}};if(s.state.preventTextBoxOutsideDisplayedArea&&(O.displacer=function(T){return Object(g.clipBoxToDisplayedArea)(f,T)}),m.boundingBox=Object(d.default)(i,o,M.x,M.y,u,O),m.hasMoved){var P=a(n).map(function(T){return E(f,T)});Object(l.default)(P,M,m.boundingBox,i,u,c)}}},"./drawing/drawRect.js":
/*!*****************************!*\
          !*** ./drawing/drawRect.js ***!
          \*****************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./../externalModules.js */
"./externalModules.js"),d=e(
/*! ./path.js */
"./drawing/path.js"),l=e(
/*! ../util/pointProjector.js */
"./util/pointProjector.js");t.default=function(s,g,i,f,m){var n=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;if("pixel"===(arguments.length>5&&void 0!==arguments[5]?arguments[5]:"pixel")){var a=r.default.cornerstone;i=a.pixelToCanvas(g,i),f=a.pixelToCanvas(g,f)}var u=r.default.cornerstone.getViewport(g),h=u.scale,E=u.translation,M=u.rotation-n,O={x:g.clientWidth/2+E.x*h,y:g.clientHeight/2+E.y*h};Math.abs(M)>.05&&(i=Object(l.rotatePoint)(i,O,-M),f=Object(l.rotatePoint)(f,O,-M));var P=Math.abs(i.x-f.x),T=Math.abs(i.y-f.y);i={x:Math.min(i.x,f.x),y:Math.min(i.y,f.y)},f={x:i.x+P,y:i.y+T};var D={x:i.x+P,y:i.y},y={x:i.x,y:i.y+T};Math.abs(M)>.05&&(i=Object(l.rotatePoint)(i,O,M),f=Object(l.rotatePoint)(f,O,M),D=Object(l.rotatePoint)(D,O,M),y=Object(l.rotatePoint)(y,O,M)),Object(d.default)(s,m,function(j){j.moveTo(i.x,i.y),j.lineTo(D.x,D.y),j.lineTo(f.x,f.y),j.lineTo(y.x,y.y),j.lineTo(i.x,i.y)})}},"./drawing/drawTextBox.js":
/*!********************************!*\
          !*** ./drawing/drawTextBox.js ***!
          \********************************/
/*! exports provided: textBoxWidth, default */function(b,t,e){"use strict";e.r(t),e.d(t,"textBoxWidth",function(){return g});var r=e(
/*! ../stateManagement/textStyle.js */
"./stateManagement/textStyle.js"),d=e(
/*! ./draw.js */
"./drawing/draw.js"),l=e(
/*! ./fillTextLines.js */
"./drawing/fillTextLines.js"),s=e(
/*! ./fillBox.js */
"./drawing/fillBox.js");function g(i,f,m){var o=r.default.getFont(),n=i.font;o&&o!==n&&(i.font=o);var a=i.measureText(f).width;return o&&o!==n&&(i.font=n),a+2*m}t.default=function(i,f,m,o,n){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};"[object Array]"!==Object.prototype.toString.call(f)&&(f=[f]);var c=r.default.getFontSize(),v=r.default.getBackgroundColor(),h=0;f.forEach(function(M){var O=g(i,M,5);h=Math.max(h,O)});var E={width:h,height:5+f.length*(c+5)};return Object(d.default)(i,function(M){M.strokeStyle=n,a.centering&&(!0===a.centering.x&&(m-=E.width/2),!0===a.centering.y&&(o-=E.height/2)),E.left=m,E.top=o,"function"==typeof a.displacer&&a.displacer(E),Object(s.default)(M,E,v),Object(l.default)(M,E,f,n,5)}),E}},"./drawing/fillBox.js":
/*!****************************!*\
          !*** ./drawing/fillBox.js ***!
          \****************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),t.default=function(r,d,l){r.fillStyle=l,r.fillRect(d.left,d.top,d.width,d.height)}},"./drawing/fillOutsideRect.js":
/*!************************************!*\
          !*** ./drawing/fillOutsideRect.js ***!
          \************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./../externalModules.js */
"./externalModules.js"),d=e(
/*! ./path.js */
"./drawing/path.js");t.default=function(l,s,g,i,f){if("pixel"===(arguments.length>5&&void 0!==arguments[5]?arguments[5]:"pixel")){var o=r.default.cornerstone;g=o.pixelToCanvas(s,g),i=o.pixelToCanvas(s,i)}var n=Math.min(g.x,i.x),a=Math.min(g.y,i.y),u=Math.abs(g.x-i.x),c=Math.abs(g.y-i.y);Object(d.default)(l,f,function(v){v.rect(0,0,v.canvas.clientWidth,v.canvas.clientHeight),v.rect(n+u,a,-u,c)})}},"./drawing/fillTextLines.js":
/*!**********************************!*\
          !*** ./drawing/fillTextLines.js ***!
          \**********************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./../stateManagement/textStyle.js */
"./stateManagement/textStyle.js");t.default=function(d,l,s,g,i){var f=r.default.getFontSize();d.font=r.default.getFont(),d.textBaseline="top",d.fillStyle=g,s.forEach(function(m,o){d.fillText(m,l.left+i,l.top+i+o*(f+i))})}},"./drawing/getNewContext.js":
/*!**********************************!*\
          !*** ./drawing/getNewContext.js ***!
          \**********************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),t.default=function(r){var d=r.getContext("2d");return d.setTransform(1,0,0,1,0,0),d}},"./drawing/index.js":
/*!**************************!*\
          !*** ./drawing/index.js ***!
          \**************************/
/*! exports provided: draw, drawArrow, drawCircle, drawEllipse, drawHandles, drawJoinedLines, drawLine, drawLines, drawLink, drawLinkedTextBox, drawRect, drawTextBox, fillBox, fillOutsideRect, fillTextLines, getNewContext, path, setShadow, transformCanvasContext, resetCanvasContextTransform */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./draw.js */
"./drawing/draw.js");e.d(t,"draw",function(){return r.default});var d=e(
/*! ./drawArrow.js */
"./drawing/drawArrow.js");e.d(t,"drawArrow",function(){return d.default});var l=e(
/*! ./drawCircle.js */
"./drawing/drawCircle.js");e.d(t,"drawCircle",function(){return l.default});var s=e(
/*! ./drawEllipse.js */
"./drawing/drawEllipse.js");e.d(t,"drawEllipse",function(){return s.default});var g=e(
/*! ./drawHandles.js */
"./drawing/drawHandles.js");e.d(t,"drawHandles",function(){return g.default});var i=e(
/*! ./drawJoinedLines.js */
"./drawing/drawJoinedLines.js");e.d(t,"drawJoinedLines",function(){return i.default});var f=e(
/*! ./drawLine.js */
"./drawing/drawLine.js");e.d(t,"drawLine",function(){return f.default});var m=e(
/*! ./drawLines.js */
"./drawing/drawLines.js");e.d(t,"drawLines",function(){return m.default});var o=e(
/*! ./drawLink.js */
"./drawing/drawLink.js");e.d(t,"drawLink",function(){return o.default});var n=e(
/*! ./drawLinkedTextBox.js */
"./drawing/drawLinkedTextBox.js");e.d(t,"drawLinkedTextBox",function(){return n.default});var a=e(
/*! ./drawRect.js */
"./drawing/drawRect.js");e.d(t,"drawRect",function(){return a.default});var u=e(
/*! ./drawTextBox.js */
"./drawing/drawTextBox.js");e.d(t,"drawTextBox",function(){return u.default});var c=e(
/*! ./fillBox.js */
"./drawing/fillBox.js");e.d(t,"fillBox",function(){return c.default});var v=e(
/*! ./fillOutsideRect.js */
"./drawing/fillOutsideRect.js");e.d(t,"fillOutsideRect",function(){return v.default});var h=e(
/*! ./fillTextLines.js */
"./drawing/fillTextLines.js");e.d(t,"fillTextLines",function(){return h.default});var E=e(
/*! ./getNewContext.js */
"./drawing/getNewContext.js");e.d(t,"getNewContext",function(){return E.default});var M=e(
/*! ./path.js */
"./drawing/path.js");e.d(t,"path",function(){return M.default});var O=e(
/*! ./setShadow.js */
"./drawing/setShadow.js");e.d(t,"setShadow",function(){return O.default});var P=e(
/*! ./transformCanvasContext.js */
"./drawing/transformCanvasContext.js");e.d(t,"transformCanvasContext",function(){return P.default});var T=e(
/*! ./resetCanvasContextTransform.js */
"./drawing/resetCanvasContextTransform.js");e.d(t,"resetCanvasContextTransform",function(){return T.default})},"./drawing/path.js":
/*!*************************!*\
          !*** ./drawing/path.js ***!
          \*************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./../stateManagement/toolStyle.js */
"./stateManagement/toolStyle.js");t.default=function(d){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0,g=l.color,i=l.lineWidth,f=l.fillStyle,m=l.lineDash,o=l.shouldDrawLines,n=void 0===o||o;d.beginPath(),d.strokeStyle=g||d.strokeStyle,d.lineWidth=i||void 0===i&&r.default.getToolWidth()||d.lineWidth,m&&d.setLineDash(m),s(d),f&&(d.fillStyle=f,d.fill()),n&&d.stroke(),m&&d.setLineDash([])}},"./drawing/resetCanvasContextTransform.js":
/*!************************************************!*\
          !*** ./drawing/resetCanvasContextTransform.js ***!
          \************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),t.default=function(r){r.setTransform(1,0,0,1,0,0)}},"./drawing/setShadow.js":
/*!******************************!*\
          !*** ./drawing/setShadow.js ***!
          \******************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./../util/getDefault.js */
"./util/getDefault.js");t.default=function(d){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l.shadow&&(d.shadowColor=Object(r.default)(l.shadowColor,"#000000"),d.shadowBlur=Object(r.default)(l.shadowBlur,0),d.shadowOffsetX=Object(r.default)(l.shadowOffsetX,1),d.shadowOffsetY=Object(r.default)(l.shadowOffsetY,1))}},"./drawing/transformCanvasContext.js":
/*!*******************************************!*\
          !*** ./drawing/transformCanvasContext.js ***!
          \*******************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),t.default=function(r,d,l){if(l.hflip||l.vflip||l.rotation){var s={x:d.width/2+l.translation.x*l.scale,y:d.height/2+l.translation.y*l.scale};r.translate(s.x,s.y),l.rotation&&r.rotate(l.rotation*Math.PI/180),l.vflip&&r.scale(1,-1),l.hflip&&r.scale(-1,1),r.translate(-s.x,-s.y)}}},"./eventDispatchers/imageRenderedEventDispatcher.js":
/*!**********************************************************!*\
          !*** ./eventDispatchers/imageRenderedEventDispatcher.js ***!
          \**********************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./../store/index.js */
"./store/index.js"),d=e(
/*! ../stateManagement/toolState */
"./stateManagement/toolState.js"),l=e(
/*! ../eventListeners/onImageRenderedBrushEventHandler.js */
"./eventListeners/onImageRenderedBrushEventHandler.js"),s=e(
/*! ./../externalModules.js */
"./externalModules.js"),g=Object(r.getModule)("segmentation"),i=function(n){var a=n.detail,u=a.element,c=r.state.tools.filter(function(M){return M.element===u&&("active"===M.mode||"passive"===M.mode||"enabled"===M.mode)}),v=Object(d.getToolState)(u,"stack"),h=g.configuration;v&&(h.renderFill||h.renderOutline)&&Object(l.default)(n);var E=a.canvasContext.canvas.getContext("2d");c.forEach(function(M){M.renderToolData&&(E.save(),M.renderToolData(n),E.restore())})};t.default={enable:function(n){n.addEventListener(s.default.cornerstone.EVENTS.IMAGE_RENDERED,i)},disable:function(n){n.removeEventListener(s.default.cornerstone.EVENTS.IMAGE_RENDERED,i)}}},"./eventDispatchers/index.js":
/*!***********************************!*\
          !*** ./eventDispatchers/index.js ***!
          \***********************************/
/*! exports provided: imageRenderedEventDispatcher, mouseToolEventDispatcher, newImageEventDispatcher, touchToolEventDispatcher */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./imageRenderedEventDispatcher.js */
"./eventDispatchers/imageRenderedEventDispatcher.js");e.d(t,"imageRenderedEventDispatcher",function(){return r.default});var d=e(
/*! ./mouseToolEventDispatcher.js */
"./eventDispatchers/mouseToolEventDispatcher.js");e.d(t,"mouseToolEventDispatcher",function(){return d.default});var l=e(
/*! ./newImageEventDispatcher.js */
"./eventDispatchers/newImageEventDispatcher.js");e.d(t,"newImageEventDispatcher",function(){return l.default});var s=e(
/*! ./touchToolEventDispatcher.js */
"./eventDispatchers/touchToolEventDispatcher.js");e.d(t,"touchToolEventDispatcher",function(){return s.default})},"./eventDispatchers/mouseEventHandlers/addNewMeasurement.js":
/*!******************************************************************!*\
          !*** ./eventDispatchers/mouseEventHandlers/addNewMeasurement.js ***!
          \******************************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../../events.js */
"./events.js"),d=e(
/*! ../../externalModules.js */
"./externalModules.js"),l=e(
/*! ../../stateManagement/toolState.js */
"./stateManagement/toolState.js"),s=e(
/*! ../../manipulators/index.js */
"./manipulators/index.js"),g=e(
/*! ../../util/logger.js */
"./util/logger.js"),i=e(
/*! ../../util/triggerEvent.js */
"./util/triggerEvent.js"),f=Object(g.getLogger)("eventDispatchers:mouseEventHandlers");t.default=function(m,o){f.log("addNewMeasurement"),m.preventDefault(),m.stopPropagation();var n=m.detail,a=n.element,u=o.createNewMeasurement(n);if(u){Object(l.addToolState)(a,o.name,u),d.default.cornerstone.updateImage(a);var c=1===Object.keys(u.handles).length?s.moveHandle:s.moveNewHandle,v=(new Date).getTime();c(n,o.name,u,u.handles.end,o.options,"mouse",function(h){if(!u.cancelled){var M=!(!o.configuration||!Object(o.configuration).hasOwnProperty("measurementCreationThreshold"))&&(new Date).getTime()-v<o.configuration.measurementCreationThreshold;if(h&&!1===M){var O=r.default.MEASUREMENT_COMPLETED,P={toolName:o.name,toolType:o.name,element:a,measurementData:u};Object(i.default)(a,O,P)}else Object(l.removeToolState)(a,o.name,u)}})}}},"./eventDispatchers/mouseEventHandlers/index.js":
/*!******************************************************!*\
          !*** ./eventDispatchers/mouseEventHandlers/index.js ***!
          \******************************************************/
/*! exports provided: mouseClick, mouseDown, mouseDownActivate, mouseDoubleClick, mouseDrag, mouseMove, mouseUp, mouseWheel */function(b,t,e){"use strict";e.r(t),e.d(t,"mouseClick",function(){return i}),e.d(t,"mouseDoubleClick",function(){return f}),e.d(t,"mouseUp",function(){return m}),e.d(t,"mouseWheel",function(){return o});var r=e(
/*! ./../shared/customCallbackHandler.js */
"./eventDispatchers/shared/customCallbackHandler.js"),d=e(
/*! ./mouseDown.js */
"./eventDispatchers/mouseEventHandlers/mouseDown.js");e.d(t,"mouseDown",function(){return d.default});var l=e(
/*! ./mouseDownActivate.js */
"./eventDispatchers/mouseEventHandlers/mouseDownActivate.js");e.d(t,"mouseDownActivate",function(){return l.default});var s=e(
/*! ./mouseDrag.js */
"./eventDispatchers/mouseEventHandlers/mouseDrag.js");e.d(t,"mouseDrag",function(){return s.default});var g=e(
/*! ./mouseMove.js */
"./eventDispatchers/mouseEventHandlers/mouseMove.js");e.d(t,"mouseMove",function(){return g.default});var i=r.default.bind(null,"Mouse","mouseClickCallback"),f=r.default.bind(null,"Mouse","doubleClickCallback"),m=r.default.bind(null,"Mouse","mouseUpCallback"),o=r.default.bind(null,"MouseWheel","mouseWheelCallback")},"./eventDispatchers/mouseEventHandlers/mouseDown.js":
/*!**********************************************************!*\
          !*** ./eventDispatchers/mouseEventHandlers/mouseDown.js ***!
          \**********************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./../../store/index.js */
"./store/index.js"),d=e(
/*! ./../../stateManagement/toolState.js */
"./stateManagement/toolState.js"),l=e(
/*! ../../store/getToolsWithMoveableHandles.js */
"./store/getToolsWithMoveableHandles.js"),s=e(
/*! ../../util/findAndMoveHelpers.js */
"./util/findAndMoveHelpers.js"),g=e(
/*! ./../../store/getInteractiveToolsForElement.js */
"./store/getInteractiveToolsForElement.js"),i=e(
/*! ./../../store/getToolsWithDataForElement.js */
"./store/getToolsWithDataForElement.js"),f=e(
/*! ./../../store/filterToolsUsableWithMultiPartTools.js */
"./store/filterToolsUsableWithMultiPartTools.js");t.default=function(m){if(!r.state.isToolLocked){var o=m.detail,n=m.detail.element,a=m.detail.currentPoints.canvas,u=Object(g.default)(n,r.getters.mouseTools()),c=u.filter(function(H){return"active"===H.mode&&Array.isArray(H.options.mouseButtonMask)&&H.options.mouseButtonMask.includes(o.buttons)&&H.options.isMouseActive});if(r.state.isMultiPartToolActive&&(c=Object(f.default)(c)),c.length>0){var v=c.find(function(H){return"function"==typeof H.preMouseDownCallback});if(v&&v.preMouseDownCallback(m))return}if(!r.state.isMultiPartToolActive){var E=Object(i.default)(n,u),M=Object(l.default)(n,E,a,"mouse");if(M.length>0){var O=M[0],P=Object(d.getToolState)(n,O.name),T=Object(s.findHandleDataNearImagePoint)(n,P,O.name,a);return void O.handleSelectedCallback(m,T.data,T.handle,"mouse")}var j=u.filter(function(H){var W=Object(d.getToolState)(n,H.name);return W&&W.data&&H.pointNearTool&&W.data.some(function(x){return H.pointNearTool(n,x,a,"mouse")})});if(j.length>0){var C=j[0],B=Object(d.getToolState)(n,C.name).data.find(function(H){return C.pointNearTool(n,H,a)});return void C.toolSelectedCallback(m,B,"mouse")}if(c.length>0){var S=c.find(function(H){return"function"==typeof H.postMouseDownCallback});if(S&&S.postMouseDownCallback(m))return}}}}},"./eventDispatchers/mouseEventHandlers/mouseDownActivate.js":
/*!******************************************************************!*\
          !*** ./eventDispatchers/mouseEventHandlers/mouseDownActivate.js ***!
          \******************************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./addNewMeasurement.js */
"./eventDispatchers/mouseEventHandlers/addNewMeasurement.js"),d=e(
/*! ./../../store/index.js */
"./store/index.js"),l=e(
/*! ./../../tools/base/BaseAnnotationTool.js */
"./tools/base/BaseAnnotationTool.js"),s=e(
/*! ../../util/getActiveTool */
"./util/getActiveTool.js");t.default=function(g){if(!d.state.isToolLocked){var i=g.detail,f=i.element,m=i.buttons,o=Object(s.default)(f,m,"mouse");if(o){if("function"==typeof o.preMouseDownActivateCallback&&o.preMouseDownActivateCallback(g))return;d.state.isMultiPartToolActive||(o.addNewMeasurement?o.addNewMeasurement(g,"mouse"):o instanceof l.default&&Object(r.default)(g,o))}}}},"./eventDispatchers/mouseEventHandlers/mouseDrag.js":
/*!**********************************************************!*\
          !*** ./eventDispatchers/mouseEventHandlers/mouseDrag.js ***!
          \**********************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./../../store/index.js */
"./store/index.js"),d=e(
/*! ./../../store/getActiveToolsForElement.js */
"./store/getActiveToolsForElement.js"),l=e(
/*! ./../../store/filterToolsUsableWithMultiPartTools.js */
"./store/filterToolsUsableWithMultiPartTools.js");t.default=function(s){if(!r.state.isToolLocked){var g,i=s.detail,f=i.element;g=(g=(g=Object(d.default)(f,r.getters.mouseTools())).filter(function(o){return Array.isArray(o.options.mouseButtonMask)&&o.options.mouseButtonMask.includes(i.buttons)&&o.options.isMouseActive})).filter(function(o){return"function"==typeof o.mouseDragCallback}),r.state.isMultiPartToolActive&&(g=Object(l.default)(g)),0!==g.length&&g[0].mouseDragCallback(s)}}},"./eventDispatchers/mouseEventHandlers/mouseMove.js":
/*!**********************************************************!*\
          !*** ./eventDispatchers/mouseEventHandlers/mouseMove.js ***!
          \**********************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./../../externalModules.js */
"./externalModules.js"),d=e(
/*! ./../../store/index.js */
"./store/index.js"),l=e(
/*! ./../../store/getInteractiveToolsForElement.js */
"./store/getInteractiveToolsForElement.js"),s=e(
/*! ./../../store/getToolsWithDataForElement.js */
"./store/getToolsWithDataForElement.js");t.default=function(g){if(!d.state.isToolLocked&&!d.state.isMultiPartToolActive){var i,f=g.detail,m=f.element;d.state.mousePositionImage=f.currentPoints.image;var n=(i=Object(l.default)(m,d.getters.mouseTools())).filter(function(v){return"active"===v.mode&&v.options.isMouseActive}),a=!1;n.length>0&&(a=n.some(function(v){return v.updateOnMouseMove})),i=Object(s.default)(m,i);for(var u=0;u<i.length;u++){var c=i[u];"function"==typeof c.mouseMoveCallback&&(a=c.mouseMoveCallback(g)||a)}!0===a&&r.default.cornerstone.updateImage(m)}}},"./eventDispatchers/mouseToolEventDispatcher.js":
/*!******************************************************!*\
          !*** ./eventDispatchers/mouseToolEventDispatcher.js ***!
          \******************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./../events.js */
"./events.js"),d=e(
/*! ./mouseEventHandlers/index.js */
"./eventDispatchers/mouseEventHandlers/index.js");t.default={enable:function(i){i.addEventListener(r.default.MOUSE_CLICK,d.mouseClick),i.addEventListener(r.default.MOUSE_DOWN,d.mouseDown),i.addEventListener(r.default.MOUSE_DOWN_ACTIVATE,d.mouseDownActivate),i.addEventListener(r.default.MOUSE_DOUBLE_CLICK,d.mouseDoubleClick),i.addEventListener(r.default.MOUSE_DRAG,d.mouseDrag),i.addEventListener(r.default.MOUSE_MOVE,d.mouseMove),i.addEventListener(r.default.MOUSE_UP,d.mouseUp),i.addEventListener(r.default.MOUSE_WHEEL,d.mouseWheel)},disable:function(i){i.removeEventListener(r.default.MOUSE_CLICK,d.mouseClick),i.removeEventListener(r.default.MOUSE_DOWN,d.mouseDown),i.removeEventListener(r.default.MOUSE_DOWN_ACTIVATE,d.mouseDownActivate),i.removeEventListener(r.default.MOUSE_DOUBLE_CLICK,d.mouseDoubleClick),i.removeEventListener(r.default.MOUSE_DRAG,d.mouseDrag),i.removeEventListener(r.default.MOUSE_MOVE,d.mouseMove),i.removeEventListener(r.default.MOUSE_UP,d.mouseUp),i.removeEventListener(r.default.MOUSE_WHEEL,d.mouseWheel)}}},"./eventDispatchers/newImageEventDispatcher.js":
/*!*****************************************************!*\
          !*** ./eventDispatchers/newImageEventDispatcher.js ***!
          \*****************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./../store/index.js */
"./store/index.js"),d=e(
/*! ./../externalModules.js */
"./externalModules.js"),l=function(f){if(r.state.isToolLocked)return!1;var m=f.detail.element,o=r.state.tools.filter(function(n){return n.element===m&&("active"===n.mode||"passive"===n.mode||"enabled"===n.mode)});if(0===o.length)return!1;o.forEach(function(n){n.newImageCallback&&n.newImageCallback(f)})};t.default={enable:function(f){f.addEventListener(d.default.cornerstone.EVENTS.NEW_IMAGE,l)},disable:function(f){f.removeEventListener(d.default.cornerstone.EVENTS.NEW_IMAGE,l)}}},"./eventDispatchers/shared/customCallbackHandler.js":
/*!**********************************************************!*\
          !*** ./eventDispatchers/shared/customCallbackHandler.js ***!
          \**********************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./../../store/index.js */
"./store/index.js"),d=e(
/*! ./../../store/getActiveToolsForElement.js */
"./store/getActiveToolsForElement.js"),l=e(
/*! ./../../store/filterToolsUsableWithMultiPartTools.js */
"./store/filterToolsUsableWithMultiPartTools.js");t.default=function(s,g,i){if(r.state.isToolLocked)return!1;var f=i.detail.element,m=r.state.tools.filter(function(o){return o.supportedInteractionTypes.includes(s)});if(m=(m=Object(d.default)(f,m,s)).filter(function(o){return"function"==typeof o[g]}),r.state.isMultiPartToolActive&&(m=Object(l.default)(m)),0===m.length)return!1;m[0][g](i)}},"./eventDispatchers/touchEventHandlers/addNewMeasurement.js":
/*!******************************************************************!*\
          !*** ./eventDispatchers/touchEventHandlers/addNewMeasurement.js ***!
          \******************************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../../events.js */
"./events.js"),d=e(
/*! ../../externalModules.js */
"./externalModules.js"),l=e(
/*! ../../store/index.js */
"./store/index.js"),s=e(
/*! ./../../manipulators/anyHandlesOutsideImage.js */
"./manipulators/anyHandlesOutsideImage.js"),g=e(
/*! ../../manipulators/index.js */
"./manipulators/index.js"),i=e(
/*! ../../stateManagement/toolState.js */
"./stateManagement/toolState.js"),f=e(
/*! ../../util/triggerEvent.js */
"./util/triggerEvent.js"),m=e(
/*! ../../util/logger.js */
"./util/logger.js"),o=Object(m.getLogger)("eventDispatchers:touchEventHandlers");t.default=function(n,a){o.log("addNewMeasurement"),n.preventDefault(),n.stopPropagation();var u=n.detail,c=u.element,v=a.createNewMeasurement(u);if(v){if(Object(i.addToolState)(c,a.name,v),1===Object.keys(v.handles).length&&u.type===r.default.TAP)return v.active=!1,v.handles.end.active=!1,v.handles.end.highlight=!1,v.invalidated=!0,(l.state.deleteIfHandleOutsideImage||a.options.deleteIfHandleOutsideImage)&&Object(s.default)(u,v.handles)&&Object(i.removeToolState)(c,a.name,v),void d.default.cornerstone.updateImage(c);d.default.cornerstone.updateImage(c),Object(g.moveNewHandle)(u,a.name,v,v.handles.end,a.options,"touch",function(){var E=r.default.MEASUREMENT_COMPLETED,M={toolName:a.name,toolType:a.name,element:c,measurementData:v};Object(f.default)(c,E,M)})}}},"./eventDispatchers/touchEventHandlers/index.js":
/*!******************************************************!*\
          !*** ./eventDispatchers/touchEventHandlers/index.js ***!
          \******************************************************/
/*! exports provided: doubleTap, multiTouchDrag, tap, touchDrag, touchEnd, touchPinch, touchPress, touchRotate, touchStart, touchStartActive */function(b,t,e){"use strict";e.r(t),e.d(t,"doubleTap",function(){return i}),e.d(t,"touchDrag",function(){return f}),e.d(t,"touchEnd",function(){return m}),e.d(t,"touchPinch",function(){return o}),e.d(t,"touchPress",function(){return n}),e.d(t,"touchRotate",function(){return a});var r=e(
/*! ./../shared/customCallbackHandler.js */
"./eventDispatchers/shared/customCallbackHandler.js"),d=e(
/*! ./multiTouchDrag.js */
"./eventDispatchers/touchEventHandlers/multiTouchDrag.js");e.d(t,"multiTouchDrag",function(){return d.default});var l=e(
/*! ./tap.js */
"./eventDispatchers/touchEventHandlers/tap.js");e.d(t,"tap",function(){return l.default});var s=e(
/*! ./touchStart.js */
"./eventDispatchers/touchEventHandlers/touchStart.js");e.d(t,"touchStart",function(){return s.default});var g=e(
/*! ./touchStartActive.js */
"./eventDispatchers/touchEventHandlers/touchStartActive.js");e.d(t,"touchStartActive",function(){return g.default});var i=r.default.bind(null,"DoubleTap","doubleTapCallback"),f=r.default.bind(null,"Touch","touchDragCallback"),m=r.default.bind(null,"Touch","touchEndCallback"),o=r.default.bind(null,"TouchPinch","touchPinchCallback"),n=r.default.bind(null,"Touch","touchPressCallback"),a=r.default.bind(null,"TouchRotate","touchRotateCallback")},"./eventDispatchers/touchEventHandlers/multiTouchDrag.js":
/*!***************************************************************!*\
          !*** ./eventDispatchers/touchEventHandlers/multiTouchDrag.js ***!
          \***************************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../../store/index.js */
"./store/index.js"),d=e(
/*! ../../store/getActiveToolsForElement.js */
"./store/getActiveToolsForElement.js"),l=e(
/*! ./../../store/filterToolsUsableWithMultiPartTools.js */
"./store/filterToolsUsableWithMultiPartTools.js");t.default=function(s){if(r.state.isToolLocked)return!1;var g=s.detail,i=g.element,f=g.numPointers,m=r.state.tools.filter(function(n){return n.supportedInteractionTypes.includes("MultiTouch")});if(m=(m=Object(d.default)(i,m,"MultiTouch")).filter(function(n){return"function"==typeof n.multiTouchDragCallback&&f===n.configuration.touchPointers}),r.state.isMultiPartToolActive&&(m=Object(l.default)(m)),0===m.length)return!1;m[0].multiTouchDragCallback(s)}},"./eventDispatchers/touchEventHandlers/shared/deactivateAllToolInstances.js":
/*!**********************************************************************************!*\
          !*** ./eventDispatchers/touchEventHandlers/shared/deactivateAllToolInstances.js ***!
          \**********************************************************************************/
/*! exports provided: default */function(b,t,e){"use strict";function r(d){Object.keys(d).forEach(function(l){d[l].active=!1})}e.r(t),t.default=function(d){if(d)for(var l=0;l<d.data.length;l++){var s=d.data[l];s.active=!1,s.handles&&r(s.handles)}}},"./eventDispatchers/touchEventHandlers/tap.js":
/*!****************************************************!*\
          !*** ./eventDispatchers/touchEventHandlers/tap.js ***!
          \****************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../../externalModules.js */
"./externalModules.js"),d=e(
/*! ./touchStartActive.js */
"./eventDispatchers/touchEventHandlers/touchStartActive.js"),l=e(
/*! ../../store/index.js */
"./store/index.js"),s=e(
/*! ../../store/getActiveToolsForElement.js */
"./store/getActiveToolsForElement.js"),g=e(
/*! ../../store/getToolsWithDataForElement.js */
"./store/getToolsWithDataForElement.js"),i=e(
/*! ../../stateManagement/toolState.js */
"./stateManagement/toolState.js"),f=e(
/*! ../../manipulators/getHandleNearImagePoint.js */
"./manipulators/getHandleNearImagePoint.js"),m=e(
/*! ../../manipulators/index.js */
"./manipulators/index.js"),o=e(
/*! ./shared/deactivateAllToolInstances.js */
"./eventDispatchers/touchEventHandlers/shared/deactivateAllToolInstances.js");t.default=function(n){if(!l.state.isToolLocked&&!l.state.isMultiPartToolActive){var a,c=n.detail.element,v=n.detail.currentPoints.canvas;a=Object(s.default)(c,l.getters.touchTools());var h=(a=Object(g.default)(c,a)).filter(function(C){for(var I=Object(i.getToolState)(c,C.name),B=0;B<I.data.length;B++)if(void 0!==Object(f.default)(c,I.data[B].handles,v,28))return!0;return!1});if(h.length>0){var E=h[0],M=Object(i.getToolState)(c,E.name),O=M.data.find(function(C){return void 0!==Object(f.default)(c,C.handles,v,28)});return M.data.active=!0,O.active=!0,r.default.cornerstone.updateImage(c),Object(m.moveHandle)(n.detail,E.name,M.data,O,E.options,"touch",function(){return Object(o.default)(M)}),n.stopImmediatePropagation(),void n.preventDefault()}var P=a.filter(function(C){var I=Object(i.getToolState)(c,C.name);return I&&I.data&&C.pointNearTool&&I.data.some(function(S){return C.pointNearTool(c,S,v)})});if(P.length>0){var T=P[0],D=Object(i.getToolState)(c,T.name),y=D.data.find(function(C){return T.pointNearTool(c,C,v)});return y.active=!0,r.default.cornerstone.updateImage(c),Object(m.moveAllHandles)(n.detail,T.name,y,null,T.options,"touch",function(){return Object(o.default)(D)}),n.stopImmediatePropagation(),void n.preventDefault()}var j=Object(s.default)(c,l.getters.touchTools());return j.length>0&&j[0].touchStartActiveCallback?j[0].touchStartActiveCallback(n):Object(d.default)(n),!1}}},"./eventDispatchers/touchEventHandlers/touchStart.js":
/*!***********************************************************!*\
          !*** ./eventDispatchers/touchEventHandlers/touchStart.js ***!
          \***********************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../../store/index.js */
"./store/index.js"),d=e(
/*! ../../util/findAndMoveHelpers.js */
"./util/findAndMoveHelpers.js"),l=e(
/*! ../../store/getToolsWithMoveableHandles.js */
"./store/getToolsWithMoveableHandles.js"),s=e(
/*! ./../../stateManagement/toolState.js */
"./stateManagement/toolState.js"),g=e(
/*! ./../../store/getInteractiveToolsForElement.js */
"./store/getInteractiveToolsForElement.js"),i=e(
/*! ./../../store/getToolsWithDataForElement.js */
"./store/getToolsWithDataForElement.js"),f=e(
/*! ./../../store/filterToolsUsableWithMultiPartTools.js */
"./store/filterToolsUsableWithMultiPartTools.js");t.default=function(m){if(!r.state.isToolLocked){var o=m.detail,n=o.element,a=o.startPoints.canvas,u=Object(g.default)(n,r.getters.touchTools()),c=u.filter(function(H){return"active"===H.mode&&H.options.isTouchActive});if(r.state.isMultiPartToolActive&&(c=Object(f.default)(c)),c.length>0){var v=c.find(function(H){return"function"==typeof H.preTouchStartCallback});if(v&&v.preTouchStartCallback(m))return}if(!r.state.isMultiPartToolActive){var E=Object(i.default)(n,u),M=Object(l.default)(n,E,a,"touch");if(M.length>0){var O=M[0],P=Object(s.getToolState)(n,O.name),T=Object(d.findHandleDataNearImagePoint)(n,P,O.name,a,"touch");return void O.handleSelectedCallback(m,T.data,T.handle,"touch")}var j=E.filter(function(H){var W=Object(s.getToolState)(n,H.name);return W&&W.data&&H.pointNearTool&&W.data.some(function(x){return H.pointNearTool(n,x,a,"touch")})});if(j.length>0){var C=j[0],B=Object(s.getToolState)(n,C.name).data.find(function(H){return C.pointNearTool(n,H,a)});return void C.toolSelectedCallback(m,B,"touch")}if(c.length>0){var S=c.find(function(H){return"function"==typeof H.postTouchStartCallback});if(S&&S.postTouchStartCallback(m))return}}}}},"./eventDispatchers/touchEventHandlers/touchStartActive.js":
/*!*****************************************************************!*\
          !*** ./eventDispatchers/touchEventHandlers/touchStartActive.js ***!
          \*****************************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./../../store/index.js */
"./store/index.js"),d=e(
/*! ./addNewMeasurement.js */
"./eventDispatchers/touchEventHandlers/addNewMeasurement.js"),l=e(
/*! ./../../tools/base/BaseAnnotationTool.js */
"./tools/base/BaseAnnotationTool.js"),s=e(
/*! ../../util/getActiveTool */
"./util/getActiveTool.js");t.default=function(g){if(!r.state.isToolLocked&&!r.state.isMultiPartToolActive){var i=g.detail.element,f=Object(s.default)(i,null,"touch");f&&f.addNewMeasurement?f.addNewMeasurement(g,"touch"):f instanceof l.default&&Object(d.default)(g,f)}}},"./eventDispatchers/touchToolEventDispatcher.js":
/*!******************************************************!*\
          !*** ./eventDispatchers/touchToolEventDispatcher.js ***!
          \******************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../events.js */
"./events.js"),d=e(
/*! ./touchEventHandlers/index.js */
"./eventDispatchers/touchEventHandlers/index.js");t.default={enable:function(i){i.addEventListener(r.default.TAP,d.tap),i.addEventListener(r.default.TOUCH_START,d.touchStart,{passive:!1}),i.addEventListener(r.default.TOUCH_DRAG,d.touchDrag,{passive:!1}),i.addEventListener(r.default.TOUCH_END,d.touchEnd),i.addEventListener(r.default.TOUCH_START_ACTIVE,d.touchStartActive),i.addEventListener(r.default.TOUCH_PRESS,d.touchPress),i.addEventListener(r.default.DOUBLE_TAP,d.doubleTap),i.addEventListener(r.default.TOUCH_PINCH,d.touchPinch),i.addEventListener(r.default.TOUCH_ROTATE,d.touchRotate),i.addEventListener(r.default.MULTI_TOUCH_DRAG,d.multiTouchDrag)},disable:function(i){i.removeEventListener(r.default.TAP,d.tap),i.removeEventListener(r.default.TOUCH_START,d.touchStart),i.removeEventListener(r.default.TOUCH_DRAG,d.touchDrag),i.removeEventListener(r.default.TOUCH_END,d.touchEnd),i.removeEventListener(r.default.TOUCH_START_ACTIVE,d.touchStartActive),i.removeEventListener(r.default.TOUCH_PRESS,d.touchPress),i.removeEventListener(r.default.DOUBLE_TAP,d.doubleTap),i.removeEventListener(r.default.TOUCH_PINCH,d.touchPinch),i.removeEventListener(r.default.TOUCH_ROTATE,d.touchRotate),i.removeEventListener(r.default.MULTI_TOUCH_DRAG,d.multiTouchDrag)}}},"./eventListeners/index.js":
/*!*********************************!*\
          !*** ./eventListeners/index.js ***!
          \*********************************/
/*! exports provided: mouseEventListeners, wheelEventListener, touchEventListeners */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./mouseEventListeners.js */
"./eventListeners/mouseEventListeners.js");e.d(t,"mouseEventListeners",function(){return r.default});var d=e(
/*! ./wheelEventListener.js */
"./eventListeners/wheelEventListener.js");e.d(t,"wheelEventListener",function(){return d.default});var l=e(
/*! ./touchEventListeners.js */
"./eventListeners/touchEventListeners.js");e.d(t,"touchEventListeners",function(){return l.default})},"./eventListeners/internals/normalizeWheel.js":
/*!****************************************************!*\
          !*** ./eventListeners/internals/normalizeWheel.js ***!
          \****************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),t.default=function(s){var g=0,i=0,f=0,m=0;return"detail"in s&&(i=s.detail),"wheelDelta"in s&&(i=-s.wheelDelta/120),"wheelDeltaY"in s&&(i=-s.wheelDeltaY/120),"wheelDeltaX"in s&&(g=-s.wheelDeltaX/120),f=10*g,m=10*i,"deltaY"in s&&(m=s.deltaY),"deltaX"in s&&(f=s.deltaX),(f||m)&&s.deltaMode&&(1===s.deltaMode?(f*=40,m*=40):(f*=800,m*=800)),f&&!g&&(g=f<1?-1:1),m&&!i&&(i=m<1?-1:1),{spinX:g,spinY:i,pixelX:f,pixelY:m}}},"./eventListeners/internals/renderSegmentation.js":
/*!********************************************************!*\
          !*** ./eventListeners/internals/renderSegmentation.js ***!
          \********************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return g});var r=e(
/*! ../../store/index.js */
"./store/index.js"),d=e(
/*! ./renderSegmentationFill */
"./eventListeners/internals/renderSegmentationFill.js"),l=e(
/*! ./renderSegmentationOutline */
"./eventListeners/internals/renderSegmentationOutline.js"),s=Object(r.getModule)("segmentation");function g(m,o,n,a,u){(function i(m){var o=s.configuration;return o.renderFill&&(m&&0!==o.fillAlpha||!m&&0!==o.fillAlphaInactive)})(u)&&Object(d.default)(m,o,a,n,u),function f(m){var o=s.configuration;return o.renderOutline&&(m&&0!==o.outlineAlpha||!m&&0!==o.outlineAlphaInactive)}(u)&&Object(l.default)(m,o,a,n,u)}},"./eventListeners/internals/renderSegmentationFill.js":
/*!************************************************************!*\
          !*** ./eventListeners/internals/renderSegmentationFill.js ***!
          \************************************************************/
/*! exports provided: default, getLabelmapCanvas, renderFill */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return g}),e.d(t,"getLabelmapCanvas",function(){return i}),e.d(t,"renderFill",function(){return f});var r=e(
/*! ../../store/index.js */
"./store/index.js"),d=e(
/*! ../../drawing/index.js */
"./drawing/index.js"),l=e(
/*! ../../externalModules */
"./externalModules.js"),s=Object(r.getModule)("segmentation");function g(o,n,a,u,c){f(o,i(o,n,a),c)}function i(o,n,a){var v=o.detail.image,h=v.width,E=v.height,M=n.segmentsHidden,O=a.pixelData,P=s.state.colorLutTables[n.colorLUTIndex],T=document.createElement("canvas");T.width=h,T.height=E;for(var D=Object(d.getNewContext)(T),y=new ImageData(h,E),j=y.data,C=0;C<O.length;C++){var I=O[C];if(0!==I&&!M[I]){var B=P[O[C]];j[4*C]=B[0],j[4*C+1]=B[1],j[4*C+2]=B[2],j[4*C+3]=B[3]}}return D.putImageData(y,0,0),T}function f(o,n,a){var u=s.configuration,c=o.detail,v=c.canvasContext,h=c.element,E=c.image,M=c.viewport,O=v.getTransform(),P=Object(d.getNewContext)(v.canvas),T=l.default.cornerstone.pixelToCanvas(h,{x:0,y:0}),D=l.default.cornerstone.pixelToCanvas(h,{x:E.width,y:0}),y=l.default.cornerstone.pixelToCanvas(h,{x:E.width,y:E.height}),j=l.default.cornerstoneMath.point.distance(T,D),C=l.default.cornerstoneMath.point.distance(D,y),I=v.canvas,B=P.imageSmoothingEnabled,S=P.globalAlpha;P.imageSmoothingEnabled=!1,P.globalAlpha=a?u.fillAlpha:u.fillAlphaInactive,Object(d.transformCanvasContext)(P,I,M);var K=function m(o){var n=o.viewport,a=o.image,u=n.scale,c=n.scale;return a.rowPixelSpacing<a.columnPixelSpacing?u*=a.columnPixelSpacing/a.rowPixelSpacing:a.columnPixelSpacing<a.rowPixelSpacing&&(c*=a.rowPixelSpacing/a.columnPixelSpacing),{x:n.translation.x*u,y:n.translation.y*c}}(c);P.drawImage(n,I.width/2-j/2+K.x,I.height/2-C/2+K.y,j,C),P.globalAlpha=S,P.imageSmoothingEnabled=B,P.setTransform(O)}},"./eventListeners/internals/renderSegmentationOutline.js":
/*!***************************************************************!*\
          !*** ./eventListeners/internals/renderSegmentationOutline.js ***!
          \***************************************************************/
/*! exports provided: default, renderOutline, getOutline, _addTopRightCorner */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return i}),e.d(t,"renderOutline",function(){return f}),e.d(t,"getOutline",function(){return m}),e.d(t,"_addTopRightCorner",function(){return u});var r=e(
/*! ../../store/index.js */
"./store/index.js"),d=e(
/*! ../../externalModules.js */
"./externalModules.js"),l=e(
/*! ../../drawing/index.js */
"./drawing/index.js"),g=(e(
/*! ../../index.js */
"./index.js"),Object(r.getModule)("segmentation"));function i(P,T,D,y,j){f(P,m(P,T,D,g.configuration.outlineWidth),T.colorLUTIndex,j)}function f(P,T,D){var y=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],j=g.configuration,C=g.state,I=P.detail,B=I.element,S=I.canvasContext,K=j.outlineWidth||1,H=S.getTransform(),W=Object(l.getNewContext)(S.canvas),L=C.colorLutTables[D],x=W.globalAlpha;W.globalAlpha=y?j.outlineAlpha:j.outlineAlphaInactive,Object(l.draw)(W,function(_){for(var R=1;R<T.length;R++)if(T[R]){var A=L[R];Object(l.drawLines)(_,B,T[R],{color:"rgba(".concat(A[0],", ").concat(A[1],", ").concat(A[2],", 1.0 )"),lineWidth:K},"canvas")}}),W.globalAlpha=x,W.setTransform(H)}function m(P,T,D,y){var j=P.detail,C=j.element,I=j.image,B=j.viewport,S=I.width,K=I.height;y=y||1;var Y,H=T.segmentsHidden,W=D.pixelData,L=T.activeSegmentIndex,x=[];D.segmentsOnLabelmap.forEach(function(V){!H[V]&&(x[V]=[])}),x[L]||(x[L]=[]);for(var R=function o(P,T){var D=T/2,y=P.rotation;y*=Math.PI/180;var j=Math.cos(y),C=Math.sin(y),I=[j,C],B=[-C,j],S={x:D*I[0],y:D*I[1]},K={x:D*B[0],y:D*B[1]};return P.hflip&&(S.x*=-1,S.y*=-1),P.vflip&&(K.x*=-1,K.y*=-1),{i:S,j:K}}(B,y),A=0;A<W.length;A++){var p=W[A];if(0!==p&&!H[p]){var F={x:(Y=A)%S,y:Math.floor(Y/S)},N=n(F,K,S);(void 0===N.top||W[N.top]!==p)&&h(x[p],C,F,R),(void 0===N.bottom||W[N.bottom]!==p)&&E(x[p],C,F,R),(void 0===N.left||W[N.left]!==p)&&M(x[p],C,F,R),(void 0===N.right||W[N.right]!==p)&&O(x[p],C,F,R),void 0!==N.topLeft&&W[N.topLeft]!==p&&W[N.top]===p&&W[N.left]===p&&a(x[p],C,F,R),void 0!==N.topRight&&W[N.topRight]!==p&&W[N.top]===p&&W[N.right]===p&&u(x[p],C,F,R),void 0!==N.bottomLeft&&W[N.bottomLeft]!==p&&W[N.bottom]===p&&W[N.left]===p&&c(x[p],C,F,R),void 0!==N.bottomRight&&W[N.bottomRight]!==p&&W[N.bottom]===p&&W[N.right]===p&&v(x[p],C,F,R)}}return x}function n(P,T,D){var y=P.y*D+P.x,j={},I=P.y+1<T,B=P.x-1>=0,S=P.x+1<D;return P.y-1>=0&&(j.top=y-D,S&&(j.topRight=j.top+1),B&&(j.topLeft=j.top-1)),I&&(j.bottom=y+D,S&&(j.bottomRight=j.bottom+1),B&&(j.bottomLeft=j.bottom-1)),B&&(j.left=y-1),S&&(j.right=y+1),j}function a(P,T,D,y){var C=(0,d.default.cornerstone.pixelToCanvas)(T,D);C.x+=y.j.x,C.y+=y.j.y;var I={x:C.x,y:C.y};I.x+=2*y.i.x,I.y+=2*y.i.y,P.push({start:C,end:I})}function u(P,T,D,y){var C=(0,d.default.cornerstone.pixelToCanvas)(T,{x:D.x+1,y:D.y});C.x+=y.j.x,C.y+=y.j.y;var I={x:C.x,y:C.y};I.x-=2*y.i.x,I.y-=2*y.i.y,P.push({start:C,end:I})}function c(P,T,D,y){var C=(0,d.default.cornerstone.pixelToCanvas)(T,{x:D.x,y:D.y+1});C.x-=y.j.x,C.y-=y.j.y;var I={x:C.x,y:C.y};I.x+=2*y.i.x,I.y+=2*y.i.y,P.push({start:C,end:I})}function v(P,T,D,y){var C=(0,d.default.cornerstone.pixelToCanvas)(T,{x:D.x+1,y:D.y+1});C.x-=y.j.x,C.y-=y.j.y;var I={x:C.x,y:C.y};I.x-=2*y.i.x,I.y-=2*y.i.y,P.push({start:C,end:I})}function h(P,T,D,y){var j=d.default.cornerstone.pixelToCanvas,C=j(T,D),I=j(T,{x:D.x+1,y:D.y});C.x+=y.j.x,C.y+=y.j.y,I.x+=y.j.x,I.y+=y.j.y,P.push({start:C,end:I})}function E(P,T,D,y){var j=d.default.cornerstone.pixelToCanvas,C=j(T,{x:D.x,y:D.y+1}),I=j(T,{x:D.x+1,y:D.y+1});C.x-=y.j.x,C.y-=y.j.y,I.x-=y.j.x,I.y-=y.j.y,P.push({start:C,end:I})}function M(P,T,D,y){var j=d.default.cornerstone.pixelToCanvas,C=j(T,D),I=j(T,{x:D.x,y:D.y+1});C.x+=y.i.x,C.y+=y.i.y,I.x+=y.i.x,I.y+=y.i.y,P.push({start:C,end:I})}function O(P,T,D,y){var j=d.default.cornerstone.pixelToCanvas,C=j(T,{x:D.x+1,y:D.y}),I=j(T,{x:D.x+1,y:D.y+1});C.x-=y.i.x,C.y-=y.i.y,I.x-=y.i.x,I.y-=y.i.y,P.push({start:C,end:I})}},"./eventListeners/mouseEventListeners.js":
/*!***********************************************!*\
          !*** ./eventListeners/mouseEventListeners.js ***!
          \***********************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var m,r=e(
/*! ../events.js */
"./events.js"),d=e(
/*! ../externalModules.js */
"./externalModules.js"),l=e(
/*! ../util/copyPoints.js */
"./util/copyPoints.js"),s=e(
/*! ../util/triggerEvent.js */
"./util/triggerEvent.js"),g=e(
/*! ../util/logger.js */
"./util/logger.js"),i=Object(g.getLogger)("eventListeners:mouseEventListeners"),f=!0,o=200,n=new Map;function a(O){if("number"==typeof O.buttons)return O.buttons;switch(O.which){case 0:return 0;case 1:return 1;case 2:return 4;case 3:return 2}return 0}function u(){f=!1}function c(O){var P=O.currentTarget,T=d.default.cornerstone.getEnabledElement(P);if(T.image){var D=r.default.MOUSE_DOUBLE_CLICK,y={page:d.default.cornerstoneMath.point.pageToPoint(O),image:d.default.cornerstone.pageToPixel(P,O.pageX,O.pageY),client:{x:O.clientX,y:O.clientY}};y.canvas=d.default.cornerstone.pixelToCanvas(P,y.image);var j=Object(l.default)(y);i.log("double-click: %o",a(O));var C={event:O,buttons:a(O),viewport:d.default.cornerstone.getViewport(P),image:T.image,element:P,startPoints:y,lastPoints:j,currentPoints:y,deltaPoints:{x:0,y:0},type:D};Object(s.default)(P,D,C)}}function v(O){var P=O.currentTarget,T=d.default.cornerstone.getEnabledElement(P);if(T.image){m=setTimeout(u,o),P.removeEventListener("mousemove",h);var D={page:d.default.cornerstoneMath.point.pageToPoint(O),image:d.default.cornerstone.pageToPixel(P,O.pageX,O.pageY),client:{x:O.clientX,y:O.clientY}};D.canvas=d.default.cornerstone.pixelToCanvas(P,D.image);var y=Object(l.default)(D),j={event:O,buttons:a(O),viewport:d.default.cornerstone.getViewport(P),image:T.image,element:P,startPoints:D,lastPoints:y,currentPoints:D,deltaPoints:{x:0,y:0},type:r.default.MOUSE_DOWN};Object(s.default)(j.element,r.default.MOUSE_DOWN,j)&&(j.type=r.default.MOUSE_DOWN_ACTIVATE,Object(s.default)(j.element,r.default.MOUSE_DOWN_ACTIVATE,j)),document.addEventListener("mousemove",I),document.addEventListener("mouseup",B),n.set(I,"mousemove"),n.set(B,"mouseup")}function I(S){var K=r.default.MOUSE_DRAG,H={page:d.default.cornerstoneMath.point.pageToPoint(S),image:d.default.cornerstone.pageToPixel(P,S.pageX,S.pageY),client:{x:S.clientX,y:S.clientY}};H.canvas=d.default.cornerstone.pixelToCanvas(P,H.image);var W={page:d.default.cornerstoneMath.point.subtract(H.page,y.page),image:d.default.cornerstoneMath.point.subtract(H.image,y.image),client:d.default.cornerstoneMath.point.subtract(H.client,y.client),canvas:d.default.cornerstoneMath.point.subtract(H.canvas,y.canvas)};i.log("mousemove: %o",a(S));var L={buttons:a(S),viewport:d.default.cornerstone.getViewport(P),image:T.image,element:P,startPoints:D,lastPoints:y,currentPoints:H,deltaPoints:W,type:K,ctrlKey:S.ctrlKey,metaKey:S.metaKey,shiftKey:S.shiftKey};Object(s.default)(L.element,K,L),y=Object(l.default)(H)}function B(S){clearTimeout(m);var K=r.default.MOUSE_UP;f&&(K=r.default.MOUSE_CLICK);var H={page:d.default.cornerstoneMath.point.pageToPoint(S),image:d.default.cornerstone.pageToPixel(P,S.pageX,S.pageY),client:{x:S.clientX,y:S.clientY}};H.canvas=d.default.cornerstone.pixelToCanvas(P,H.image);var W={page:d.default.cornerstoneMath.point.subtract(H.page,y.page),image:d.default.cornerstoneMath.point.subtract(H.image,y.image),client:d.default.cornerstoneMath.point.subtract(H.client,y.client),canvas:d.default.cornerstoneMath.point.subtract(H.canvas,y.canvas)};i.log("mouseup: %o",a(S));var L={event:S,buttons:a(S),viewport:d.default.cornerstone.getViewport(P),image:T.image,element:P,startPoints:D,lastPoints:y,currentPoints:H,deltaPoints:W,type:K};Object(s.default)(L.element,K,L),document.removeEventListener("mousemove",I),document.removeEventListener("mouseup",B),n.delete(I),n.delete(B),P.addEventListener("mousemove",h),f=!0}}function h(O){var P=O.currentTarget,T=d.default.cornerstone.getEnabledElement(P);if(T.image){var D=r.default.MOUSE_MOVE,y={page:d.default.cornerstoneMath.point.pageToPoint(O),image:d.default.cornerstone.pageToPixel(P,O.pageX,O.pageY),client:{x:O.clientX,y:O.clientY}};y.canvas=d.default.cornerstone.pixelToCanvas(P,y.image);var j=Object(l.default)(y),C={page:d.default.cornerstoneMath.point.pageToPoint(O),image:d.default.cornerstone.pageToPixel(P,O.pageX,O.pageY),client:{x:O.clientX,y:O.clientY}};C.canvas=d.default.cornerstone.pixelToCanvas(P,C.image);var I={page:d.default.cornerstoneMath.point.subtract(C.page,j.page),image:d.default.cornerstoneMath.point.subtract(C.image,j.image),client:d.default.cornerstoneMath.point.subtract(C.client,j.client),canvas:d.default.cornerstoneMath.point.subtract(C.canvas,j.canvas)},B={viewport:d.default.cornerstone.getViewport(P),image:T.image,element:P,startPoints:y,lastPoints:j,currentPoints:C,deltaPoints:I,type:D};Object(s.default)(P,D,B),j=Object(l.default)(C)}}function E(O){O.removeEventListener("mousedown",v),O.removeEventListener("mousemove",h),O.removeEventListener("dblclick",c),n.forEach(function(P,T){document.removeEventListener(P,T)}),n.clear()}t.default={enable:function M(O){E(O),O.addEventListener("mousedown",v),O.addEventListener("mousemove",h),O.addEventListener("dblclick",c)},disable:E}},"./eventListeners/onImageRenderedBrushEventHandler.js":
/*!************************************************************!*\
          !*** ./eventListeners/onImageRenderedBrushEventHandler.js ***!
          \************************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../store/index.js */
"./store/index.js"),d=e(
/*! ./internals/renderSegmentation.js */
"./eventListeners/internals/renderSegmentation.js"),l=Object(r.getModule)("segmentation");t.default=function(i){var o=l.configuration,a=l.getters.labelmaps3D(i.detail.element),u=a.activeLabelmapIndex,c=a.labelmaps3D,v=a.currentImageIdIndex;c&&(o.shouldRenderInactiveLabelmaps&&function g(i,f,m,o){for(var n=0;n<f.length;n++){var a=f[n];if(n!==m&&a){var u=a.labelmaps2D[o];u&&Object(d.default)(i,a,n,u,!1)}}}(i,c,u,v),function s(i,f,m,o){var n=f[m];if(n){var a=n.labelmaps2D[o];a&&Object(d.default)(i,n,m,a,!0)}}(i,c,u,v))}},"./eventListeners/preventGhostClick.js":
/*!*********************************************!*\
          !*** ./eventListeners/preventGhostClick.js ***!
          \*********************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var l,s,d_mouse=0,d_touch=1;function g(v,h){var E=Date.now();if(v!==l){if(E-s<=2e3)return h.preventDefault(),h.stopPropagation(),h.stopImmediatePropagation(),!1;l=v}s=E}var i=g.bind(null,d_mouse),f=g.bind(null,d_touch);function m(v,h,E){var M=E?i:f;h.forEach(function(O){v.addEventListener(O,M,{passive:!1})})}function o(v,h,E){var M=E?i:f;h.forEach(function(O){v.removeEventListener(O,M)})}var n=["mousedown","mouseup"],a=["touchstart","touchend"];function u(v){o(v,n,d_mouse),o(v,a,d_touch)}t.default={enable:function c(v){u(v),m(v,n,d_mouse),m(v,a,d_touch)},disable:u}},"./eventListeners/touchEventListeners.js":
/*!***********************************************!*\
          !*** ./eventListeners/touchEventListeners.js ***!
          \***********************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var f,m,o,n,a,u,c,v,P,r=e(
/*! ../events.js */
"./events.js"),d=e(
/*! ../externalModules.js */
"./externalModules.js"),l=e(
/*! ../util/copyPoints.js */
"./util/copyPoints.js"),s=e(
/*! ./preventGhostClick.js */
"./eventListeners/preventGhostClick.js"),g=e(
/*! ../util/triggerEvent.js */
"./util/triggerEvent.js"),i=e(
/*! ../toolOptions.js */
"./toolOptions.js"),h=1,E=0,M=!1,O=!1,T=700,D=5,y="touchInput";function j(S){var K=S.currentTarget||S.srcEvent.currentTarget,H=d.default.cornerstone.getEnabledElement(K);if(H.image){var W,L,x,R;switch(S.preventDefault(),(S.pointers&&S.pointers.length>1||S.touches&&S.touches.length>1)&&(O=!1,clearTimeout(c)),S.type){case"tap":O=!1,clearTimeout(c),(m={page:d.default.cornerstoneMath.point.pageToPoint(S.pointers[0]),image:d.default.cornerstone.pageToPixel(K,S.pointers[0].pageX,S.pointers[0].pageY),client:{x:S.pointers[0].clientX,y:S.pointers[0].clientY}}).canvas=d.default.cornerstone.pixelToCanvas(K,m.image),W=r.default.TAP,a={event:S,viewport:d.default.cornerstone.getViewport(K),image:H.image,element:K,currentPoints:m,type:W,isTouchEvent:!0},Object(g.default)(K,W,a);break;case"doubletap":O=!1,clearTimeout(c),(m={page:d.default.cornerstoneMath.point.pageToPoint(S.pointers[0]),image:d.default.cornerstone.pageToPixel(K,S.pointers[0].pageX,S.pointers[0].pageY),client:{x:S.pointers[0].clientX,y:S.pointers[0].clientY}}).canvas=d.default.cornerstone.pixelToCanvas(K,m.image),W=r.default.DOUBLE_TAP,a={event:S,viewport:d.default.cornerstone.getViewport(K),image:H.image,element:K,currentPoints:m,type:W,isTouchEvent:!0},Object(g.default)(K,W,a);break;case"pinchstart":O=!1,clearTimeout(c),h=1;break;case"pinchmove":if(O=!1,clearTimeout(c),!0===M){h=S.scale,M=!1;break}L=(S.scale-h)/h,(f={page:S.center,image:d.default.cornerstone.pageToPixel(K,S.center.x,S.center.y)}).canvas=d.default.cornerstone.pixelToCanvas(K,f.image),W=r.default.TOUCH_PINCH,a={event:S,startPoints:f,viewport:d.default.cornerstone.getViewport(K),image:H.image,element:K,direction:S.scale<1?1:-1,scaleChange:L,type:W,isTouchEvent:!0},Object(g.default)(K,W,a),h=S.scale;break;case"touchstart":h=1,clearTimeout(c),clearTimeout(u),u=setTimeout(function(){(f={page:d.default.cornerstoneMath.point.pageToPoint(S.touches[0]),image:d.default.cornerstone.pageToPixel(K,S.touches[0].pageX,S.touches[0].pageY),client:{x:S.touches[0].clientX,y:S.touches[0].clientY}}).canvas=d.default.cornerstone.pixelToCanvas(K,f.image),W=r.default.TOUCH_START,S.touches.length>1&&(W=r.default.MULTI_TOUCH_START),a={event:S,viewport:d.default.cornerstone.getViewport(K),image:H.image,element:K,startPoints:f,currentPoints:f,type:W,isTouchEvent:!0},!0===Object(g.default)(K,W,a)&&(W=r.default.TOUCH_START_ACTIVE,S.touches.length>1&&(W=r.default.MULTI_TOUCH_START_ACTIVE),a.type=W,Object(g.default)(K,W,a)),o=Object(l.default)(f)},50),O=!0,v=0,c=setTimeout(function(){O&&((m={page:d.default.cornerstoneMath.point.pageToPoint(S.touches[0]),image:d.default.cornerstone.pageToPixel(K,S.touches[0].pageX,S.touches[0].pageY),client:{x:S.touches[0].clientX,y:S.touches[0].clientY}}).canvas=d.default.cornerstone.pixelToCanvas(K,f.image),W=r.default.TOUCH_PRESS,a={event:S,viewport:d.default.cornerstone.getViewport(K),image:H.image,element:K,currentPoints:m,type:W,isTouchEvent:!0},Object(g.default)(K,W,a))},T);break;case"touchend":h=1,O=!1,clearTimeout(c),setTimeout(function(){(f={page:d.default.cornerstoneMath.point.pageToPoint(S.changedTouches[0]),image:d.default.cornerstone.pageToPixel(K,S.changedTouches[0].pageX,S.changedTouches[0].pageY),client:{x:S.changedTouches[0].clientX,y:S.changedTouches[0].clientY}}).canvas=d.default.cornerstone.pixelToCanvas(K,f.image),W=r.default.TOUCH_END,a={event:S,viewport:d.default.cornerstone.getViewport(K),image:H.image,element:K,startPoints:f,currentPoints:f,type:W,isTouchEvent:!0},Object(g.default)(K,W,a)},50);break;case"panmove":x={x:S.deltaX-P.x,y:S.deltaY-P.y},P={x:S.deltaX,y:S.deltaY},(m={page:{x:o.page.x+x.x,y:o.page.y+x.y},image:d.default.cornerstone.pageToPixel(K,o.page.x+x.x,o.page.y+x.y),client:{x:o.client.x+x.x,y:o.client.y+x.y}}).canvas=d.default.cornerstone.pixelToCanvas(K,m.image),n={page:d.default.cornerstoneMath.point.subtract(m.page,o.page),image:d.default.cornerstoneMath.point.subtract(m.image,o.image),client:d.default.cornerstoneMath.point.subtract(m.client,o.client),canvas:d.default.cornerstoneMath.point.subtract(m.canvas,o.canvas)},(v+=Math.sqrt(n.page.x*n.page.x+n.page.y*n.page.y))>D&&(O=!1,clearTimeout(c)),W=r.default.TOUCH_DRAG,S.pointers.length>1&&(W=r.default.MULTI_TOUCH_DRAG),a={viewport:d.default.cornerstone.getViewport(K),image:H.image,element:K,startPoints:f,lastPoints:o,currentPoints:m,deltaPoints:n,numPointers:S.pointers.length,type:W,isTouchEvent:!0},Object(g.default)(K,W,a),o=Object(l.default)(m);break;case"panstart":P={x:S.deltaX,y:S.deltaY},(m={page:d.default.cornerstoneMath.point.pageToPoint(S.pointers[0]),image:d.default.cornerstone.pageToPixel(K,S.pointers[0].pageX,S.pointers[0].pageY),client:{x:S.pointers[0].clientX,y:S.pointers[0].clientY}}).canvas=d.default.cornerstone.pixelToCanvas(K,m.image),o=Object(l.default)(m);break;case"panend":if(O=!1,clearTimeout(c),!o)return!1;(m={page:d.default.cornerstoneMath.point.pageToPoint(S.pointers[0]),image:d.default.cornerstone.pageToPixel(K,S.pointers[0].pageX,S.pointers[0].pageY),client:{x:S.pointers[0].clientX,y:S.pointers[0].clientY}}).canvas=d.default.cornerstone.pixelToCanvas(K,m.image),n={page:d.default.cornerstoneMath.point.subtract(m.page,o.page),image:d.default.cornerstoneMath.point.subtract(m.image,o.image),client:d.default.cornerstoneMath.point.subtract(m.client,o.client),canvas:d.default.cornerstoneMath.point.subtract(m.canvas,o.canvas)},W=r.default.TOUCH_DRAG_END,a={event:S.srcEvent,viewport:d.default.cornerstone.getViewport(K),image:H.image,element:K,startPoints:f,lastPoints:o,currentPoints:m,deltaPoints:n,type:W,isTouchEvent:!0},Object(g.default)(K,W,a),2==S.pointers.length-S.changedPointers.length&&(M=!0);break;case"rotatemove":O=!1,clearTimeout(c),R=S.rotation-E,E=S.rotation,W=r.default.TOUCH_ROTATE,a={event:S.srcEvent,viewport:d.default.cornerstone.getViewport(K),image:H.image,element:K,rotation:R,type:W},Object(g.default)(K,W,a)}return!1}}function I(S){s.default.disable(S),["touchstart","touchend"].forEach(function(L){S.removeEventListener(L,j)});var H=Object(i.getToolOptions)(y,S),W=H.hammer;W&&(W.off("tap doubletap panstart panmove panend pinchstart pinchmove rotatemove",j),W.input.destroy()),H.hammer=null,Object(i.clearToolOptions)(y,S)}t.default={enable:function C(S){I(S);var K=d.default.Hammer,W=new K.Manager(S,{inputClass:K.SUPPORT_POINTER_EVENTS?K.PointerEventInput:K.TouchInput}),x=new K.Pan({pointers:0,direction:K.DIRECTION_ALL,threshold:0}),_=new K.Pinch({threshold:0}),R=new K.Rotate({threshold:0});_.recognizeWith(x),_.recognizeWith(R),R.recognizeWith(x);var A=new K.Tap({event:"doubletap",taps:2,interval:1500,threshold:50,posThreshold:50});A.recognizeWith(x),W.add([A,x,R,_]),W.on("tap doubletap panstart panmove panend pinchstart pinchmove rotatemove",j),s.default.enable(S),["touchstart","touchend"].forEach(function(F){S.addEventListener(F,j,{passive:!1})});var U=Object(i.getToolOptions)(y,S);U.hammer=W,Object(i.setToolOptions)(y,S,U)},disable:I}},"./eventListeners/wheelEventListener.js":
/*!**********************************************!*\
          !*** ./eventListeners/wheelEventListener.js ***!
          \**********************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../events.js */
"./events.js"),d=e(
/*! ../externalModules.js */
"./externalModules.js"),l=e(
/*! ../util/triggerEvent.js */
"./util/triggerEvent.js"),s=e(
/*! ./internals/normalizeWheel.js */
"./eventListeners/internals/normalizeWheel.js");function g(m){var o=m.currentTarget,n=d.default.cornerstone.getEnabledElement(o);if(n.image&&!(m.deltaY>-1&&m.deltaY<1)){m.preventDefault();var a=m.pageX,u=m.pageY,c=d.default.cornerstone.pageToPixel(o,a,u),v=Object(s.default)(m),h=v.spinX,E=v.spinY,M=v.pixelX,O=v.pixelY,P=E<0?-1:1,T={element:o,viewport:d.default.cornerstone.getViewport(o),detail:m,image:n.image,direction:P,spinX:h,spinY:E,pixelX:M,pixelY:O,pageX:a,pageY:u,imageX:c.x,imageY:c.y};Object(l.default)(o,r.default.MOUSE_WHEEL,T)}}function f(m){m.removeEventListener("wheel",g,{passive:!1})}t.default={enable:function i(m){f(m),m.addEventListener("wheel",g,{passive:!1})},disable:f}},"./eventListeners/windowResizeHandler.js":
/*!***********************************************!*\
          !*** ./eventListeners/windowResizeHandler.js ***!
          \***********************************************/
/*! exports provided: forceEnabledElementResize, default */function(b,t,e){"use strict";e.r(t),e.d(t,"forceEnabledElementResize",function(){return f});var g,r=e(
/*! ./../store/index.js */
"./store/index.js"),d=e(
/*! ./../externalModules.js */
"./externalModules.js"),s=function(){window.removeEventListener("resize",i,!1)};function i(){g||(g=setTimeout(function(){g=null,f()},66))}var f=function(){r.state.enabledElements.forEach(function(o){d.default.cornerstone.resize(o)})};t.default={enable:function(){s(),window.addEventListener("resize",i,!1)},disable:s}},"./events.js":
/*!*******************!*\
          !*** ./events.js ***!
          \*******************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),t.default={MOUSE_DOWN:"cornerstonetoolsmousedown",MOUSE_UP:"cornerstonetoolsmouseup",MOUSE_DOWN_ACTIVATE:"cornerstonetoolsmousedownactivate",MOUSE_DRAG:"cornerstonetoolsmousedrag",MOUSE_MOVE:"cornerstonetoolsmousemove",MOUSE_CLICK:"cornerstonetoolsmouseclick",MOUSE_DOUBLE_CLICK:"cornerstonetoolsmousedoubleclick",MOUSE_WHEEL:"cornerstonetoolsmousewheel",TOUCH_START:"cornerstonetoolstouchstart",TOUCH_START_ACTIVE:"cornerstonetoolstouchstartactive",TOUCH_END:"cornerstonetoolstouchend",TOUCH_DRAG:"cornerstonetoolstouchdrag",TOUCH_DRAG_END:"cornerstonetoolstouchdragend",TOUCH_PINCH:"cornerstonetoolstouchpinch",TOUCH_ROTATE:"cornerstonetoolstouchrotate",TOUCH_PRESS:"cornerstonetoolstouchpress",TAP:"cornerstonetoolstap",DOUBLE_TAP:"cornerstonetoolsdoubletap",MULTI_TOUCH_START:"cornerstonetoolsmultitouchstart",MULTI_TOUCH_START_ACTIVE:"cornerstonetoolsmultitouchstartactive",MULTI_TOUCH_DRAG:"cornerstonetoolsmultitouchdrag",KEY_DOWN:"cornerstonetoolskeydown",KEY_UP:"cornerstonetoolskeyup",KEY_PRESS:"cornerstonetoolskeypress",MEASUREMENT_ADDED:"cornerstonetoolsmeasurementadded",MEASUREMENT_MODIFIED:"cornerstonetoolsmeasurementmodified",MEASUREMENT_COMPLETED:"cornerstonetoolsmeasurementcompleted",MEASUREMENT_REMOVED:"cornerstonetoolsmeasurementremoved",TOOL_DEACTIVATED:"cornerstonetoolstooldeactivated",CLIP_STOPPED:"cornerstonetoolsclipstopped",STACK_SCROLL:"cornerstonetoolsstackscroll",STACK_PREFETCH_IMAGE_LOADED:"cornerstonetoolsstackprefetchimageloaded",STACK_PREFETCH_DONE:"cornerstonetoolsstackprefetchdone",LABELMAP_MODIFIED:"cornersontetoolslabelmapmodified"}},"./externalModules.js":
/*!****************************!*\
          !*** ./externalModules.js ***!
          \****************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=window.cornerstone,d=window.cornerstoneMath,l=window.Hammer;t.default={set cornerstone(s){r=s},get cornerstone(){return r},set cornerstoneMath(s){d=s},get cornerstoneMath(){return d},set Hammer(s){l=s},get Hammer(){return l}}},"./importInternal.js":
/*!***************************!*\
          !*** ./importInternal.js ***!
          \***************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./lib.js */
"./lib.js");t.default=function(d){return r.lib[d]}},"./index.js":
/*!******************!*\
          !*** ./index.js ***!
          \******************/
/*! exports provided: AngleTool, ArrowAnnotateTool, BidirectionalTool, CircleRoiTool, CobbAngleTool, EllipticalRoiTool, FreehandRoiTool, LengthTool, ProbeTool, RectangleRoiTool, TextMarkerTool, BrushTool, SphericalBrushTool, RectangleScissorsTool, FreehandScissorsTool, CircleScissorsTool, CorrectionScissorsTool, CrosshairsTool, DoubleTapFitToWindowTool, DragProbeTool, EraserTool, FreehandRoiSculptorTool, MagnifyTool, OverlayTool, OrientationMarkersTool, PanMultiTouchTool, PanTool, ReferenceLinesTool, RotateTool, RotateTouchTool, ScaleOverlayTool, StackScrollMouseWheelTool, StackScrollMultiTouchTool, StackScrollTool, WwwcRegionTool, WwwcTool, ZoomMouseWheelTool, ZoomTool, ZoomTouchPinchTool, init, stackPrefetch, stackRenderers, playClip, stopClip, store, getModule, getToolForElement, addTool, addToolForElement, removeTool, removeToolForElement, setToolOptions, setToolOptionsForElement, isToolActiveForElement, setToolActive, setToolActiveForElement, setToolEnabled, setToolEnabledForElement, setToolDisabled, setToolDisabledForElement, setToolPassive, setToolPassiveForElement, addToolState, getToolState, removeToolState, clearToolState, setElementToolStateManager, getElementToolStateManager, textStyle, toolStyle, toolColors, toolCoordinates, stackSpecificStateManager, newStackSpecificToolStateManager, addStackStateManager, loadHandlerManager, newImageIdSpecificToolStateManager, globalImageIdSpecificToolStateManager, newFrameOfReferenceSpecificToolStateManager, globalFrameOfReferenceSpecificToolStateManager, forceEnabledElementResize, orientation, SaveAs, enableLogger, disableLogger, register, registerSome, wwwcSynchronizer, updateImageSynchronizer, Synchronizer, stackScrollSynchronizer, stackImagePositionSynchronizer, stackImagePositionOffsetSynchronizer, stackImageIndexSynchronizer, panZoomSynchronizer, importInternal, external, EVENTS, version, import, default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./tools/annotation/index.js */
"./tools/annotation/index.js");e.d(t,"AngleTool",function(){return r.AngleTool}),e.d(t,"ArrowAnnotateTool",function(){return r.ArrowAnnotateTool}),e.d(t,"BidirectionalTool",function(){return r.BidirectionalTool}),e.d(t,"CircleRoiTool",function(){return r.CircleRoiTool}),e.d(t,"CobbAngleTool",function(){return r.CobbAngleTool}),e.d(t,"EllipticalRoiTool",function(){return r.EllipticalRoiTool}),e.d(t,"FreehandRoiTool",function(){return r.FreehandRoiTool}),e.d(t,"LengthTool",function(){return r.LengthTool}),e.d(t,"ProbeTool",function(){return r.ProbeTool}),e.d(t,"RectangleRoiTool",function(){return r.RectangleRoiTool}),e.d(t,"TextMarkerTool",function(){return r.TextMarkerTool});var d=e(
/*! ./tools/segmentation/index.js */
"./tools/segmentation/index.js");e.d(t,"BrushTool",function(){return d.BrushTool}),e.d(t,"SphericalBrushTool",function(){return d.SphericalBrushTool}),e.d(t,"RectangleScissorsTool",function(){return d.RectangleScissorsTool}),e.d(t,"FreehandScissorsTool",function(){return d.FreehandScissorsTool}),e.d(t,"CircleScissorsTool",function(){return d.CircleScissorsTool}),e.d(t,"CorrectionScissorsTool",function(){return d.CorrectionScissorsTool});var l=e(
/*! ./tools/index.js */
"./tools/index.js");e.d(t,"CrosshairsTool",function(){return l.CrosshairsTool}),e.d(t,"DoubleTapFitToWindowTool",function(){return l.DoubleTapFitToWindowTool}),e.d(t,"DragProbeTool",function(){return l.DragProbeTool}),e.d(t,"EraserTool",function(){return l.EraserTool}),e.d(t,"FreehandRoiSculptorTool",function(){return l.FreehandRoiSculptorTool}),e.d(t,"MagnifyTool",function(){return l.MagnifyTool}),e.d(t,"OverlayTool",function(){return l.OverlayTool}),e.d(t,"OrientationMarkersTool",function(){return l.OrientationMarkersTool}),e.d(t,"PanMultiTouchTool",function(){return l.PanMultiTouchTool}),e.d(t,"PanTool",function(){return l.PanTool}),e.d(t,"ReferenceLinesTool",function(){return l.ReferenceLinesTool}),e.d(t,"RotateTool",function(){return l.RotateTool}),e.d(t,"RotateTouchTool",function(){return l.RotateTouchTool}),e.d(t,"ScaleOverlayTool",function(){return l.ScaleOverlayTool}),e.d(t,"StackScrollMouseWheelTool",function(){return l.StackScrollMouseWheelTool}),e.d(t,"StackScrollMultiTouchTool",function(){return l.StackScrollMultiTouchTool}),e.d(t,"StackScrollTool",function(){return l.StackScrollTool}),e.d(t,"WwwcRegionTool",function(){return l.WwwcRegionTool}),e.d(t,"WwwcTool",function(){return l.WwwcTool}),e.d(t,"ZoomMouseWheelTool",function(){return l.ZoomMouseWheelTool}),e.d(t,"ZoomTool",function(){return l.ZoomTool}),e.d(t,"ZoomTouchPinchTool",function(){return l.ZoomTouchPinchTool});var s=e(
/*! ./init.js */
"./init.js");e.d(t,"init",function(){return s.default});var g=e(
/*! ./stackTools/stackPrefetch.js */
"./stackTools/stackPrefetch.js");e.d(t,"stackPrefetch",function(){return g.default});var i=e(
/*! ./stackTools/stackRenderers.js */
"./stackTools/stackRenderers.js");e.d(t,"stackRenderers",function(){return i.default});var f=e(
/*! ./stackTools/playClip.js */
"./stackTools/playClip.js");e.d(t,"playClip",function(){return f.playClip}),e.d(t,"stopClip",function(){return f.stopClip});var m=e(
/*! ./store/index.js */
"./store/index.js");e.d(t,"store",function(){return m.default}),e.d(t,"getModule",function(){return m.getModule});var o=e(
/*! ./store/getToolForElement.js */
"./store/getToolForElement.js");e.d(t,"getToolForElement",function(){return o.default});var n=e(
/*! ./store/addTool.js */
"./store/addTool.js");e.d(t,"addTool",function(){return n.addTool}),e.d(t,"addToolForElement",function(){return n.addToolForElement});var a=e(
/*! ./store/removeTool.js */
"./store/removeTool.js");e.d(t,"removeTool",function(){return a.removeTool}),e.d(t,"removeToolForElement",function(){return a.removeToolForElement});var u=e(
/*! ./store/setToolOptions.js */
"./store/setToolOptions.js");e.d(t,"setToolOptions",function(){return u.setToolOptions}),e.d(t,"setToolOptionsForElement",function(){return u.setToolOptionsForElement});var c=e(
/*! ./store/setToolMode.js */
"./store/setToolMode.js");e.d(t,"setToolActive",function(){return c.setToolActive}),e.d(t,"setToolActiveForElement",function(){return c.setToolActiveForElement}),e.d(t,"setToolEnabled",function(){return c.setToolEnabled}),e.d(t,"setToolEnabledForElement",function(){return c.setToolEnabledForElement}),e.d(t,"setToolDisabled",function(){return c.setToolDisabled}),e.d(t,"setToolDisabledForElement",function(){return c.setToolDisabledForElement}),e.d(t,"setToolPassive",function(){return c.setToolPassive}),e.d(t,"setToolPassiveForElement",function(){return c.setToolPassiveForElement});var v=e(
/*! ./store/isToolActiveForElement */
"./store/isToolActiveForElement.js");e.d(t,"isToolActiveForElement",function(){return v.default});var h=e(
/*! ./stateManagement/toolState.js */
"./stateManagement/toolState.js");e.d(t,"addToolState",function(){return h.addToolState}),e.d(t,"getToolState",function(){return h.getToolState}),e.d(t,"removeToolState",function(){return h.removeToolState}),e.d(t,"clearToolState",function(){return h.clearToolState}),e.d(t,"setElementToolStateManager",function(){return h.setElementToolStateManager}),e.d(t,"getElementToolStateManager",function(){return h.getElementToolStateManager});var E=e(
/*! ./stateManagement/textStyle.js */
"./stateManagement/textStyle.js");e.d(t,"textStyle",function(){return E.default});var M=e(
/*! ./stateManagement/toolStyle.js */
"./stateManagement/toolStyle.js");e.d(t,"toolStyle",function(){return M.default});var O=e(
/*! ./stateManagement/toolColors.js */
"./stateManagement/toolColors.js");e.d(t,"toolColors",function(){return O.default});var P=e(
/*! ./stateManagement/toolCoordinates.js */
"./stateManagement/toolCoordinates.js");e.d(t,"toolCoordinates",function(){return P.default});var T=e(
/*! ./stateManagement/stackSpecificStateManager.js */
"./stateManagement/stackSpecificStateManager.js");e.d(t,"stackSpecificStateManager",function(){return T.stackSpecificStateManager}),e.d(t,"newStackSpecificToolStateManager",function(){return T.newStackSpecificToolStateManager}),e.d(t,"addStackStateManager",function(){return T.addStackStateManager});var D=e(
/*! ./stateManagement/loadHandlerManager.js */
"./stateManagement/loadHandlerManager.js");e.d(t,"loadHandlerManager",function(){return D.default});var y=e(
/*! ./stateManagement/imageIdSpecificStateManager.js */
"./stateManagement/imageIdSpecificStateManager.js");e.d(t,"newImageIdSpecificToolStateManager",function(){return y.newImageIdSpecificToolStateManager}),e.d(t,"globalImageIdSpecificToolStateManager",function(){return y.globalImageIdSpecificToolStateManager});var j=e(
/*! ./stateManagement/frameOfReferenceStateManager.js */
"./stateManagement/frameOfReferenceStateManager.js");e.d(t,"newFrameOfReferenceSpecificToolStateManager",function(){return j.newFrameOfReferenceSpecificToolStateManager}),e.d(t,"globalFrameOfReferenceSpecificToolStateManager",function(){return j.globalFrameOfReferenceSpecificToolStateManager});var C=e(
/*! ./eventListeners/windowResizeHandler.js */
"./eventListeners/windowResizeHandler.js");e.d(t,"forceEnabledElementResize",function(){return C.forceEnabledElementResize});var I=e(
/*! ./orientation/index.js */
"./orientation/index.js");e.d(t,"orientation",function(){return I.default});var B=e(
/*! ./util/SaveAs.js */
"./util/SaveAs.js");e.d(t,"SaveAs",function(){return B.default});var S=e(
/*! ./util/logger.js */
"./util/logger.js");e.d(t,"enableLogger",function(){return S.enable}),e.d(t,"disableLogger",function(){return S.disable});var K=e(
/*! ./thirdParty/register.js */
"./thirdParty/register.js");e.d(t,"register",function(){return K.default});var H=e(
/*! ./thirdParty/registerSome.js */
"./thirdParty/registerSome.js");e.d(t,"registerSome",function(){return H.default});var W=e(
/*! ./synchronization/wwwcSynchronizer.js */
"./synchronization/wwwcSynchronizer.js");e.d(t,"wwwcSynchronizer",function(){return W.default});var L=e(
/*! ./synchronization/updateImageSynchronizer.js */
"./synchronization/updateImageSynchronizer.js");e.d(t,"updateImageSynchronizer",function(){return L.default});var x=e(
/*! ./synchronization/Synchronizer.js */
"./synchronization/Synchronizer.js");e.d(t,"Synchronizer",function(){return x.default});var _=e(
/*! ./synchronization/stackScrollSynchronizer.js */
"./synchronization/stackScrollSynchronizer.js");e.d(t,"stackScrollSynchronizer",function(){return _.default});var R=e(
/*! ./synchronization/stackImagePositionSynchronizer.js */
"./synchronization/stackImagePositionSynchronizer.js");e.d(t,"stackImagePositionSynchronizer",function(){return R.default});var A=e(
/*! ./synchronization/stackImagePositionOffsetSynchronizer.js */
"./synchronization/stackImagePositionOffsetSynchronizer.js");e.d(t,"stackImagePositionOffsetSynchronizer",function(){return A.default});var p=e(
/*! ./synchronization/stackImageIndexSynchronizer.js */
"./synchronization/stackImageIndexSynchronizer.js");e.d(t,"stackImageIndexSynchronizer",function(){return p.default});var U=e(
/*! ./synchronization/panZoomSynchronizer.js */
"./synchronization/panZoomSynchronizer.js");e.d(t,"panZoomSynchronizer",function(){return U.default});var F=e(
/*! ./externalModules.js */
"./externalModules.js");e.d(t,"external",function(){return F.default});var N=e(
/*! ./events.js */
"./events.js");e.d(t,"EVENTS",function(){return N.default});var V=e(
/*! ./version.js */
"./version.js");e.d(t,"version",function(){return V.default});var Y=e(
/*! ./importInternal.js */
"./importInternal.js");e.d(t,"importInternal",function(){return Y.default}),e.d(t,"import",function(){return Y.default}),t.default={AngleTool:r.AngleTool,ArrowAnnotateTool:r.ArrowAnnotateTool,BidirectionalTool:r.BidirectionalTool,CircleRoiTool:r.CircleRoiTool,CobbAngleTool:r.CobbAngleTool,EllipticalRoiTool:r.EllipticalRoiTool,FreehandRoiTool:r.FreehandRoiTool,LengthTool:r.LengthTool,ProbeTool:r.ProbeTool,RectangleRoiTool:r.RectangleRoiTool,TextMarkerTool:r.TextMarkerTool,BrushTool:d.BrushTool,SphericalBrushTool:d.SphericalBrushTool,RectangleScissorsTool:d.RectangleScissorsTool,FreehandScissorsTool:d.FreehandScissorsTool,CircleScissorsTool:d.CircleScissorsTool,CorrectionScissorsTool:d.CorrectionScissorsTool,CrosshairsTool:l.CrosshairsTool,DoubleTapFitToWindowTool:l.DoubleTapFitToWindowTool,DragProbeTool:l.DragProbeTool,EraserTool:l.EraserTool,FreehandRoiSculptorTool:l.FreehandRoiSculptorTool,MagnifyTool:l.MagnifyTool,OverlayTool:l.OverlayTool,OrientationMarkersTool:l.OrientationMarkersTool,PanMultiTouchTool:l.PanMultiTouchTool,PanTool:l.PanTool,ReferenceLinesTool:l.ReferenceLinesTool,RotateTool:l.RotateTool,RotateTouchTool:l.RotateTouchTool,ScaleOverlayTool:l.ScaleOverlayTool,StackScrollMouseWheelTool:l.StackScrollMouseWheelTool,StackScrollMultiTouchTool:l.StackScrollMultiTouchTool,StackScrollTool:l.StackScrollTool,WwwcRegionTool:l.WwwcRegionTool,WwwcTool:l.WwwcTool,ZoomMouseWheelTool:l.ZoomMouseWheelTool,ZoomTool:l.ZoomTool,ZoomTouchPinchTool:l.ZoomTouchPinchTool,init:s.default,stackPrefetch:g.default,stackRenderers:i.default,playClip:f.playClip,stopClip:f.stopClip,store:m.default,getModule:m.getModule,getToolForElement:o.default,addTool:n.addTool,addToolForElement:n.addToolForElement,removeTool:a.removeTool,removeToolForElement:a.removeToolForElement,setToolOptions:u.setToolOptions,setToolOptionsForElement:u.setToolOptionsForElement,isToolActiveForElement:v.default,setToolActive:c.setToolActive,setToolActiveForElement:c.setToolActiveForElement,setToolEnabled:c.setToolEnabled,setToolEnabledForElement:c.setToolEnabledForElement,setToolDisabled:c.setToolDisabled,setToolDisabledForElement:c.setToolDisabledForElement,setToolPassive:c.setToolPassive,setToolPassiveForElement:c.setToolPassiveForElement,addToolState:h.addToolState,getToolState:h.getToolState,removeToolState:h.removeToolState,clearToolState:h.clearToolState,setElementToolStateManager:h.setElementToolStateManager,getElementToolStateManager:h.getElementToolStateManager,textStyle:E.default,toolStyle:M.default,toolColors:O.default,toolCoordinates:P.default,stackSpecificStateManager:T.stackSpecificStateManager,newStackSpecificToolStateManager:T.newStackSpecificToolStateManager,addStackStateManager:T.addStackStateManager,loadHandlerManager:D.default,newImageIdSpecificToolStateManager:y.newImageIdSpecificToolStateManager,globalImageIdSpecificToolStateManager:y.globalImageIdSpecificToolStateManager,newFrameOfReferenceSpecificToolStateManager:j.newFrameOfReferenceSpecificToolStateManager,globalFrameOfReferenceSpecificToolStateManager:j.globalFrameOfReferenceSpecificToolStateManager,forceEnabledElementResize:C.forceEnabledElementResize,orientation:I.default,SaveAs:B.default,enableLogger:S.enable,disableLogger:S.disable,importInternal:Y.default,import:Y.default,register:K.default,registerSome:H.default,wwwcSynchronizer:W.default,updateImageSynchronizer:L.default,Synchronizer:x.default,stackScrollSynchronizer:_.default,stackImagePositionSynchronizer:R.default,stackImagePositionOffsetSynchronizer:A.default,stackImageIndexSynchronizer:p.default,panZoomSynchronizer:U.default,external:F.default,EVENTS:N.default,version:V.default}},"./init.js":
/*!*****************!*\
          !*** ./init.js ***!
          \*****************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./externalModules.js */
"./externalModules.js"),d=e(
/*! ./store/index.js */
"./store/index.js"),l=e(
/*! ./store/internals/addEnabledElement.js */
"./store/internals/addEnabledElement.js"),s=e(
/*! ./store/internals/removeEnabledElement.js */
"./store/internals/removeEnabledElement.js"),g=e(
/*! ./eventListeners/windowResizeHandler.js */
"./eventListeners/windowResizeHandler.js");t.default=function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(function i(){!function f(){var o=r.default.cornerstone,a=o.EVENTS.ELEMENT_DISABLED;o.events.removeEventListener(o.EVENTS.ELEMENT_ENABLED,l.default),o.events.removeEventListener(a,s.default)}();var o=r.default.cornerstone,a=o.EVENTS.ELEMENT_DISABLED;o.events.addEventListener(o.EVENTS.ELEMENT_ENABLED,l.default),o.events.addEventListener(a,s.default)})(),function m(){var o=d.default.modules;Object.keys(o).forEach(function(n){"function"==typeof o[n].onRegisterCallback&&o[n].onRegisterCallback()})}();var n=Object(d.getModule)("globalConfiguration");Array.isArray(o)?o.forEach(function(a){var u=a.moduleName,c=a.configuration,v=Object(d.getModule)(u);v&&(v.configuration=Object.assign({},v.configuration,c))}):n.configuration=Object.assign({},n.configuration,o),n.configuration.autoResizeViewports&&g.default.enable()}},"./lib.js":
/*!****************!*\
          !*** ./lib.js ***!
          \****************/
/*! exports provided: lib */function(b,t,e){"use strict";e.r(t),e.d(t,"lib",function(){return te});var r=e(
/*! ./tools/base/BaseTool.js */
"./tools/base/BaseTool.js"),d=e(
/*! ./tools/base/BaseAnnotationTool.js */
"./tools/base/BaseAnnotationTool.js"),l=e(
/*! ./tools/base/BaseBrushTool.js */
"./tools/base/BaseBrushTool.js"),s=e(
/*! ./manipulators/index.js */
"./manipulators/index.js"),g=e(
/*! ./util/findAndMoveHelpers.js */
"./util/findAndMoveHelpers.js"),i=e(
/*! ./mixins/index.js */
"./mixins/index.js"),f=e(
/*! ./tools/cursors/index.js */
"./tools/cursors/index.js"),m=e(
/*! ./drawing/index.js */
"./drawing/index.js"),o=e(
/*! ./util/clip.js */
"./util/clip.js"),n=e(
/*! ./util/debounce */
"./util/debounce.js"),a=e(
/*! ./util/deepmerge */
"./util/deepmerge.js"),u=e(
/*! ./util/getDefault */
"./util/getDefault.js"),c=e(
/*! ./util/getPixelSpacing */
"./util/getPixelSpacing.js"),v=e(
/*! ./util/isEmptyObject */
"./util/isEmptyObject.js"),h=e(
/*! ./util/isObject */
"./util/isObject.js"),E=e(
/*! ./util/isPointInImage */
"./util/isPointInImage.js"),M=e(
/*! ./util/isPointInPolygon */
"./util/isPointInPolygon.js"),O=e(
/*! ./util/throttle */
"./util/throttle.js"),P=e(
/*! ./util/wait */
"./util/wait.js"),T=e(
/*! ./util/getKeyPressData */
"./util/getKeyPressData.js"),D=e(
/*! ./util/getProximityThreshold.js */
"./util/getProximityThreshold.js"),y=e(
/*! ./drawing/drawTextBox.js */
"./drawing/drawTextBox.js"),j=e(
/*! ./drawing/drawArrow.js */
"./drawing/drawArrow.js"),C=e(
/*! ./drawing/drawLink.js */
"./drawing/drawLink.js"),I=e(
/*! ./drawing/drawLinkedTextBox.js */
"./drawing/drawLinkedTextBox.js"),B=e(
/*! ./drawing/drawHandles.js */
"./drawing/drawHandles.js"),S=e(
/*! ./util/getActiveTool */
"./util/getActiveTool.js"),K=e(
/*! ./util/getLuminance.js */
"./util/getLuminance.js"),H=e(
/*! ./util/getROITextBoxCoords */
"./util/getROITextBoxCoords.js"),W=e(
/*! ./util/copyPoints.js */
"./util/copyPoints.js"),L=e(
/*! ./util/calculateSUV.js */
"./util/calculateSUV.js"),x=e(
/*! ./util/setContextToDisplayFontSize.js */
"./util/setContextToDisplayFontSize.js"),_=e(
/*! ./util/scrollToIndex.js */
"./util/scrollToIndex.js"),R=e(
/*! ./util/scroll.js */
"./util/scroll.js"),A=e(
/*! ./util/roundToDecimal.js */
"./util/roundToDecimal.js"),p=e(
/*! ./util/pointProjector.js */
"./util/pointProjector.js"),U=e(
/*! ./util/lineSegDistance.js */
"./util/lineSegDistance.js"),F=e(
/*! ./util/logger */
"./util/logger.js"),N=e(
/*! ./util/pointInsideBoundingBox.js */
"./util/pointInsideBoundingBox.js"),V=e(
/*! ./util/makeUnselectable.js */
"./util/makeUnselectable.js"),Y=e(
/*! ./util/getRGBPixels.js */
"./util/getRGBPixels.js"),J=e(
/*! ./util/getMaxSimultaneousRequests.js */
"./util/getMaxSimultaneousRequests.js"),ee=e(
/*! ./util/angleBetweenPoints.js */
"./util/angleBetweenPoints.js"),q=e(
/*! ./util/numbersWithCommas.js */
"./util/numbersWithCommas.js"),le=e(
/*! ./tools/cursors/MouseCursor.js */
"./tools/cursors/MouseCursor.js"),Q=e(
/*! ./util/ellipse/index.js */
"./util/ellipse/index.js"),X=e(
/*! ./util/freehand/index.js */
"./util/freehand/index.js"),w=e(
/*! ./util/segmentation */
"./util/segmentation/index.js"),$=e(
/*! ./util/zoom/index.js */
"./util/zoom/index.js"),k=e(
/*! ./util/triggerEvent.js */
"./util/triggerEvent.js"),ae=e(
/*! ./util/convertToVector3.js */
"./util/convertToVector3.js"),te={"base/BaseTool":r.default,"base/BaseAnnotationTool":d.default,"base/BaseBrushTool":l.default,"tools/cursors/MouseCursor":le.default,"tools/cursors":f,"manipulators/anyHandlesOutsideImage":s.anyHandlesOutsideImage,"manipulators/getHandleNearImagePoint":s.getHandleNearImagePoint,"manipulators/getHandlePixelPosition":s.getHandlePixelPosition,"manipulators/handleActivator":s.handleActivator,"manipulators/moveAllHandles":s.moveAllHandles,"manipulators/moveHandle":s.moveHandle,"manipulators/moveNewHandle":s.moveNewHandle,"manipulators/moveHandleNearImagePoint":g.moveHandleNearImagePoint,"manipulators/findHandleDataNearImagePoint":g.findHandleDataNearImagePoint,"manipulators/moveAnnotation":g.moveAnnotation,"mixins/activeOrDisabledBinaryTool":i.default.activeOrDisabledBinaryTool,"mixins/enabledOrDisabledBinaryTool":i.default.enabledOrDisabledBinaryTool,"drawing/getNewContext":m.getNewContext,"drawing/draw":m.draw,"drawing/path":m.path,"drawing/setShadow":m.setShadow,"drawing/drawLine":m.drawLine,"drawing/drawLines":m.drawLines,"drawing/drawJoinedLines":m.drawJoinedLines,"drawing/drawCircle":m.drawCircle,"drawing/drawEllipse":m.drawEllipse,"drawing/drawRect":m.drawRect,"drawing/fillOutsideRect":m.fillOutsideRect,"drawing/drawTextBox":y.default,"drawing/drawArrow":j.default,"drawing/fillBox":m.fillBox,"drawing/fillTextLines":m.fillTextLines,"drawing/drawLink":C.default,"drawing/drawLinkedTextBox":I.default,"drawing/drawHandles":B.default,"drawing/textBoxWidth":y.textBoxWidth,"util/getActiveTool":S.default,"util/getLuminance":K.default,"util/getROITextBoxCoords":H.default,"util/copyPoints":W.default,"util/calculateSUV":L.default,"util/setContextToDisplayFontSize":x.default,"util/scrollToIndex":_.default,"util/scroll":R.default,"util/roundToDecimal":A.default,"util/projectPatientPointToImagePlane":p.projectPatientPointToImagePlane,"util/imagePointToPatientPoint":p.imagePointToPatientPoint,"util/planePlaneIntersection":p.planePlaneIntersection,"util/pointInsideBoundingBox":N.default,"util/makeUnselectable":V.default,"util/getRGBPixels":Y.default,"util/getBrowserInfo":J.getBrowserInfo,"util/isMobileDevice":J.isMobileDevice,"util/angleBetweenPoints":ee.default,"util/numbersWithCommas":q.default,"util/lineSegDistance":U.default,"util/triggerEvent":k.default,"util/convertToVector3":ae.default,"util/clip":o.clip,"util/clipToBox":o.clipToBox,"util/clipBoxToDisplayedArea":o.clipBoxToDisplayedArea,"util/debounce":n.default,"util/deepmerge":a.default,"util/getDefault":u.default,"util/getProximityThreshold":D.default,"util/getPixelSpacing":c.default,"util/isEmptyObject":v.default,"util/isObject":h.default,"util/isPointInImage":E.default,"util/isPointInPolygon":M.default,"util/getLogger":F.getLogger,"util/throttle":O.default,"util/wait":P.wait,"util/waitForEnabledElementImageToLoad":P.waitForEnabledElementImageToLoad,"util/getKeyPressData":T.default,"util/ellipseUtils":Q.default,"util/freehandUtils":X.default,"util/segmentationUtils":w,"util/zoomUtils":$.default}},"./manipulators/anyHandlesOutsideImage.js":
/*!************************************************!*\
          !*** ./manipulators/anyHandlesOutsideImage.js ***!
          \************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../externalModules.js */
"./externalModules.js");t.default=function(d,l){var s=d.image,g={left:0,top:0,width:s.width,height:s.height},i=!1;return Object.keys(l).forEach(function(f){var m=l[f];!0!==m.allowedOutsideImage&&!1===r.default.cornerstoneMath.point.insideRect(m,g)&&(i=!0)}),i}},"./manipulators/getHandleNearImagePoint.js":
/*!*************************************************!*\
          !*** ./manipulators/getHandleNearImagePoint.js ***!
          \*************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! @babel/runtime/helpers/typeof */
"../node_modules/@babel/runtime/helpers/typeof.js"),d=e.n(r),l=e(
/*! ../externalModules.js */
"./externalModules.js"),s=e(
/*! ../util/pointInsideBoundingBox.js */
"./util/pointInsideBoundingBox.js"),i=function(m,o,n,a){if(m.hasOwnProperty("pointNearHandle")){if(m.pointNearHandle(o,m,n))return!0}else if(!0===m.hasBoundingBox){if(Object(s.default)(m,n))return!0}else{var u=l.default.cornerstone.pixelToCanvas(o,m);if(l.default.cornerstoneMath.point.distance(u,n)<=a)return!0}return!1};t.default=function f(m,o,n,a){var u;if(o){if(Array.isArray(o))for(var c=Object.keys(o),v=0;v<c.length;v++){var E=o[c[v]];if(E.hasOwnProperty("x")&&E.hasOwnProperty("y")&&i(E,m,n,a)){u=E;break}}else if("object"===d()(o))for(var M=Object.keys(o),O=0;O<M.length;O++){var P=M[O];if(Array.isArray(o[P])){if(u=f(m,o[P],n,a))break}else{var T=o[P];if(i(T,m,n,a)){u=T;break}}}return u}}},"./manipulators/getHandlePixelPosition.js":
/*!************************************************!*\
          !*** ./manipulators/getHandlePixelPosition.js ***!
          \************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../externalModules.js */
"./externalModules.js"),d=e(
/*! ./../store/index.js */
"./store/index.js");t.default=function(l,s){var f=l.currentPoints.page,m=d.state.handleTouchOffset,o=0,n=0;return"touch"===s&&(o=m.x,n=m.y),r.default.cornerstone.pageToPixel(l.element,f.x+o,f.y+n)}},"./manipulators/handleActivator.js":
/*!*****************************************!*\
          !*** ./manipulators/handleActivator.js ***!
          \*****************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./getHandleNearImagePoint.js */
"./manipulators/getHandleNearImagePoint.js");t.default=function(l,s,g,i){i||(i=6);var f=function d(l){var s;return Object.keys(l).forEach(function(g){var i=l[g];!0!==i.active||(s=i)}),s}(s),m=Object(r.default)(l,s,g,i);return f!==m&&(void 0!==m&&(m.active=!0),void 0!==f&&(f.active=!1),!0)}},"./manipulators/index.js":
/*!*******************************!*\
          !*** ./manipulators/index.js ***!
          \*******************************/
/*! exports provided: anyHandlesOutsideImage, getHandleNearImagePoint, getHandlePixelPosition, handleActivator, moveAllHandles, moveHandle, moveNewHandle */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./anyHandlesOutsideImage.js */
"./manipulators/anyHandlesOutsideImage.js");e.d(t,"anyHandlesOutsideImage",function(){return r.default});var d=e(
/*! ./getHandleNearImagePoint.js */
"./manipulators/getHandleNearImagePoint.js");e.d(t,"getHandleNearImagePoint",function(){return d.default});var l=e(
/*! ./getHandlePixelPosition.js */
"./manipulators/getHandlePixelPosition.js");e.d(t,"getHandlePixelPosition",function(){return l.default});var s=e(
/*! ./handleActivator.js */
"./manipulators/handleActivator.js");e.d(t,"handleActivator",function(){return s.default});var g=e(
/*! ./moveAllHandles.js */
"./manipulators/moveAllHandles.js");e.d(t,"moveAllHandles",function(){return g.default});var i=e(
/*! ./moveHandle.js */
"./manipulators/moveHandle.js");e.d(t,"moveHandle",function(){return i.default});var f=e(
/*! ./moveNewHandle.js */
"./manipulators/moveNewHandle.js");e.d(t,"moveNewHandle",function(){return f.default})},"./manipulators/moveAllHandles.js":
/*!****************************************!*\
          !*** ./manipulators/moveAllHandles.js ***!
          \****************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../events.js */
"./events.js"),d=e(
/*! ../externalModules.js */
"./externalModules.js"),l=e(
/*! ./anyHandlesOutsideImage.js */
"./manipulators/anyHandlesOutsideImage.js"),s=e(
/*! ../stateManagement/toolState.js */
"./stateManagement/toolState.js"),g=e(
/*! ../util/triggerEvent.js */
"./util/triggerEvent.js"),i=e(
/*! ../util/clip.js */
"./util/clip.js"),f=e(
/*! ./../store/index.js */
"./store/index.js"),m=e(
/*! ../util/getActiveTool */
"./util/getActiveTool.js"),o=e(
/*! ../tools/base/BaseAnnotationTool */
"./tools/base/BaseAnnotationTool.js"),n=e(
/*! ../util/logger.js */
"./util/logger.js"),a=Object(n.getLogger)("manipulators:moveAllHandles"),u=Object(f.getModule)("manipulatorState"),c={mouse:[r.default.MOUSE_DRAG],touch:[r.default.TOUCH_DRAG]},v={mouse:[r.default.MOUSE_UP,r.default.MOUSE_CLICK],touch:[r.default.TOUCH_END,r.default.TOUCH_DRAG_END,r.default.TOUCH_PINCH,r.default.TOUCH_PRESS,r.default.TAP]};function h(P,T){var D=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},y=arguments.length>3?arguments[3]:void 0,j=arguments.length>4?arguments[4]:void 0,C=j.detail,I=C.element,B=C.image,S=C.buttons,K=j.detail.deltaPoints.image,H=K.x,W=K.y;T.active=!0,T.invalidated=!0;for(var L=Object.keys(T.handles),x=0;x<L.length;x++){var R=T.handles[L[x]];!0===R.movesIndependently||!R.hasOwnProperty("x")||!R.hasOwnProperty("y")||(R.x+=H,R.y+=W,D.preventHandleOutsideImage&&Object(i.clipToBox)(R,B))}d.default.cornerstone.updateImage(I);var A=Object(m.default)(I,S,y);A instanceof o.default&&A.updateCachedStats(B,I,T);var p=r.default.MEASUREMENT_MODIFIED,U={toolName:P,toolType:P,element:I,measurementData:T};Object(g.default)(I,p,U),j.preventDefault(),j.stopPropagation()}function E(P){var y=arguments.length>3?arguments[3]:void 0;O(P,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0,{dragHandler:y.dragHandler,upOrEndHandler:y.upOrEndHandler},arguments.length>4?arguments[4]:void 0,arguments.length>5?arguments[5]:void 0,!1)}function O(P){var T=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},D=arguments.length>2?arguments[2]:void 0,y=arguments.length>3?arguments[3]:void 0,j=y.dragHandler,C=y.upOrEndHandler,I=arguments.length>4?arguments[4]:void 0,B=arguments.length>5?arguments[5]:void 0,S=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];P.active=!1,P.invalidated=!0,f.state.isToolLocked=!1,c[D].forEach(function(K){I.removeEventListener(K,j)}),v[D].forEach(function(K){I.removeEventListener(K,C)}),"function"==typeof T.doneMovingCallback&&(a.warn("`options.doneMovingCallback` has been depricated. See https://github.com/cornerstonejs/cornerstoneTools/pull/915 for details."),T.doneMovingCallback(S)),"function"==typeof B&&B(S),d.default.cornerstone.updateImage(I)}t.default=function(P,T,D,y){var j=P.element,C=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},I=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"mouse",B=arguments.length>6?arguments[6]:void 0;C=Object.assign({deleteIfHandleOutsideImage:f.state.deleteIfHandleOutsideImage,preventHandleOutsideImage:f.state.preventHandleOutsideImage},C);var S=h.bind(this,T,D,C,I),K=function H(W){!function M(P,T){var D=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},y=arguments.length>3?arguments[3]:void 0,j=arguments.length>4?arguments[4]:void 0,C=j.dragHandler,I=j.upOrEndHandler,S=arguments.length>6?arguments[6]:void 0,K=(arguments.length>5?arguments[5]:void 0).detail,H=K.element;u.setters.removeActiveManipulatorForElement(H),D.deleteIfHandleOutsideImage&&Object(l.default)(K,T.handles)&&Object(s.removeToolState)(H,P,T),O(T,D,y,{dragHandler:C,upOrEndHandler:I},H,S,!0)}(T,D,C,I,{dragHandler:S,upOrEndHandler:H},W,B)};u.setters.addActiveManipulatorForElement(j,E.bind(null,D,C,I,{dragHandler:S,upOrEndHandler:K},j,B)),D.active=!0,f.state.isToolLocked=!0,c[I].forEach(function(H){j.addEventListener(H,S)}),v[I].forEach(function(H){j.addEventListener(H,K)})}},"./manipulators/moveHandle.js":
/*!************************************!*\
          !*** ./manipulators/moveHandle.js ***!
          \************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../events.js */
"./events.js"),d=e(
/*! ../externalModules.js */
"./externalModules.js"),l=e(
/*! ./anyHandlesOutsideImage.js */
"./manipulators/anyHandlesOutsideImage.js"),s=e(
/*! ./getHandlePixelPosition.js */
"./manipulators/getHandlePixelPosition.js"),g=e(
/*! ../stateManagement/toolState.js */
"./stateManagement/toolState.js"),i=e(
/*! ../util/triggerEvent.js */
"./util/triggerEvent.js"),f=e(
/*! ../util/clip.js */
"./util/clip.js"),m=e(
/*! ./../store/index.js */
"./store/index.js"),o=e(
/*! ../util/getActiveTool */
"./util/getActiveTool.js"),n=e(
/*! ../tools/base/BaseAnnotationTool */
"./tools/base/BaseAnnotationTool.js"),a=e(
/*! ../util/logger.js */
"./util/logger.js"),u=Object(a.getLogger)("manipulators:moveHandle"),c=Object(m.getModule)("manipulatorState"),v={value:!1},h={mouse:[r.default.MOUSE_DRAG],touch:[r.default.TOUCH_DRAG]},E={mouse:[r.default.MOUSE_UP,r.default.MOUSE_CLICK],touch:[r.default.TOUCH_END,r.default.TOUCH_DRAG_END,r.default.TOUCH_PINCH,r.default.TOUCH_PRESS,r.default.TAP]};function M(y,j,C,I,B,S){var K=S.detail,H=K.image,W=K.element,L=K.buttons,x=Object(s.default)(S.detail,B);v.value=!1,C.active=!0,C.hasMoved=!0,C.x=x.x,C.y=x.y,j.invalidated=!0,I.preventHandleOutsideImage&&Object(f.clipToBox)(C,H),d.default.cornerstone.updateImage(W);var _=Object(o.default)(W,L,B);_ instanceof n.default&&_.updateCachedStats(H,W,j);var R=r.default.MEASUREMENT_MODIFIED,A={toolName:y,toolType:y,element:W,measurementData:j};Object(i.default)(W,R,A)}function O(y,j,C,I){var K=arguments.length>6?arguments[6]:void 0;T(y,j,C,I,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},arguments.length>5?arguments[5]:void 0,{dragHandler:K.dragHandler,upOrEndHandler:K.upOrEndHandler},arguments.length>7?arguments[7]:void 0,!1)}function T(y,j,C,I){var B=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},S=arguments.length>5?arguments[5]:void 0,K=arguments.length>6?arguments[6]:void 0,H=K.dragHandler,W=K.upOrEndHandler,L=arguments.length>7?arguments[7]:void 0,x=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],_=j.element;I.active=!1,I.moving=!1,C.active=!1,C.invalidated=!0,v.value=!1,m.state.isToolLocked=!1,h[S].forEach(function(R){_.removeEventListener(R,H)}),E[S].forEach(function(R){_.removeEventListener(R,W)}),B.deleteIfHandleOutsideImage&&Object(l.default)(j,C.handles)&&Object(g.removeToolState)(_,y,C),"function"==typeof B.doneMovingCallback&&(u.warn("`options.doneMovingCallback` has been depricated. See https://github.com/cornerstonejs/cornerstoneTools/pull/915 for details."),B.doneMovingCallback(x)),"function"==typeof L&&L(x),d.default.cornerstone.updateImage(_)}function D(y,j,C,I){if(j.value){var B=Math.abs(y.y-I.y),S=B/10;if(B<1)return y.y=I.y,void(j.value=!1);y.y>I.y?y.y-=S:y.y<I.y&&(y.y+=S),d.default.cornerstone.updateImage(C.element),d.default.cornerstone.requestAnimationFrame(function(){D(y,j,C,I)})}}t.default=function(y,j,C,I){var B=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},S=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"mouse",K=arguments.length>6?arguments[6]:void 0;B=Object.assign({deleteIfHandleOutsideImage:m.state.deleteIfHandleOutsideImage,preventHandleOutsideImage:m.state.preventHandleOutsideImage},B);var H=y.element,W=M.bind(this,j,C,I,B,S),L=function R(){!function P(y,j,C,I){var B=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},S=arguments.length>5?arguments[5]:void 0,K=arguments.length>6?arguments[6]:void 0,H=K.dragHandler,W=K.upOrEndHandler,L=arguments.length>7?arguments[7]:void 0;c.setters.removeActiveManipulatorForElement(j.element),T(y,j,C,I,B,S,{dragHandler:H,upOrEndHandler:W},L,!0)}(j,y,C,I,B,S,{dragHandler:W,upOrEndHandler:R},K)};if(c.setters.addActiveManipulatorForElement(H,O.bind(null,j,y,C,I,B,S,{dragHandler:W,upOrEndHandler:L},K)),I.active=!0,I.moving=!0,C.active=!0,m.state.isToolLocked=!0,h[S].forEach(function(R){H.addEventListener(R,W)}),E[S].forEach(function(R){H.addEventListener(R,L)}),"touch"===S){v.value=!0;var x=d.default.cornerstone.getEnabledElement(H),_=Object(s.default)(y,S);D(I,v,x,_)}}},"./manipulators/moveNewHandle.js":
/*!***************************************!*\
          !*** ./manipulators/moveNewHandle.js ***!
          \***************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../events.js */
"./events.js"),d=e(
/*! ../externalModules.js */
"./externalModules.js"),l=e(
/*! ./anyHandlesOutsideImage.js */
"./manipulators/anyHandlesOutsideImage.js"),s=e(
/*! ./getHandlePixelPosition.js */
"./manipulators/getHandlePixelPosition.js"),g=e(
/*! ../stateManagement/toolState.js */
"./stateManagement/toolState.js"),i=e(
/*! ../util/triggerEvent.js */
"./util/triggerEvent.js"),f=e(
/*! ../util/clip.js */
"./util/clip.js"),m=e(
/*! ./../store/index.js */
"./store/index.js"),o=e(
/*! ../util/getActiveTool */
"./util/getActiveTool.js"),n=e(
/*! ../tools/base/BaseAnnotationTool */
"./tools/base/BaseAnnotationTool.js"),a=e(
/*! ../util/logger.js */
"./util/logger.js"),u=Object(a.getLogger)("manipulators:moveNewHandle"),c=Object(m.getModule)("manipulatorState"),v={mouse:[r.default.MOUSE_MOVE,r.default.MOUSE_DRAG],touch:[r.default.TOUCH_DRAG]},h={mouse:[r.default.MOUSE_UP,r.default.MOUSE_CLICK],touch:[r.default.TOUCH_END,r.default.TOUCH_PINCH,r.default.TAP]};function M(D,y,j,C,I){var B=C.moveHandler,S=C.moveEndHandler,K=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];v[D].forEach(function(H){j.removeEventListener(H,B)}),h[D].forEach(function(H){j.removeEventListener(H,S)}),j.removeEventListener(r.default.TOUCH_START,T),m.state.isToolLocked=!1,"function"==typeof I&&I(K),"function"==typeof y.doneMovingCallback&&(u.warn("`options.doneMovingCallback` has been depricated. See https://github.com/cornerstonejs/cornerstoneTools/pull/915 for details."),y.doneMovingCallback(K)),d.default.cornerstone.updateImage(j)}function P(D,y,j,C,I,B,S){var K=I.moveHandler,H=I.moveEndHandler;D.active=!1,D.invalidated=!0,y.active=!1,M(C,j,B,{moveHandler:K,moveEndHandler:H},S,!1)}function T(D){return D.stopImmediatePropagation(),!1}t.default=function(D,y,j,C,I){var B=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"mouse",S=arguments.length>6?arguments[6]:void 0;(I=Object.assign({deleteIfHandleOutsideImage:m.state.deleteIfHandleOutsideImage,preventHandleOutsideImage:m.state.preventHandleOutsideImage},I)).hasMoved=!1;var K=D.element;function H(L){!function E(D,y,j,C,I,B){var S=B.detail,K=S.image,H=S.element,W=S.buttons,L=Object(s.default)(B.detail,I);C.hasMoved=!0,y.invalidated=!0,j.active=!0,j.x=L.x,j.y=L.y,C&&C.preventHandleOutsideImage&&Object(f.clipToBox)(j,K),d.default.cornerstone.updateImage(H);var x=Object(o.default)(H,W,I);x instanceof n.default&&x.updateCachedStats(K,H,y);var _=r.default.MEASUREMENT_MODIFIED,R={toolName:D,toolType:D,element:H,measurementData:y};Object(i.default)(H,_,R)}(y,j,C,I,B,L)}function W(L){!function O(D,y,j,C,I,B,S,K){var H=B.moveHandler,W=B.moveEndHandler,L=S.detail,x=L.element,_=!0;if(!1!==C.hasMoved){var R=Object(s.default)(L,I);y.active=!1,y.invalidated=!0,j.active=!1,j.moving=!1,j.x=R.x,j.y=R.y,c.setters.removeActiveManipulatorForElement(x),C.preventHandleOutsideImage&&Object(f.clipToBox)(j,S.detail.image),C.deleteIfHandleOutsideImage&&Object(l.default)(S.detail,y.handles)&&(y.cancelled=!0,_=!1,Object(g.removeToolState)(x,D,y)),M(I,C,x,{moveHandler:H,moveEndHandler:W},K,_)}}(y,j,C,I,B,{moveHandler:H,moveEndHandler:W},L,S)}j.active=!0,C.moving=!0,C.active=!0,m.state.isToolLocked=!0,v[B].forEach(function(L){K.addEventListener(L,H)}),K.addEventListener(r.default.TOUCH_START,T),h[B].forEach(function(L){K.addEventListener(L,W)}),c.setters.addActiveManipulatorForElement(K,P.bind(null,j,C,I,B,{moveHandler:H,moveEndHandler:W},K,S))}},"./mixins/activeOrDisabledBinaryTool.js":
/*!**********************************************!*\
          !*** ./mixins/activeOrDisabledBinaryTool.js ***!
          \**********************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../store/setToolMode.js */
"./store/setToolMode.js");t.default={passiveCallback:function d(s){Object(r.setToolDisabledForElement)(s,this.name)},enabledCallback:function l(s){Object(r.setToolActiveForElement)(s,this.name)}}},"./mixins/enabledOrDisabledBinaryTool.js":
/*!***********************************************!*\
          !*** ./mixins/enabledOrDisabledBinaryTool.js ***!
          \***********************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../store/setToolMode.js */
"./store/setToolMode.js");t.default={passiveCallback:function d(s){Object(r.setToolDisabledForElement)(s,this.name)},activeCallback:function l(s){Object(r.setToolEnabledForElement)(s,this.name)}}},"./mixins/index.js":
/*!*************************!*\
          !*** ./mixins/index.js ***!
          \*************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./activeOrDisabledBinaryTool.js */
"./mixins/activeOrDisabledBinaryTool.js"),d=e(
/*! ./enabledOrDisabledBinaryTool.js */
"./mixins/enabledOrDisabledBinaryTool.js"),l=e(
/*! ./segmentation/circleSegmentationMixin.js */
"./mixins/segmentation/circleSegmentationMixin.js"),s=e(
/*! ./segmentation/polylineSegmentationMixin.js */
"./mixins/segmentation/polylineSegmentationMixin.js"),g=e(
/*! ./segmentation/freehandSegmentationMixin.js */
"./mixins/segmentation/freehandSegmentationMixin.js"),i=e(
/*! ./segmentation/rectangleSegmentationMixin.js */
"./mixins/segmentation/rectangleSegmentationMixin.js"),f=e(
/*! ./segmentation/renderBrushMixin.js */
"./mixins/segmentation/renderBrushMixin.js");t.default={activeOrDisabledBinaryTool:r.default,enabledOrDisabledBinaryTool:d.default,circleSegmentationMixin:l.default,polylineSegmentationMixin:s.default,freehandSegmentationMixin:g.default,rectangleSegmentationMixin:i.default,renderBrushMixin:f.default}},"./mixins/segmentation/circleSegmentationMixin.js":
/*!********************************************************!*\
          !*** ./mixins/segmentation/circleSegmentationMixin.js ***!
          \********************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../../drawing */
"./drawing/index.js"),d=e(
/*! ../../externalModules */
"./externalModules.js"),l=e(
/*! ../../util/isEmptyObject */
"./util/isEmptyObject.js"),s=e(
/*! ../../store */
"./store/index.js"),g=e(
/*! ../../util/segmentation */
"./util/segmentation/index.js"),i=Object(s.getModule)("segmentation"),f=i.getters,m=i.setters;function o(){this.handles={start:{},end:{}}}function a(v){var E=v.detail.element,M=v.detail.currentPoints.image;return Object(l.default)(this.handles.start)?this.handles.start=M:(this.handles.end=M,this._applyStrategy(v)),d.default.cornerstone.updateImage(E),!0}function u(v){var h=v.detail,E=h.element;this.handles.end=h.currentPoints.image,d.default.cornerstone.updateImage(E)}function c(v){v.detail.handles=this.handles;var h=v.detail.element,E=f.labelmap2D(h),M=E.labelmap2D,O=E.labelmap3D,P=E.currentImageIdIndex,T=M.pixelData,D=T.slice();this.applyActiveStrategy(v,{points:{start:{x:this.handles.start.x,y:this.handles.start.y},end:{x:this.handles.end.x,y:this.handles.end.y}},pixelData:T,segmentIndex:O.activeSegmentIndex,segmentationMixinType:"circleSegmentationMixin"});var C={imageIdIndex:P,diff:Object(g.getDiffBetweenPixelData)(D,T)};m.pushState(this.element,[C]),m.updateSegmentsOnLabelmap2D(M),d.default.cornerstone.updateImage(h),this._resetHandles()}t.default={postTouchStartCallback:a,postMouseDownCallback:a,mouseClickCallback:a,touchDragCallback:u,mouseDragCallback:u,mouseMoveCallback:u,touchEndCallback:c,mouseUpCallback:c,initializeMixin:o,renderToolData:function n(v){var h=this,E=v.detail,M=E.element,O=f.brushColor(M,!0),P=Object(r.getNewContext)(E.canvasContext.canvas),T=d.default.cornerstoneMath.point.distance;Object(r.draw)(P,function(D){if(!h.handles)return null;var y=d.default.cornerstone.pixelToCanvas(M,h.handles.start),j=d.default.cornerstone.pixelToCanvas(M,h.handles.end),C=T(y,j);Object(r.drawCircle)(D,M,h.handles.start,C,{color:O})})},_resetHandles:o,_applyStrategy:c}},"./mixins/segmentation/freehandSegmentationMixin.js":
/*!**********************************************************!*\
          !*** ./mixins/segmentation/freehandSegmentationMixin.js ***!
          \**********************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! @babel/runtime/helpers/toConsumableArray */
"../node_modules/@babel/runtime/helpers/toConsumableArray.js"),d=e.n(r),l=e(
/*! ../../externalModules.js */
"./externalModules.js"),s=e(
/*! ../../store */
"./store/index.js"),g=e(
/*! ../../util/logger.js */
"./util/logger.js"),i=e(
/*! ../../drawing */
"./drawing/index.js"),f=e(
/*! ../../util/segmentation */
"./util/segmentation/index.js"),m=Object(g.getLogger)("tools:ScissorsTool"),o=Object(s.getModule)("segmentation"),n=o.getters,a=o.setters;function c(O){var P=O.detail.element,T=O.detail.currentPoints.image,D=this.handles.points;if(!D.length)return m.warn("Something went wrong, empty handles detected."),null;D.push({x:T.x,y:T.y,lines:[]}),this.currentHandle+=1,l.default.cornerstone.updateImage(P)}function v(O){var T=O.detail.element;this._addPoint(O.detail),l.default.cornerstone.updateImage(T)}function h(O){var P=this.handles.points,T=O.detail.element,D=n.labelmap2D(T),y=D.labelmap2D,j=D.labelmap3D,C=D.currentImageIdIndex,I=y.pixelData,B=I.slice();this.applyActiveStrategy(O,{points:P,pixelData:I,segmentIndex:j.activeSegmentIndex,segmentationMixinType:"freehandSegmentationMixin"});var K={imageIdIndex:C,diff:Object(f.getDiffBetweenPixelData)(B,I)};a.pushState(this.element,[K]),a.updateSegmentsOnLabelmap2D(y),l.default.cornerstone.updateImage(T),this._resetHandles()}function E(){this.handles={points:[]},this.currentHandle=0}t.default={postTouchStartCallback:c,postMouseDownCallback:c,mouseClickCallback:c,touchDragCallback:v,mouseDragCallback:v,mouseMoveCallback:v,touchEndCallback:h,mouseUpCallback:h,initializeMixin:E,renderToolData:function u(O){var P=O.detail,T=P.element,D=n.brushColor(T,!0),y=Object(i.getNewContext)(P.canvasContext.canvas),j=this.handles.points;j.length<2||Object(i.draw)(y,function(C){for(var I=0;I<j.length;I++){var B=d()(j[I].lines);I===j.length-1&&B.push(j[0]),Object(i.drawJoinedLines)(C,T,j[I],B,{color:D})}})},_resetHandles:E,_addPoint:function M(O){var P=this.handles.points;P.length&&P[this.currentHandle-1].lines.push({x:O.currentPoints.image.x,y:O.currentPoints.image.y,lines:[]}),P.push({x:O.currentPoints.image.x,y:O.currentPoints.image.y,lines:[]}),this.currentHandle+=1,l.default.cornerstone.updateImage(O.element)},_applyStrategy:h}},"./mixins/segmentation/polylineSegmentationMixin.js":
/*!**********************************************************!*\
          !*** ./mixins/segmentation/polylineSegmentationMixin.js ***!
          \**********************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! @babel/runtime/helpers/toConsumableArray */
"../node_modules/@babel/runtime/helpers/toConsumableArray.js"),d=e.n(r),l=e(
/*! ../../drawing */
"./drawing/index.js"),s=e(
/*! ../../store */
"./store/index.js"),g=e(
/*! ./freehandSegmentationMixin */
"./mixins/segmentation/freehandSegmentationMixin.js"),f=Object(s.getModule)("segmentation").getters,o=Object.assign({},g.default,{renderToolData:function m(n){var a=this,u=n.detail,c=u.element,v=f.brushColor(c,!0),h=Object(l.getNewContext)(u.canvasContext.canvas),E=this.handles;Object(l.draw)(h,function(M){if(E.points.length>1)for(var P=0;P<E.points.length;P++){var T=d()(E.points[P].lines);Object(l.drawJoinedLines)(M,c,a.handles.points[P],T,{color:v})}})}});t.default=o},"./mixins/segmentation/rectangleSegmentationMixin.js":
/*!***********************************************************!*\
          !*** ./mixins/segmentation/rectangleSegmentationMixin.js ***!
          \***********************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../../drawing */
"./drawing/index.js"),d=e(
/*! ../../externalModules */
"./externalModules.js"),l=e(
/*! ../../util/isEmptyObject */
"./util/isEmptyObject.js"),s=e(
/*! ../../store */
"./store/index.js"),g=e(
/*! ../../util/segmentation */
"./util/segmentation/index.js"),i=Object(s.getModule)("segmentation"),f=i.getters,m=i.setters;function n(v){var E=v.detail.element,M=v.detail.currentPoints.image;return Object(l.default)(this.handles.start)?this.handles.start=M:(this.handles.end=M,this._applyStrategy(v)),d.default.cornerstone.updateImage(E),!0}function a(v){var h=v.detail,E=h.element;this.handles.end=h.currentPoints.image,d.default.cornerstone.updateImage(E)}function u(v){v.detail.handles=this.handles;var h=v.detail.element,E=f.labelmap2D(h),M=E.labelmap2D,O=E.labelmap3D,P=E.currentImageIdIndex,T=M.pixelData,D=T.slice();this.applyActiveStrategy(v,{points:[{x:this.handles.start.x,y:this.handles.start.y},{x:this.handles.end.x,y:this.handles.end.y}],pixelData:T,segmentIndex:O.activeSegmentIndex,segmentationMixinType:"rectangleSegmentationMixin"});var C={imageIdIndex:P,diff:Object(g.getDiffBetweenPixelData)(D,T)};m.pushState(this.element,[C]),m.updateSegmentsOnLabelmap2D(M),d.default.cornerstone.updateImage(h),this._resetHandles()}function c(){this.handles={start:{},end:{}}}t.default={postTouchStartCallback:n,postMouseDownCallback:n,mouseClickCallback:n,touchDragCallback:a,mouseDragCallback:a,mouseMoveCallback:a,touchEndCallback:u,mouseUpCallback:u,initializeMixin:c,renderToolData:function o(v){var h=this,E=v.detail,M=E.element,O=f.brushColor(M,!0),P=Object(r.getNewContext)(E.canvasContext.canvas);Object(r.draw)(P,function(T){Object(r.drawRect)(T,M,h.handles.start,h.handles.end,{color:O})})},_resetHandles:c,_applyStrategy:u}},"./mixins/segmentation/renderBrushMixin.js":
/*!*************************************************!*\
          !*** ./mixins/segmentation/renderBrushMixin.js ***!
          \*************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./../../externalModules.js */
"./externalModules.js"),d=e(
/*! ./../../store/index.js */
"./store/index.js");t.default={renderBrush:function l(s){var a,g=r.default.cornerstone,i=Object(d.getModule)("segmentation"),f=i.getters,m=i.configuration,o=s.detail,n=o.viewport;if(this._drawing?a=this._lastImageCoords:this._mouseUpRender?(a=this._lastImageCoords,this._mouseUpRender=!1):a=d.default.state.mousePositionImage,a){var u=o.image,E=a.x,M=a.y;if(!(E<0||E>u.columns||M<0||M>u.rows)){var O=m.radius,P=o.canvasContext,T=o.element,D=f.brushColor(T,this._drawing);P.setTransform(1,0,0,1,0,0);var y=O*n.scale,j=g.pixelToCanvas(T,a);P.beginPath(),P.strokeStyle=D,P.ellipse(j.x,j.y,y,y,0,0,2*Math.PI),P.stroke()}}}}},"./orientation/getOrientationString.js":
/*!*********************************************!*\
          !*** ./orientation/getOrientationString.js ***!
          \*********************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../externalModules.js */
"./externalModules.js"),d=e(
/*! ../util/convertToVector3.js */
"./util/convertToVector3.js");t.default=function(l){for(var s=Object(d.default)(l),g="",i=s.x<0?"R":"L",f=s.y<0?"A":"P",m=s.z<0?"F":"H",o=new r.default.cornerstoneMath.Vector3(Math.abs(s.x),Math.abs(s.y),Math.abs(s.z)),n=1e-4,a=0;a<3;a++)if(o.x>n&&o.x>o.y&&o.x>o.z)g+=i,o.x=0;else if(o.y>n&&o.y>o.x&&o.y>o.z)g+=f,o.y=0;else if(o.z>n&&o.z>o.x&&o.z>o.y)g+=m,o.z=0;else if(o.x>n&&o.y>n&&o.x===o.y)g+=i+f,o.x=0,o.y=0;else if(o.x>n&&o.z>n&&o.x===o.z)g+=i+m,o.x=0,o.z=0;else{if(!(o.y>n&&o.z>n&&o.y===o.z))break;g+=f+m,o.y=0,o.z=0}return g}},"./orientation/index.js":
/*!******************************!*\
          !*** ./orientation/index.js ***!
          \******************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./getOrientationString.js */
"./orientation/getOrientationString.js"),d=e(
/*! ./invertOrientationString.js */
"./orientation/invertOrientationString.js");t.default={getOrientationString:r.default,invertOrientationString:d.default}},"./orientation/invertOrientationString.js":
/*!************************************************!*\
          !*** ./orientation/invertOrientationString.js ***!
          \************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),t.default=function(r){var d=r.replace("H","f");return(d=(d=(d=(d=(d=d.replace("F","h")).replace("R","l")).replace("L","r")).replace("A","p")).replace("P","a")).toUpperCase()}},"./stackTools/fusionRenderer.js":
/*!**************************************!*\
          !*** ./stackTools/fusionRenderer.js ***!
          \**************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return f});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),s=e.n(l),g=e(
/*! ../externalModules.js */
"./externalModules.js"),i=e(
/*! ../stateManagement/toolState.js */
"./stateManagement/toolState.js"),f=function(){function m(){d()(this,m),this.currentImageIdIndex=0,this.layerIds=[],this.findImageFn=void 0}return s()(m,[{key:"render",value:function(n,a){var u=this;if(!Number.isInteger(this.currentImageIdIndex))throw new Error("FusionRenderer: render - Image ID Index is not an integer");if(!this.findImageFn)throw new Error("No findImage function has been defined");a||(a=Object(i.getToolState)(n,"stack").data);var v=g.default.cornerstone,h=a[0],E=h.imageIds[this.currentImageIdIndex],M=a.slice(1,a.length);v.loadAndCacheImage(E).then(function(O){var P=u.layerIds[0];P?v.setLayerImage(n,O,P):(P=v.addLayer(n,O,h.options),u.layerIds.push(P)),v.displayImage(n,O),M.forEach(function(T,D){var y=u.findImageFn(T.imageIds,E),C=u.layerIds[D+1];C||(C=v.addLayer(n,void 0,T.options),u.layerIds.push(C)),y?v.loadAndCacheImage(y).then(function(I){v.setLayerImage(n,I,C),v.updateImage(n)}):(v.setLayerImage(n,void 0,C),v.setActiveLayer(n,P),v.updateImage(n))})})}}]),m}()},"./stackTools/playClip.js":
/*!********************************!*\
          !*** ./stackTools/playClip.js ***!
          \********************************/
/*! exports provided: playClip, stopClip */function(b,t,e){"use strict";e.r(t),e.d(t,"playClip",function(){return n}),e.d(t,"stopClip",function(){return a});var r=e(
/*! ../events.js */
"./events.js"),d=e(
/*! ../externalModules.js */
"./externalModules.js"),l=e(
/*! ../stateManagement/loadHandlerManager.js */
"./stateManagement/loadHandlerManager.js"),s=e(
/*! ../stateManagement/toolState.js */
"./stateManagement/toolState.js"),g=e(
/*! ../util/triggerEvent.js */
"./util/triggerEvent.js"),i="playClip";function m(u){var c=u.intervalId;typeof c<"u"&&(u.intervalId=void 0,u.usingFrameTimeVector?clearTimeout(c):clearInterval(c))}function n(u,c){var v,h;if(void 0===u)throw new Error("playClip: element must not be undefined");var E=Object(s.getToolState)(u,"stack");if(E&&E.data&&E.data.length){var O,M=d.default.cornerstone;if(E.data.length>1){var P=Object(s.getToolState)(u,"stackRenderer");P&&P.data&&P.data.length&&(O=P.data[0])}var T=E.data[0],D=Object(s.getToolState)(u,i);D&&D.data&&D.data.length?m(v=D.data[0]):(v={intervalId:void 0,framesPerSecond:30,lastFrameTimeStamp:void 0,frameRate:0,frameTimeVector:void 0,ignoreFrameTimeVector:!1,usingFrameTimeVector:!1,speed:1,reverse:!1,loop:!0},Object(s.addToolState)(u,i,v)),(c<0||c>0)&&(v.framesPerSecond=Number(c),v.reverse=v.framesPerSecond<0,v.ignoreFrameTimeVector=!0),!0!==v.ignoreFrameTimeVector&&v.frameTimeVector&&v.frameTimeVector.length===T.imageIds.length&&(h=function f(u,c){var v,h,E,M=0,O=u.length,P=[];for(P.isTimeVarying=!1,("number"!=typeof c||c<=0)&&(c=1),v=1;v<O;v++)E=Number(u[v])/c|0,P.push(E),1===v?h=E:E!==h&&(P.isTimeVarying=!0),M+=E;return P.length>0&&P.push(E=P.isTimeVarying?M/P.length|0:P[0]),P}(v.frameTimeVector,v.speed));var y=function(){var I,B,S,K=T.currentImageIdIndex,H=T.imageIds.length;if(v.reverse?K--:K++,!v.loop&&(K<0||K>=H))return m(v),void function o(u){var c={element:u};Object(g.default)(u,r.default.CLIP_STOPPED,c)}(u);K>=H&&(K=0),K<0&&(K=H-1),K!==T.currentImageIdIndex&&(I=l.default.getStartLoadHandler(u),B=l.default.getEndLoadHandler(u),S=l.default.getErrorLoadingHandler(u),I&&I(u),(!0===T.preventCache?M.loadImage(T.imageIds[K]):M.loadAndCacheImage(T.imageIds[K])).then(function(W){try{T.currentImageIdIndex=K,O?(O.currentImageIdIndex=K,O.render(u,E.data)):M.displayImage(u,W),B&&B(u,W)}catch{return}},function(W){S&&S(u,T.imageIds[K],W)}))};h&&h.length>0&&h.isTimeVarying?(v.usingFrameTimeVector=!0,v.intervalId=setTimeout(function j(){v.intervalId=setTimeout(j,h[T.currentImageIdIndex]),y()},0)):(v.usingFrameTimeVector=!1,v.intervalId=setInterval(y,1e3/Math.abs(v.framesPerSecond)))}}function a(u){var c=Object(s.getToolState)(u,i);!c||!c.data||!c.data.length||m(c.data[0])}},"./stackTools/stackPrefetch.js":
/*!*************************************!*\
          !*** ./stackTools/stackPrefetch.js ***!
          \*************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var c,r=e(
/*! ./../externalModules.js */
"./externalModules.js"),d=e(
/*! ../stateManagement/loadHandlerManager.js */
"./stateManagement/loadHandlerManager.js"),l=e(
/*! ../stateManagement/toolState.js */
"./stateManagement/toolState.js"),s=e(
/*! ../util/logger.js */
"./util/logger.js"),f=(e(
/*! ../util/triggerEvent */
"./util/triggerEvent.js"),e(
/*! ../events.js */
"./events.js"),Object(s.getLogger)("stackTools:stackPrefetch")),m="stackPrefetch",o="prefetch",n=0,a=!0,u={maxImagesToPrefetch:1/0,preserveExistingPool:!1};function h(I,B){I=Math.round(I)||0;var S=[],K=(B=Math.round(B)||0)-I+1;if(K<=0)return S;for(;K--;)S[K]=B--;return S}function M(I){var B=Object(l.getToolState)(I,"stack");if(B&&B.data&&B.data.length){var S=B.data[0],K=Object(l.getToolState)(I,m);if(K){var H=K.data[0]||{};if((!H.indicesToRequest||!H.indicesToRequest.length)&&(H.enabled=!1),!1!==H.enabled&&(K.data[0].indicesToRequest.sort(function($,k){return $-k}),H.indicesToRequest.slice().forEach(function($){var k=S.imageIds[$];k&&r.default.cornerstone.imageCache.getImageLoadObject(k)&&function W($){var k=H.indicesToRequest.indexOf($);k>-1&&H.indicesToRequest.splice(k,1)}($)}),H.indicesToRequest.length)){u.preserveExistingPool||r.default.cornerstone.imageLoadPoolManager.clearRequestStack(o);for(var R,x=function E(I,B){var S=0,K=I.length-1;return I.forEach(function(H,W){H<B?S=Math.max(W,S):H>B&&(K=Math.min(W,K))}),{low:S,high:K}}(H.indicesToRequest,S.currentImageIdIndex),N=(d.default.getErrorLoadingHandler(I),x.low),V=x.high,Y=[];N>=0||V<H.indicesToRequest.length;){var J=S.currentImageIdIndex,le=!(J-H.indicesToRequest[N]>u.maxImagesToPrefetch)&&N>=0,Q=!(H.indicesToRequest[V]-J>u.maxImagesToPrefetch)&&V<H.indicesToRequest.length;if(!Q&&!le)break;le&&(R=H.indicesToRequest[N--],Y.push(S.imageIds[R])),Q&&(R=H.indicesToRequest[V++],Y.push(S.imageIds[R]))}var X,w={addToBeginning:a,priority:n,requestType:o};X=function(k){return r.default.cornerstone.loadAndCacheImage(k,w)},Y.reverse().forEach(function($){r.default.cornerstone.imageLoadPoolManager.addRequest(X.bind(null,$),o,{imageId:$},n,a)})}}}}function O(I){return function(B){var K,S=B.detail;try{K=Object(l.getToolState)(I,"stack")}catch{return}if(K&&K.data&&K.data.length){var W=K.data[0].imageIds.indexOf(S.imageId);if(!(W<0)){var L=Object(l.getToolState)(I,m);!L||!L.data||!L.data.length||L.data[0].indicesToRequest.push(W)}}}}function P(I){clearTimeout(c),c=setTimeout(function(){var B=I.target;try{M(B)}catch{return}},10)}t.default={enable:function T(I){Object(l.getToolState)(I,m).data=[];var S=Object(l.getToolState)(I,"stack");if(S&&S.data&&S.data.length){var K=S.data[0];if(!0===K.preventCache)return void f.warn("A stack that should not be cached was given the stackPrefetch");var H={indicesToRequest:h(0,K.imageIds.length-1),enabled:!0,direction:1},W=H.indicesToRequest.indexOf(K.currentImageIdIndex);H.indicesToRequest.splice(W,1),Object(l.addToolState)(I,m,H),M(I),I.removeEventListener(r.default.cornerstone.EVENTS.NEW_IMAGE,P),I.addEventListener(r.default.cornerstone.EVENTS.NEW_IMAGE,P);var L=O(I);r.default.cornerstone.events.removeEventListener(r.default.cornerstone.EVENTS.IMAGE_CACHE_PROMISE_REMOVED,L),r.default.cornerstone.events.addEventListener(r.default.cornerstone.EVENTS.IMAGE_CACHE_PROMISE_REMOVED,L)}},disable:function D(I){clearTimeout(c),I.removeEventListener(r.default.cornerstone.EVENTS.NEW_IMAGE,P);var B=O(I);r.default.cornerstone.events.removeEventListener(r.default.cornerstone.EVENTS.IMAGE_CACHE_PROMISE_REMOVED,B);var S=Object(l.getToolState)(I,m);S&&S.data.length&&(S.data[0].enabled=!1,r.default.cornerstone.imageLoadPoolManager.clearRequestStack(o))},getConfiguration:function y(){return u},setConfiguration:function j(I){u=I}}},"./stackTools/stackRenderers.js":
/*!**************************************!*\
          !*** ./stackTools/stackRenderers.js ***!
          \**************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./fusionRenderer.js */
"./stackTools/fusionRenderer.js"),d={};d.FusionRenderer=r.default,t.default=d},"./stateManagement/frameOfReferenceStateManager.js":
/*!*********************************************************!*\
          !*** ./stateManagement/frameOfReferenceStateManager.js ***!
          \*********************************************************/
/*! exports provided: newFrameOfReferenceSpecificToolStateManager, globalFrameOfReferenceSpecificToolStateManager */function(b,t,e){"use strict";function r(){var l={};return{get:function g(f,m){if(!1!==l.hasOwnProperty(f)){var o=l[f];if(!1!==o.hasOwnProperty(m))return o[m]}},add:function s(f,m,o){!1===l.hasOwnProperty(f)&&(l[f]={});var n=l[f];!1===n.hasOwnProperty(m)&&(n[m]={data:[]}),n[m].data.push(o)},remove:function i(f,m,o){if(!1!==l.hasOwnProperty(f)){var n=l[f];if(!1!==n.hasOwnProperty(m)){for(var a=n[m],u=-1,c=0;c<a.data.length;c++)a.data[c]===o&&(u=c);-1!==u&&a.data.splice(u,1)}}}}}e.r(t),e.d(t,"newFrameOfReferenceSpecificToolStateManager",function(){return r}),e.d(t,"globalFrameOfReferenceSpecificToolStateManager",function(){return d});var d=r()},"./stateManagement/imageIdSpecificStateManager.js":
/*!********************************************************!*\
          !*** ./stateManagement/imageIdSpecificStateManager.js ***!
          \********************************************************/
/*! exports provided: newImageIdSpecificToolStateManager, globalImageIdSpecificToolStateManager */function(b,t,e){"use strict";e.r(t),e.d(t,"newImageIdSpecificToolStateManager",function(){return d}),e.d(t,"globalImageIdSpecificToolStateManager",function(){return l});var r=e(
/*! ../externalModules.js */
"./externalModules.js");function d(){var s={};function n(M,O,P){!1===s.hasOwnProperty(M)&&(s[M]={});var T=s[M];!1===T.hasOwnProperty(O)&&(T[O]={data:[]}),T[O].data.push(P)}function u(M,O){if(!1!==s.hasOwnProperty(M)){var P=s[M];if(!1!==P.hasOwnProperty(O))return P[O]}}function v(M,O,P){s[M][O]=P}function E(M){!1!==s.hasOwnProperty(M)&&delete s[M]}return{get:function a(M,O){var P=r.default.cornerstone.getEnabledElement(M);if(P.image)return u(P.image.imageId,O)},add:function o(M,O,P){var T=r.default.cornerstone.getEnabledElement(M);T.image&&n(T.image.imageId,O,P)},set:function c(M,O,P){var T=r.default.cornerstone.getEnabledElement(M);T.image&&v(T.image.imageId,O,P)},clear:function h(M){var O=r.default.cornerstone.getEnabledElement(M);O.image&&E(O.image.imageId)},getImageIdToolState:u,addImageIdToolState:n,setImageIdToolState:v,clearImageIdToolState:E,saveImageIdToolState:function g(M){return s[M]},restoreImageIdToolState:function i(M,O){s[M]=O},saveToolState:function f(){return s},restoreToolState:function m(M){s=M},toolState:s}}var l=d()},"./stateManagement/loadHandlerManager.js":
/*!***********************************************!*\
          !*** ./stateManagement/loadHandlerManager.js ***!
          \***********************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../externalModules.js */
"./externalModules.js"),d="DEFAULT",l={},s={},g={};function i(h){if(!h)return d;var E=r.default.cornerstone.getEnabledElement(h).uuid;if(!E)throw new Error("Something went wrong when getting uuid from element");return E}var v={setStartLoadHandler:function f(h){var E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(!h)throw new Error("The Handler function must be defined");var M=i(E);l[M]=h},getStartLoadHandler:function m(h){var E=i(h);return l[E]||l[d]},setEndLoadHandler:function o(h){var E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(!h)throw new Error("The Handler function must be defined");var M=i(E);s[M]=h},getEndLoadHandler:function n(h){var E=i(h);return s[E]||s[d]},setErrorLoadingHandler:function a(h){var E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(!h)throw new Error("The Handler function must be defined");var M=i(E);g[M]=h},getErrorLoadingHandler:function u(h){var E=i(h);return g[E]||g[d]},removeHandlers:function c(h){var E=i(h);delete l[E],delete s[E],delete g[E]}};t.default=v},"./stateManagement/stackSpecificStateManager.js":
/*!******************************************************!*\
          !*** ./stateManagement/stackSpecificStateManager.js ***!
          \******************************************************/
/*! exports provided: stackSpecificStateManager, newStackSpecificToolStateManager, addStackStateManager */function(b,t,e){"use strict";e.r(t),e.d(t,"stackSpecificStateManager",function(){return i}),e.d(t,"newStackSpecificToolStateManager",function(){return l}),e.d(t,"addStackStateManager",function(){return g});var r=e(
/*! ./imageIdSpecificStateManager.js */
"./stateManagement/imageIdSpecificStateManager.js"),d=e(
/*! ./toolState.js */
"./stateManagement/toolState.js");function l(f,m){var o={};return{get:function c(h,E){return f.indexOf(E)>=0?(!1===o.hasOwnProperty(E)&&(o[E]={data:[]}),o[E]):m.get(h,E)},add:function u(h,E,M){if(!(f.indexOf(E)>=0))return m.add(h,E,M);!1===o.hasOwnProperty(E)&&(o[E]={data:[]}),o[E].data.push(M)},saveToolState:function n(){return o},restoreToolState:function a(h){o=h},toolState:o}}var s=[];function g(f,m){var o=Object(d.getElementToolStateManager)(f);o||(o=r.globalImageIdSpecificToolStateManager);var n=["stack","stackPrefetch","playClip","volume","slab","referenceLines","crosshairs","stackRenderer"];m&&(n=n.concat(m));var a=l(n,o);s.push(a),Object(d.setElementToolStateManager)(f,a)}var i={newStackSpecificToolStateManager:l,addStackStateManager:g}},"./stateManagement/textStyle.js":
/*!**************************************!*\
          !*** ./stateManagement/textStyle.js ***!
          \**************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r={fontSize:15,fontFamily:"Arial",backgroundColor:"transparent"};function s(a){if("string"!=typeof a)throw new Error("Font family must be a valid string");r.fontFamily=a}function i(a){if("number"!=typeof a||isNaN(a)||!isFinite(a))throw new Error("Font size must be a valid number");r.fontSize=parseFloat(a)}t.default={setFont:function d(a){var u=a.split("px ");2===u.length&&(i(parseFloat(u[0])),s(u[1]))},getFont:function l(){return"".concat(r.fontSize,"px ").concat(r.fontFamily)},setFontSize:i,getFontSize:function f(){return r.fontSize},setFontFamily:s,getFontFamily:function g(){return r.fontFamily},setBackgroundColor:function m(a){r.backgroundColor=a},getBackgroundColor:function o(){return r.backgroundColor}}},"./stateManagement/toolColors.js":
/*!***************************************!*\
          !*** ./stateManagement/toolColors.js ***!
          \***************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r="white",d="greenyellow",l="transparent";t.default={setFillColor:function s(u){l=u},getFillColor:function g(){return l},setToolColor:function i(u){r=u},getToolColor:function f(){return r},setActiveColor:function m(u){d=u},getActiveColor:function o(){return d},getColorIfActive:function n(u){return u.color?u.color:u.active?d:r}}},"./stateManagement/toolCoordinates.js":
/*!********************************************!*\
          !*** ./stateManagement/toolCoordinates.js ***!
          \********************************************/
/*! exports provided: default */function(b,t,e){"use strict";var r;e.r(t),t.default={setCoords:function d(g){r=g.currentPoints.canvas},getCoords:function l(){return r}}},"./stateManagement/toolState.js":
/*!**************************************!*\
          !*** ./stateManagement/toolState.js ***!
          \**************************************/
/*! exports provided: addToolState, getToolState, removeToolState, clearToolState, setElementToolStateManager, getElementToolStateManager */function(b,t,e){"use strict";e.r(t),e.d(t,"addToolState",function(){return f}),e.d(t,"getToolState",function(){return m}),e.d(t,"removeToolState",function(){return o}),e.d(t,"clearToolState",function(){return n}),e.d(t,"setElementToolStateManager",function(){return a}),e.d(t,"getElementToolStateManager",function(){return i});var r=e(
/*! ../events.js */
"./events.js"),d=e(
/*! ../externalModules.js */
"./externalModules.js"),l=e(
/*! ./imageIdSpecificStateManager.js */
"./stateManagement/imageIdSpecificStateManager.js"),s=e(
/*! ../util/triggerEvent.js */
"./util/triggerEvent.js"),g=e(
/*! ../util/uuidv4.js */
"./util/uuidv4.js");function i(u){var c=d.default.cornerstone.getEnabledElement(u);return void 0===c.toolStateManager&&(c.toolStateManager=l.globalImageIdSpecificToolStateManager),c.toolStateManager}function f(u,c,v){var h=i(u);v.uuid=v.uuid||Object(g.default)(),h.add(u,c,v);var E=r.default.MEASUREMENT_ADDED,M={toolName:c,toolType:c,element:u,measurementData:v};Object(s.default)(u,E,M)}function m(u,c){return i(u).get(u,c)}function o(u,c,v){var E=i(u).get(u,c);if(E&&E.data&&E.data.length){for(var M=-1,O=0;O<E.data.length;O++)E.data[O]===v&&(M=O);if(-1!==M){E.data.splice(M,1);var P=r.default.MEASUREMENT_REMOVED,T={toolName:c,toolType:c,element:u,measurementData:v};Object(s.default)(u,P,T)}}}function n(u,c){var h=i(u).get(u,c);void 0!==h&&(h.data=[])}function a(u,c){d.default.cornerstone.getEnabledElement(u).toolStateManager=c}},"./stateManagement/toolStyle.js":
/*!**************************************!*\
          !*** ./stateManagement/toolStyle.js ***!
          \**************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=1,d=2;t.default={setToolWidth:function l(m){r=m},getToolWidth:function s(){return r},setActiveWidth:function g(m){d=m},getActiveWidth:function i(){return d}}},"./store/addTool.js":
/*!**************************!*\
          !*** ./store/addTool.js ***!
          \**************************/
/*! exports provided: addTool, addToolForElement */function(b,t,e){"use strict";e.r(t),e.d(t,"addTool",function(){return i}),e.d(t,"addToolForElement",function(){return g});var r=e(
/*! ./index.js */
"./store/index.js"),d=e(
/*! ./getToolForElement.js */
"./store/getToolForElement.js"),l=e(
/*! ../util/logger.js */
"./util/logger.js"),s=Object(l.getLogger)("addTool"),g=function(o,n,a){var u=new n(a);Object(d.default)(o,u.name)?s.warn("%s has already been added to the target element",u.name):(u.element=o,r.default.state.tools.push(u))},i=function(o,n){f(o,n),r.default.state.enabledElements.forEach(function(a){g(a,o,n)})},f=function(o,n){if(Object(r.getModule)("globalConfiguration").configuration.globalToolSyncEnabled){var c=new o(n);if(void 0!==r.default.state.globalTools[c.name])return void s.warn("%s has already been added globally",c.name);r.default.state.globalTools[c.name]={tool:o,props:n,activeBindings:[]}}}},"./store/filterToolsUsableWithMultiPartTools.js":
/*!******************************************************!*\
          !*** ./store/filterToolsUsableWithMultiPartTools.js ***!
          \******************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../tools/base/BaseAnnotationTool.js */
"./tools/base/BaseAnnotationTool.js"),d=e(
/*! ../tools/base/BaseBrushTool.js */
"./tools/base/BaseBrushTool.js");t.default=function(l){return l.filter(function(s){return!(s.isMultiPartTool||s instanceof r.default||s instanceof d.default)})}},"./store/getActiveToolsForElement.js":
/*!*******************************************!*\
          !*** ./store/getActiveToolsForElement.js ***!
          \*******************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),t.default=function(r,d,l){return d.filter(function(s){return s.element===r&&"active"===s.mode&&(void 0===l||s.options["is".concat(l,"Active")])})}},"./store/getInteractiveToolsForElement.js":
/*!************************************************!*\
          !*** ./store/getInteractiveToolsForElement.js ***!
          \************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),t.default=function(r,d){return d.filter(function(l){return l.element===r&&("active"===l.mode||"passive"===l.mode)})}},"./store/getToolForElement.js":
/*!************************************!*\
          !*** ./store/getToolForElement.js ***!
          \************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./index.js */
"./store/index.js");t.default=function(d,l){return r.state.tools.find(function(s){return s.element===d&&s.name===l})}},"./store/getToolsWithDataForElement.js":
/*!*********************************************!*\
          !*** ./store/getToolsWithDataForElement.js ***!
          \*********************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./../stateManagement/toolState.js */
"./stateManagement/toolState.js");t.default=function(d,l){return l.filter(function(s){var g=Object(r.getToolState)(d,s.name);return g&&g.data.length>0})}},"./store/getToolsWithMoveableHandles.js":
/*!**********************************************!*\
          !*** ./store/getToolsWithMoveableHandles.js ***!
          \**********************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../stateManagement/toolState.js */
"./stateManagement/toolState.js"),d=e(
/*! ../manipulators/getHandleNearImagePoint.js */
"./manipulators/getHandleNearImagePoint.js"),l=e(
/*! ../util/getProximityThreshold.js */
"./util/getProximityThreshold.js");t.default=function(s,g,i){var f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"mouse";return g.filter(function(m){for(var o=Object(l.default)(f,m.name),n=Object(r.getToolState)(s,m.name),a=0;a<n.data.length;a++)if(void 0!==Object(d.default)(s,n.data[a].handles,i,o))return!0;return!1})}},"./store/index.js":
/*!************************!*\
          !*** ./store/index.js ***!
          \************************/
/*! exports provided: state, getters, modules, getModule, default */function(b,t,e){"use strict";e.r(t),e.d(t,"state",function(){return m}),e.d(t,"getters",function(){return o}),e.d(t,"modules",function(){return n}),e.d(t,"getModule",function(){return a});var r=e(
/*! ./modules/segmentationModule */
"./store/modules/segmentationModule/index.js"),d=e(
/*! ./modules/manipulatorStateModule */
"./store/modules/manipulatorStateModule.js"),l=e(
/*! ./modules/cursorModule.js */
"./store/modules/cursorModule.js"),s=e(
/*! ./modules/globalConfigurationModule.js */
"./store/modules/globalConfigurationModule.js"),g=e(
/*! ../externalModules.js */
"./externalModules.js"),i=e(
/*! ../util/logger.js */
"./util/logger.js"),m=(Object(i.getLogger)("store:modules:storeLogger"),{globalTools:{},globalToolChangeHistory:[],enabledElements:[],tools:[],isToolLocked:!1,activeMultiPartTool:null,mousePositionImage:{},clickProximity:6,touchProximity:10,handleRadius:6,deleteIfHandleOutsideImage:!0,preventHandleOutsideImage:!1,preventTextBoxOutsideDisplayedArea:!1,handleTouchOffset:{x:0,y:-57},svgCursorUrl:null}),o={mouseTools:function(){return m.tools.filter(function(c){return c.supportedInteractionTypes.includes("Mouse")})},touchTools:function(){return m.tools.filter(function(c){return c.supportedInteractionTypes.includes("Touch")})},enabledElementByUID:function(c){return m.enabledElements.find(function(v){return g.default.cornerstone.getEnabledElement(v).uuid===c})}},n={segmentation:r.default,cursor:l.default,globalConfiguration:s.default,manipulatorState:d.default};function a(u){return n[u]}t.default={modules:n,state:m,getters:o}},"./store/internals/addEnabledElement.js":
/*!**********************************************!*\
          !*** ./store/internals/addEnabledElement.js ***!
          \**********************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../../eventListeners/index.js */
"./eventListeners/index.js"),d=e(
/*! ../../eventDispatchers/index.js */
"./eventDispatchers/index.js"),l=e(
/*! ./../addTool.js */
"./store/addTool.js"),s=e(
/*! ./../setToolMode.js */
"./store/setToolMode.js"),g=e(
/*! ../index.js */
"./store/index.js"),i=e(
/*! ../../util/logger.js */
"./util/logger.js"),f=Object(i.getLogger)("internals:addEnabledElement");t.default=function(u){f.log("EVENT:ELEMENT_ENABLED");var c=u.detail.element;d.imageRenderedEventDispatcher.enable(c),d.newImageEventDispatcher.enable(c);var h=Object(g.getModule)("globalConfiguration").configuration;h.mouseEnabled&&(r.mouseEventListeners.enable(c),r.wheelEventListener.enable(c),d.mouseToolEventDispatcher.enable(c)),h.touchEnabled&&(r.touchEventListeners.enable(c),d.touchToolEventDispatcher.enable(c)),m(c)};var m=function(c){g.default.state.enabledElements.push(c),g.default.modules&&function o(u){var c=g.default.modules;Object.keys(c).forEach(function(v){"function"==typeof c[v].enabledElementCallback&&c[v].enabledElementCallback(u)})}(c),function n(u){Object(g.getModule)("globalConfiguration").configuration.globalToolSyncEnabled&&Object.keys(g.default.state.globalTools).forEach(function(h){var E=g.default.state.globalTools[h],M=E.tool,O=E.props;Object(l.addToolForElement)(u,M,O)})}(c),function a(u){if(Object(g.getModule)("globalConfiguration").configuration.globalToolSyncEnabled){var h={active:s.setToolActiveForElement,passive:s.setToolPassiveForElement,enabled:s.setToolEnabledForElement,disabled:s.setToolDisabledForElement};g.default.state.globalToolChangeHistory.forEach(function(E){var M=E.args.slice(0);M.unshift(u),h[E.mode].apply(null,M)})}}(c)}},"./store/internals/removeEnabledElement.js":
/*!*************************************************!*\
          !*** ./store/internals/removeEnabledElement.js ***!
          \*************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../../eventListeners/index.js */
"./eventListeners/index.js"),d=e(
/*! ../../eventDispatchers/index.js */
"./eventDispatchers/index.js"),l=e(
/*! ../index.js */
"./store/index.js"),s=e(
/*! ../../util/logger.js */
"./util/logger.js"),g=e(
/*! ../../stateManagement/loadHandlerManager.js */
"./stateManagement/loadHandlerManager.js"),i=e(
/*! ../setToolMode */
"./store/setToolMode.js"),f=Object(s.getLogger)("internals:removeEnabledElement");t.default=function(u){f.log("EVENT:ELEMENT_DISABLED");var c=u.detail.element,h=Object(l.getModule)("globalConfiguration").configuration;d.imageRenderedEventDispatcher.disable(c),d.newImageEventDispatcher.disable(c),h.mouseEnabled&&(r.mouseEventListeners.disable(c),r.wheelEventListener.disable(c),d.mouseToolEventDispatcher.disable(c)),h.touchEnabled&&(r.touchEventListeners.disable(c),d.touchToolEventDispatcher.disable(c)),m(c),o(c),n(c)};var m=function(c){l.default.state.tools.forEach(function(v){v.element===c&&Object(i.setToolDisabledForElement)(v.element,v.name)}),l.default.state.tools=l.default.state.tools.filter(function(v){return v.element!==c})},o=function(c){l.default.modules&&function a(u){var c=l.default.modules;Object.keys(c).forEach(function(v){"function"==typeof c[v].removeEnabledElementCallback&&c[v].removeEnabledElementCallback(u)})}(c);var v=l.default.state.enabledElements.findIndex(function(h){return h===c});v>-1?l.default.state.enabledElements.splice(v,1):f.warn("unable to remove element")},n=function(c){g.default.removeHandlers(c)}},"./store/isToolActiveForElement.js":
/*!*****************************************!*\
          !*** ./store/isToolActiveForElement.js ***!
          \*****************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./getToolForElement.js */
"./store/getToolForElement.js");t.default=function(d,l){return"active"===Object(r.default)(d,l).mode}},"./store/modules/cursorModule.js":
/*!***************************************!*\
          !*** ./store/modules/cursorModule.js ***!
          \***************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e(
/*! ../../externalModules */
"./externalModules.js");var d={iconSize:16,viewBox:{x:16,y:16},mousePoint:{x:8,y:8},mousePointerGroupString:'\n    <path stroke="ACTIVE_COLOR" d="M8 16L8 0"></path>\n    <path stroke="ACTIVE_COLOR" d="M16 8L0 8"></path>\n  '};t.default={configuration:d,getters:{defaultOptions:function(){return d}},setters:{defaultOptions:function(i){Object.assign(d,i)}}}},"./store/modules/globalConfigurationModule.js":
/*!****************************************************!*\
          !*** ./store/modules/globalConfigurationModule.js ***!
          \****************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),t.default={configuration:{mouseEnabled:!0,touchEnabled:!0,globalToolSyncEnabled:!1,showSVGCursors:!1,autoResizeViewports:!0,lineDash:[4,4]}}},"./store/modules/manipulatorStateModule.js":
/*!*************************************************!*\
          !*** ./store/modules/manipulatorStateModule.js ***!
          \*************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../../externalModules */
"./externalModules.js"),d={activeManipulators:{}};function s(a){var u=r.default.cornerstone.getEnabledElement(a);delete d.activeManipulators[u.uuid]}function i(a){var u=d.activeManipulators,c=u[a];"function"==typeof c&&c(),delete u[a]}function m(a){s(a.detail.element)}t.default={setters:{addActiveManipulatorForElement:function l(a,u){var c=r.default.cornerstone.getEnabledElement(a);d.activeManipulators[c.uuid]=u},removeActiveManipulatorForElement:s,cancelActiveManipulatorsForElement:function g(a){i(r.default.cornerstone.getEnabledElement(a).uuid)},cancelActiveManipulators:function f(){Object.keys(d.activeManipulators).forEach(function(u){return i(u)})}},state:d,enabledElementCallback:function n(a){var u=r.default.cornerstone.EVENTS.NEW_IMAGE;a.removeEventListener(u,m),a.addEventListener(u,m)},removeEnabledElementCallback:function o(a){a.removeEventListener(r.default.cornerstone.EVENTS.NEW_IMAGE,m),s(a)}}},"./store/modules/segmentationModule/activeLabelmapIndex.js":
/*!*****************************************************************!*\
          !*** ./store/modules/segmentationModule/activeLabelmapIndex.js ***!
          \*****************************************************************/
/*! exports provided: getActiveLabelmapIndex, setActiveLabelmapIndex */function(b,t,e){"use strict";e.r(t),e.d(t,"getActiveLabelmapIndex",function(){return i}),e.d(t,"setActiveLabelmapIndex",function(){return f});var r=e(
/*! ./getElement */
"./store/modules/segmentationModule/getElement.js"),d=e(
/*! ../../../stateManagement/toolState.js */
"./stateManagement/toolState.js"),l=e(
/*! ./addLabelmap3D */
"./store/modules/segmentationModule/addLabelmap3D.js"),s=e(
/*! ./state */
"./store/modules/segmentationModule/state.js"),g=e(
/*! ../../../externalModules */
"./externalModules.js");function i(m){var o=Object(r.default)(m);if(o){var n=Object(d.getToolState)(o,"stack"),c=s.default.series[n.data[0].imageIds[0]];if(c)return c.activeLabelmapIndex}}function f(m){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object(r.default)(m);if(n){var a=g.default.cornerstone,c=Object(d.getToolState)(n,"stack").data[0],h=a.getEnabledElement(n).image,P=h.rows*h.columns*c.imageIds.length,T=c.imageIds[0],D=s.default.series[T];D?(D.activeLabelmapIndex=o,D.labelmaps3D[o]||Object(l.default)(D,o,P)):(s.default.series[T]={activeLabelmapIndex:o,labelmaps3D:[]},D=s.default.series[T],Object(l.default)(D,o,P)),a.updateImage(n)}}},"./store/modules/segmentationModule/activeSegmentIndex.js":
/*!****************************************************************!*\
          !*** ./store/modules/segmentationModule/activeSegmentIndex.js ***!
          \****************************************************************/
/*! exports provided: getActiveSegmentIndex, setActiveSegmentIndex, incrementActiveSegmentIndex, decrementActiveSegmentIndex */function(b,t,e){"use strict";e.r(t),e.d(t,"getActiveSegmentIndex",function(){return g}),e.d(t,"setActiveSegmentIndex",function(){return i}),e.d(t,"incrementActiveSegmentIndex",function(){return f}),e.d(t,"decrementActiveSegmentIndex",function(){return m});var r=e(
/*! ./getElement */
"./store/modules/segmentationModule/getElement.js"),d=e(
/*! ../../../stateManagement/toolState.js */
"./stateManagement/toolState.js"),l=e(
/*! ./state */
"./store/modules/segmentationModule/state.js"),s=e(
/*! ../../index.js */
"./store/index.js");function g(n,a){var u=Object(r.default)(n);if(u){var c=Object(d.getToolState)(u,"stack"),E=l.default.series[c.data[0].imageIds[0]];if(E){var M=E.labelmaps3D[a=void 0===a?E.activeLabelmapIndex:a];if(M)return M.activeSegmentIndex}return 1}}function i(n,a){var u=Object(r.default)(n);if(u){var c=Object(d.getToolState)(u,"stack"),E=l.default.series[c.data[0].imageIds[0]];if(E){var O=E.labelmaps3D[E.activeLabelmapIndex],T=Object(s.getModule)("segmentation").configuration;a<=0?a=1:a>T.segmentsPerLabelmap&&(a=T.segmentsPerLabelmap),O.activeSegmentIndex=a}}}function f(n){var a=Object(r.default)(n);a&&o(a,"increase")}function m(n){var a=Object(r.default)(n);a&&o(a,"decrease")}function o(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"increase",c=Object(s.getModule)("segmentation").configuration,v=Object(d.getToolState)(n,"stack"),M=l.default.series[v.data[0].imageIds[0]];if(M){var P=M.labelmaps3D[M.activeLabelmapIndex];switch(a){case"increase":P.activeSegmentIndex++,P.activeSegmentIndex>c.segmentsPerLabelmap&&(P.activeSegmentIndex=1);break;case"decrease":P.activeSegmentIndex--,P.activeSegmentIndex<=0&&(P.activeSegmentIndex=c.segmentsPerLabelmap)}}}},"./store/modules/segmentationModule/addLabelmap2D.js":
/*!***********************************************************!*\
          !*** ./store/modules/segmentationModule/addLabelmap2D.js ***!
          \***********************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return g});var r=e(
/*! ./arrayTypes */
"./store/modules/segmentationModule/arrayTypes.js"),d=e(
/*! ../../index.js */
"./store/index.js"),l=r.default.UINT_16_ARRAY,s=r.default.FLOAT_32_ARRAY;function g(i,f,m,o,n){var h,u=Object(d.getModule)("segmentation").configuration,c=o*n,v=c*m;switch(u.arrayType){case l:h=new Uint16Array(i.labelmaps3D[f].buffer,2*v,c);break;case s:h=new Float32Array(i.labelmaps3D[f].buffer,4*v,c);break;default:throw new Error("Unsupported Array Type ".concat(u.arrayType))}i.labelmaps3D[f].labelmaps2D[m]={pixelData:h,segmentsOnLabelmap:[]}}},"./store/modules/segmentationModule/addLabelmap3D.js":
/*!***********************************************************!*\
          !*** ./store/modules/segmentationModule/addLabelmap3D.js ***!
          \***********************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return g});var r=e(
/*! ./arrayTypes */
"./store/modules/segmentationModule/arrayTypes.js"),d=e(
/*! ../../index.js */
"./store/index.js"),l=r.default.UINT_16_ARRAY,s=r.default.FLOAT_32_ARRAY;function g(i,f,m){var a,n=Object(d.getModule)("segmentation").configuration;switch(n.arrayType){case l:a=2;break;case s:a=4;break;default:throw new Error("Unsupported Array Type ".concat(n.arrayType))}i.labelmaps3D[f]={buffer:new ArrayBuffer(m*a),labelmaps2D:[],metadata:[],activeSegmentIndex:1,colorLUTIndex:0,segmentsHidden:[],undo:[],redo:[]}}},"./store/modules/segmentationModule/arrayTypes.js":
/*!********************************************************!*\
          !*** ./store/modules/segmentationModule/arrayTypes.js ***!
          \********************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),t.default={UINT_16_ARRAY:0,FLOAT_32_ARRAY:1}},"./store/modules/segmentationModule/colorLUT.js":
/*!******************************************************!*\
          !*** ./store/modules/segmentationModule/colorLUT.js ***!
          \******************************************************/
/*! exports provided: default, setColorLUTIndexForLabelmap3D, getColorForSegmentIndexColorLUT, setColorForSegmentIndexOfColorLUT, getColorLUT */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return f}),e.d(t,"setColorLUTIndexForLabelmap3D",function(){return m}),e.d(t,"getColorForSegmentIndexColorLUT",function(){return o}),e.d(t,"setColorForSegmentIndexOfColorLUT",function(){return n}),e.d(t,"getColorLUT",function(){return a});var r=e(
/*! @babel/runtime/helpers/toConsumableArray */
"../node_modules/@babel/runtime/helpers/toConsumableArray.js"),d=e.n(r),l=e(
/*! ../../../util/logger */
"./util/logger.js"),s=e(
/*! ./state */
"./store/modules/segmentationModule/state.js"),g=e(
/*! ../../index.js */
"./store/index.js"),i=Object(l.getLogger)("store:modules:segmentationModule:setColorLUT");function f(j){var C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],S=Object(g.getModule)("segmentation").configuration.segmentsPerLabelmap;C?(function u(j,C){j.length<C?i.warn("The provided colorLUT only provides ".concat(j.length," labels, whereas segmentsPerLabelmap is set to ").concat(C,". Autogenerating the rest.")):j.length>C&&i.warn("segmentsPerLabelmap is set to ".concat(C,", and the provided colorLUT provides ").concat(j.length,". Using the first ").concat(C," colors from the LUT."))}(C,S),C.length<S&&(C=[].concat(d()(C),d()(c(S-C.length))))):C=C||c(S),C.unshift([0,0,0,0]),s.default.colorLutTables[j]=C}function m(j,C){j.colorLUTIndex=C}function o(j,C){return a(j)[C]}function n(j,C,I){a(j)[C]=I}function a(j){return"number"==typeof j?s.default.colorLutTables[j]:s.default.colorLutTables[j.colorLUTIndex]}function c(){for(var j=arguments.length>0&&void 0!==arguments[0]?arguments[0]:255,C=[],I=0;I<j;I++)C.push(y(((h+=v)>=360&&(h-=360),h),D()));return C}var v=137.5,h=222.5,M=.6,O=.82,P=.3,T=.07;function D(){return(M+=T)>O&&(M=P+(M-O)),M}function y(j){var W,L,x,C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,I=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.6,B=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255,S=(1-Math.abs(2*I-1))*C,K=S*(1-Math.abs(j/60%2-1)),H=I-S/2;return j<60?(W=S,L=K,x=0):j<120?(W=K,L=S,x=0):j<180?(W=0,L=S,x=K):j<240?(W=0,L=K,x=S):j<300?(W=K,L=0,x=S):j<360&&(W=S,L=0,x=K),[255*(W+H),255*(L+H),255*(x+H),B]}},"./store/modules/segmentationModule/defaultConfiguration.js":
/*!******************************************************************!*\
          !*** ./store/modules/segmentationModule/defaultConfiguration.js ***!
          \******************************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./arrayTypes */
"./store/modules/segmentationModule/arrayTypes.js");t.default={renderOutline:!0,renderFill:!0,shouldRenderInactiveLabelmaps:!0,radius:10,minRadius:1,maxRadius:50,fillAlpha:.2,fillAlphaInactive:.1,outlineAlpha:.7,outlineAlphaInactive:.35,outlineWidth:3,storeHistory:!0,segmentsPerLabelmap:65535,arrayType:r.default.UINT_16_ARRAY}},"./store/modules/segmentationModule/deleteSegment.js":
/*!***********************************************************!*\
          !*** ./store/modules/segmentationModule/deleteSegment.js ***!
          \***********************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return g});var r=e(
/*! ./getElement */
"./store/modules/segmentationModule/getElement.js"),d=e(
/*! ../../../stateManagement/toolState.js */
"./stateManagement/toolState.js"),l=e(
/*! ./state */
"./store/modules/segmentationModule/state.js"),s=e(
/*! ../../../externalModules */
"./externalModules.js");function g(i,f,m){if(f){var o=Object(r.default)(i);if(o){var n=Object(d.getToolState)(o,"stack"),c=l.default.series[n.data[0].imageIds[0]];if(c){var v=c.labelmaps3D[m=void 0===m?c.activeLabelmapIndex:m];if(v){delete v.metadata[f];for(var h=v.labelmaps2D,E=0;E<h.length;E++){var M=h[E];if(M&&M.segmentsOnLabelmap.includes(f)){var O=M.pixelData,P=M.segmentsOnLabelmap.indexOf(f);M.segmentsOnLabelmap.splice(P,1);for(var T=0;T<O.length;T++)O[T]===f&&(O[T]=0)}}s.default.cornerstone.updateImage(o)}}}}}},"./store/modules/segmentationModule/getBrushColor.js":
/*!***********************************************************!*\
          !*** ./store/modules/segmentationModule/getBrushColor.js ***!
          \***********************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return i});var r=e(
/*! ../../../stateManagement/toolState.js */
"./stateManagement/toolState.js"),d=e(
/*! ./state */
"./store/modules/segmentationModule/state.js"),l=e(
/*! ./getElement */
"./store/modules/segmentationModule/getElement.js"),s=e(
/*! ../../../util/logger */
"./util/logger.js"),g=Object(s.getLogger)("store:modules:segmentationModule:getBrushColor");function i(f){var m=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=Object(l.default)(f);if(o){var n=Object(r.getToolState)(o,"stack");if(!n)return void g.error("Consumers must define stacks in their application if using segmentations in cornerstoneTools.");var v,c=d.default.series[n.data[0].imageIds[0]];if(c){var E=c.labelmaps3D[c.activeLabelmapIndex];v=d.default.colorLutTables[E.colorLUTIndex][E.activeSegmentIndex]}else v=d.default.colorLutTables[0][1];return m?"rgba(".concat(v[0],", ").concat(v[1],", ").concat(v[2],", 1.0 )"):"rgba(".concat(v[0],", ").concat(v[1],", ").concat(v[2],", 0.8 )")}}},"./store/modules/segmentationModule/getElement.js":
/*!********************************************************!*\
          !*** ./store/modules/segmentationModule/getElement.js ***!
          \********************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return d});var r=e(
/*! ../../index.js */
"./store/index.js");function d(l){return l instanceof HTMLElement?l:r.getters.enabledElementByUID(l)}},"./store/modules/segmentationModule/getLabelmap2D.js":
/*!***********************************************************!*\
          !*** ./store/modules/segmentationModule/getLabelmap2D.js ***!
          \***********************************************************/
/*! exports provided: default, getLabelmap2DByImageIdIndex */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return v}),e.d(t,"getLabelmap2DByImageIdIndex",function(){return h});var r=e(
/*! ./getElement */
"./store/modules/segmentationModule/getElement.js"),d=e(
/*! ../../../stateManagement/toolState.js */
"./stateManagement/toolState.js"),l=e(
/*! ./getSegmentsOnPixeldata */
"./store/modules/segmentationModule/getSegmentsOnPixeldata.js"),s=e(
/*! ./addLabelmap3D */
"./store/modules/segmentationModule/addLabelmap3D.js"),g=e(
/*! ./addLabelmap2D */
"./store/modules/segmentationModule/addLabelmap2D.js"),i=e(
/*! ../../../externalModules */
"./externalModules.js"),f=e(
/*! ./state */
"./store/modules/segmentationModule/state.js"),m=e(
/*! ./arrayTypes */
"./store/modules/segmentationModule/arrayTypes.js"),o=e(
/*! ../../index.js */
"./store/index.js"),n=e(
/*! ../../../util/logger */
"./util/logger.js"),a=m.default.UINT_16_ARRAY,u=m.default.FLOAT_32_ARRAY,c=Object(n.getLogger)("store:modules:segmentationModule:getLabelmap2D");function v(E){var M=Object(r.default)(E);if(M){var O=i.default.cornerstone,P=Object(d.getToolState)(M,"stack");if(!P)return void c.error("Consumers must define stacks in their application if using segmentations in cornerstoneTools.");var H,T=P.data[0],D=O.getEnabledElement(M),y=T.currentImageIdIndex,j=D.image,C=j.rows,I=j.columns,B=T.imageIds.length,S=T.imageIds[0],K=f.default.series[S];if(K){if(!K.labelmaps3D[H=K.activeLabelmapIndex]){var W=C*I*B;Object(s.default)(K,H,W)}K.labelmaps3D[H].labelmaps2D[y]||Object(g.default)(K,H,y,C,I)}else{f.default.series[S]={activeLabelmapIndex:H=0,labelmaps3D:[]},K=f.default.series[S];var L=C*I*B;Object(s.default)(K,H,L),Object(g.default)(K,H,y,C,I)}var x=K.labelmaps3D[H];return{labelmap2D:x.labelmaps2D[y],labelmap3D:x,currentImageIdIndex:y,activeLabelmapIndex:H}}}function h(E,M,O,P){if(!E.labelmaps2D[M]){var C,D=Object(o.getModule)("segmentation").configuration,y=O*P,j=y*M;switch(D.arrayType){case a:C=new Uint16Array(E.buffer,2*j,y);break;case u:C=new Float32Array(E.buffer,4*j,y);break;default:throw new Error("Unsupported Array Type ".concat(D.arrayType))}E.labelmaps2D[M]={pixelData:C,segmentsOnLabelmap:Object(l.default)(C)}}return E.labelmaps2D[M]}},"./store/modules/segmentationModule/getLabelmapBuffers.js":
/*!****************************************************************!*\
          !*** ./store/modules/segmentationModule/getLabelmapBuffers.js ***!
          \****************************************************************/
/*! exports provided: getLabelmapBuffers, getActiveLabelmapBuffer */function(b,t,e){"use strict";e.r(t),e.d(t,"getLabelmapBuffers",function(){return o}),e.d(t,"getActiveLabelmapBuffer",function(){return n});var r=e(
/*! ./getElement */
"./store/modules/segmentationModule/getElement.js"),d=e(
/*! ../../../stateManagement/toolState.js */
"./stateManagement/toolState.js"),l=e(
/*! ./getLabelmaps3D */
"./store/modules/segmentationModule/getLabelmaps3D.js"),s=e(
/*! ./state */
"./store/modules/segmentationModule/state.js"),g=e(
/*! ./arrayTypes */
"./store/modules/segmentationModule/arrayTypes.js"),i=e(
/*! ../../index.js */
"./store/index.js"),f=g.default.UINT_16_ARRAY,m=g.default.FLOAT_32_ARRAY;function o(a,u){var c=Object(r.default)(a);if(c){var h=Object(l.default)(c).labelmaps3D;if(!h)return[];var O,P,M=Object(i.getModule)("segmentation").configuration;switch(M.arrayType){case f:O="Uint16Array",P="2";break;case m:O="Float32Array",P="4";break;default:throw new Error("Unsupported Array Type ".concat(M.arrayType))}var T=s.default.colorLutTables;if(void 0!==u){var D=h[u];return D?{labelmapIndex:u,bytesPerVoxel:P,type:O,buffer:D.buffer,colorLUT:T[D.colorLUTIndex]}:void 0}for(var y=[],j=0;j<h.length;j++){var C=h[j];C&&y.push({labelmapIndex:j,bytesPerVoxel:2,buffer:C.buffer,colorLUT:T[C.colorLUTIndex]})}return y}}function n(a){var u=Object(r.default)(a);if(u){var c=Object(d.getToolState)(u,"stack"),E=s.default.series[c.data[0].imageIds[0]];if(E)return o(u,E.activeLabelmapIndex)}}},"./store/modules/segmentationModule/getLabelmapStats.js":
/*!**************************************************************!*\
          !*** ./store/modules/segmentationModule/getLabelmapStats.js ***!
          \**************************************************************/
/*! exports provided: default, _calculateLabelmapStats */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return f}),e.d(t,"_calculateLabelmapStats",function(){return o});var r=e(
/*! ./getElement */
"./store/modules/segmentationModule/getElement.js"),d=e(
/*! ../../../stateManagement/toolState.js */
"./stateManagement/toolState.js"),l=e(
/*! ./state */
"./store/modules/segmentationModule/state.js"),s=e(
/*! ../../../externalModules */
"./externalModules.js"),g=e(
/*! ../../../util/logger */
"./util/logger.js"),i=Object(g.getLogger)("store:modules:segmentationModule:getLabelmapStats");function f(c,v,h){var E=s.default.cornerstone,M=Object(r.default)(c);if(!M)return null;var P=Object(d.getToolState)(M,"stack").data[0].imageIds,T=P[0];return new Promise(function(D){var y=l.default.series[T];y||D(null);var j=function m(c){for(var v=[],E=s.default.cornerstone.metaData,M=!0,O=0;O<c.length;O++){var P=E.get("imagePlaneModule",c[O]);if(!P){M=!1;break}v.push(P)}return{sufficientMetadata:M,imagePlanes:v}}(P),I=j.imagePlanes;j.sufficientMetadata||(i.warn("Insufficient imagePlaneModule information to calculate volume statistics."),D(null));for(var B=y.labelmaps3D[h=void 0===h?y.activeLabelmapIndex:h],S=[],K=0;K<P.length;K++)S.push(E.loadAndCacheImage(P[K]));Promise.all(S).then(function(H){var W=o(B,H,I,v);D(W)})})}function o(c,v,h,E){for(var M=function n(c,v,h,E){for(var M=v[0],O=M.rowPixelSpacing,P=M.columnPixelSpacing,T=c.labelmaps2D,D=[],y=0;y<T.length;y++){var j=T[y];if(j&&j.segmentsOnLabelmap.includes(E)){for(var I=a(v,h,y)*O*P,B=j.pixelData,S=v[y].getPixelData(),K=[],H=0;H<B.length;H++)B[H]===E&&K.push(S[H]);D.push({voxelInMM3:I,values:K})}}return D}(c,v,h,E),O=0,P=M[0].values[0],T=P,D=0,y=0;y<M.length;y++){var j=M[y];D+=(I=j.voxelInMM3)*(C=j.values).length;var B=0;C.forEach(function(L){L>P?P=L:L<T&&(T=L),B+=L}),O+=B*I}O/=D;for(var S=0,K=0;K<M.length;K++){var C,H=M[K],I=H.voxelInMM3,W=0;(C=H.values).forEach(function(_){W+=Math.pow(_-O,2)}),S+=W*I}return S/=D,S=Math.sqrt(S),{volume:D,mean:O,stdDev:S,max:P,min:T}}function a(c,v,h){var E=c.length,M=v[h].imagePositionPatient;if(0===h)return u(M,v[h+1].imagePositionPatient);if(h===E-1)return u(M,v[h-1].imagePositionPatient);var D=v[h+1].imagePositionPatient;return(u(M,v[h-1].imagePositionPatient)+u(M,D))/2}function u(c,v){return Math.sqrt(Math.pow(c[0]-v[0],2)+Math.pow(c[1]-v[1],2)+Math.pow(c[2]-v[2],2))}},"./store/modules/segmentationModule/getLabelmaps3D.js":
/*!************************************************************!*\
          !*** ./store/modules/segmentationModule/getLabelmaps3D.js ***!
          \************************************************************/
/*! exports provided: default, getLabelmap3D */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return i}),e.d(t,"getLabelmap3D",function(){return f});var r=e(
/*! ../../../stateManagement/toolState.js */
"./stateManagement/toolState.js"),d=e(
/*! ./getElement */
"./store/modules/segmentationModule/getElement.js"),l=e(
/*! ./state */
"./store/modules/segmentationModule/state.js"),s=e(
/*! ../../../util/logger */
"./util/logger.js"),g=Object(s.getLogger)("store:modules:segmentationModule:getLabelmaps3D");function i(m){var o=Object(d.default)(m);if(o){var n=Object(r.getToolState)(o,"stack");if(!n)return void g.error("Consumers must define stacks in their application if using segmentations in cornerstoneTools.");var v,h,a=n.data[0],c=l.default.series[a.imageIds[0]];return c&&(v=c.labelmaps3D,h=c.activeLabelmapIndex),{labelmaps3D:v,activeLabelmapIndex:h,currentImageIdIndex:a.currentImageIdIndex}}}function f(m,o){var n=i(m);return n.labelmaps3D[o=void 0!==o?o:n.activeLabelmapIndex]}},"./store/modules/segmentationModule/getSegmentOfActiveLabelmapAtEvent.js":
/*!*******************************************************************************!*\
          !*** ./store/modules/segmentationModule/getSegmentOfActiveLabelmapAtEvent.js ***!
          \*******************************************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return i});var r=e(
/*! ../../../stateManagement/toolState.js */
"./stateManagement/toolState.js"),d=e(
/*! ./state */
"./store/modules/segmentationModule/state.js"),l=e(
/*! ../../../util/isPointInImage */
"./util/isPointInImage.js"),s=e(
/*! ../../../util/logger */
"./util/logger.js"),g=Object(s.getLogger)("store:modules:segmentationModule:getSegmentOfActiveLabelmapAtEvent");function i(f){var m=f.detail,o=m.element,n=m.image,a=m.currentPoints;if(a){var u=n.width,c=n.height;if(o){var h=Object(r.getToolState)(o,"stack").data[0],O=d.default.series[h.imageIds[0]],T=O.labelmaps3D[O.activeLabelmapIndex];if(T){var D=T.labelmaps2D[h.currentImageIdIndex];if(D){var y=D.pixelData,j=a.image,C=j.x,I=j.y;if(C=Math.floor(C),I=Math.floor(I),Object(l.default)({x:C,y:I},c,u)){var B=y[I*u+C];return 0===B?void 0:{segmentIndex:B,metadata:T.metadata[B]}}}}}}else g.warn("Not a cornerstone input event.")}},"./store/modules/segmentationModule/getSegmentsOnPixeldata.js":
/*!********************************************************************!*\
          !*** ./store/modules/segmentationModule/getSegmentsOnPixeldata.js ***!
          \********************************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return l});var r=e(
/*! @babel/runtime/helpers/toConsumableArray */
"../node_modules/@babel/runtime/helpers/toConsumableArray.js"),d=e.n(r);function l(s){return d()(new Set(s))}},"./store/modules/segmentationModule/history.js":
/*!*****************************************************!*\
          !*** ./store/modules/segmentationModule/history.js ***!
          \*****************************************************/
/*! exports provided: pushState, undo, redo */function(b,t,e){"use strict";e.r(t),e.d(t,"pushState",function(){return g}),e.d(t,"undo",function(){return i}),e.d(t,"redo",function(){return f});var r=e(
/*! ./getLabelmaps3D */
"./store/modules/segmentationModule/getLabelmaps3D.js"),d=e(
/*! ../../../util/logger */
"./util/logger.js"),l=e(
/*! ../../../externalModules */
"./externalModules.js"),s=Object(d.getLogger)("util:segmentation:labelmap3DHistory");function g(o,n,a){var u=Object(r.getLabelmap3D)(o,a);u.undo.push(n),u.redo=[]}function i(o,n){var a=Object(r.getLabelmap3D)(o,n),u=a.undo,c=a.redo;if(u.length){var v=u.pop();m(a,v,1),c.push(v),l.default.cornerstone.updateImage(o)}else s.warn("No undos left.")}function f(o,n){var a=Object(r.getLabelmap3D)(o,n),u=a.undo,c=a.redo;if(c.length){var v=c.pop();m(a,v,2),u.push(v),l.default.cornerstone.updateImage(o)}else s.warn("No redos left.")}function m(o,n,a){var u=o.labelmaps2D;n.forEach(function(c){for(var h=c.diff,M=u[c.imageIdIndex].pixelData,O=0;O<h.length;O++){var P=h[O];M[P[0]]=P[a]}})}},"./store/modules/segmentationModule/index.js":
/*!***************************************************!*\
          !*** ./store/modules/segmentationModule/index.js ***!
          \***************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./metadata */
"./store/modules/segmentationModule/metadata.js"),d=e(
/*! ./activeLabelmapIndex */
"./store/modules/segmentationModule/activeLabelmapIndex.js"),l=e(
/*! ./activeSegmentIndex */
"./store/modules/segmentationModule/activeSegmentIndex.js"),s=e(
/*! ./segmentVisibility.js */
"./store/modules/segmentationModule/segmentVisibility.js"),g=e(
/*! ./getLabelmapBuffers */
"./store/modules/segmentationModule/getLabelmapBuffers.js"),i=e(
/*! ./setLabelmap3D.js */
"./store/modules/segmentationModule/setLabelmap3D.js"),f=e(
/*! ./getLabelmapStats */
"./store/modules/segmentationModule/getLabelmapStats.js"),m=e(
/*! ./getLabelmaps3D */
"./store/modules/segmentationModule/getLabelmaps3D.js"),o=e(
/*! ./getLabelmap2D */
"./store/modules/segmentationModule/getLabelmap2D.js"),n=e(
/*! ./getSegmentOfActiveLabelmapAtEvent */
"./store/modules/segmentationModule/getSegmentOfActiveLabelmapAtEvent.js"),a=e(
/*! ./colorLUT */
"./store/modules/segmentationModule/colorLUT.js"),u=e(
/*! ./getBrushColor */
"./store/modules/segmentationModule/getBrushColor.js"),c=e(
/*! ./getSegmentsOnPixeldata */
"./store/modules/segmentationModule/getSegmentsOnPixeldata.js"),v=e(
/*! ./deleteSegment */
"./store/modules/segmentationModule/deleteSegment.js"),h=e(
/*! ./state */
"./store/modules/segmentationModule/state.js"),E=e(
/*! ./defaultConfiguration */
"./store/modules/segmentationModule/defaultConfiguration.js"),M=e(
/*! ./history */
"./store/modules/segmentationModule/history.js"),O=e(
/*! ./setRadius */
"./store/modules/segmentationModule/setRadius.js");t.default={state:h.default,configuration:E.default,onRegisterCallback:function P(){Object(a.default)(0)},getters:{metadata:r.getMetadata,labelmap3D:m.getLabelmap3D,labelmaps3D:m.default,activeLabelmapIndex:d.getActiveLabelmapIndex,activeSegmentIndex:l.getActiveSegmentIndex,isSegmentVisible:s.isSegmentVisible,labelmap2D:o.default,labelmap2DByImageIdIndex:o.getLabelmap2DByImageIdIndex,labelmapStats:f.default,segmentOfActiveLabelmapAtEvent:n.default,brushColor:u.default,labelmapBuffers:g.getLabelmapBuffers,activeLabelmapBuffer:g.getActiveLabelmapBuffer,colorLUT:a.getColorLUT,colorForSegmentIndexColorLUT:a.getColorForSegmentIndexColorLUT},setters:{metadata:r.setMetadata,labelmap3DForElement:i.setLabelmap3DForElement,labelmap3DByFirstImageId:i.setLabelmap3DByFirstImageId,incrementActiveSegmentIndex:l.incrementActiveSegmentIndex,decrementActiveSegmentIndex:l.decrementActiveSegmentIndex,activeSegmentIndex:l.setActiveSegmentIndex,toggleSegmentVisibility:s.toggleSegmentVisibility,updateSegmentsOnLabelmap2D:function(D){D.segmentsOnLabelmap=Object(c.default)(D.pixelData)},deleteSegment:v.default,colorLUT:a.default,colorLUTIndexForLabelmap3D:a.setColorLUTIndexForLabelmap3D,colorForSegmentIndexOfColorLUT:a.setColorForSegmentIndexOfColorLUT,activeLabelmapIndex:d.setActiveLabelmapIndex,radius:O.default,pushState:M.pushState,undo:M.undo,redo:M.redo}}},"./store/modules/segmentationModule/metadata.js":
/*!******************************************************!*\
          !*** ./store/modules/segmentationModule/metadata.js ***!
          \******************************************************/
/*! exports provided: getMetadata, setMetadata */function(b,t,e){"use strict";e.r(t),e.d(t,"getMetadata",function(){return m}),e.d(t,"setMetadata",function(){return o});var r=e(
/*! ./getElement */
"./store/modules/segmentationModule/getElement.js"),d=e(
/*! ./addLabelmap3D */
"./store/modules/segmentationModule/addLabelmap3D.js"),l=e(
/*! ../../../stateManagement/toolState.js */
"./stateManagement/toolState.js"),s=e(
/*! ../../../externalModules */
"./externalModules.js"),g=e(
/*! ../../../util/logger */
"./util/logger.js"),i=e(
/*! ./state */
"./store/modules/segmentationModule/state.js"),f=Object(g.getLogger)("store:modules:segmentationModule:metadata");function m(n,a,u){var c=Object(r.default)(n);if(c){var v=Object(l.getToolState)(c,"stack"),M=i.default.series[v.data[0].imageIds[0]];if(!M)return void f.warn("brushStackState is undefined");if(!M.labelmaps3D[a=void 0===a?M.activeLabelmapIndex:a])return void f.warn("No labelmap3D of labelmap index ".concat(a," on stack."));var O=M.labelmaps3D[a];return void 0===u?O.metadata:O.metadata[u]}}function o(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,u=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0,v=Object(r.default)(n);if(v){var h=s.default.cornerstone,M=Object(l.getToolState)(v,"stack").data[0],O=M.imageIds[0],P=i.default.series[O];if(P||(i.default.series[O]={labelmapIndex:a,labelmaps3D:[]},P=i.default.series[O]),!P.labelmaps3D[a]){var D=h.getEnabledElement(v).image,I=D.rows*D.columns*M.imageIds.length;Object(d.default)(P,a,I)}P.labelmaps3D[a].metadata[u]=c}}},"./store/modules/segmentationModule/segmentVisibility.js":
/*!***************************************************************!*\
          !*** ./store/modules/segmentationModule/segmentVisibility.js ***!
          \***************************************************************/
/*! exports provided: isSegmentVisible, toggleSegmentVisibility */function(b,t,e){"use strict";e.r(t),e.d(t,"isSegmentVisible",function(){return i}),e.d(t,"toggleSegmentVisibility",function(){return f});var r=e(
/*! ./getElement */
"./store/modules/segmentationModule/getElement.js"),d=e(
/*! ../../../stateManagement/toolState.js */
"./stateManagement/toolState.js"),l=e(
/*! ./state */
"./store/modules/segmentationModule/state.js"),s=e(
/*! ../../../util/logger */
"./util/logger.js"),g=Object(s.getLogger)("store:modules:segmentationModule:segmentVisibility");function i(m,o,n){if(o){var a=Object(r.default)(m);if(a){var u=Object(d.getToolState)(a,"stack"),h=l.default.series[u.data[0].imageIds[0]];return h?h.labelmaps3D[n=void 0===n?h.activeLabelmapIndex:n]?!h.labelmaps3D[n].segmentsHidden[o]:void g.warn("No labelmap3D of labelmap index ".concat(n," on stack.")):void g.warn("brushStackState is undefined")}}}function f(m,o,n){if(o){var a=Object(r.default)(m);if(a){var u=Object(d.getToolState)(a,"stack"),h=l.default.series[u.data[0].imageIds[0]];if(!h)return void g.warn("brushStackState is undefined");if(!h.labelmaps3D[n=void 0===n?h.activeLabelmapIndex:n])return void g.warn("No labelmap3D of labelmap index ".concat(n," on stack."));var M=h.labelmaps3D[n].segmentsHidden;return M[o]=!M[o],!M[o]}}}},"./store/modules/segmentationModule/setLabelmap3D.js":
/*!***********************************************************!*\
          !*** ./store/modules/segmentationModule/setLabelmap3D.js ***!
          \***********************************************************/
/*! exports provided: setLabelmap3DByFirstImageId, setLabelmap3DForElement */function(b,t,e){"use strict";e.r(t),e.d(t,"setLabelmap3DByFirstImageId",function(){return a}),e.d(t,"setLabelmap3DForElement",function(){return n});var r=e(
/*! ./getElement */
"./store/modules/segmentationModule/getElement.js"),d=e(
/*! ../../../stateManagement/toolState.js */
"./stateManagement/toolState.js"),l=e(
/*! ./state */
"./store/modules/segmentationModule/state.js"),s=e(
/*! ./getSegmentsOnPixeldata */
"./store/modules/segmentationModule/getSegmentsOnPixeldata.js"),g=e(
/*! ../../../util/segmentation */
"./util/segmentation/index.js"),i=e(
/*! ./arrayTypes */
"./store/modules/segmentationModule/arrayTypes.js"),f=e(
/*! ../../index.js */
"./store/index.js"),m=i.default.UINT_16_ARRAY,o=i.default.FLOAT_32_ARRAY;function n(u,c,v){var h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],E=arguments.length>4?arguments[4]:void 0,M=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,O=Object(r.default)(u);if(O){var P=Object(d.getToolState)(O,"stack");a(P.data[0].imageIds[0],c,v,h,P.data[0].imageIds.length,E,M),Object(g.triggerLabelmapModifiedEvent)(O,v)}}function a(u,c,v){var h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],E=arguments.length>4?arguments[4]:void 0,M=arguments.length>5?arguments[5]:void 0,O=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,T=Object(f.getModule)("segmentation").configuration,D=l.default.series[u];D||(l.default.series[u]={activeLabelmapIndex:v,labelmaps3D:[]},D=l.default.series[u]),D.labelmaps3D[v]={buffer:c,labelmaps2D:[],metadata:h,activeSegmentIndex:1,colorLUTIndex:O,segmentsHidden:[],undo:[],redo:[]};for(var y=D.labelmaps3D[v].labelmaps2D,j=c.byteLength/E,C=0;C<E;C++){var I=void 0;switch(T.arrayType){case m:I=new Uint16Array(c,j*C,j/2);break;case o:I=new Float32Array(c,j*C,j/4);break;default:throw new Error("Unsupported Array Type ".concat(T.arrayType))}var B=M?M[C]:Object(s.default)(I);B&&B.some(function(S){return S})&&(y[C]={pixelData:I,segmentsOnLabelmap:B})}}},"./store/modules/segmentationModule/setRadius.js":
/*!*******************************************************!*\
          !*** ./store/modules/segmentationModule/setRadius.js ***!
          \*******************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return d});var r=e(
/*! ../../index */
"./store/index.js");function d(l){var g=Object(r.getModule)("segmentation").configuration;g.radius=Math.min(Math.max(l,g.minRadius),g.maxRadius)}},"./store/modules/segmentationModule/state.js":
/*!***************************************************!*\
          !*** ./store/modules/segmentationModule/state.js ***!
          \***************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),t.default={series:{},colorLutTables:[]}},"./store/removeTool.js":
/*!*****************************!*\
          !*** ./store/removeTool.js ***!
          \*****************************/
/*! exports provided: removeTool, removeToolForElement */function(b,t,e){"use strict";e.r(t),e.d(t,"removeTool",function(){return l}),e.d(t,"removeToolForElement",function(){return d});var r=e(
/*! ./index.js */
"./store/index.js"),d=function(i,f){var m=r.default.state.tools.findIndex(function(o){return o.element===i&&o.name===f});m>=0&&r.default.state.tools.splice(m,1)},l=function(i){s(i),r.default.state.enabledElements.forEach(function(f){d(f,i)})},s=function(i){Object(r.getModule)("globalConfiguration").configuration.globalToolSyncEnabled&&r.default.state.globalTools[i]&&delete r.default.state.globalTools[i]}},"./store/setToolCursor.js":
/*!********************************!*\
          !*** ./store/setToolCursor.js ***!
          \********************************/
/*! exports provided: setToolCursor, resetToolCursor, hideToolCursor */function(b,t,e){"use strict";e.r(t),e.d(t,"setToolCursor",function(){return l}),e.d(t,"resetToolCursor",function(){return s}),e.d(t,"hideToolCursor",function(){return g});var r=e(
/*! ./index.js */
"./store/index.js"),d=r.modules.globalConfiguration;function l(f,m){if(d.configuration.showSVGCursors){var o=m.getIconWithPointerSVG(),n=m.mousePoint,a=window.URL.createObjectURL(o);f.style.cursor="url('".concat(a,"') ").concat(n,", auto"),r.state.svgCursorUrl=a}}function s(f){i(f,"initial")}function g(f){d.configuration.showSVGCursors&&i(f,"none")}function i(f,m){r.state.svgCursorUrl&&window.URL.revokeObjectURL(r.state.svgCursorUrl),r.state.svgCursorUrl=null,f.style.cursor=m}},"./store/setToolMode.js":
/*!******************************!*\
          !*** ./store/setToolMode.js ***!
          \******************************/
/*! exports provided: setToolActive, setToolActiveForElement, setToolDisabled, setToolDisabledForElement, setToolEnabled, setToolEnabledForElement, setToolPassive, setToolPassiveForElement, setToolMode, setToolModeForElement, _getNormalizedOptions, _mergeMouseButtonMask */function(b,t,e){"use strict";e.r(t),e.d(t,"setToolActive",function(){return a}),e.d(t,"setToolActiveForElement",function(){return o}),e.d(t,"setToolDisabled",function(){return c}),e.d(t,"setToolDisabledForElement",function(){return u}),e.d(t,"setToolEnabled",function(){return h}),e.d(t,"setToolEnabledForElement",function(){return v}),e.d(t,"setToolPassive",function(){return M}),e.d(t,"setToolPassiveForElement",function(){return E}),e.d(t,"setToolMode",function(){return P}),e.d(t,"setToolModeForElement",function(){return O}),e.d(t,"_getNormalizedOptions",function(){return K}),e.d(t,"_mergeMouseButtonMask",function(){return H});var r=e(
/*! ./../events.js */
"./events.js"),d=e(
/*! ./../util/triggerEvent.js */
"./util/triggerEvent.js"),l=e(
/*! ./getToolForElement.js */
"./store/getToolForElement.js"),s=e(
/*! ./setToolCursor.js */
"./store/setToolCursor.js"),g=e(
/*! ../util/logger.js */
"./util/logger.js"),i=e(
/*! ./index.js */
"./store/index.js"),f=Object(i.getModule)("globalConfiguration"),m=Object(g.getLogger)("store:setToolMode"),o=function(L,x,_,R){void 0===R&&Array.isArray(_)&&(R=_,_=null);var A=Object(l.default)(L,x);A&&(function T(W,L,x,_){L.supportedInteractionTypes.forEach(function(A){if(void 0===_||_.includes(A)){var p=S[A];p?p(L,W,x):m.warn("Unable to resolve input conflicts for type %s",A)}});var R=i.default.state.tools.filter(function(A){return A.element===W&&"active"===A.mode&&A.supportedInteractionTypes.length>0});R.forEach(function(A){var p=!1;A.supportedInteractionTypes.forEach(function(U){A.options["is".concat(U,"Active")]&&(p=!0)}),p||(m.log("Setting tool %s's to PASSIVE",A.name),E(W,A.name))})}(L,A,_,R),A.supportedInteractionTypes.forEach(function(p){void 0===R||R.includes(p)?_["is".concat(p,"Active")]=!0:_["is".concat(p,"Active")]=!1}),f.configuration.showSVGCursors&&A.supportedInteractionTypes.includes("Mouse")&&function n(W,L,x){("number"==typeof L?[L]:L.mouseButtonMask).includes(1)&&(x.svgCursor?Object(s.setToolCursor)(x.element,x.svgCursor):x.hideDefaultCursor?Object(s.hideToolCursor)(W):Object(s.resetToolCursor)(W))}(L,_,A)),O("active",null,L,x,_)},a=function(L,x,_){I("active",L,x,_),i.default.state.enabledElements.forEach(function(R){o(R,L,x,_)})},u=O.bind(null,"disabled",null),c=P.bind(null,"disabled",null),v=O.bind(null,"enabled",null),h=P.bind(null,"enabled",null),E=O.bind(null,"passive",r.default.TOOL_DEACTIVATED),M=P.bind(null,"passive",r.default.TOOL_DEACTIVATED);function O(W,L,x,_,R){var A=Object(l.default)(x,_);if(A){if(R=K(R),Array.isArray(R.mouseButtonMask)&&0!==R.mouseButtonMask.length&&Array.isArray(A.options.mouseButtonMask)&&(R.mouseButtonMask=H(R.mouseButtonMask,A.options.mouseButtonMask)),A.mode=W,A.mergeOptions(R),A["".concat(W,"Callback")]&&A["".concat(W,"Callback")](x,R),L){var p={options:R,toolName:_,toolType:_,type:L};Object(d.default)(x,L,p)}}else m.warn('Unable to find tool "%s" for enabledElement',_)}function P(W,L,x,_){I(W,x,_),i.default.state.enabledElements.forEach(function(R){O(W,L,R,x,_)})}function C(W,L,x){var _="is".concat(W,"Active"),R=i.default.state.tools.find(function(A){return A.element===x&&"active"===A.mode&&!0===A.options[_]});R&&(m.log("Setting tool %s's %s to false",R.name,_),R.options[_]=!1)}function I(W,L,x,_){if(f.configuration.globalToolSyncEnabled){var R={mode:W,args:[L,x]};_&&R.push(_),i.default.state.globalToolChangeHistory.push(R),i.default.state.globalToolChangeHistory.length>50&&i.default.state.globalToolChangeHistory.shift();var p=i.default.state.globalTools[L];if(!p)return void m.warn("setToolMode call for tool not available globally: ".concat(L));if("active"===W){var U=function B(W,L,x){void 0===x&&Array.isArray(L)&&(x=L,L=null);var _=[],R=i.default.state.globalTools[W];if(R){var A=new R.tool(R.props);A.supportedInteractionTypes.forEach(function(p){if(void 0===x||x.includes(p))if("Mouse"===p){var U=K(L).mouseButtonMask;Array.isArray(U)&&U.length>0?U.forEach(function(F){return _.push("".concat(p,"-").concat(F))}):Array.isArray(U)&&0===U.length&&_.push("".concat(p,"-DELETE"))}else _.push("MultiTouch"===p?"".concat(p,"-").concat(A.configuration.touchPointers):p)})}return _}(L,x,_);Object.keys(i.default.state.globalTools).forEach(function(F){var N=i.default.state.globalTools[F];N.activeBindings=N.activeBindings.filter(function(V){return!U.includes(V)})}),U.some(function(F){return F.includes("Mouse-DELETE")})&&(p.activeBindings=p.activeBindings.filter(function(F){return!F.includes("Mouse")}),U=U.filter(function(F){return!F.includes("Mouse")})),p.activeBindings=p.activeBindings.concat(U)}else p.activeBindings=[]}}var S={Mouse:function D(W,L,x){var _=K(x).mouseButtonMask;if(Array.isArray(_)&&_.length>0){var A=i.default.state.tools.find(function(p){return p.element===L&&"active"===p.mode&&!0===p.options.isMouseActive&&Array.isArray(p.options.mouseButtonMask)&&p.options.mouseButtonMask.some(function(U){return _.includes(U)})});A&&(A.options.mouseButtonMask=A.options.mouseButtonMask.filter(function(p){return!_.includes(p)}),0===A.options.mouseButtonMask.length&&(A.options.isMouseActive=!1))}},MouseWheel:C.bind(void 0,"MouseWheel"),Touch:function y(W,L){var x=i.default.state.tools.find(function(R){return R.element===L&&"active"===R.mode&&!0===R.options.isTouchActive}),_=i.default.state.tools.find(function(R){return R.element===L&&"active"===R.mode&&!0===R.options.isMultiTouchActive&&1===R.configuration.touchPointers});x&&(m.log("Setting tool %s's isTouchActive to false",x.name),x.options.isTouchActive=!1),_&&(m.log("Setting tool %s's isTouchActive to false",_.name),_.options.isMultiTouchActive=!1)},TouchPinch:C.bind(void 0,"TouchPinch"),TouchRotate:C.bind(void 0,"TouchRotate"),DoubleTap:C.bind(void 0,"DoubleTap"),MultiTouch:function j(W,L){var _,x=i.default.state.tools.find(function(R){return R.element===L&&"active"===R.mode&&!0===R.options.isMultiTouchActive&&R.configuration.touchPointers===W.configuration.touchPointers});1===W.configuration.touchPointers&&(_=i.default.state.tools.find(function(R){return R.element===L&&"active"===R.mode&&!0===R.options.isTouchActive})),x&&(m.log("Setting tool %s's isMultiTouchActive to false",x.name),x.options.isMultiTouchActive=!1),_&&(m.log("Setting tool %s's isTouchActive to false",_.name),_.options.isTouchActive=!1)}};function K(W){return Array.isArray(W)?W={mouseButtonMask:W}:W!==Object(W)&&(W={mouseButtonMask:[W]}),W.hasOwnProperty("mouseButtonMask")||(W.mouseButtonMask=[]),Array.isArray(W.mouseButtonMask)||(W.mouseButtonMask=[W.mouseButtonMask]),W.mouseButtonMask=W.mouseButtonMask.filter(function(L){return"number"==typeof L&&0!==L}),W}function H(W,L){return W.concat(L).reduce(function(x,_){return-1===x.indexOf(_)&&x.push(_),x},[])}},"./store/setToolOptions.js":
/*!*********************************!*\
          !*** ./store/setToolOptions.js ***!
          \*********************************/
/*! exports provided: setToolOptions, setToolOptionsForElement */function(b,t,e){"use strict";e.r(t),e.d(t,"setToolOptions",function(){return s}),e.d(t,"setToolOptionsForElement",function(){return l});var r=e(
/*! ./getToolForElement.js */
"./store/getToolForElement.js"),d=e(
/*! ./index.js */
"./store/index.js"),l=function(i,f,m){var o=Object(r.default)(i,f);o&&o.mergeOptions(m)},s=function(i,f){d.state.enabledElements.forEach(function(m){l(m,i,f)})}},"./synchronization/Synchronizer.js":
/*!*****************************************!*\
          !*** ./synchronization/Synchronizer.js ***!
          \*****************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../externalModules.js */
"./externalModules.js"),d=e(
/*! ../util/convertToVector3.js */
"./util/convertToVector3.js"),l=e(
/*! ../toolOptions.js */
"./toolOptions.js");function s(i){return i.filter(function(f,m,o){return o.indexOf(f)===m})}t.default=function g(i,f){var o=this,n=[],a=[],u=!1,c={},v=f;function h(E){var M=E.detail.element;o.remove(M),Object(l.clearToolOptionsByElement)(M)}this.enabled=!0,this.setHandler=function(E){v=E},this.getHandler=function(){return v},this.getDistances=function(){if(n.length&&a.length){var E=r.default.cornerstone;c.distances={},c.imageIds={sourceElements:[],targetElements:[]},n.forEach(function(M){var O=E.getEnabledElement(M);if(O&&O.image){var P=O.image.imageId,T=E.metaData.get("imagePlaneModule",P);if(T&&T.imagePositionPatient){var D=Object(d.default)(T.imagePositionPatient);c.hasOwnProperty(O)||(c.distances[P]={},c.imageIds.sourceElements.push(P),a.forEach(function(y){var j=E.getEnabledElement(y);if(j&&j.image){var C=j.image.imageId;if(c.imageIds.targetElements.push(C),M!==y&&P!==C&&!c.distances[P].hasOwnProperty(C)){var I=E.metaData.get("imagePlaneModule",C);if(I&&I.imagePositionPatient){var B=Object(d.default)(I.imagePositionPatient);c.distances[P][C]=B.clone().sub(D)}}}}),Object.keys(c.distances[P]).length||delete c.distances[P])}}})}},this.fireEvent=function(E,M){!o.enabled||!n.length||!a.length||(u=!0,a.forEach(function(T){var D=a.indexOf(T);if(-1!==D){var y=c.imageIds.targetElements[D],j=n.indexOf(E);if(-1!==j){var I,C=c.imageIds.sourceElements[j];C===y?I=0:void 0!==c.distances[C]&&(I=c.distances[C][y]),v(o,E,T,M,I)}}}),u=!1)},this.onEvent=function(E){!0!==u&&o.fireEvent(E.currentTarget,E.detail)},this.addSource=function(E){-1===n.indexOf(E)&&(n.push(E),i.split(" ").forEach(function(O){E.addEventListener(O,o.onEvent)}),o.getDistances(),o.updateDisableHandlers())},this.addTarget=function(E){-1===a.indexOf(E)&&(a.push(E),o.getDistances(),v(o,E,E,0),o.updateDisableHandlers())},this.add=function(E){o.addSource(E),o.addTarget(E)},this.removeSource=function(E){var M=n.indexOf(E);-1!==M&&(n.splice(M,1),i.split(" ").forEach(function(O){E.removeEventListener(O,o.onEvent)}),o.getDistances(),o.fireEvent(E),o.updateDisableHandlers())},this.removeTarget=function(E){var M=a.indexOf(E);-1!==M&&(a.splice(M,1),o.getDistances(),v(o,E,E,0),o.updateDisableHandlers())},this.remove=function(E){o.removeTarget(E),o.removeSource(E)},this.getSourceElements=function(){return n},this.getTargetElements=function(){return a},this.displayImage=function(E,M,O){u=!0,r.default.cornerstone.displayImage(E,M,O),u=!1},this.setViewport=function(E,M){u=!0,r.default.cornerstone.setViewport(E,M),u=!1},this.updateDisableHandlers=function(){s(n.concat(a)).forEach(function(M){M.removeEventListener(r.default.cornerstone.EVENTS.ELEMENT_DISABLED,h),M.addEventListener(r.default.cornerstone.EVENTS.ELEMENT_DISABLED,h)})},this.destroy=function(){s(n.concat(a)).forEach(function(M){o.remove(M)})}}},"./synchronization/panZoomSynchronizer.js":
/*!************************************************!*\
          !*** ./synchronization/panZoomSynchronizer.js ***!
          \************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../externalModules.js */
"./externalModules.js");t.default=function(d,l,s){if(s!==l){var g=r.default.cornerstone,i=g.getViewport(l),f=g.getViewport(s);f.scale===i.scale&&f.translation.x===i.translation.x&&f.translation.y===i.translation.y||(f.scale=i.scale,f.translation.x=i.translation.x,f.translation.y=i.translation.y,d.setViewport(s,f))}}},"./synchronization/stackImageIndexSynchronizer.js":
/*!********************************************************!*\
          !*** ./synchronization/stackImageIndexSynchronizer.js ***!
          \********************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../externalModules.js */
"./externalModules.js"),d=e(
/*! ../stateManagement/toolState.js */
"./stateManagement/toolState.js"),l=e(
/*! ../stateManagement/loadHandlerManager.js */
"./stateManagement/loadHandlerManager.js"),s=e(
/*! ../util/clip.js */
"./util/clip.js");t.default=function(g,i,f){if(f!==i){var m=r.default.cornerstone,n=Object(d.getToolState)(i,"stack").data[0],u=Object(d.getToolState)(f,"stack").data[0],c=n.currentImageIdIndex;if((c=Object(s.default)(c,0,u.imageIds.length-1))!==u.currentImageIdIndex){var v=l.default.getStartLoadHandler(f),h=l.default.getEndLoadHandler(f),E=l.default.getErrorLoadingHandler(f);v&&v(f),(!0===u.preventCache?m.loadImage(u.imageIds[c]):m.loadAndCacheImage(u.imageIds[c])).then(function(O){var P=m.getViewport(f);u.currentImageIdIndex=c,g.displayImage(f,O,P),h&&h(f,O)},function(O){E&&E(f,u.imageIds[c],O)})}}}},"./synchronization/stackImagePositionOffsetSynchronizer.js":
/*!*****************************************************************!*\
          !*** ./synchronization/stackImagePositionOffsetSynchronizer.js ***!
          \*****************************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../externalModules.js */
"./externalModules.js"),d=e(
/*! ../stateManagement/toolState.js */
"./stateManagement/toolState.js"),l=e(
/*! ../stateManagement/loadHandlerManager.js */
"./stateManagement/loadHandlerManager.js"),s=e(
/*! ../util/convertToVector3.js */
"./util/convertToVector3.js");t.default=function(g,i,f,m,o){if(f!==i){var n=r.default.cornerstone,a=Object(d.getToolState)(i,"stack").data[0],c=n.metaData.get("imagePlaneModule",a.imageIds[a.currentImageIdIndex]);if(void 0!==c&&void 0!==c.imagePositionPatient){var v=Object(s.default)(c.imagePositionPatient),E=Object(d.getToolState)(f,"stack").data[0],M=Number.MAX_VALUE,O=-1;if(o){var P=v.clone().add(o);if(E.imageIds.forEach(function(I,B){var S=n.metaData.get("imagePlaneModule",I);if(void 0!==S&&void 0!==S.imagePositionPatient){var K=Object(s.default)(S.imagePositionPatient),H=P.distanceToSquared(K);H<M&&(M=H,O=B)}}),O!==E.currentImageIdIndex&&-1!==O){var T=l.default.getStartLoadHandler(f),D=l.default.getEndLoadHandler(f),y=l.default.getErrorLoadingHandler(f);E.currentImageIdIndex=O;var j=E.imageIds[O];T&&T(f),(!0===E.preventCache?n.loadImage(j):n.loadAndCacheImage(j)).then(function(I){var B=n.getViewport(f);E.currentImageIdIndex===O&&(g.displayImage(f,I,B),D&&D(f,I))},function(I){y&&y(f,E.imageIds[O],I)})}}}}}},"./synchronization/stackImagePositionSynchronizer.js":
/*!***********************************************************!*\
          !*** ./synchronization/stackImagePositionSynchronizer.js ***!
          \***********************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../externalModules.js */
"./externalModules.js"),d=e(
/*! ../stateManagement/toolState.js */
"./stateManagement/toolState.js"),l=e(
/*! ../stateManagement/loadHandlerManager.js */
"./stateManagement/loadHandlerManager.js"),s=e(
/*! ../util/convertToVector3.js */
"./util/convertToVector3.js");t.default=function(g,i,f){if(f!==i){var m=r.default.cornerstone,o=Object(d.getToolState)(i,"stack").data[0],a=m.metaData.get("imagePlaneModule",o.imageIds[o.currentImageIdIndex]);if(void 0!==a&&void 0!==a.imagePositionPatient){var u=Object(s.default)(a.imagePositionPatient),v=Object(d.getToolState)(f,"stack").data[0],h=Number.MAX_VALUE,E=-1;if(v.imageIds.forEach(function(y,j){var C=m.metaData.get("imagePlaneModule",y);if(void 0!==C&&void 0!==C.imagePositionPatient){var B=Object(s.default)(C.imagePositionPatient).distanceToSquared(u);B<h&&(h=B,E=j)}}),E!==v.currentImageIdIndex){var M=l.default.getStartLoadHandler(f),O=l.default.getEndLoadHandler(f),P=l.default.getErrorLoadingHandler(f);v.currentImageIdIndex=E;var T=v.imageIds[E];M&&M(f),-1!==E&&(!0===v.preventCache?m.loadImage(T):m.loadAndCacheImage(T)).then(function(y){var j=m.getViewport(f);v.currentImageIdIndex===E&&(g.displayImage(f,y,j),O&&O(f,y))},function(y){P&&P(f,v.imageIds[E],y)})}}}}},"./synchronization/stackScrollSynchronizer.js":
/*!****************************************************!*\
          !*** ./synchronization/stackScrollSynchronizer.js ***!
          \****************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../externalModules.js */
"./externalModules.js"),d=e(
/*! ../stateManagement/toolState.js */
"./stateManagement/toolState.js"),l=e(
/*! ../stateManagement/loadHandlerManager.js */
"./stateManagement/loadHandlerManager.js"),s=e(
/*! ../util/clip.js */
"./util/clip.js");t.default=function(g,i,f,m){if(i!==f&&m&&m.direction){var o=r.default.cornerstone,a=Object(d.getToolState)(f,"stack").data[0],u=a.currentImageIdIndex+m.direction;if(u=Object(s.default)(u,0,a.imageIds.length-1),a.currentImageIdIndex!==u){var c=l.default.getStartLoadHandler(f),v=l.default.getEndLoadHandler(f),h=l.default.getErrorLoadingHandler(f);a.currentImageIdIndex=u;var E=a.imageIds[u];c&&c(f),(!0===a.preventCache?o.loadImage(E):o.loadAndCacheImage(E)).then(function(O){var P=o.getViewport(f);a.currentImageIdIndex===u&&(g.displayImage(f,O,P),v&&v(f,O))},function(O){h&&h(f,a.imageIds[u],O)})}}}},"./synchronization/updateImageSynchronizer.js":
/*!****************************************************!*\
          !*** ./synchronization/updateImageSynchronizer.js ***!
          \****************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../externalModules.js */
"./externalModules.js");t.default=function(d,l,s){s!==l&&r.default.cornerstone.updateImage(s)}},"./synchronization/wwwcSynchronizer.js":
/*!*********************************************!*\
          !*** ./synchronization/wwwcSynchronizer.js ***!
          \*********************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../externalModules.js */
"./externalModules.js");t.default=function(d,l,s){if(s!==l){var g=r.default.cornerstone,i=g.getViewport(l),f=g.getViewport(s);f.voi.windowWidth===i.voi.windowWidth&&f.voi.windowCenter===i.voi.windowCenter&&f.invert===i.invert||(f.voi.windowWidth=i.voi.windowWidth,f.voi.windowCenter=i.voi.windowCenter,f.invert=i.invert,d.setViewport(s,f))}}},"./thirdParty/register.js":
/*!********************************!*\
          !*** ./thirdParty/register.js ***!
          \********************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! @babel/runtime/helpers/typeof */
"../node_modules/@babel/runtime/helpers/typeof.js"),d=e.n(r),l=e(
/*! ./registerModule.js */
"./thirdParty/registerModule.js"),s=e(
/*! ./registerMixin.js */
"./thirdParty/registerMixin.js"),g=e(
/*! ./registerItem.js */
"./thirdParty/registerItem.js"),i=e(
/*! ../util/logger.js */
"./util/logger.js"),f=Object(i.getLogger)("thirdParty:register");t.default=function(o,n,a){var u=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(function m(o,n,a){return o?n?"object"===d()(a)||"function"==typeof a||(f.warn("The %s is a %s, it should be an Object or a function.",a,d()(a)),!1):(f.warn("The %s must have a name in order to register.",o),!1):(f.warn("The type must be given in order to register."),!1)}(o,n,a))switch(o){case"module":Object(l.default)(n,a,u);break;case"mixin":Object(s.default)(n,a,u);break;default:Object(g.default)(o,n,a,u)}}},"./thirdParty/registerItem.js":
/*!************************************!*\
          !*** ./thirdParty/registerItem.js ***!
          \************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../lib.js */
"./lib.js"),d=e(
/*! ../util/logger.js */
"./util/logger.js"),l=Object(d.getLogger)("thirdParty:registerType");t.default=function(g,i,f){var m=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o="".concat(g,"/").concat(i),n=function s(g){return void 0!==r.lib[g]}(o);!n||m?(n&&l.warn("Overwriting %s",o),r.lib[o]=f):l.warn("%s is already registered",o)}},"./thirdParty/registerMixin.js":
/*!*************************************!*\
          !*** ./thirdParty/registerMixin.js ***!
          \*************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../lib.js */
"./lib.js"),d=e(
/*! ../mixins/index.js */
"./mixins/index.js"),l=e(
/*! ../util/logger.js */
"./util/logger.js"),s=Object(l.getLogger)("thirdParty:registerMixin");t.default=function(i,f){var m=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=function g(i){return void 0!==d.default[i]}(i);!o||m?(o&&s.warn("Overwriting mixins/%s",i),d.default[i]=f,r.lib["mixins/".concat(i)]=d.default[i]):s.warn("mixins/%s is already registered",i)}},"./thirdParty/registerModule.js":
/*!**************************************!*\
          !*** ./thirdParty/registerModule.js ***!
          \**************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../store/index.js */
"./store/index.js"),d=e(
/*! ../util/logger.js */
"./util/logger.js"),l=Object(d.getLogger)("thirdParty:registerModule");t.default=function(g,i){var f=arguments.length>2&&void 0!==arguments[2]&&arguments[2],m=function s(g){return void 0!==r.modules[g]}(g);!m||f?(m&&l.warn("Overwriting module %s",g),r.modules[g]=i,"function"==typeof r.modules[g].onRegisterCallback&&r.modules[g].onRegisterCallback()):l.warn("A module with the name %s is already registered",g)}},"./thirdParty/registerSome.js":
/*!************************************!*\
          !*** ./thirdParty/registerSome.js ***!
          \************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./register.js */
"./thirdParty/register.js");t.default=function(d){var l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];d.forEach(function(s){var g=s.type,i=s.name,f=s.item;Object(r.default)(g,i,f,l)})}},"./toolOptions.js":
/*!************************!*\
          !*** ./toolOptions.js ***!
          \************************/
/*! exports provided: getToolOptions, setToolOptions, clearToolOptions, clearToolOptionsByToolType, clearToolOptionsByToolName, clearToolOptionsByElement */function(b,t,e){"use strict";e.r(t),e.d(t,"getToolOptions",function(){return d}),e.d(t,"setToolOptions",function(){return l}),e.d(t,"clearToolOptions",function(){return s}),e.d(t,"clearToolOptionsByToolType",function(){return g}),e.d(t,"clearToolOptionsByToolName",function(){return i}),e.d(t,"clearToolOptionsByElement",function(){return f});var r={};function d(m,o){if(!r[m])return{};var a=r[m].find(function(u){return u.element===o});return a?a.options:{}}function l(m,o,n){if(r[m]){var u=r[m].findIndex(function(v){return v.element===o});-1===u?r[m].push({element:o,options:n}):r[m][u].options=Object.assign(r[m][u].options||{},n)}else r[m]=[{element:o,options:n}]}function s(m,o){var n=r[m];n&&(r[m]=n.filter(function(a){return a.element!==o}))}function g(m){return i(m)}function i(m){delete r[m]}function f(m){for(var o in r)r[o]=r[o].filter(function(n){return n.element!==m})}},"./tools/CrosshairsTool.js":
/*!*********************************!*\
          !*** ./tools/CrosshairsTool.js ***!
          \*********************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return D});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=e.n(f),o=e(
/*! @babel/runtime/helpers/assertThisInitialized */
"../node_modules/@babel/runtime/helpers/assertThisInitialized.js"),n=e.n(o),a=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),u=e.n(a),c=e(
/*! ./base/BaseTool.js */
"./tools/base/BaseTool.js"),v=e(
/*! ./../externalModules.js */
"./externalModules.js"),h=e(
/*! ../stateManagement/loadHandlerManager.js */
"./stateManagement/loadHandlerManager.js"),E=e(
/*! ../stateManagement/toolState.js */
"./stateManagement/toolState.js"),M=e(
/*! ../util/pointProjector.js */
"./util/pointProjector.js"),O=e(
/*! ../util/convertToVector3.js */
"./util/convertToVector3.js"),P=e(
/*! ../toolOptions.js */
"./toolOptions.js"),T=e(
/*! ./cursors/index.js */
"./tools/cursors/index.js"),D=function(y){function j(){var C,I=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d()(this,j);var B={name:"Crosshairs",supportedInteractionTypes:["Mouse","Touch"],svgCursor:T.crosshairsCursor};return(C=i()(this,m()(j).call(this,I,B))).preMouseDownCallback=C._chooseLocation.bind(n()(C)),C.mouseDragCallback=C._chooseLocation.bind(n()(C)),C.touchDragCallback=C._chooseLocation.bind(n()(C)),C}return u()(j,y),s()(j,[{key:"_chooseLocation",value:function(I){var B=I.detail,S=B.element;I.stopImmediatePropagation();var K=Object(E.getToolState)(S,this.name);if(K){var H=S,W=v.default.cornerstone.getEnabledElement(H),x=v.default.cornerstone.metaData.get("imagePlaneModule",W.image.imageId);if(x){var _=B.currentPoints.image,R=Object(M.imagePointToPatientPoint)(_,x);K.data[0].synchronizationContext.getSourceElements().forEach(function(U){if(U!==H){var F=Number.MAX_VALUE,N=-1,V=Object(E.getToolState)(U,"stack");if(void 0!==V){var Y=V.data[0];if(Y.imageIds.forEach(function(Q,X){var w=v.default.cornerstone.metaData.get("imagePlaneModule",Q);if(w&&w.imagePositionPatient&&w.rowCosines&&w.columnCosines){var $=Object(O.default)(w.imagePositionPatient),k=Object(O.default)(w.rowCosines),te=Object(O.default)(w.columnCosines).clone().cross(k.clone()),oe=Math.abs(te.clone().dot($)-te.clone().dot(R));oe<F&&(F=oe,N=X)}}),N!==Y.currentImageIdIndex&&-1!==N&&void 0!==Y.imageIds[N]){var J=h.default.getStartLoadHandler(U),ee=h.default.getEndLoadHandler(U),q=h.default.getErrorLoadingHandler(U);J&&J(U),(!0===Y.preventCache?v.default.cornerstone.loadImage(Y.imageIds[N]):v.default.cornerstone.loadAndCacheImage(Y.imageIds[N])).then(function(Q){var X=v.default.cornerstone.getViewport(U);Y.currentImageIdIndex=N,v.default.cornerstone.displayImage(U,Q,X),ee&&ee(U,Q)},function(Q){q&&q(U,Y.imageIds[N],Q)})}}}})}}}},{key:"activeCallback",value:function(I,B){var S=B.mouseButtonMask,K=B.synchronizationContext;Object(P.setToolOptions)(this.name,I,{mouseButtonMask:S}),Object(E.clearToolState)(I,this.name),Object(E.addToolState)(I,this.name,{synchronizationContext:K})}}]),j}(c.default)},"./tools/DoubleTapFitToWindowTool.js":
/*!*******************************************!*\
          !*** ./tools/DoubleTapFitToWindowTool.js ***!
          \*******************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return c});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=e.n(f),o=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),n=e.n(o),a=e(
/*! ../externalModules.js */
"./externalModules.js"),c=function(v){function h(){var E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d()(this,h),i()(this,m()(h).call(this,E,{name:"DoubleTapFitToWindow",supportedInteractionTypes:["DoubleTap"]}))}return n()(h,v),s()(h,[{key:"doubleTapCallback",value:function(M){a.default.cornerstone.fitToWindow(M.detail.element)}}]),h}(e(
/*! ./base/BaseTool.js */
"./tools/base/BaseTool.js").default)},"./tools/DragProbeTool.js":
/*!********************************!*\
          !*** ./tools/DragProbeTool.js ***!
          \********************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return y});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=e.n(f),o=e(
/*! @babel/runtime/helpers/assertThisInitialized */
"../node_modules/@babel/runtime/helpers/assertThisInitialized.js"),n=e.n(o),a=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),u=e.n(a),c=e(
/*! ../externalModules.js */
"./externalModules.js"),v=e(
/*! ./base/BaseTool.js */
"./tools/base/BaseTool.js"),h=e(
/*! ../stateManagement/textStyle.js */
"./stateManagement/textStyle.js"),E=e(
/*! ../stateManagement/toolColors.js */
"./stateManagement/toolColors.js"),M=e(
/*! ../util/getRGBPixels.js */
"./util/getRGBPixels.js"),O=e(
/*! ../util/calculateSUV.js */
"./util/calculateSUV.js"),P=e(
/*! ../drawing/index.js */
"./drawing/index.js"),T=e(
/*! ../drawing/drawTextBox.js */
"./drawing/drawTextBox.js"),D=e(
/*! ./cursors/index.js */
"./tools/cursors/index.js"),y=function(I){function B(){var S,K=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d()(this,B);var H={name:"DragProbe",strategies:{default:j,minimal:C},defaultStrategy:"default",supportedInteractionTypes:["Mouse","Touch"],svgCursor:D.probeCursor};return(S=i()(this,m()(B).call(this,K,H))).touchDragCallback=S._movingEventCallback.bind(n()(S)),S.touchEndCallback=S._endMovingEventCallback.bind(n()(S)),S.mouseDragCallback=S._movingEventCallback.bind(n()(S)),S.mouseUpCallback=S._endMovingEventCallback.bind(n()(S)),S.dragEventData={},S}return u()(B,I),s()(B,[{key:"_movingEventCallback",value:function(K){var H=K.detail,W=H.element;this.dragEventData=H,c.default.cornerstone.updateImage(W)}},{key:"_endMovingEventCallback",value:function(K){var W=K.detail.element;this.dragEventData={},c.default.cornerstone.updateImage(W)}},{key:"renderToolData",value:function(K){this.dragEventData.currentPoints&&K&&K.detail&&Object.keys(this.dragEventData.currentPoints).length&&(K.detail.currentPoints=this.dragEventData.currentPoints,this.applyActiveStrategy(K))}}]),B}(v.default);function j(I){var B=this.configuration,S=c.default.cornerstone,K=I.detail,H=K.element,W=K.image,L=K.currentPoints,x=K.canvasContext,_=Object(P.getNewContext)(x.canvas),R=E.default.getActiveColor(),A=h.default.getFontSize(),p=Math.round(L.image.x),U=Math.round(L.image.y);p<0||U<0||p>=W.columns||U>=W.rows||Object(P.draw)(_,function(F){Object(P.setShadow)(F,B);var V,Y,N="".concat(p,", ").concat(U);if(W.color)V=Object(M.default)(H,p,U,1,1),Y="R: ".concat(V[0]," G: ").concat(V[1]," B: ").concat(V[2]," A: ").concat(V[3]);else{var J=(V=S.getStoredPixels(H,p,U,1,1))[0],ee=J*W.slope+W.intercept,q=Object(O.default)(W,J);Y="SP: ".concat(J," MO: ").concat(parseFloat(ee.toFixed(3))),q&&(Y+=" SUV: ".concat(parseFloat(q.toFixed(3))))}var le={x:L.canvas.x+5,y:L.canvas.y-5};Object(T.default)(F,Y,le.x,le.y+A+5,R),Object(T.default)(F,N,le.x,le.y,R)})}function C(I){var B=this.configuration,S=c.default.cornerstone,K=I.detail,H=K.element,W=K.image,L=K.currentPoints,x=K.canvasContext,_=K.isTouchEvent,R=Object(P.getNewContext)(x.canvas),A=E.default.getActiveColor(),p=L.page.y-h.default.getFontSize()/2;_&&(p=L.page.y-4*h.default.getFontSize());var U=S.pageToPixel(H,L.page.x,p);U.x<0||U.y<0||U.x>=W.columns||U.y>=W.rows||Object(P.draw)(R,function(F){Object(P.setShadow)(F,B);var Y,N=S.metaData.get("generalSeriesModule",W.imageId),V=N&&N.modality,J="";if(W.color)Y=Object(M.default)(H,U.x,U.y,1,1),J="R: ".concat(Y[0]," G: ").concat(Y[1]," B: ").concat(Y[2]);else{var ee=(Y=S.getStoredPixels(H,U.x,U.y,1,1))[0],le=parseFloat((ee*W.slope+W.intercept).toFixed(2));if("CT"===V)J+="HU: ".concat(le);else if("PT"===V){J+=le;var Q=Object(O.default)(W,ee);Q&&(J+=" SUV: ".concat(parseFloat(Q.toFixed(2))))}else J+=le}var X=S.pixelToCanvas(H,U),w={x:12,y:-(h.default.getFontSize()+10)/2},ae=Object(T.textBoxWidth)(F,J,5);_&&(w={x:-ae/2,y:-h.default.getFontSize()-10-12}),Object(P.drawCircle)(F,H,X,6,{color:A},"canvas"),Object(T.default)(F,J,X.x+w.x,X.y+w.y,A)})}},"./tools/EraserTool.js":
/*!*****************************!*\
          !*** ./tools/EraserTool.js ***!
          \*****************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return O});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=e.n(f),o=e(
/*! @babel/runtime/helpers/assertThisInitialized */
"../node_modules/@babel/runtime/helpers/assertThisInitialized.js"),n=e.n(o),a=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),u=e.n(a),c=e(
/*! ../externalModules.js */
"./externalModules.js"),v=e(
/*! ./base/BaseTool.js */
"./tools/base/BaseTool.js"),h=e(
/*! ../stateManagement/toolState.js */
"./stateManagement/toolState.js"),E=e(
/*! ../store/index.js */
"./store/index.js"),M=e(
/*! ./cursors/index.js */
"./tools/cursors/index.js"),O=function(P){function T(){var D,y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d()(this,T);var j={name:"Eraser",supportedInteractionTypes:["Mouse","Touch"],svgCursor:M.eraserCursor};return(D=i()(this,m()(T).call(this,y,j))).preMouseDownCallback=D._deleteAllNearbyTools.bind(n()(D)),D.preTouchStartCallback=D._deleteAllNearbyTools.bind(n()(D)),D}return u()(T,P),s()(T,[{key:"_deleteAllNearbyTools",value:function(y){var j=y.detail.currentPoints.canvas,C=y.detail.element;return E.state.tools.forEach(function(B){var S=Object(h.getToolState)(C,B.name);S&&S.data.forEach(function(K){"function"==typeof B.pointNearTool&&B.pointNearTool(C,K,j)&&(Object(h.removeToolState)(C,B.name,K),c.default.cornerstone.updateImage(C))})}),!0}}]),T}(v.default)},"./tools/FreehandRoiSculptorTool.js":
/*!******************************************!*\
          !*** ./tools/FreehandRoiSculptorTool.js ***!
          \******************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return B});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=e.n(f),o=e(
/*! @babel/runtime/helpers/assertThisInitialized */
"../node_modules/@babel/runtime/helpers/assertThisInitialized.js"),n=e.n(o),a=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),u=e.n(a),c=e(
/*! ../events.js */
"./events.js"),v=e(
/*! ../externalModules.js */
"./externalModules.js"),h=e(
/*! ../stateManagement/toolColors.js */
"./stateManagement/toolColors.js"),E=e(
/*! ../drawing/drawHandles.js */
"./drawing/drawHandles.js"),M=e(
/*! ../store/index.js */
"./store/index.js"),O=e(
/*! ../stateManagement/toolState.js */
"./stateManagement/toolState.js"),P=e(
/*! ../util/clip.js */
"./util/clip.js"),T=e(
/*! ../store/getToolForElement.js */
"./store/getToolForElement.js"),D=e(
/*! ./base/BaseTool.js */
"./tools/base/BaseTool.js"),y=e(
/*! ../store/setToolCursor.js */
"./store/setToolCursor.js"),j=e(
/*! ./cursors/index.js */
"./tools/cursors/index.js"),C=e(
/*! ../util/freehand/index.js */
"./util/freehand/index.js"),I=C.default.FreehandHandleData,B=function(H){function W(){var L,x=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d()(this,W);var _={name:"FreehandRoiSculptor",referencedToolName:"FreehandRoi",supportedInteractionTypes:["Mouse","Touch","DoubleTap"],mixins:["activeOrDisabledBinaryTool"],configuration:{mouseLocation:{handles:{start:{highlight:!0,active:!0}}},minSpacing:1,currentTool:null,dragColor:h.default.getActiveColor(),hoverColor:h.default.getToolColor(),showCursorOnHover:!0,limitRadiusOutsideRegion:!0,hoverCursorFadeAlpha:.5,hoverCursorFadeDistance:1.2},svgCursor:j.freehandRoiSculptorCursor};return(L=i()(this,m()(W).call(this,x,_))).updateOnMouseMove=!0,L.isMultiPartTool=!0,L.referencedToolName=L.initialConfiguration.referencedToolName,L._active=!1,L.activeMouseUpCallback=L.activeMouseUpCallback.bind(n()(L)),L.activeTouchEndCallback=L.activeTouchEndCallback.bind(n()(L)),L.activeMouseDragCallback=L.activeMouseDragCallback.bind(n()(L)),L}return u()(W,H),s()(W,[{key:"renderToolData",value:function(x){var _=x.detail;if(null===this.configuration.currentTool)return!1;var R=_.element,A=this.configuration;if(!Object(O.getToolState)(R,this.referencedToolName).data[A.currentTool])return!1;if(this._active){var F=_.canvasContext.canvas.getContext("2d"),N={color:this.configuration.dragColor,fill:null,handleRadius:this._toolSizeCanvas};Object(E.default)(F,_,this.configuration.mouseLocation.handles,N)}else this.configuration.showCursorOnHover&&!this._recentTouchEnd&&this._renderHoverCursor(x)}},{key:"doubleClickCallback",value:function(x){var _=x.detail;this._selectFreehandTool(_),v.default.cornerstone.updateImage(_.element)}},{key:"doubleTapCallback",value:function(x){var _=x.detail;this._selectFreehandTool(_),v.default.cornerstone.updateImage(_.element)}},{key:"preTouchStartCallback",value:function(x){return this._initialiseSculpting(x),!0}},{key:"preMouseDownCallback",value:function(x){if(this.options.mouseButtonMask.includes(x.detail.buttons))return this._initialiseSculpting(x),!0}},{key:"activeMouseDragCallback",value:function(x){var _=this.configuration;if(this._active){var R=x.detail,A=Object(O.getToolState)(R.element,this.referencedToolName);if(A){var p=A.data[_.currentTool].handles.points;this._getMouseLocation(R),this._sculpt(R,p),v.default.cornerstone.updateImage(R.element)}}}},{key:"activeMouseUpCallback",value:function(x){this._activeEnd(x)}},{key:"activeTouchEndCallback",value:function(x){this._activeEnd(x),this._deselectAllTools(x),this._recentTouchEnd=!0}},{key:"_activeEnd",value:function(x){var _=x.detail,R=_.element,A=this.configuration;this._active=!1,M.state.isMultiPartToolActive=!1,this._getMouseLocation(_),this._invalidateToolData(_),A.mouseUpRender=!0,this._deactivateSculpt(R),v.default.cornerstone.updateImage(_.element),function K(H){H.stopImmediatePropagation(),H.stopPropagation(),H.preventDefault()}(x)}},{key:"_renderHoverCursor",value:function(x){var F,_=x.detail,R=_.element,A=_.canvasContext.canvas.getContext("2d"),U=Object(O.getToolState)(R,this.referencedToolName).data[this.configuration.currentTool];this._recentTouchEnd=!1,this.configuration.mouseUpRender?(F=this.configuration.mouseLocation.handles.start,this.configuration.mouseUpRender=!1):F=M.state.mousePositionImage;var V=Object(T.default)(R,this.referencedToolName).distanceFromPointCanvas(R,U,F);if(this.configuration.mouseLocation.handles.start.x=F.x,this.configuration.mouseLocation.handles.start.y=F.y,this.configuration.limitRadiusOutsideRegion){var Y=V;V=this._limitCursorRadiusCanvas(_,V),Y>this.configuration.hoverCursorFadeDistance*V&&(A.globalAlpha=this.configuration.hoverCursorFadeAlpha)}var J={fill:null,color:this.configuration.hoverColor,handleRadius:V};Object(E.default)(A,_,this.configuration.mouseLocation.handles,J),this.configuration.limitRadiusOutsideRegion&&(A.globalAlpha=1)}},{key:"newImageCallback",value:function(x){this._deselectAllTools(x)}},{key:"enabledCallback",value:function(x){this._deselectAllTools(x)}},{key:"passiveCallback",value:function(x){this._deselectAllTools(x)}},{key:"disabledCallback",value:function(x){this._deselectAllTools(x)}},{key:"_selectFreehandTool",value:function(x){var _=this.configuration,R=x.element,A=this._getClosestFreehandToolOnElement(R,x);void 0!==A&&(_.currentTool=A,Object(y.hideToolCursor)(R))}},{key:"_activateFreehandTool",value:function(x,_){var A=Object(O.getToolState)(x,this.referencedToolName).data;this.configuration.currentTool=_;for(var U=0;U<A.length;U++)A[U].active=U===_}},{key:"_initialiseSculpting",value:function(x){var _=x.detail,R=this.configuration,A=_.element;null===R.currentTool&&(this._selectFreehandTool(_),null===R.currentTool)||(this._active=!0,M.state.isMultiPartToolActive=!0,this._configureToolSize(_),this._getMouseLocation(_),this._activateFreehandTool(A,R.currentTool),this._activateSculpt(A),v.default.cornerstone.updateImage(_.element))}},{key:"_sculpt",value:function(x,_){var R=this.configuration;this._sculptData={element:x.element,image:x.image,mousePoint:x.currentPoints.image,points:_,toolSize:this._toolSizeImage,minSpacing:R.minSpacing,maxSpacing:Math.max(this._toolSizeImage,2*R.minSpacing)};var A=this._pushHandles();void 0!==A.first&&(this._insertNewHandles(A),this._consolidateHandles())}},{key:"_pushHandles",value:function(){for(var x=this._sculptData,_=x.points,R=x.mousePoint,A=x.toolSize,p={},U=0;U<_.length;U++){var F=v.default.cornerstoneMath.point.distance(_[U],R);F>A||(this._pushOneHandle(U,F),void 0===p.first&&(p.first=U),p.last=U)}return p}},{key:"_pushOneHandle",value:function(x,_){var R=this._sculptData,A=R.points,p=R.mousePoint,U=R.toolSize,F=R.image,N=A[x],Y={x:p.x+U*((N.x-p.x)/_),y:p.y+U*((N.y-p.y)/_)};Object(P.clipToBox)(Y,F),N.x=Y.x,N.y=Y.y;var J=this.constructor._getPreviousHandleIndex(x,A.length);A[J].lines.pop(),A[J].lines.push(N)}},{key:"_insertNewHandles",value:function(x){for(var _=this._findNewHandleIndicies(x),R=0,A=0;A<_.length;A++)this._insertHandleRadially(_[A]+1+R),R++}},{key:"_findNewHandleIndicies",value:function(x){for(var _=this._sculptData,R=_.points,A=_.maxSpacing,p=[],U=x.first;U<=x.last;U++)this._checkSpacing(U,R,p,A);var F=this.constructor._getNextHandleIndex(x.last,R.length);if(F!==x.first){this._checkSpacing(F,R,p,A);var N=this.constructor._getPreviousHandleIndex(x.first,R.length);N!==F&&this._checkSpacing(N,R,p,A)}return p}},{key:"_checkSpacing",value:function(x,_,R,A){var p=this.constructor._getNextHandleIndex(x,_.length);v.default.cornerstoneMath.point.distance(_[x],_[p])>A&&R.push(x)}},{key:"_insertHandleRadially",value:function(x){var _=this._sculptData.points,R=x-1,A=this.constructor._getNextHandleIndexBeforeInsert(x,_.length),p=this._getInsertPosition(x,R,A),U=new I(p);_.splice(x,0,U),_[R].lines.pop(),_[R].lines.push(_[x]),C.default.addLine(_,x)}},{key:"_consolidateHandles",value:function(){if(!(this._sculptData.points.length<=3)){var _=this._findCloseHandlePairs();this._mergeCloseHandles(_)}}},{key:"_findCloseHandlePairs",value:function(){for(var x=this._sculptData,_=x.points,R=x.minSpacing,A=[],p=_.length,U=0;U<p;U++){var F=this.constructor._getNextHandleIndex(U,_.length);v.default.cornerstoneMath.point.distance(_[U],_[F])<R&&(A.push([U,F]),0===U&&(p-=1),U++)}return A}},{key:"_mergeCloseHandles",value:function(x){for(var _=0,R=0;R<x.length;R++){var A=this.constructor._getCorrectedPair(x[R],_);this._combineHandles(A),_++}var p=this._findCloseHandlePairs();p.length&&this._mergeCloseHandles(p)}},{key:"_combineHandles",value:function(x){var _=this._sculptData,R=_.points,A=_.image,p={x:(R[x[0]].x+R[x[1]].x)/2,y:(R[x[0]].y+R[x[1]].y)/2};Object(P.clipToBox)(p,A),R[x[0]].x=p.x,R[x[0]].y=p.y;var U=this.constructor._getNextHandleIndex(x[1],R.length);R[x[0]].lines.pop(),R[x[0]].lines.push(R[U]),R.splice(x[1],1)}},{key:"_configureToolSize",value:function(x){var _=x.element,R=this.configuration,A=R.currentTool,p=x.currentPoints.image,F=Object(O.getToolState)(_,this.referencedToolName).data[A],N=Object(T.default)(_,this.referencedToolName),V=N.distanceFromPoint(_,F,p),Y=N.distanceFromPointCanvas(_,F,p);R.limitRadiusOutsideRegion&&(V=this._limitCursorRadiusImage(x,V),Y=this._limitCursorRadiusCanvas(x,Y)),this._toolSizeImage=V,this._toolSizeCanvas=Y}},{key:"_getMouseLocation",value:function(x){var _=this.configuration;_.mouseLocation.handles.start.x=x.currentPoints.image.x,_.mouseLocation.handles.start.y=x.currentPoints.image.y,Object(P.clipToBox)(_.mouseLocation.handles.start,x.image)}},{key:"_activateSculpt",value:function(x){this._deactivateSculpt(x),x.addEventListener(c.default.MOUSE_UP,this.activeMouseUpCallback),x.addEventListener(c.default.MOUSE_CLICK,this.activeMouseUpCallback),x.addEventListener(c.default.MOUSE_DRAG,this.activeMouseDragCallback),x.addEventListener(c.default.TOUCH_END,this.activeTouchEndCallback),x.addEventListener(c.default.TOUCH_TAP,this.activeTouchEndCallback),x.addEventListener(c.default.TOUCH_DRAG,this.activeMouseDragCallback),v.default.cornerstone.updateImage(x)}},{key:"_deactivateSculpt",value:function(x){x.removeEventListener(c.default.MOUSE_UP,this.activeMouseUpCallback),x.removeEventListener(c.default.MOUSE_CLICK,this.activeMouseUpCallback),x.removeEventListener(c.default.MOUSE_DRAG,this.activeMouseDragCallback),x.removeEventListener(c.default.TOUCH_END,this.activeTouchEndCallback),x.removeEventListener(c.default.TOUCH_TAP,this.activeTouchEndCallback),x.removeEventListener(c.default.TOUCH_DRAG,this.activeMouseDragCallback),v.default.cornerstone.updateImage(x)}},{key:"_invalidateToolData",value:function(x){var _=this.configuration,R=x.element;Object(O.getToolState)(R,this.referencedToolName).data[_.currentTool].invalidated=!0}},{key:"_deselectAllTools",value:function(x){var _=this.configuration,R=Object(O.getToolState)(this.element,this.referencedToolName);if(_.currentTool=null,R)for(var A=0;A<R.data.length;A++)R.data[A].active=!1;Object(y.setToolCursor)(this.element,this.svgCursor),v.default.cornerstone.updateImage(this.element)}},{key:"_limitCursorRadiusCanvas",value:function(x,_){return this._limitCursorRadius(x,_,!0)}},{key:"_limitCursorRadiusImage",value:function(x,_){return this._limitCursorRadius(x,_,!1)}},{key:"_limitCursorRadius",value:function(x,_){var R=arguments.length>2&&void 0!==arguments[2]&&arguments[2],A=x.element,p=x.image,U=this.configuration,N=Object(O.getToolState)(A,this.referencedToolName).data[U.currentTool],V=1;if(R){var Y=v.default.cornerstone.pixelToCanvas(A,{x:0,y:0}),J=v.default.cornerstone.pixelToCanvas(A,{x:p.width,y:p.height});V=(J.x-Y.x)*(J.y-Y.y)/(p.width*p.height)}var le=Math.pow(N.area*V/Math.PI,.5);return Math.min(_,le)}},{key:"_getClosestFreehandToolOnElement",value:function(x,_){var R=Object(T.default)(x,this.referencedToolName),A=Object(O.getToolState)(x,this.referencedToolName);if(A){for(var p=A.data,U=_.currentPoints.image,F={distance:1/0,toolIndex:null},N=0;N<p.length;N++){var V=R.distanceFromPoint(x,p[N],U);-1!==V&&V<F.distance&&(F.distance=V,F.toolIndex=N)}return F.toolIndex}}},{key:"_getInsertPosition",value:function(x,_,R){var J,A=this._sculptData,p=A.points,U=A.toolSize,F=A.mousePoint,N=A.image,V={x:(p[_].x+p[R].x)/2,y:(p[_].y+p[R].y)/2},Y=v.default.cornerstoneMath.point.distance(F,V);if(Y<U){var ee={x:(V.x-F.x)/Y,y:(V.y-F.y)/Y};J={x:F.x+U*ee.x,y:F.y+U*ee.y}}else J=V;return Object(P.clipToBox)(J,N),J}},{key:"minSpacing",get:function(){return this.configuration.minSpacing},set:function(x){if("number"!=typeof x)throw new Error("Attempting to set freehandSculpter minSpacing to a value other than a number.");this.configuration.minSpacing=x}},{key:"maxSpacing",get:function(){return this.configuration.maxSpacing},set:function(x){if("number"!=typeof x)throw new Error("Attempting to set freehandSculpter maxSpacing to a value other than a number.");this.configuration.maxSpacing=x}},{key:"showCursorOnHover",get:function(){return this.configuration.showCursorOnHover},set:function(x){if("boolean"!=typeof x)throw new Error("Attempting to set freehandSculpter showCursorOnHover to a value other than a boolean.");this.configuration.showCursorOnHover=x,v.default.cornerstone.updateImage(this.element)}},{key:"limitRadiusOutsideRegion",get:function(){return this.configuration.limitRadiusOutsideRegion},set:function(x){if("boolean"!=typeof x)throw new Error("Attempting to set freehandSculpter limitRadiusOutsideRegion to a value other than a boolean.");this.configuration.limitRadiusOutsideRegion=x,v.default.cornerstone.updateImage(this.element)}},{key:"hoverCursorFadeAlpha",get:function(){return this.configuration.hoverCursorFadeAlpha},set:function(x){if("number"!=typeof x)throw new Error("Attempting to set freehandSculpter hoverCursorFadeAlpha to a value other than a number.");x=Math.max(Math.min(x,1),0),this.configuration.hoverCursorFadeAlpha=x,v.default.cornerstone.updateImage(this.element)}},{key:"hoverCursorFadeDistance",get:function(){return this.configuration.hoverCursorFadeDistance},set:function(x){if("number"!=typeof x)throw new Error("Attempting to set freehandSculpter hoverCursorFadeDistance to a value other than a number.");x=Math.max(x,1),this.configuration.hoverCursorFadeDistance=x,v.default.cornerstone.updateImage(this.element)}}],[{key:"_getCorrectedPair",value:function(x,_){var R=[x[0]-_,x[1]-_];return R[1]<0&&(R[1]=0),R}},{key:"_getNextHandleIndex",value:function(x,_){return x===_-1?0:x+1}},{key:"_getPreviousHandleIndex",value:function(x,_){return 0===x?_-1:x-1}},{key:"_getNextHandleIndexBeforeInsert",value:function(x,_){return x===_?0:x}}]),W}(D.default)},"./tools/MagnifyTool.js":
/*!******************************!*\
          !*** ./tools/MagnifyTool.js ***!
          \******************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return O});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=e.n(f),o=e(
/*! @babel/runtime/helpers/assertThisInitialized */
"../node_modules/@babel/runtime/helpers/assertThisInitialized.js"),n=e.n(o),a=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),u=e.n(a),c=e(
/*! ../externalModules.js */
"./externalModules.js"),v=e(
/*! ../drawing/index.js */
"./drawing/index.js"),h=e(
/*! ./base/BaseTool.js */
"./tools/base/BaseTool.js"),E=e(
/*! ../store/setToolCursor.js */
"./store/setToolCursor.js"),M=e(
/*! ./cursors/index.js */
"./tools/cursors/index.js"),O=function(P){function T(){var D,y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d()(this,T);var j={name:"Magnify",supportedInteractionTypes:["Mouse","Touch"],configuration:{magnifySize:300,magnificationLevel:2},svgCursor:M.magnifyCursor};return(D=i()(this,m()(T).call(this,y,j))).zoomCanvas=void 0,D.zoomElement=void 0,D.activeCallback=D._createMagnificationCanvas.bind(n()(D)),D.enabledCallback=D._createMagnificationCanvas.bind(n()(D)),D.disabledCallback=D._destroyMagnificationCanvas.bind(n()(D)),D.postTouchStartCallback=D._addMagnifyingGlass.bind(n()(D)),D.touchDragCallback=D._updateMagnifyingGlass.bind(n()(D)),D.touchEndCallback=D._removeMagnifyingGlass.bind(n()(D)),D.touchDragEndCallback=D._removeMagnifyingGlass.bind(n()(D)),D.postMouseDownCallback=D._addMagnifyingGlass.bind(n()(D)),D.mouseDragCallback=D._updateMagnifyingGlass.bind(n()(D)),D.mouseUpCallback=D._removeMagnifyingGlass.bind(n()(D)),D.mouseClickCallback=D._removeMagnifyingGlass.bind(n()(D)),D.newImageCallback=D._drawMagnificationTool.bind(n()(D)),D}return u()(T,P),s()(T,[{key:"_addMagnifyingGlass",value:function(y){var j=this;this._removeZoomElement(),this._drawZoomedElement(y),window.requestAnimationFrame(function(){return j._drawMagnificationTool(y)}),Object(E.hideToolCursor)(y.detail.element),y.preventDefault(),y.stopPropagation()}},{key:"_updateMagnifyingGlass",value:function(y){this._drawMagnificationTool(y),y.preventDefault(),y.stopPropagation()}},{key:"_removeMagnifyingGlass",value:function(y){var j=y.detail.element;Object(E.setToolCursor)(this.element,this.svgCursor),j.querySelector(".magnifyTool").style.display="none",this._removeZoomElement()}},{key:"_drawMagnificationTool",value:function(y){var j=y.detail.element,C=j.querySelector(".magnifyTool");if(C||this._createMagnificationCanvas(j),void 0!==this.zoomCanvas){var I=j.querySelector("canvas:not(.magnifyTool)"),B=Object(v.getNewContext)(C),S=c.default.cornerstone.pixelToCanvas(y.detail.element,y.detail.currentPoints.image),K=Math.min(this.configuration.magnifySize,I.width,I.height),H=this.configuration.magnificationLevel;C.width=K,C.height=K,S.x=Math.max(S.x,.5*K/H),S.x=Math.min(S.x,I.width-.5*K/H),S.y=Math.max(S.y,.5*K/H),S.y=Math.min(S.y,I.height-.5*K/H);var W={x:S.x*H-.5*K,y:S.y*H-.5*K};W.x=Math.max(W.x,0),W.y=Math.max(W.y,0),B.drawImage(this.zoomCanvas,W.x,W.y,K,K,0,0,K,K);var x={top:Math.max(S.y-.5*K-(y.detail.isTouchEvent?120:0),0),left:Math.max(S.x-.5*K,0)},_=C.getBoundingClientRect();x.top=Math.min(x.top,I.height-_.height),x.left=Math.min(x.left,I.width-_.width),C.style.top="".concat(x.top,"px"),C.style.left="".concat(x.left,"px"),C.style.display="block"}}},{key:"_drawZoomedElement",value:function(y){var C=y.detail.enabledElement;void 0===C&&(C=c.default.cornerstone.getEnabledElement(y.detail.element));var I=this.configuration.magnificationLevel,B=C.canvas,S=C.image;this.zoomElement||(this.zoomElement=document.createElement("div"),this.zoomElement.width=B.width*I,this.zoomElement.height=B.height*I,c.default.cornerstone.enable(this.zoomElement,C.options));var K=c.default.cornerstone.getEnabledElement(this.zoomElement),H=c.default.cornerstone.getViewport(C.element);this.zoomCanvas=K.canvas,this.zoomCanvas.width=B.width*I,this.zoomCanvas.height=B.height*I,K.viewport=Object.assign({},H),H.scale*=I,c.default.cornerstone.displayImage(this.zoomElement,S),c.default.cornerstone.setViewport(this.zoomElement,H)}},{key:"_removeZoomElement",value:function(){void 0!==this.zoomElement&&(c.default.cornerstone.disable(this.zoomElement),this.zoomElement=void 0,this.zoomCanvas=void 0)}},{key:"_createMagnificationCanvas",value:function(y){if(null===y.querySelector(".magnifyTool")){var j=document.createElement("canvas");j.classList.add("magnifyTool"),j.width=this.configuration.magnifySize,j.height=this.configuration.magnifySize,j.style.position="absolute",j.style.display="none",y.appendChild(j)}}},{key:"_destroyMagnificationCanvas",value:function(y){var j=y.querySelector(".magnifyTool");j&&y.removeChild(j)}}]),T}(h.default)},"./tools/OrientationMarkersTool.js":
/*!*****************************************!*\
          !*** ./tools/OrientationMarkersTool.js ***!
          \*****************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return M});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=e.n(f),o=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),n=e.n(o),a=e(
/*! ../externalModules.js */
"./externalModules.js"),u=e(
/*! ./base/BaseTool.js */
"./tools/base/BaseTool.js"),c=e(
/*! ../orientation/index.js */
"./orientation/index.js"),v=e(
/*! ../drawing/index.js */
"./drawing/index.js"),h=e(
/*! ../stateManagement/toolColors.js */
"./stateManagement/toolColors.js"),E=e(
/*! ../drawing/drawTextBox.js */
"./drawing/drawTextBox.js"),M=function(y){function j(){var C=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d()(this,j),i()(this,m()(j).call(this,C,{name:"OrientationMarkers",configuration:{drawAllMarkers:!0},mixins:["enabledOrDisabledBinaryTool"]}))}return n()(j,y),s()(j,[{key:"enabledCallback",value:function(I){this.forceImageUpdate(I)}},{key:"disabledCallback",value:function(I){this.forceImageUpdate(I)}},{key:"forceImageUpdate",value:function(I){var B=a.default.cornerstone;B.getEnabledElement(I).image&&B.updateImage(I)}},{key:"renderToolData",value:function(I){var B=I.detail,S=Object(v.getNewContext)(B.canvasContext.canvas),K=B.element,H=T(K);if(H){var W=D(K,H),L=h.default.getToolColor(),x={top:Object(E.textBoxWidth)(S,H.top,0),left:Object(E.textBoxWidth)(S,H.left,0),right:Object(E.textBoxWidth)(S,H.right,0),bottom:Object(E.textBoxWidth)(S,H.bottom,0),height:Object(E.textBoxWidth)(S,"M",0)};O(S,H,W,x,L),this.configuration.drawAllMarkers&&P(S,H,W,x,L)}}}]),j}(u.default),O=function(j,C,I,B,S){Object(E.default)(j,C.top,I.top.x-B.top/2,I.top.y,S),Object(E.default)(j,C.left,I.left.x-B.left/2,I.left.y,S)},P=function(j,C,I,B,S){Object(E.default)(j,C.right,I.right.x-B.right,I.right.y,S),Object(E.default)(j,C.bottom,I.bottom.x-B.bottom/2,I.bottom.y-B.height,S)},T=function(j){var C=a.default.cornerstone,I=C.getEnabledElement(j),B=C.metaData.get("imagePlaneModule",I.image.imageId);if(B&&B.rowCosines&&B.columnCosines){var S=c.default.getOrientationString(B.rowCosines),K=c.default.getOrientationString(B.columnCosines),H=c.default.invertOrientationString(S);return{top:c.default.invertOrientationString(K),bottom:K,left:H,right:S}}},D=function(j){var C=a.default.cornerstone.getEnabledElement(j);return{top:a.default.cornerstone.pixelToCanvas(j,{x:C.image.width/2,y:5}),bottom:a.default.cornerstone.pixelToCanvas(j,{x:C.image.width/2,y:C.image.height-15}),left:a.default.cornerstone.pixelToCanvas(j,{x:5,y:C.image.height/2}),right:a.default.cornerstone.pixelToCanvas(j,{x:C.image.width-10,y:C.image.height/2})}}},"./tools/OverlayTool.js":
/*!******************************!*\
          !*** ./tools/OverlayTool.js ***!
          \******************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return h});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=e.n(f),o=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),n=e.n(o),a=e(
/*! ../store/index */
"./store/index.js"),u=e(
/*! ../externalModules.js */
"./externalModules.js"),c=e(
/*! ./base/BaseTool.js */
"./tools/base/BaseTool.js"),v=a.modules.globalConfiguration,h=function(E){function M(){var O,P=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d()(this,M);var D=Object.assign({name:"Overlay",configuration:{},mixins:["enabledOrDisabledBinaryTool"]},P);return(O=i()(this,m()(M).call(this,D))).initialConfiguration=D,O}return n()(M,E),s()(M,[{key:"enabledCallback",value:function(P){this.forceImageUpdate(P)}},{key:"disabledCallback",value:function(P){this.forceImageUpdate(P)}},{key:"forceImageUpdate",value:function(P){u.default.cornerstone.getEnabledElement(P).image&&u.default.cornerstone.updateImage(P)}},{key:"setupRender",value:function(P){if(P){var T=u.default.cornerstone.metaData.get("overlayPlaneModule",P.imageId);if(T&&T.overlays&&T.overlays.length)return T}}},{key:"setupViewport",value:function(P){if(void 0===P.overlayColor&&(P.overlayColor=v.configuration.overlayColor||"white"),!1!==P.overlayColor)return!0}},{key:"renderToolData",value:function(P){var T=P.detail,D=T.enabledElement,y=T.image,j=T.viewport,C=T.canvasContext,I=this.setupRender(y);if(T&&D&&I&&this.setupViewport(j)){var B=y.columns,S=y.rows;I.overlays.forEach(function(K){if(!1!==K.visible){var H=document.createElement("canvas");H.width=B,H.height=S;var W=H.getContext("2d");W.fillStyle=K.fillStyle||j.overlayColor,"R"===K.type&&(W.fillRect(0,0,H.width,H.height),W.globalCompositeOperation="xor");for(var L=0,x=0;x<K.rows;x++)for(var _=0;_<K.columns;_++)K.pixelData[L++]>0&&W.fillRect(_,x,1,1);var R=!isNaN(parseFloat(K.x))&&isFinite(K.x)?K.x:0,A=!isNaN(parseFloat(K.y))&&isFinite(K.y)?K.y:0;C.drawImage(H,R,A)}})}}}]),M}(c.default)},"./tools/PanMultiTouchTool.js":
/*!************************************!*\
          !*** ./tools/PanMultiTouchTool.js ***!
          \************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return h});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=e.n(f),o=e(
/*! @babel/runtime/helpers/assertThisInitialized */
"../node_modules/@babel/runtime/helpers/assertThisInitialized.js"),n=e.n(o),a=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),u=e.n(a),c=e(
/*! ../externalModules.js */
"./externalModules.js"),h=function(E){function M(){var O,P=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d()(this,M),(O=i()(this,m()(M).call(this,P,{name:"PanMultiTouch",supportedInteractionTypes:["MultiTouch"],configuration:{touchPointers:2}}))).multiTouchDragCallback=O._dragCallback.bind(n()(O)),O}return u()(M,E),s()(M,[{key:"_dragCallback",value:function(P){var T=P.detail,D=T.element,y=T.viewport;if(T.numPointers===this.configuration.touchPointers){var j=this._getTranslation(T);this._applyTranslation(y,j),c.default.cornerstone.setViewport(D,y)}}},{key:"_getTranslation",value:function(P){var T=P.viewport,D=P.image,y=P.deltaPoints,j=T.scale,C=T.scale;return D.rowPixelSpacing<D.columnPixelSpacing?j*=D.columnPixelSpacing/D.rowPixelSpacing:D.columnPixelSpacing<D.rowPixelSpacing&&(C*=D.rowPixelSpacing/D.columnPixelSpacing),{x:y.page.x/j,y:y.page.y/C}}},{key:"_applyTranslation",value:function(P,T){P.translation.x+=T.x,P.translation.y+=T.y}}]),M}(e(
/*! ./base/BaseTool.js */
"./tools/base/BaseTool.js").default)},"./tools/PanTool.js":
/*!**************************!*\
          !*** ./tools/PanTool.js ***!
          \**************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return E});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=e.n(f),o=e(
/*! @babel/runtime/helpers/assertThisInitialized */
"../node_modules/@babel/runtime/helpers/assertThisInitialized.js"),n=e.n(o),a=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),u=e.n(a),c=e(
/*! ./../externalModules.js */
"./externalModules.js"),v=e(
/*! ./base/BaseTool.js */
"./tools/base/BaseTool.js"),h=e(
/*! ./cursors/index.js */
"./tools/cursors/index.js"),E=function(M){function O(){var P,T=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d()(this,O);var D={name:"Pan",supportedInteractionTypes:["Mouse","Touch"],svgCursor:h.panCursor};return(P=i()(this,m()(O).call(this,T,D))).touchDragCallback=P._dragCallback.bind(n()(P)),P.mouseDragCallback=P._dragCallback.bind(n()(P)),P}return u()(O,M),s()(O,[{key:"_dragCallback",value:function(T){var D=T.detail,y=D.element,j=D.viewport,C=this._getTranslation(D);this._applyTranslation(j,C),c.default.cornerstone.setViewport(y,j)}},{key:"_getTranslation",value:function(T){var D=T.viewport,y=T.image,j=T.deltaPoints,C=D.scale,I=D.scale;return y.rowPixelSpacing<y.columnPixelSpacing?C*=y.columnPixelSpacing/y.rowPixelSpacing:y.columnPixelSpacing<y.rowPixelSpacing&&(I*=y.rowPixelSpacing/y.columnPixelSpacing),{x:j.page.x/C,y:j.page.y/I}}},{key:"_applyTranslation",value:function(T,D){T.translation.x+=D.x,T.translation.y+=D.y}}]),O}(v.default)},"./tools/ReferenceLinesTool.js":
/*!*************************************!*\
          !*** ./tools/ReferenceLinesTool.js ***!
          \*************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return y});var r=e(
/*! @babel/runtime/regenerator */
"../node_modules/@babel/runtime/regenerator/index.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/asyncToGenerator */
"../node_modules/@babel/runtime/helpers/asyncToGenerator.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),m=e.n(f),o=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),n=e.n(o),a=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),u=e.n(a),c=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),v=e.n(c),h=e(
/*! ./../externalModules.js */
"./externalModules.js"),E=e(
/*! ./base/BaseTool.js */
"./tools/base/BaseTool.js"),M=e(
/*! ../drawing/index.js */
"./drawing/index.js"),O=e(
/*! ./referenceLines/renderActiveReferenceLine.js */
"./tools/referenceLines/renderActiveReferenceLine.js"),P=e(
/*! ../util/wait.js */
"./util/wait.js"),T=e(
/*! ../util/logger.js */
"./util/logger.js"),D=Object(T.getLogger)("tools:ReferenceLinesTool"),y=function(j){function C(){var I,B=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i()(this,C);var S={name:"ReferenceLines",mixins:["enabledOrDisabledBinaryTool"],configuration:{renderer:O.default}};return(I=n()(this,u()(C).call(this,B,S))).renderer=null,I.synchronizationContext=null,I}return v()(C,j),m()(C,[{key:"enabledCallback",value:(I=s()(d.a.mark(function S(K){var W,L,_=arguments;return d.a.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return W=(_.length>1&&void 0!==_[1]?_[1]:{}).synchronizationContext,L=this.configuration.renderer,A.next=4,Object(P.waitForEnabledElementImageToLoad)(K);case 4:if(A.sent&&L&&W){A.next=8;break}return D.warn("Unable to enable ".concat(this.name,". Exiting enable callback. Tool will be enabled, but will not render.")),A.abrupt("return");case 8:this.renderer=L,this.synchronizationContext=W,this.forceImageUpdate(K);case 11:case"end":return A.stop()}},S,this)})),function B(S){return I.apply(this,arguments)})},{key:"disabledCallback",value:function(B){this.forceImageUpdate(B)}},{key:"forceImageUpdate",value:function(B){h.default.cornerstone.getEnabledElement(B).image&&h.default.cornerstone.updateImage(B)}},{key:"renderToolData",value:function(B){var S=this,K=B.detail;if(this.renderer&&this.synchronizationContext){var H=this.synchronizationContext.getSourceElements(),W=Object(M.getNewContext)(K.canvasContext.canvas);h.default.cornerstone.setToPixelCoordinateSystem(K.enabledElement,W),H.forEach(function(L){L!==B.currentTarget&&S.renderer(W,K,B.currentTarget,L)})}}}]),C;var I}(E.default)},"./tools/RotateTool.js":
/*!*****************************!*\
          !*** ./tools/RotateTool.js ***!
          \*****************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return h});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=e.n(f),o=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),n=e.n(o),a=e(
/*! ./../externalModules.js */
"./externalModules.js"),u=e(
/*! ./base/BaseTool.js */
"./tools/base/BaseTool.js"),c=e(
/*! ../util/angleBetweenPoints.js */
"./util/angleBetweenPoints.js"),v=e(
/*! ./cursors/index.js */
"./tools/cursors/index.js"),h=function(P){function T(){var D=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d()(this,T);var y={name:"Rotate",strategies:{default:E,horizontal:M,vertical:O},defaultStrategy:"default",supportedInteractionTypes:["Mouse","Touch"],configuration:{roundAngles:!1,flipHorizontal:!1,flipVertical:!1,rotateScale:1},svgCursor:v.rotateCursor};return i()(this,m()(T).call(this,D,y))}return n()(T,P),s()(T,[{key:"touchDragCallback",value:function(y){this.dragCallback(y)}},{key:"mouseDragCallback",value:function(y){this.dragCallback(y)}},{key:"postMouseDownCallback",value:function(y){this.initialRotation=y.detail.viewport.rotation}},{key:"dragCallback",value:function(y){y.detail.viewport.initialRotation=this.initialRotation,this.applyActiveStrategy(y),a.default.cornerstone.setViewport(y.detail.element,y.detail.viewport)}}]),T}(u.default);function E(P){var T=this.configuration,D=T.roundAngles,y=T.rotateScale,j=P.detail,C=j.element,I=j.viewport,B=j.startPoints,S=j.currentPoints,K=I.initialRotation?I.initialRotation:I.rotation,H=C.getBoundingClientRect(C),x=I.scale,_=I.translation,R={x:H.left+C.clientWidth/2+_.x*x,y:H.top+C.clientHeight/2+_.y*x},A=Object(c.default)(R,B.client,S.client);A.angle*=y,D&&(A.angle=Math.ceil(A.angle)),A.direction<0&&(A.angle=-A.angle),I.rotation=K+A.angle}function M(P){var T=this.configuration,y=T.flipHorizontal,C=P.detail,I=C.viewport,K=I.initialRotation,L=(C.currentPoints.client.x-C.startPoints.client.x)*T.rotateScale;T.roundAngles&&(L=Math.round(Math.abs(L))*(L>0?1:-1)),y&&(L=-L),I.rotation=K+L}function O(P){var T=this.configuration,y=T.flipVertical,C=P.detail,I=C.viewport,K=I.initialRotation,L=(C.currentPoints.client.y-C.startPoints.client.y)*T.rotateScale;T.roundAngles&&(L=Math.round(Math.abs(L))*(L>0?1:-1)),y&&(L=-L),I.rotation=K+L}},"./tools/RotateTouchTool.js":
/*!**********************************!*\
          !*** ./tools/RotateTouchTool.js ***!
          \**********************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return c});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=e.n(f),o=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),n=e.n(o),a=e(
/*! ./../externalModules.js */
"./externalModules.js"),c=function(v){function h(){var E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d()(this,h),i()(this,m()(h).call(this,E,{name:"RotateTouch",supportedInteractionTypes:["TouchRotate"]}))}return n()(h,v),s()(h,[{key:"touchRotateCallback",value:function(M){var O=M.detail,P=O.element,T=O.viewport;T.rotation+=O.rotation,a.default.cornerstone.setViewport(P,T)}}]),h}(e(
/*! ./base/BaseTool.js */
"./tools/base/BaseTool.js").default)},"./tools/ScaleOverlayTool.js":
/*!***********************************!*\
          !*** ./tools/ScaleOverlayTool.js ***!
          \***********************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return O});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=e.n(f),o=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),n=e.n(o),a=e(
/*! ../externalModules.js */
"./externalModules.js"),u=e(
/*! ./base/BaseTool.js */
"./tools/base/BaseTool.js"),c=e(
/*! ../drawing/index.js */
"./drawing/index.js"),v=e(
/*! ../stateManagement/toolStyle.js */
"./stateManagement/toolStyle.js"),h=e(
/*! ../stateManagement/toolColors.js */
"./stateManagement/toolColors.js"),E=e(
/*! ../util/logger.js */
"./util/logger.js"),M=Object(E.getLogger)("tools:ScaleOverlayTool"),O=function(y){function j(){var C=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d()(this,j),i()(this,m()(j).call(this,C,{name:"ScaleOverlay",configuration:{minorTickLength:12.5,majorTickLength:25},mixins:["enabledOrDisabledBinaryTool"]}))}return n()(j,y),s()(j,[{key:"enabledCallback",value:function(I){this.forceImageUpdate(I)}},{key:"disabledCallback",value:function(I){this.forceImageUpdate(I)}},{key:"forceImageUpdate",value:function(I){a.default.cornerstone.getEnabledElement(I).image&&a.default.cornerstone.updateImage(I)}},{key:"renderToolData",value:function(I){var B=I.detail,S=Object(c.getNewContext)(B.canvasContext.canvas),K=B.image,H=B.viewport,W=B.element,L=K.rowPixelSpacing,x=K.columnPixelSpacing,_=a.default.cornerstone.metaData.get("imagePlaneModule",K.imageId);if(_&&(L=_.rowPixelSpacing||_.rowImagePixelSpacing,x=_.columnPixelSpacing||_.colImagePixelSpacing),L&&x){var R={width:S.canvas.width,height:S.canvas.height},A=10/L*H.scale,p=10/x*H.scale,U=P(R,.25,.05),F=P(R,.05,.15);if(R.width&&R.height&&U&&F){var N=h.default.getToolColor(),V=v.default.getToolWidth(),Y=Object.assign({},{hscaleBounds:U,vscaleBounds:F,verticalMinorTick:A,horizontalMinorTick:p,verticalLine:{start:{x:F.bottomRight.x,y:F.topLeft.y},end:{x:F.bottomRight.x,y:F.bottomRight.y}},horizontalLine:{start:{x:U.topLeft.x,y:U.bottomRight.y},end:{x:U.bottomRight.x,y:U.bottomRight.y}},color:N,lineWidth:V},this.configuration);Object(c.draw)(S,function(J){Object(c.setShadow)(J,Y),Object(c.drawLine)(J,W,Y.verticalLine.start,Y.verticalLine.end,{color:Y.color,lineWidth:Y.lineWidth},"canvas"),T(J,W,Y),Object(c.drawLine)(J,W,Y.horizontalLine.start,Y.horizontalLine.end,{color:Y.color,lineWidth:Y.lineWidth},"canvas"),D(J,W,Y)})}}else M.warn("unable to define rowPixelSpacing or colPixelSpacing from data on ".concat(this.name,"'s renderToolData"))}}]),j}(u.default),P=function(j,C,I){var B=C*Math.min(1e3,j.width),S=I*Math.min(1e3,j.height),K={left:B,top:S,width:j.width-2*B,height:j.height-2*S};return{topLeft:{x:K.left,y:K.top},bottomRight:{x:K.left+K.width,y:K.top+K.height}}},T=function(j,C,I){for(var B=0;I.verticalLine.start.y+B*I.verticalMinorTick<=I.vscaleBounds.bottomRight.y;){var S=I.color,K=I.lineWidth,H={x:I.verticalLine.start.x,y:I.verticalLine.start.y+B*I.verticalMinorTick},W={x:0,y:I.verticalLine.start.y+B*I.verticalMinorTick};W.x=B%5==0?I.verticalLine.start.x-I.majorTickLength:I.verticalLine.start.x-I.minorTickLength,Object(c.drawLine)(j,C,H,W,{color:S,lineWidth:K},"canvas"),B++}},D=function(j,C,I){for(var B=0;I.horizontalLine.start.x+B*I.horizontalMinorTick<=I.hscaleBounds.bottomRight.x;){var S=I.color,K=I.lineWidth,H={x:I.horizontalLine.start.x+B*I.horizontalMinorTick,y:I.horizontalLine.start.y},W={x:I.horizontalLine.start.x+B*I.horizontalMinorTick,y:0};W.y=B%5==0?I.horizontalLine.start.y-I.majorTickLength:I.horizontalLine.start.y-I.minorTickLength,Object(c.drawLine)(j,C,H,W,{color:S,lineWidth:K},"canvas"),B++}}},"./tools/StackScrollMouseWheelTool.js":
/*!********************************************!*\
          !*** ./tools/StackScrollMouseWheelTool.js ***!
          \********************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return c});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=e.n(f),o=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),n=e.n(o),a=e(
/*! ./base/BaseTool.js */
"./tools/base/BaseTool.js"),u=e(
/*! ../util/scroll.js */
"./util/scroll.js"),c=function(v){function h(){var E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d()(this,h),i()(this,m()(h).call(this,E,{name:"StackScrollMouseWheel",supportedInteractionTypes:["MouseWheel"],configuration:{loop:!1,allowSkipping:!0,invert:!1}}))}return n()(h,v),s()(h,[{key:"mouseWheelCallback",value:function(M){var O=M.detail,P=O.direction,T=O.element,D=this.configuration,y=D.loop,j=D.allowSkipping,I=D.invert?-P:P;Object(u.default)(T,I,y,j)}}]),h}(a.default)},"./tools/StackScrollMultiTouchTool.js":
/*!********************************************!*\
          !*** ./tools/StackScrollMultiTouchTool.js ***!
          \********************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return M});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=e.n(f),o=e(
/*! @babel/runtime/helpers/assertThisInitialized */
"../node_modules/@babel/runtime/helpers/assertThisInitialized.js"),n=e.n(o),a=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),u=e.n(a),c=e(
/*! ./base/BaseTool.js */
"./tools/base/BaseTool.js"),v=e(
/*! ../util/scroll.js */
"./util/scroll.js"),h=e(
/*! ../stateManagement/toolState.js */
"./stateManagement/toolState.js"),E=e(
/*! ../toolOptions.js */
"./toolOptions.js"),M=function(O){function P(){var T,D=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d()(this,P),(T=i()(this,m()(P).call(this,D,{name:"StackScrollMultiTouch",supportedInteractionTypes:["MultiTouch"],configuration:{loop:!1,allowSkipping:!0,touchPointers:3}}))).multiTouchDragCallback=T._dragCallback.bind(n()(T)),T}return u()(P,O),s()(P,[{key:"_dragCallback",value:function(D){var y=D.detail;if(y.numPointers===this.configuration.touchPointers){var j=y.element,C=y.deltaPoints,I=this.configuration,B=I.loop,S=I.allowSkipping,K=Object(E.getToolOptions)(this.name,j),H=this._getPixelPerImage(j),W=this._getDeltaY(j,C.page.y);if(!H)return;if(Math.abs(W)>=H){var L=Math.round(W/H);Object(v.default)(j,L,B,S),K.deltaY=W%H}else K.deltaY=W;Object(E.setToolOptions)(this.name,j,K)}}},{key:"_getDeltaY",value:function(D,y){return(Object(E.getToolOptions)(this.name,D).deltaY||0)+y}},{key:"_getPixelPerImage",value:function(D){var y=Object(h.getToolState)(D,"stack");if(y&&y.data&&y.data.length)return this.configuration.stackScrollSpeed||Math.max(2,D.offsetHeight/Math.max(y.data[0].imageIds.length,8))}}]),P}(c.default)},"./tools/StackScrollTool.js":
/*!**********************************!*\
          !*** ./tools/StackScrollTool.js ***!
          \**********************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return O});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=e.n(f),o=e(
/*! @babel/runtime/helpers/assertThisInitialized */
"../node_modules/@babel/runtime/helpers/assertThisInitialized.js"),n=e.n(o),a=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),u=e.n(a),c=e(
/*! ./base/BaseTool.js */
"./tools/base/BaseTool.js"),v=e(
/*! ../util/scroll.js */
"./util/scroll.js"),h=e(
/*! ../stateManagement/toolState.js */
"./stateManagement/toolState.js"),E=e(
/*! ../toolOptions.js */
"./toolOptions.js"),M=e(
/*! ./cursors/index.js */
"./tools/cursors/index.js"),O=function(P){function T(){var D,y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d()(this,T);var j={name:"StackScroll",supportedInteractionTypes:["Mouse","Touch"],configuration:{loop:!1,allowSkipping:!0},svgCursor:M.stackScrollCursor};return(D=i()(this,m()(T).call(this,y,j))).mouseDragCallback=D._dragCallback.bind(n()(D)),D.touchDragCallback=D._dragCallback.bind(n()(D)),D}return u()(T,P),s()(T,[{key:"_dragCallback",value:function(y){var j=y.detail,C=j.element,I=j.deltaPoints,B=this.configuration,S=B.loop,K=B.allowSkipping,H=Object(E.getToolOptions)(this.name,C),W=this._getPixelPerImage(C),L=this._getDeltaY(C,I.page.y);if(W){if(Math.abs(L)>=W){var x=Math.round(L/W);Object(v.default)(C,x,S,K),H.deltaY=L%W}else H.deltaY=L;Object(E.setToolOptions)(this.name,C,H)}}},{key:"_getDeltaY",value:function(y,j){return(Object(E.getToolOptions)(this.name,y).deltaY||0)+j}},{key:"_getPixelPerImage",value:function(y){var j=Object(h.getToolState)(y,"stack");if(j&&j.data&&j.data.length)return this.configuration.stackScrollSpeed||Math.max(2,y.offsetHeight/Math.max(j.data[0].imageIds.length,8))}}]),T}(c.default)},"./tools/WwwcRegionTool.js":
/*!*********************************!*\
          !*** ./tools/WwwcRegionTool.js ***!
          \*********************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return T});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=e.n(f),o=e(
/*! @babel/runtime/helpers/assertThisInitialized */
"../node_modules/@babel/runtime/helpers/assertThisInitialized.js"),n=e.n(o),a=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),u=e.n(a),c=e(
/*! ../externalModules.js */
"./externalModules.js"),v=e(
/*! ./base/BaseTool.js */
"./tools/base/BaseTool.js"),h=e(
/*! ../drawing/index.js */
"./drawing/index.js"),E=e(
/*! ../util/clip.js */
"./util/clip.js"),M=e(
/*! ../util/getLuminance.js */
"./util/getLuminance.js"),O=e(
/*! ../stateManagement/toolColors.js */
"./stateManagement/toolColors.js"),P=e(
/*! ./cursors/index.js */
"./tools/cursors/index.js"),T=function(C){function I(){var B,S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d()(this,I);var K={name:"WwwcRegion",supportedInteractionTypes:["Mouse","Touch"],configuration:{minWindowWidth:10},svgCursor:P.wwwcRegionCursor};return(B=i()(this,m()(I).call(this,S,K)))._resetHandles(),B.postTouchStartCallback=B._startOutliningRegion.bind(n()(B)),B.touchDragCallback=B._setHandlesAndUpdate.bind(n()(B)),B.touchEndCallback=B._applyStrategy.bind(n()(B)),B.postMouseDownCallback=B._startOutliningRegion.bind(n()(B)),B.mouseClickCallback=B._startOutliningRegion.bind(n()(B)),B.mouseDragCallback=B._setHandlesAndUpdate.bind(n()(B)),B.mouseMoveCallback=B._setHandlesAndUpdate.bind(n()(B)),B.mouseUpCallback=B._applyStrategy.bind(n()(B)),B}return u()(I,C),s()(I,[{key:"renderToolData",value:function(S){var K=this,H=S.detail,W=H.element,L=O.default.getColorIfActive({active:!0}),x=Object(h.getNewContext)(H.canvasContext.canvas);Object(h.draw)(x,function(_){Object(h.drawRect)(_,W,K.handles.start,K.handles.end,{color:L})})}},{key:"_startOutliningRegion",value:function(S){var H=S.detail.element,W=S.detail.currentPoints.image;return D(this.handles.start)?this.handles.start=W:(this.handles.end=W,this._applyStrategy(S)),c.default.cornerstone.updateImage(H),!0}},{key:"_setHandlesAndUpdate",value:function(S){var K=S.detail.element;this.handles.end=S.detail.currentPoints.image,c.default.cornerstone.updateImage(K)}},{key:"_applyStrategy",value:function(S){D(this.handles.start)||D(this.handles.end)||(S.detail.handles=this.handles,y(S,this.configuration),this._resetHandles())}},{key:"_resetHandles",value:function(){this.handles={start:{},end:{}}}}]),I}(v.default),D=function(I){return 0===Object.keys(I).length&&I.constructor===Object},y=function(I,B){var S=I.detail,K=S.image,H=S.element,W=I.detail.handles,L=W.start,x=W.end,_=Math.min(L.x,x.x),R=Math.min(L.y,x.y),A=Math.abs(L.x-x.x),p=Math.abs(L.y-x.y);_=Object(E.default)(_,0,K.width),R=Object(E.default)(R,0,K.height),A=Math.floor(Math.min(A,Math.abs(K.width-_))),p=Math.floor(Math.min(p,Math.abs(K.height-R)));var U=Object(M.default)(H,_,R,A,p),F=j(U,K.minPixelValue,K.maxPixelValue),N=S.viewport;void 0===B.minWindowWidth&&(B.minWindowWidth=10),N.voi.windowWidth=Math.max(Math.abs(F.max-F.min),B.minWindowWidth),N.voi.windowCenter=F.mean,N.voiLUT=void 0,c.default.cornerstone.setViewport(H,N),c.default.cornerstone.updateImage(H)},j=function(I,B,S){var K=I.length,H=S,W=B,L=0;if(K<2)return{min:H,max:W,mean:(B+S)/2};for(var x=0;x<K;x++){var _=I[x];H=Math.min(H,_),W=Math.max(W,_),L+=_}return{min:H,max:W,mean:L/K}}},"./tools/WwwcTool.js":
/*!***************************!*\
          !*** ./tools/WwwcTool.js ***!
          \***************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return v});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=e.n(f),o=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),n=e.n(o),a=e(
/*! ../externalModules.js */
"./externalModules.js"),u=e(
/*! ./base/BaseTool.js */
"./tools/base/BaseTool.js"),c=e(
/*! ./cursors/index.js */
"./tools/cursors/index.js"),v=function(E){function M(){var O=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d()(this,M);var P={name:"Wwwc",strategies:{basicLevelingStrategy:h},supportedInteractionTypes:["Mouse","Touch"],configuration:{orientation:0},svgCursor:c.wwwcCursor};return i()(this,m()(M).call(this,O,P))}return n()(M,E),s()(M,[{key:"mouseDragCallback",value:function(P){this.applyActiveStrategy(P),a.default.cornerstone.setViewport(P.detail.element,P.detail.viewport)}},{key:"touchDragCallback",value:function(P){P.stopImmediatePropagation(),this.applyActiveStrategy(P),a.default.cornerstone.setViewport(P.detail.element,P.detail.viewport)}}]),M}(u.default);function h(E){var O=E.detail,y=(O.image.maxPixelValue*O.image.slope+O.image.intercept-(O.image.minPixelValue*O.image.slope+O.image.intercept))/1024,j=O.deltaPoints.page.x*y,C=O.deltaPoints.page.y*y;0===this.configuration.orientation?(O.viewport.voi.windowWidth+=j,O.viewport.voi.windowCenter+=C):(O.viewport.voi.windowWidth+=C,O.viewport.voi.windowCenter+=j),O.viewport.voiLUT=void 0}},"./tools/ZoomMouseWheelTool.js":
/*!*************************************!*\
          !*** ./tools/ZoomMouseWheelTool.js ***!
          \*************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return v});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=e.n(f),o=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),n=e.n(o),a=e(
/*! ./../externalModules.js */
"./externalModules.js"),u=e(
/*! ./base/BaseTool.js */
"./tools/base/BaseTool.js"),c=e(
/*! ../util/zoom/index.js */
"./util/zoom/index.js"),v=function(h){function E(){var M=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d()(this,E),i()(this,m()(E).call(this,M,{name:"ZoomMouseWheel",supportedInteractionTypes:["MouseWheel"],configuration:{minScale:.25,maxScale:20,invert:!1}}))}return n()(E,h),s()(E,[{key:"mouseWheelCallback",value:function(O){var P=O.detail,T=P.element,D=P.viewport,y=P.spinY,j=this.configuration,I=j.maxScale,B=j.minScale,S=j.invert?y/4:-y/4,K=Object(c.changeViewportScale)(D,S,{maxScale:I,minScale:B});a.default.cornerstone.setViewport(T,K)}}]),E}(u.default)},"./tools/ZoomTool.js":
/*!***************************!*\
          !*** ./tools/ZoomTool.js ***!
          \***************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return O});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=e.n(f),o=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),n=e.n(o),a=e(
/*! ../externalModules.js */
"./externalModules.js"),u=e(
/*! ./base/BaseTool.js */
"./tools/base/BaseTool.js"),c=e(
/*! ../util/clip.js */
"./util/clip.js"),v=e(
/*! ../util/zoom/index.js */
"./util/zoom/index.js"),h=e(
/*! ./cursors/index.js */
"./tools/cursors/index.js"),E=v.default.correctShift,M=v.default.changeViewportScale,O=function(j){function C(){var I=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d()(this,C);var B={name:"Zoom",strategies:{default:T,translate:D,zoomToCenter:y},defaultStrategy:"default",supportedInteractionTypes:["Mouse","Touch"],configuration:{invert:!1,preventZoomOutsideImage:!1,minScale:.25,maxScale:20},svgCursor:h.zoomCursor};return i()(this,m()(C).call(this,I,B))}return n()(C,j),s()(C,[{key:"touchDragCallback",value:function(B){P.call(this,B)}},{key:"mouseDragCallback",value:function(B){P.call(this,B)}}]),C}(u.default),P=function(C){if(!C.detail.deltaPoints.page.y)return!1;this.applyActiveStrategy(C,this.configuration),a.default.cornerstone.setViewport(C.detail.element,C.detail.viewport)};function T(j){var C=this.configuration,K=j.detail.deltaPoints.page.y,W=j.detail,L=W.element,x=W.viewport,_=[j.detail.startPoints.page.x,j.detail.startPoints.page.y,j.detail.startPoints.image.x,j.detail.startPoints.image.y],R=_[0],A=_[1],p=_[2],U=_[3],F=M(x,C.invert?-K/100:K/100,{maxScale:C.maxScale,minScale:C.minScale});a.default.cornerstone.setViewport(L,F);var N=a.default.cornerstone.pageToPixel(L,R,A),V={x:p-N.x,y:U-N.y};V=E(V,F),x.translation.x-=V.x,x.translation.y-=V.y}function D(j){var C=this.configuration,B=C.preventZoomOutsideImage,H=j.detail.deltaPoints.page.y,W=C.invert?-H/100:H/100,L=j.detail.image,_=[j.detail.startPoints.image.x,j.detail.startPoints.image.y],R=_[0],A=_[1],p=M(j.detail.viewport,W,{maxScale:C.maxScale,minScale:C.minScale}),U={x:0,y:0},V=.01;if(W<0)p.scale<3&&(Math.abs(p.translation.x)<V?p.translation.x=0:U.x=p.translation.x/8,Math.abs(p.translation.y)<V?p.translation.y=0:U.y=p.translation.y/8);else{B&&Object(c.clipToBox)(j.detail.startPoints.image,L);var Y={x:L.width/2-R,y:L.height/2-A};Y=E(Y,p);var J={x:p.translation.x-Y.x,y:p.translation.y-Y.y};Math.abs(J.x)<V?p.translation.x=Y.x:U.x=J.x/8,Math.abs(J.y)<V?p.translation.y=Y.y:U.y=J.y/8}p.translation.x-=U.x,p.translation.y-=U.y}function y(j){var C=this.configuration,K=j.detail.deltaPoints.page.y;M(j.detail.viewport,C.invert?-K/100:K/100,{maxScale:C.maxScale,minScale:C.minScale})}},"./tools/ZoomTouchPinchTool.js":
/*!*************************************!*\
          !*** ./tools/ZoomTouchPinchTool.js ***!
          \*************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return h});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=e.n(f),o=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),n=e.n(o),a=e(
/*! ./../externalModules.js */
"./externalModules.js"),u=e(
/*! ./base/BaseTool.js */
"./tools/base/BaseTool.js"),v=e(
/*! ../util/zoom/index.js */
"./util/zoom/index.js").default.correctShift,h=function(E){function M(){var O=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d()(this,M),i()(this,m()(M).call(this,O,{name:"ZoomTouchPinch",supportedInteractionTypes:["TouchPinch"],configuration:{minScale:.25,maxScale:20}}))}return n()(M,E),s()(M,[{key:"touchPinchCallback",value:function(P){var T=P.detail,D=T.element,y=T.viewport,C=[P.detail.startPoints.page.x,P.detail.startPoints.page.y,P.detail.startPoints.image.x,P.detail.startPoints.image.y],I=C[0],B=C[1],S=C[2],K=C[3],H=this.configuration,W=H.maxScale,L=H.minScale;y.scale+=T.scaleChange*y.scale,W&&y.scale>W?y.scale=W:L&&y.scale<L&&(y.scale=L),a.default.cornerstone.setViewport(D,y);var x=a.default.cornerstone.pageToPixel(D,I,B),_={x:S-x.x,y:K-x.y};_=v(_,y),y.translation.x-=_.x,y.translation.y-=_.y,a.default.cornerstone.setViewport(D,y)}}]),M}(u.default)},"./tools/annotation/AngleTool.js":
/*!***************************************!*\
          !*** ./tools/annotation/AngleTool.js ***!
          \***************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return H});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=e.n(f),o=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),n=e.n(o),a=e(
/*! ./../../externalModules.js */
"./externalModules.js"),u=e(
/*! ../base/BaseAnnotationTool.js */
"./tools/base/BaseAnnotationTool.js"),c=e(
/*! ./../../stateManagement/toolState.js */
"./stateManagement/toolState.js"),v=e(
/*! ./../../stateManagement/toolStyle.js */
"./stateManagement/toolStyle.js"),h=e(
/*! ./../../stateManagement/toolColors.js */
"./stateManagement/toolColors.js"),E=e(
/*! ./../../manipulators/index.js */
"./manipulators/index.js"),M=e(
/*! ./../../drawing/index.js */
"./drawing/index.js"),O=e(
/*! ./../../drawing/drawLinkedTextBox.js */
"./drawing/drawLinkedTextBox.js"),P=e(
/*! ./../../drawing/drawTextBox.js */
"./drawing/drawTextBox.js"),T=e(
/*! ./../../drawing/drawHandles.js */
"./drawing/drawHandles.js"),D=e(
/*! ./../../util/lineSegDistance.js */
"./util/lineSegDistance.js"),y=e(
/*! ./../../util/roundToDecimal.js */
"./util/roundToDecimal.js"),j=e(
/*! ../cursors/index.js */
"./tools/cursors/index.js"),C=e(
/*! ../../util/triggerEvent.js */
"./util/triggerEvent.js"),I=e(
/*! ../../events.js */
"./events.js"),B=e(
/*! ../../util/getPixelSpacing */
"./util/getPixelSpacing.js"),S=e(
/*! ../../util/throttle */
"./util/throttle.js"),K=e(
/*! ../../store/index */
"./store/index.js"),H=function(x){function _(){var R,A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d()(this,_);var p={name:"Angle",supportedInteractionTypes:["Mouse","Touch"],svgCursor:j.angleCursor,configuration:{drawHandles:!0,drawHandlesOnHover:!1,hideHandlesIfMoving:!1,renderDashed:!1}};return(R=i()(this,m()(_).call(this,A,p))).preventNewMeasurement=!1,R.throttledUpdateCachedStats=Object(S.default)(R.updateCachedStats,110),R}return n()(_,x),s()(_,[{key:"createNewMeasurement",value:function(A){return{visible:!0,active:!0,color:void 0,invalidated:!0,handles:{start:{x:A.currentPoints.image.x,y:A.currentPoints.image.y,highlight:!0,active:!1},middle:{x:A.currentPoints.image.x,y:A.currentPoints.image.y,highlight:!0,active:!0},end:{x:A.currentPoints.image.x,y:A.currentPoints.image.y,highlight:!0,active:!1},textBox:{active:!1,hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0}}}}},{key:"pointNearTool",value:function(A,p,U){return!1!==p.visible&&(Object(D.default)(A,p.handles.start,p.handles.middle,U)<25||Object(D.default)(A,p.handles.middle,p.handles.end,U)<25)}},{key:"updateCachedStats",value:function(A,p,U){var F=L(A,U.handles.middle,U.handles.start),N=L(A,U.handles.end,U.handles.middle),V=L(A,U.handles.end,U.handles.start),Y=W(F),J=W(N),ee=W(V),q=Math.acos((Math.pow(Y,2)+Math.pow(J,2)-Math.pow(ee,2))/(2*Y*J));q*=180/Math.PI,U.rAngle=Object(y.default)(q,2),U.invalidated=!1}},{key:"renderToolData",value:function(A){var p=this,U=A.detail,F=U.enabledElement,N=this.configuration,V=N.handleRadius,Y=N.drawHandlesOnHover,J=N.hideHandlesIfMoving,ee=N.renderDashed,q=Object(c.getToolState)(A.currentTarget,this.name),le=Object(K.getModule)("globalConfiguration").configuration.lineDash;if(q)for(var Q=Object(M.getNewContext)(U.canvasContext.canvas),X=U.image,w=U.element,$=Object(B.default)(X),k=$.rowPixelSpacing,ae=$.colPixelSpacing,te=v.default.getToolWidth(),oe=function(he){var re=q.data[he];if(!1===re.visible)return"continue";Object(M.draw)(Q,function(de){Object(M.setShadow)(de,p.configuration);var Me=h.default.getColorIfActive(re),Ee=a.default.cornerstone.pixelToCanvas(U.element,re.handles.start),Oe=a.default.cornerstone.pixelToCanvas(U.element,re.handles.middle),ge={color:Me};ee&&(ge.lineDash=le),Object(M.drawJoinedLines)(de,U.element,re.handles.start,[re.handles.middle,re.handles.end],ge);var Te={color:Me,handleRadius:V,drawHandlesIfActive:Y,hideHandlesIfMoving:J};if(p.configuration.drawHandles&&Object(T.default)(de,U,re.handles,Te),!0===re.invalidated&&(re.rAngle?p.throttledUpdateCachedStats(X,w,re):p.updateCachedStats(X,w,re)),re.rAngle){var Ce,me=function fe(ve,he,re){var de=he&&re?"":" (isotropic)";return ve.rAngle.toString()+String.fromCharCode(parseInt("00B0",16))+de}(re,k,ae);if(!re.handles.textBox.hasMoved){Ce={x:Oe.x,y:Oe.y};var ye=Object(P.textBoxWidth)(de,me,5);Oe.x<Ee.x?Ce.x-=15+ye+10:Ce.x+=15;var Le=a.default.cornerstone.internal.getTransform(F);Le.invert();var _e=Le.transformPoint(Ce.x,Ce.y);re.handles.textBox.x=_e.x,re.handles.textBox.y=_e.y}Object(O.default)(de,U.element,re.handles.textBox,me,re.handles,ue,Me,te,0,!0)}})},se=0;se<q.data.length;se++)oe(se);function ue(ve){return[ve.start,ve.middle,ve.end]}}},{key:"addNewMeasurement",value:function(A,p){var U=this;if(!this.preventNewMeasurement){this.preventNewMeasurement=!0,A.preventDefault(),A.stopPropagation();var F=A.detail,N=this.createNewMeasurement(F),V=A.detail.element;Object(c.addToolState)(V,this.name,N),a.default.cornerstone.updateImage(V),Object(E.moveNewHandle)(F,this.name,N,N.handles.middle,this.options,p,function(Y){if(N.active=!1,!Y)return Object(c.removeToolState)(V,U.name,N),void(U.preventNewMeasurement=!1);N.handles.end.active=!0,a.default.cornerstone.updateImage(V),Object(E.moveNewHandle)(F,U.name,N,N.handles.end,U.options,p,function(J){J?(N.active=!1,a.default.cornerstone.updateImage(V)):Object(c.removeToolState)(V,U.name,N),U.preventNewMeasurement=!1,a.default.cornerstone.updateImage(V);var ee={toolName:U.name,toolType:U.name,element:V,measurementData:N};Object(C.default)(V,I.default.MEASUREMENT_COMPLETED,ee)})})}}}]),_}(u.default);function W(x){return Math.sqrt(Math.pow(x.x,2)+Math.pow(x.y,2))}function L(x,_,R){var A=Object(B.default)(x);return{x:(_.x-R.x)*(A.colPixelSpacing||1),y:(_.y-R.y)*(A.rowPixelSpacing||1)}}},"./tools/annotation/ArrowAnnotateTool.js":
/*!***********************************************!*\
          !*** ./tools/annotation/ArrowAnnotateTool.js ***!
          \***********************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return H});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=e.n(f),o=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),n=e.n(o),a=e(
/*! ./../../externalModules.js */
"./externalModules.js"),u=e(
/*! ../base/BaseAnnotationTool.js */
"./tools/base/BaseAnnotationTool.js"),c=e(
/*! ./../../events.js */
"./events.js"),v=e(
/*! ./../../stateManagement/toolStyle.js */
"./stateManagement/toolStyle.js"),h=e(
/*! ./../../stateManagement/textStyle.js */
"./stateManagement/textStyle.js"),E=e(
/*! ./../../stateManagement/toolColors.js */
"./stateManagement/toolColors.js"),M=e(
/*! ./../../manipulators/index.js */
"./manipulators/index.js"),O=e(
/*! ./../../util/pointInsideBoundingBox.js */
"./util/pointInsideBoundingBox.js"),P=e(
/*! ./../../util/lineSegDistance.js */
"./util/lineSegDistance.js"),T=e(
/*! ./../../util/triggerEvent.js */
"./util/triggerEvent.js"),D=e(
/*! ./../../stateManagement/toolState.js */
"./stateManagement/toolState.js"),y=e(
/*! ./../../drawing/drawLinkedTextBox.js */
"./drawing/drawLinkedTextBox.js"),j=e(
/*! ./../../drawing/index.js */
"./drawing/index.js"),C=e(
/*! ./../../drawing/drawArrow.js */
"./drawing/drawArrow.js"),I=e(
/*! ./../../drawing/drawHandles.js */
"./drawing/drawHandles.js"),B=e(
/*! ./../../drawing/drawTextBox.js */
"./drawing/drawTextBox.js"),S=e(
/*! ../cursors/index.js */
"./tools/cursors/index.js"),K=e(
/*! ../../store/index */
"./store/index.js"),H=function(x){function _(){var R,A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d()(this,_);var p={name:"ArrowAnnotate",supportedInteractionTypes:["Mouse","Touch"],configuration:{getTextCallback:W,changeTextCallback:L,drawHandles:!0,drawHandlesOnHover:!1,hideHandlesIfMoving:!1,arrowFirst:!0,renderDashed:!1,allowEmptyLabel:!1},svgCursor:S.arrowAnnotateCursor};return(R=i()(this,m()(_).call(this,A,p))).preventNewMeasurement=!1,R}return n()(_,x),s()(_,[{key:"createNewMeasurement",value:function(A){return{visible:!0,active:!0,color:void 0,handles:{start:{x:A.detail.currentPoints.image.x,y:A.detail.currentPoints.image.y,highlight:!0,active:!1},end:{x:A.detail.currentPoints.image.x,y:A.detail.currentPoints.image.y,highlight:!0,active:!1},textBox:{active:!1,hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0}}}}},{key:"pointNearTool",value:function(A,p,U){return!1!==p.visible&&Object(P.default)(A,p.handles.start,p.handles.end,U)<25}},{key:"updateCachedStats",value:function(){}},{key:"renderToolData",value:function(A){var p=this,U=A.detail,F=U.element,N=U.enabledElement,V=this.configuration,Y=V.handleRadius,J=V.drawHandlesOnHover,ee=V.hideHandlesIfMoving,q=V.renderDashed,le=Object(D.getToolState)(F,this.name);if(le){var $,Q=A.detail.canvasContext.canvas,X=Object(j.getNewContext)(Q),w=v.default.getToolWidth();q&&($=Object(K.getModule)("globalConfiguration").configuration.lineDash);for(var k=function(fe){var ue=le.data[fe];if(!1===ue.visible)return"continue";Object(j.draw)(X,function(ve){Object(j.setShadow)(ve,p.configuration);var he=E.default.getColorIfActive(ue),re=a.default.cornerstone.pixelToCanvas(F,ue.handles.start),de=a.default.cornerstone.pixelToCanvas(F,ue.handles.end);p.configuration.arrowFirst?Object(C.default)(ve,de,re,he,w,$):Object(C.default)(ve,re,de,he,w,$);var Me={color:he,handleRadius:Y,drawHandlesIfActive:J,hideHandlesIfMoving:ee};p.configuration.drawHandles&&Object(I.default)(ve,A.detail,ue.handles,Me);var Ee=function oe(ie){return ie.text}(ue);if(Ee&&""!==Ee){var ge=Object(B.textBoxWidth)(ve,Ee,5),Te=h.default.getFontSize()+10,me=Math.max(ge,Te)/2+5;if(de.x<re.x&&(me=-me),!ue.handles.textBox.hasMoved){var De;De=p.configuration.arrowFirst?{x:de.x-ge/2+me,y:de.y-Te/2}:{x:re.x-ge/2-me,y:re.y-Te/2};var Ce=a.default.cornerstone.internal.getTransform(N);Ce.invert();var je=Ce.transformPoint(De.x,De.y);ue.handles.textBox.x=je.x,ue.handles.textBox.y=je.y}Object(y.default)(ve,F,ue.handles.textBox,Ee,ue.handles,se,he,w,0,!1)}})},ae=0;ae<le.data.length;ae++)k(ae)}function se(ie){return[ie.start,{x:(ie.start.x+ie.end.x)/2,y:(ie.start.y+ie.end.y)/2},ie.end]}}},{key:"addNewMeasurement",value:function(A,p){var U=this,F=A.detail.element,N=this.createNewMeasurement(A),V=this.configuration.allowEmptyLabel;Object(D.addToolState)(F,this.name,N),a.default.cornerstone.updateImage(F),Object(M.moveNewHandle)(A.detail,this.name,N,N.handles.end,this.options,p,function(Y){Y?void 0===N.text&&U.configuration.getTextCallback(function(J){if(J||V){N.text=J,N.active=!1;var ee={toolName:U.name,toolType:U.name,element:F,measurementData:N};a.default.cornerstone.updateImage(F),Object(T.default)(F,c.default.MEASUREMENT_COMPLETED,ee)}else Object(D.removeToolState)(F,U.name,N)},A.detail):Object(D.removeToolState)(F,U.name,N),a.default.cornerstone.updateImage(F)})}},{key:"doubleClickCallback",value:function(A){return this._updateTextForNearbyAnnotation(A)}},{key:"touchPressCallback",value:function(A){return this._updateTextForNearbyAnnotation(A)}},{key:"_updateTextForNearbyAnnotation",value:function(A){var p=A.detail.element,U=A.detail.currentPoints.canvas,F=Object(D.getToolState)(p,this.name);if(!F)return!1;for(var N=0;N<F.data.length;N++){var V=F.data[N];if(this.pointNearTool(p,V,U)||Object(O.default)(V.handles.textBox,U))return V.active=!0,a.default.cornerstone.updateImage(p),this.configuration.changeTextCallback(V,A.detail,this._doneChangingTextCallback.bind(this,p,V)),A.stopImmediatePropagation(),A.preventDefault(),A.stopPropagation(),!0}}},{key:"_doneChangingTextCallback",value:function(A,p,U,F){!0===F?Object(D.removeToolState)(A,this.name,p):p.text=U,p.active=!1,a.default.cornerstone.updateImage(A),Object(T.default)(A,c.default.MEASUREMENT_MODIFIED,{toolName:this.name,toolType:this.name,element:A,measurementData:p})}}]),_}(u.default);function W(x){x(prompt("Enter your annotation:"))}function L(x,_,R){R(prompt("Change your annotation:"))}},"./tools/annotation/BidirectionalTool.js":
/*!***********************************************!*\
          !*** ./tools/annotation/BidirectionalTool.js ***!
          \***********************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return S});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=e.n(f),o=e(
/*! @babel/runtime/helpers/assertThisInitialized */
"../node_modules/@babel/runtime/helpers/assertThisInitialized.js"),n=e.n(o),a=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),u=e.n(a),c=e(
/*! ../base/BaseAnnotationTool.js */
"./tools/base/BaseAnnotationTool.js"),v=e(
/*! ./bidirectionalTool/createNewMeasurement.js */
"./tools/annotation/bidirectionalTool/createNewMeasurement.js"),h=e(
/*! ./bidirectionalTool/pointNearTool.js */
"./tools/annotation/bidirectionalTool/pointNearTool.js"),E=e(
/*! ./bidirectionalTool/renderToolData.js */
"./tools/annotation/bidirectionalTool/renderToolData.js"),M=e(
/*! ./bidirectionalTool/addNewMeasurement.js */
"./tools/annotation/bidirectionalTool/addNewMeasurement.js"),O=e(
/*! ./bidirectionalTool/mouseMoveCallback.js */
"./tools/annotation/bidirectionalTool/mouseMoveCallback.js"),P=e(
/*! ./bidirectionalTool/handleSelectedCallback.js */
"./tools/annotation/bidirectionalTool/handleSelectedCallback.js"),T=e(
/*! ./bidirectionalTool/handleSelectedMouseCallback.js */
"./tools/annotation/bidirectionalTool/handleSelectedMouseCallback.js"),D=e(
/*! ./bidirectionalTool/handleSelectedTouchCallback.js */
"./tools/annotation/bidirectionalTool/handleSelectedTouchCallback.js"),y=e(
/*! ../cursors/index.js */
"./tools/cursors/index.js"),j=e(
/*! ../../util/throttle */
"./util/throttle.js"),C=e(
/*! ../../util/getPixelSpacing */
"./util/getPixelSpacing.js"),I=e(
/*! ./bidirectionalTool/utils/calculateLongestAndShortestDiameters */
"./tools/annotation/bidirectionalTool/utils/calculateLongestAndShortestDiameters.js"),B=function(H,W,L){return L()},S=function(K){function H(W){var L;d()(this,H);var x={name:"Bidirectional",supportedInteractionTypes:["Mouse","Touch"],configuration:{changeMeasurementLocationCallback:B,getMeasurementLocationCallback:B,textBox:"",shadow:"",drawHandles:!0,drawHandlesOnHover:!0,hideHandlesIfMoving:!1,renderDashed:!1,additionalData:[]},svgCursor:y.bidirectionalCursor};return(L=i()(this,m()(H).call(this,W,x))).throttledUpdateCachedStats=Object(j.default)(L.updateCachedStats,110),L.createNewMeasurement=v.default.bind(n()(L)),L.pointNearTool=h.default.bind(n()(L)),L.renderToolData=E.default.bind(n()(L)),L.addNewMeasurement=M.default.bind(n()(L)),L._moveCallback=O.default.bind(n()(L)),L.handleSelectedCallback=P.default.bind(n()(L)),L.handleSelectedMouseCallback=T.default.bind(n()(L)),L.handleSelectedTouchCallback=D.default.bind(n()(L)),L}return u()(H,K),s()(H,[{key:"updateCachedStats",value:function(L,x,_){if(_.toolName===this.name){var R=Object(C.default)(L),A=Object(I.default)(_,R),U=A.shortestDiameter;_.longestDiameter=A.longestDiameter,_.shortestDiameter=U,_.invalidated=!1}}}]),H}(c.default)},"./tools/annotation/CircleRoiTool.js":
/*!*******************************************!*\
          !*** ./tools/annotation/CircleRoiTool.js ***!
          \*******************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return K});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=e.n(f),o=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),n=e.n(o),a=e(
/*! ./../../externalModules.js */
"./externalModules.js"),u=e(
/*! ../base/BaseAnnotationTool.js */
"./tools/base/BaseAnnotationTool.js"),c=e(
/*! ./../../stateManagement/toolState.js */
"./stateManagement/toolState.js"),v=e(
/*! ./../../stateManagement/toolStyle.js */
"./stateManagement/toolStyle.js"),h=e(
/*! ./../../stateManagement/toolColors.js */
"./stateManagement/toolColors.js"),E=e(
/*! ../../store/index */
"./store/index.js"),M=e(
/*! ./../../drawing/index.js */
"./drawing/index.js"),O=e(
/*! ./../../util/calculateSUV.js */
"./util/calculateSUV.js"),P=e(
/*! ./../../util/ellipse/index.js */
"./util/ellipse/index.js"),T=e(
/*! ../../util/getROITextBoxCoords.js */
"./util/getROITextBoxCoords.js"),D=e(
/*! ./../../util/numbersWithCommas.js */
"./util/numbersWithCommas.js"),y=e(
/*! ./../../util/throttle.js */
"./util/throttle.js"),j=e(
/*! ../../util/logger.js */
"./util/logger.js"),C=e(
/*! ../../util/getPixelSpacing */
"./util/getPixelSpacing.js"),I=e(
/*! ../cursors/index.js */
"./tools/cursors/index.js"),B=e(
/*! ../../util/getCircleCoords */
"./util/getCircleCoords.js"),S=Object(j.getLogger)("tools:annotation:CircleRoiTool"),K=function(A){function p(){var U,F=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d()(this,p);var N={name:"CircleRoi",supportedInteractionTypes:["Mouse","Touch"],svgCursor:I.circleRoiCursor,configuration:{centerPointRadius:0,renderDashed:!1,hideHandlesIfMoving:!1}};return(U=i()(this,m()(p).call(this,F,N))).throttledUpdateCachedStats=Object(y.default)(U.updateCachedStats,110),U}return n()(p,A),s()(p,[{key:"createNewMeasurement",value:function(F){if(F&&F.currentPoints&&F.currentPoints.image)return{visible:!0,active:!0,color:void 0,invalidated:!0,handles:{start:{x:F.currentPoints.image.x,y:F.currentPoints.image.y,highlight:!0,active:!1},end:{x:F.currentPoints.image.x,y:F.currentPoints.image.y,highlight:!0,active:!0},initialRotation:F.viewport.rotation,textBox:{active:!1,hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0}}};S.error("required eventData not supplied to tool ".concat(this.name,"'s createNewMeasurement"))}},{key:"pointNearTool",value:function(F,N,V,Y){var J=N&&N.handles&&N.handles.start&&N.handles.end,ee=a.default.cornerstoneMath.point.distance;if(J||S.warn("invalid parameters supplied to tool ".concat(this.name,"'s pointNearTool")),!J||!1===N.visible)return!1;var q="mouse"===Y?15:25,le=a.default.cornerstone.pixelToCanvas(F,N.handles.start),Q=a.default.cornerstone.pixelToCanvas(F,N.handles.end),X=ee(le,V),w=ee(le,Q);return X>w-q/2&&X<w+q/2}},{key:"updateCachedStats",value:function(F,N,V){var J=(a.default.cornerstone.metaData.get("generalSeriesModule",F.imageId)||{}).modality,ee=Object(C.default)(F),q=function R(A,p,U,F,N){var ee,V=Object(B.default)(U.start,U.end),Y=a.default.cornerstone.getPixels(p,V.left,V.top,V.width,V.height),J=Object(P.calculateEllipseStatistics)(Y,V);"PT"===F&&(ee={mean:Object(O.default)(A,J.mean,!0)||0,stdDev:Object(O.default)(A,J.stdDev,!0)||0});var q=V.width*(N&&N.colPixelSpacing||1)/2,le=2*Math.PI*q;return{area:Math.PI*(V.width*(N&&N.colPixelSpacing||1)/2)*(V.height*(N&&N.rowPixelSpacing||1)/2)||0,radius:q||0,perimeter:le||0,count:J.count||0,mean:J.mean||0,variance:J.variance||0,stdDev:J.stdDev||0,min:J.min||0,max:J.max||0,meanStdDevSUV:ee}}(F,N,V.handles,J,ee);V.cachedStats=q,V.invalidated=!1}},{key:"renderToolData",value:function(F){var N=this,V=Object(c.getToolState)(F.currentTarget,this.name);if(V){var Y=a.default.cornerstoneMath.point.distance,J=F.detail,ee=J.image,q=J.element,le=J.canvasContext,Q=v.default.getToolWidth(),X=this.configuration,w=X.handleRadius,$=X.drawHandlesOnHover,k=X.hideHandlesIfMoving,ae=X.renderDashed,te=X.centerPointRadius,oe=Object(M.getNewContext)(le.canvas),se=Object(C.default)(ee),ie=se.rowPixelSpacing,fe=se.colPixelSpacing,ue=Object(E.getModule)("globalConfiguration").configuration.lineDash,he=(a.default.cornerstone.metaData.get("generalSeriesModule",ee.imageId)||{}).modality,re=ie&&fe;Object(M.draw)(oe,function(de){for(var Me=0;Me<V.data.length;Me++){var Ee=V.data[Me];if(!1!==Ee.visible){var Oe=h.default.getColorIfActive(Ee),ge={color:Oe,handleRadius:w,drawHandlesIfActive:$,hideHandlesIfMoving:k};Object(M.setShadow)(de,N.configuration);var Te=a.default.cornerstone.pixelToCanvas(q,Ee.handles.start),me=a.default.cornerstone.pixelToCanvas(q,Ee.handles.end),De=Y(Te,me),Ce={color:Oe};if(ae&&(Ce.lineDash=ue),Object(M.drawCircle)(de,q,Ee.handles.start,De,Ce,"pixel"),te&&De>3*te&&Object(M.drawCircle)(de,q,Ee.handles.start,te,Ce,"pixel"),Ee.handles&&(Ee.handles.start.drawnIndependently=!0,Ee.handles.end.drawnIndependently=!0),Object(M.drawHandles)(de,J,Ee.handles,ge),!0===Ee.invalidated&&(Ee.cachedStats?N.throttledUpdateCachedStats(ee,q,Ee):N.updateCachedStats(ee,q,Ee)),!Ee.handles.textBox.hasMoved){var je=Object(T.default)(J.viewport,Ee.handles);Object.assign(Ee.handles.textBox,je)}var Le=L(de,ee.color,Ee.cachedStats,he,re,N.configuration);Ee.unit=W(he,N.configuration.showHounsfieldUnits),Object(M.drawLinkedTextBox)(de,q,Ee.handles.textBox,Le,Ee.handles,function(Ae){return H(Ae.start,Ae.end)},Oe,Q,10,!0)}}})}}}]),p}(u.default);function H(A,p){var U=Object(B.default)(A,p),F=U.left,N=U.top,V=U.width,Y=U.height;return[{x:F+V/2,y:N},{x:F,y:N+Y/2},{x:F+V/2,y:N+Y},{x:F+V,y:N+Y/2}]}function W(A,p){return"CT"===A&&!1!==p?"HU":""}function L(A,p){var U=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},F=U.area,N=void 0===F?0:F,V=U.radius,Y=void 0===V?0:V,J=U.perimeter,ee=void 0===J?0:J,q=U.mean,le=void 0===q?0:q,Q=U.stdDev,X=void 0===Q?0:Q,w=U.min,$=void 0===w?0:w,k=U.max,ae=void 0===k?0:k,te=U.meanStdDevSUV,oe=void 0===te?0:te,ie=arguments.length>4?arguments[4]:void 0,fe=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},ue=fe.showMinMax||!1,ve=[],he=[];if(!p){var re=oe&&0!==oe.mean,de=W(arguments.length>3?arguments[3]:void 0,fe.showHounsfieldUnits),Me="Mean: ".concat(Object(D.default)(le.toFixed(2))," ").concat(de),Ee="Std Dev: ".concat(Object(D.default)(X.toFixed(2))," ").concat(de);if(re){for(var ge="".concat(" SUV: ").concat(Object(D.default)(oe.mean.toFixed(2))),Te="".concat(" SUV: ").concat(Object(D.default)(oe.stdDev.toFixed(2))),me=Math.floor(A.measureText("".concat(Ee,"     ")).width);A.measureText(Me).width<me;)Me+=" ";he.push("".concat(Me).concat(ge)),he.push("".concat(Ee,"     ").concat(Te))}else he.push("".concat(Me,"     ").concat(Ee));if(ue){for(var De="Min: ".concat($," ").concat(de),Ce="Max: ".concat(ae," ").concat(de),je=Math.floor(re?A.measureText("".concat(Ee,"     ")).width:A.measureText("".concat(Me,"     ")).width);A.measureText(De).width<je;)De+=" ";he.push("".concat(De).concat(Ce))}}return ve.push(function x(A,p){var U=p?" mm".concat(String.fromCharCode(178)):" px".concat(String.fromCharCode(178));return"Area: ".concat(Object(D.default)(A.toFixed(2))).concat(U)}(N,ie)),Y&&ve.push(_(Y,"Radius",ie)),ee&&ve.push(_(ee,"Perimeter",ie)),he.forEach(function(ye){return ve.push(ye)}),ve}function _(A,p,U){if(!A)return"";var F=U?" mm":" px";return"".concat(p,": ").concat(Object(D.default)(A.toFixed(1))).concat(F)}},"./tools/annotation/CobbAngleTool.js":
/*!*******************************************!*\
          !*** ./tools/annotation/CobbAngleTool.js ***!
          \*******************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return H});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=e.n(f),o=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),n=e.n(o),a=e(
/*! ./../../externalModules.js */
"./externalModules.js"),u=e(
/*! ../base/BaseAnnotationTool.js */
"./tools/base/BaseAnnotationTool.js"),c=e(
/*! ./../../stateManagement/textStyle.js */
"./stateManagement/textStyle.js"),v=e(
/*! ./../../stateManagement/toolState.js */
"./stateManagement/toolState.js"),h=e(
/*! ./../../stateManagement/toolStyle.js */
"./stateManagement/toolStyle.js"),E=e(
/*! ./../../stateManagement/toolColors.js */
"./stateManagement/toolColors.js"),M=e(
/*! ./../../manipulators/index.js */
"./manipulators/index.js"),O=e(
/*! ./../../drawing/index.js */
"./drawing/index.js"),P=e(
/*! ./../../drawing/drawHandles.js */
"./drawing/drawHandles.js"),T=e(
/*! ./../../drawing/drawLinkedTextBox.js */
"./drawing/drawLinkedTextBox.js"),D=e(
/*! ./../../util/lineSegDistance.js */
"./util/lineSegDistance.js"),y=e(
/*! ./../../util/roundToDecimal.js */
"./util/roundToDecimal.js"),j=e(
/*! ./../../events.js */
"./events.js"),C=e(
/*! ../cursors/index.js */
"./tools/cursors/index.js"),I=e(
/*! ../../util/triggerEvent.js */
"./util/triggerEvent.js"),B=e(
/*! ../../util/throttle */
"./util/throttle.js"),S=e(
/*! ../../util/getPixelSpacing */
"./util/getPixelSpacing.js"),K=e(
/*! ../../store/index */
"./store/index.js"),H=function(W){function L(){var x,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d()(this,L);var R={name:"CobbAngle",supportedInteractionTypes:["Mouse","Touch"],svgCursor:C.cobbAngleCursor,configuration:{drawHandles:!0,drawHandlesOnHover:!1,hideHandlesIfMoving:!1,renderDashed:!1}};return(x=i()(this,m()(L).call(this,_,R))).hasIncomplete=!1,x.throttledUpdateCachedStats=Object(B.default)(x.updateCachedStats,110),x}return n()(L,W),s()(L,[{key:"createNewMeasurement",value:function(_){return this.hasIncomplete=!0,{visible:!0,active:!0,color:void 0,invalidated:!0,complete:!1,value:"",handles:{start:{x:_.currentPoints.image.x,y:_.currentPoints.image.y,highlight:!0,active:!1},end:{x:_.currentPoints.image.x,y:_.currentPoints.image.y,highlight:!0,active:!0},start2:{x:_.currentPoints.image.x,y:_.currentPoints.image.y,highlight:!0,active:!1,drawnIndependently:!0},end2:{x:_.currentPoints.image.x+1,y:_.currentPoints.image.y,highlight:!0,active:!1,drawnIndependently:!0},textBox:{active:!1,hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0}}}}},{key:"pointNearTool",value:function(_,R,A){if(!1===R.visible||this.hasIncomplete)return!1;var p=Object(D.default)(_,R.handles.start,R.handles.end,A)<25,U=Object(D.default)(_,R.handles.start2,R.handles.end2,A)<25;return p||U}},{key:"updateCachedStats",value:function(_,R,A){var p=Object(S.default)(_),U=p.rowPixelSpacing,F=p.colPixelSpacing,N=(Math.ceil(A.handles.start.x)-Math.ceil(A.handles.end.x))*(F||1),V=(Math.ceil(A.handles.start.y)-Math.ceil(A.handles.end.y))*(U||1),Y=(Math.ceil(A.handles.start2.x)-Math.ceil(A.handles.end2.x))*(F||1),J=(Math.ceil(A.handles.start2.y)-Math.ceil(A.handles.end2.y))*(U||1),ee=Math.acos(Math.abs((N*Y+V*J)/(Math.sqrt(N*N+V*V)*Math.sqrt(Y*Y+J*J))));ee*=180/Math.PI,A.rAngle=Object(y.default)(ee,2),A.invalidated=!1}},{key:"renderToolData",value:function(_){var R=this,A=_.detail,p=this.configuration,U=p.handleRadius,F=p.drawHandlesOnHover,N=p.hideHandlesIfMoving,V=p.renderDashed,Y=Object(v.getToolState)(_.currentTarget,this.name);if(Y)for(var J=Object(O.getNewContext)(A.canvasContext.canvas),ee=h.default.getToolWidth(),q=Object(K.getModule)("globalConfiguration").configuration.lineDash,le=c.default.getFont(),X=a.default.cornerstone.getEnabledElement(_.detail.element).image,w=Object(S.default)(X),$=w.rowPixelSpacing,k=w.colPixelSpacing,ae=function(fe){var ue=Y.data[fe];if(!1===ue.visible)return"continue";ue.value||(ue.value=R.textBoxText(ue,$,k)),Object(O.draw)(J,function(ve){Object(O.setShadow)(ve,R.configuration);var he=E.default.getColorIfActive(ue),re={color:he};V&&(re.lineDash=q),Object(O.drawLine)(ve,A.element,ue.handles.start,ue.handles.end,re),ue.complete&&Object(O.drawLine)(ve,A.element,ue.handles.start2,ue.handles.end2,re);var de={color:he,handleRadius:U,drawHandlesIfActive:F,hideHandlesIfMoving:N};R.configuration.drawHandles&&Object(P.default)(ve,A,ue.handles,de),ve.fillStyle=he;var Me=ue.value;if(!ue.handles.textBox.hasMoved){var Ee={x:(ue.handles.start.x+ue.handles.end.x)/2,y:(ue.handles.start.y+ue.handles.end.y)/2-10};ve.font=le,ue.handles.textBox.x=Ee.x,ue.handles.textBox.y=Ee.y}Object(T.default)(ve,A.element,ue.handles.textBox,Me,ue.handles,se,he,ee,0,!0)})},te=0;te<Y.data.length;te++)ae(te);function se(ie){return[ie.start,ie.start2,ie.end,ie.end2]}}},{key:"getIncomplete",value:function(_){var R=Object(v.getToolState)(_,this.name);if(R&&Array.isArray(R.data))return R.data.find(function(A){return!1===A.complete})}},{key:"addNewMeasurement",value:function(_,R){var A=this;_.preventDefault(),_.stopPropagation();var U,F,p=_.detail,N=function(ee){if(ee){var q=j.default.MEASUREMENT_COMPLETED,le={toolName:A.name,toolType:A.name,element:V,measurementData:U};Object(I.default)(V,q,le)}else Object(v.removeToolState)(V,A.name,U)},V=_.detail.element,Y=this.getIncomplete(V);Y?((U=Y).complete=!0,U.handles.start2={x:p.currentPoints.image.x,y:p.currentPoints.image.y,drawnIndependently:!1,highlight:!0,active:!1},U.handles.end2={x:p.currentPoints.image.x,y:p.currentPoints.image.y,drawnIndependently:!1,highlight:!0,active:!0},F=U.handles.end2,this.hasIncomplete=!1,N=function(ee){if(ee){var q=j.default.MEASUREMENT_COMPLETED,le={toolName:A.name,toolType:A.name,element:V,measurementData:U};Object(I.default)(V,q,le)}else Object(v.removeToolState)(V,A.name,U)}):(U=this.createNewMeasurement(p),Object(v.addToolState)(V,this.name,U),F=U.handles.end),a.default.cornerstone.updateImage(V),Object(M.moveNewHandle)(p,this.name,U,F,this.options,R,N)}},{key:"onMeasureModified",value:function(_){var R=_.detail.element,A=a.default.cornerstone.getEnabledElement(R).image,p=Object(S.default)(A),U=p.rowPixelSpacing,F=p.colPixelSpacing;if(_.detail.toolName===this.name){var N=_.detail.measurementData;!0===N.invalidated&&(N.rAngle?this.throttledUpdateCachedStats(A,R,N):this.updateCachedStats(A,R,N)),N.value=this.textBoxText(N,U,F)}}},{key:"textBoxText",value:function(_,R,A){var p=_.rAngle;if(void 0===p||Number.isNaN(p))return"";var U=R&&A?"":" (isotropic)";return"".concat(p,"\xb0").concat(U)}},{key:"activeCallback",value:function(_){this.onMeasureModified=this.onMeasureModified.bind(this),_.addEventListener(j.default.MEASUREMENT_MODIFIED,this.onMeasureModified)}},{key:"passiveCallback",value:function(_){this.onMeasureModified=this.onMeasureModified.bind(this),_.addEventListener(j.default.MEASUREMENT_MODIFIED,this.onMeasureModified)}},{key:"enabledCallback",value:function(_){_.removeEventListener(j.default.MEASUREMENT_MODIFIED,this.onMeasureModified)}},{key:"disabledCallback",value:function(_){_.removeEventListener(j.default.MEASUREMENT_MODIFIED,this.onMeasureModified)}}]),L}(u.default)},"./tools/annotation/EllipticalRoiTool.js":
/*!***********************************************!*\
          !*** ./tools/annotation/EllipticalRoiTool.js ***!
          \***********************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return K});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=e.n(f),o=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),n=e.n(o),a=e(
/*! ./../../externalModules.js */
"./externalModules.js"),u=e(
/*! ../base/BaseAnnotationTool.js */
"./tools/base/BaseAnnotationTool.js"),c=e(
/*! ./../../stateManagement/toolState.js */
"./stateManagement/toolState.js"),v=e(
/*! ./../../stateManagement/toolStyle.js */
"./stateManagement/toolStyle.js"),h=e(
/*! ./../../stateManagement/toolColors.js */
"./stateManagement/toolColors.js"),E=e(
/*! ../../manipulators/getHandleNearImagePoint */
"./manipulators/getHandleNearImagePoint.js"),M=e(
/*! ./../../drawing/index.js */
"./drawing/index.js"),O=e(
/*! ./../../util/calculateSUV.js */
"./util/calculateSUV.js"),P=e(
/*! ./../../util/ellipse/index.js */
"./util/ellipse/index.js"),T=e(
/*! ../../util/getROITextBoxCoords.js */
"./util/getROITextBoxCoords.js"),D=e(
/*! ./../../util/numbersWithCommas.js */
"./util/numbersWithCommas.js"),y=e(
/*! ./../../util/throttle.js */
"./util/throttle.js"),j=e(
/*! ../cursors/index.js */
"./tools/cursors/index.js"),C=e(
/*! ../../util/logger.js */
"./util/logger.js"),I=e(
/*! ../../util/getPixelSpacing */
"./util/getPixelSpacing.js"),B=e(
/*! ../../store/index */
"./store/index.js"),S=Object(C.getLogger)("tools:annotation:EllipticalRoiTool"),K=function(A){function p(){var U,F=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d()(this,p);var N={name:"EllipticalRoi",supportedInteractionTypes:["Mouse","Touch"],configuration:{drawHandlesOnHover:!1,hideHandlesIfMoving:!1,renderDashed:!1},svgCursor:j.ellipticalRoiCursor};return(U=i()(this,m()(p).call(this,F,N))).throttledUpdateCachedStats=Object(y.default)(U.updateCachedStats,110),U}return n()(p,A),s()(p,[{key:"createNewMeasurement",value:function(F){if(F&&F.currentPoints&&F.currentPoints.image)return{visible:!0,active:!0,color:void 0,invalidated:!0,handles:{start:{x:F.currentPoints.image.x,y:F.currentPoints.image.y,highlight:!0,active:!1},end:{x:F.currentPoints.image.x,y:F.currentPoints.image.y,highlight:!0,active:!0},initialRotation:F.viewport.rotation,textBox:{active:!1,hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0}}};S.error("required eventData not supplied to tool ".concat(this.name,"'s createNewMeasurement"))}},{key:"pointNearTool",value:function(F,N,V,Y){var ee=N&&N.handles&&N.handles.start&&N.handles.end;if(ee||S.warn("invalid parameters supplied to tool ".concat(this.name,"'s pointNearTool")),!ee||!1===N.visible)return!1;if(Object(E.default)(F,N.handles,V,6))return!0;var le="mouse"===Y?15:25,Q=a.default.cornerstone.pixelToCanvas(F,N.handles.start),X=a.default.cornerstone.pixelToCanvas(F,N.handles.end),w={left:Math.min(Q.x,X.x)+le/2,top:Math.min(Q.y,X.y)+le/2,width:Math.abs(Q.x-X.x)-le,height:Math.abs(Q.y-X.y)-le},$={left:Math.min(Q.x,X.x)-le/2,top:Math.min(Q.y,X.y)-le/2,width:Math.abs(Q.x-X.x)+le,height:Math.abs(Q.y-X.y)+le},k=Object(P.pointInEllipse)(w,V);return!(!Object(P.pointInEllipse)($,V)||k)}},{key:"updateCachedStats",value:function(F,N,V){var J=(a.default.cornerstone.metaData.get("generalSeriesModule",F.imageId)||{}).modality,ee=Object(I.default)(F),q=function _(A,p,U,F,N){var ee,V=R(U.start,U.end),Y=a.default.cornerstone.getPixels(p,V.left,V.top,V.width,V.height),J=Object(P.calculateEllipseStatistics)(Y,V);return"PT"===F&&(ee={mean:Object(O.default)(A,J.mean,!0)||0,stdDev:Object(O.default)(A,J.stdDev,!0)||0}),{area:Math.PI*(V.width*(N.colPixelSpacing||1)/2)*(V.height*(N.rowPixelSpacing||1)/2)||0,count:J.count||0,mean:J.mean||0,variance:J.variance||0,stdDev:J.stdDev||0,min:J.min||0,max:J.max||0,meanStdDevSUV:ee}}(F,N,V.handles,J,ee);V.cachedStats=q,V.invalidated=!1}},{key:"renderToolData",value:function(F){var N=this,V=Object(c.getToolState)(F.currentTarget,this.name);if(V){var Y=F.detail,J=Y.image,ee=Y.element,q=v.default.getToolWidth(),le=Object(B.getModule)("globalConfiguration").configuration.lineDash,Q=this.configuration,X=Q.handleRadius,w=Q.drawHandlesOnHover,$=Q.hideHandlesIfMoving,k=Q.renderDashed,ae=Object(M.getNewContext)(Y.canvasContext.canvas),te=Object(I.default)(J),oe=te.rowPixelSpacing,se=te.colPixelSpacing,fe=(a.default.cornerstone.metaData.get("generalSeriesModule",J.imageId)||{}).modality,ue=oe&&se;Object(M.draw)(ae,function(ve){for(var he=0;he<V.data.length;he++){var re=V.data[he];if(!1!==re.visible){var de=h.default.getColorIfActive(re),Me={color:de,handleRadius:X,drawHandlesIfActive:w,hideHandlesIfMoving:$};Object(M.setShadow)(ve,N.configuration);var Ee={color:de};if(k&&(Ee.lineDash=le),Object(M.drawEllipse)(ve,ee,re.handles.start,re.handles.end,Ee,"pixel",re.handles.initialRotation),Object(M.drawHandles)(ve,Y,re.handles,Me),!0===re.invalidated&&(re.cachedStats?N.throttledUpdateCachedStats(J,ee,re):N.updateCachedStats(J,ee,re)),!re.handles.textBox.hasMoved){var Oe=Object(T.default)(Y.viewport,re.handles);Object.assign(re.handles.textBox,Oe)}var Te=L(ve,J.color,re.cachedStats,fe,ue,N.configuration);re.unit=W(fe,N.configuration.showHounsfieldUnits),Object(M.drawLinkedTextBox)(ve,ee,re.handles.textBox,Te,re.handles,function(De){return H(De.start,De.end)},de,q,10,!0)}}})}}}]),p}(u.default);function H(A,p){var U=R(A,p),F=U.left,N=U.top,V=U.width,Y=U.height;return[{x:F+V/2,y:N},{x:F,y:N+Y/2},{x:F+V/2,y:N+Y},{x:F+V,y:N+Y/2}]}function W(A,p){return"CT"===A&&!1!==p?"HU":""}function L(A,p){var U=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},F=U.area,N=void 0===F?0:F,V=U.mean,Y=void 0===V?0:V,J=U.stdDev,ee=void 0===J?0:J,q=U.min,le=void 0===q?0:q,Q=U.max,X=void 0===Q?0:Q,w=U.meanStdDevSUV,$=void 0===w?0:w,ae=arguments.length>4?arguments[4]:void 0,te=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},oe=te.showMinMax||!1,se=[],ie=[];if(!p){var fe=$&&0!==$.mean,ue=W(arguments.length>3?arguments[3]:void 0,te.showHounsfieldUnits),ve="Mean: ".concat(Object(D.default)(Y.toFixed(2))," ").concat(ue),he="Std Dev: ".concat(Object(D.default)(ee.toFixed(2))," ").concat(ue);if(fe){for(var de="".concat(" SUV: ").concat(Object(D.default)($.mean.toFixed(2))),Me="".concat(" SUV: ").concat(Object(D.default)($.stdDev.toFixed(2))),Ee=Math.floor(A.measureText("".concat(he,"     ")).width);A.measureText(ve).width<Ee;)ve+=" ";ie.push("".concat(ve).concat(de)),ie.push("".concat(he,"     ").concat(Me))}else ie.push("".concat(ve)),ie.push("".concat(he));if(oe){for(var Oe="Min: ".concat(le," ").concat(ue),ge="Max: ".concat(X," ").concat(ue),Te=Math.floor(fe?A.measureText("".concat(he,"     ")).width:A.measureText("".concat(ve,"     ")).width);A.measureText(Oe).width<Te;)Oe+=" ";ie.push("".concat(Oe).concat(ge))}}return se.push(function x(A,p){var U=p?" mm".concat(String.fromCharCode(178)):" px".concat(String.fromCharCode(178));return"Area: ".concat(Object(D.default)(A.toFixed(2))).concat(U)}(N,ae)),ie.forEach(function(me){return se.push(me)}),se}function R(A,p){return{left:Math.round(Math.min(A.x,p.x)),top:Math.round(Math.min(A.y,p.y)),width:Math.round(Math.abs(A.x-p.x)),height:Math.round(Math.abs(A.y-p.y))}}},"./tools/annotation/FreehandRoiTool.js":
/*!*********************************************!*\
          !*** ./tools/annotation/FreehandRoiTool.js ***!
          \*********************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return Y});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=e.n(f),o=e(
/*! @babel/runtime/helpers/assertThisInitialized */
"../node_modules/@babel/runtime/helpers/assertThisInitialized.js"),n=e.n(o),a=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),u=e.n(a),c=e(
/*! ./../../events.js */
"./events.js"),v=e(
/*! ./../../externalModules.js */
"./externalModules.js"),h=e(
/*! ./../base/BaseAnnotationTool.js */
"./tools/base/BaseAnnotationTool.js"),E=e(
/*! ./../../stateManagement/toolState.js */
"./stateManagement/toolState.js"),M=e(
/*! ./../../stateManagement/toolStyle.js */
"./stateManagement/toolStyle.js"),O=e(
/*! ./../../stateManagement/toolColors.js */
"./stateManagement/toolColors.js"),P=e(
/*! ../../store/index.js */
"./store/index.js"),T=e(
/*! ../../util/triggerEvent.js */
"./util/triggerEvent.js"),D=e(
/*! ../../util/findAndMoveHelpers.js */
"./util/findAndMoveHelpers.js"),y=e(
/*! ../../util/pointInsideBoundingBox.js */
"./util/pointInsideBoundingBox.js"),j=e(
/*! ../../util/calculateSUV.js */
"./util/calculateSUV.js"),C=e(
/*! ../../util/numbersWithCommas.js */
"./util/numbersWithCommas.js"),I=e(
/*! ../../util/getPixelSpacing */
"./util/getPixelSpacing.js"),B=e(
/*! ../../drawing/index.js */
"./drawing/index.js"),S=e(
/*! ../../drawing/drawLinkedTextBox.js */
"./drawing/drawLinkedTextBox.js"),K=e(
/*! ../../drawing/drawHandles.js */
"./drawing/drawHandles.js"),H=e(
/*! ../../util/clip.js */
"./util/clip.js"),W=e(
/*! ../../store/setToolCursor.js */
"./store/setToolCursor.js"),L=e(
/*! ../cursors/index.js */
"./tools/cursors/index.js"),x=e(
/*! ../../util/freehand/index.js */
"./util/freehand/index.js"),_=e(
/*! ../../util/logger.js */
"./util/logger.js"),R=e(
/*! ../../util/throttle */
"./util/throttle.js"),A=Object(_.getLogger)("tools:annotation:FreehandRoiTool"),p=x.default.insertOrDelete,U=x.default.freehandArea,F=x.default.calculateFreehandStatistics,N=x.default.freehandIntersect,V=x.default.FreehandHandleData,Y=function(q){function le(){var Q,X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d()(this,le);var w={name:"FreehandRoi",supportedInteractionTypes:["Mouse","Touch"],configuration:{mouseLocation:{handles:{start:{highlight:!0,active:!0}}},spacing:1,activeHandleRadius:3,completeHandleRadius:6,completeHandleRadiusTouch:28,alwaysShowHandles:!1,invalidColor:"crimson",currentHandle:0,currentTool:-1,drawHandles:!0,renderDashed:!1},svgCursor:L.freehandRoiCursor};return(Q=i()(this,m()(le).call(this,X,w))).isMultiPartTool=!0,Q._drawing=!1,Q._dragging=!1,Q._modifying=!1,Q._drawingMouseDownCallback=Q._drawingMouseDownCallback.bind(n()(Q)),Q._drawingMouseMoveCallback=Q._drawingMouseMoveCallback.bind(n()(Q)),Q._drawingMouseDragCallback=Q._drawingMouseDragCallback.bind(n()(Q)),Q._drawingMouseUpCallback=Q._drawingMouseUpCallback.bind(n()(Q)),Q._drawingMouseDoubleClickCallback=Q._drawingMouseDoubleClickCallback.bind(n()(Q)),Q._editMouseUpCallback=Q._editMouseUpCallback.bind(n()(Q)),Q._editMouseDragCallback=Q._editMouseDragCallback.bind(n()(Q)),Q._drawingTouchStartCallback=Q._drawingTouchStartCallback.bind(n()(Q)),Q._drawingTouchDragCallback=Q._drawingTouchDragCallback.bind(n()(Q)),Q._drawingDoubleTapClickCallback=Q._drawingDoubleTapClickCallback.bind(n()(Q)),Q._editTouchDragCallback=Q._editTouchDragCallback.bind(n()(Q)),Q.throttledUpdateCachedStats=Object(R.default)(Q.updateCachedStats,110),Q}return u()(le,q),s()(le,[{key:"createNewMeasurement",value:function(X){if(X&&X.currentPoints&&X.currentPoints.image){var $={visible:!0,active:!0,invalidated:!0,color:void 0,handles:{points:[]}};return $.handles.textBox={active:!1,hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0},$}A.error("required eventData not supplied to tool ".concat(this.name,"'s createNewMeasurement"))}},{key:"pointNearTool",value:function(X,w,$){var k=w&&w.handles&&w.handles.points;if(!k)throw new Error("invalid parameters supplied to tool ".concat(this.name,"'s pointNearTool"));return!(!k||!1===w.visible)&&void 0!==this._pointNearHandle(X,w,$)}},{key:"distanceFromPoint",value:function(X,w,$){for(var k=1/0,ae=0;ae<w.handles.points.length;ae++){var te=v.default.cornerstoneMath.point.distance(w.handles.points[ae],$);k=Math.min(k,te)}return k===1/0?-1:k}},{key:"distanceFromPointCanvas",value:function(X,w,$){var k=1/0;if(!w)return-1;for(var ae=v.default.cornerstone.pixelToCanvas(X,$),te=w.handles.points,oe=0;oe<te.length;oe++){var se=v.default.cornerstone.pixelToCanvas(X,te[oe]),ie=v.default.cornerstoneMath.point.distance(se,ae);k=Math.min(k,ie)}return k===1/0?-1:k}},{key:"updateCachedStats",value:function(X,w,$){for(var k,ae,te=v.default.cornerstone.metaData.get("generalSeriesModule",X.imageId),oe=te?te.modality:null,se=$.handles.points,ie={left:se[0].x,right:se[0].x,bottom:se[0].y,top:se[0].x},fe=0;fe<se.length;fe++)ie.left=Math.min(ie.left,se[fe].x),ie.right=Math.max(ie.right,se[fe].x),ie.bottom=Math.min(ie.bottom,se[fe].y),ie.top=Math.max(ie.top,se[fe].y);var ue={left:ie.left,top:ie.bottom,width:Math.abs(ie.right-ie.left),height:Math.abs(ie.top-ie.bottom)};if($.polyBoundingBox=ue,!X.color){var ve=v.default.cornerstone.getPixels(w,ue.left,ue.top,ue.width,ue.height);k=F.call(this,ve,ue,$.handles.points),"PT"===oe&&(ae={mean:Object(j.default)(X,(k.mean-X.intercept)/X.slope),stdDev:Object(j.default)(X,(k.stdDev-X.intercept)/X.slope)}),k&&!isNaN(k.mean)&&($.meanStdDev=k,$.meanStdDevSUV=ae)}var he=Object(I.default)(X),Ee=U($.handles.points,(he.colPixelSpacing||1)*(he.rowPixelSpacing||1));isNaN(Ee)||($.area=Ee),$.invalidated=!1}},{key:"renderToolData",value:function(X){var w=this,$=X.detail,k=Object(E.getToolState)(X.currentTarget,this.name);if(k)for(var ae=$.image,te=$.element,oe=this.configuration,se=v.default.cornerstone.metaData.get("generalSeriesModule",ae.imageId),ie=se?se.modality:null,fe=Object(B.getNewContext)($.canvasContext.canvas),ue=M.default.getToolWidth(),ve=oe.renderDashed,he=Object(P.getModule)("globalConfiguration").configuration.lineDash,re=function(Te){var me=k.data[Te];if(!1===me.visible)return"continue";Object(B.draw)(fe,function(De){var je,Ce=O.default.getColorIfActive(me);me.active?me.handles.invalidHandlePlacement?(Ce=oe.invalidColor,je=oe.invalidColor):(Ce=O.default.getColorIfActive(me),je=O.default.getFillColor()):je=O.default.getToolColor();var ye={color:Ce};if(ve&&(ye.lineDash=he),me.handles.points.length){var Le=me.handles.points;Object(B.drawJoinedLines)(De,te,Le[0],Le,ye),me.polyBoundingBox?Object(B.drawJoinedLines)(De,te,Le[Le.length-1],[Le[0]],ye):Object(B.drawJoinedLines)(De,te,Le[Le.length-1],[oe.mouseLocation.handles.start],ye)}if(ye={color:Ce,fill:je},(oe.alwaysShowHandles||me.active&&me.polyBoundingBox)&&(ye.handleRadius=oe.activeHandleRadius,w.configuration.drawHandles&&Object(K.default)(De,$,me.handles.points,ye)),me.canComplete){ye.handleRadius=oe.completeHandleRadius;var _e=me.handles.points[0];w.configuration.drawHandles&&Object(K.default)(De,$,[_e],ye)}if(me.active&&!me.polyBoundingBox){ye.handleRadius=oe.activeHandleRadius,w.configuration.drawHandles&&Object(K.default)(De,$,oe.mouseLocation.handles,ye);var Ae=me.handles.points[0];w.configuration.drawHandles&&Object(K.default)(De,$,[Ae],ye)}if(!0===me.invalidated&&!me.active&&(me.meanStdDev&&me.meanStdDevSUV&&me.area?w.throttledUpdateCachedStats(ae,te,me):w.updateCachedStats(ae,te,me)),me.polyBoundingBox&&!me.handles.textBox.freehand){me.handles.textBox.hasMoved||(me.handles.textBox.x=me.polyBoundingBox.left+me.polyBoundingBox.width,me.handles.textBox.y=me.polyBoundingBox.top+me.polyBoundingBox.height/2);var Ue=Ee.call(w,me);Object(S.default)(De,te,me.handles.textBox,Ue,me.handles.points,Oe,Ce,ue,0,!0)}})},de=0;de<k.data.length;de++)re(de);function Ee(ge){var Te=ge.meanStdDev,me=ge.meanStdDevSUV,De=ge.area,Ce=[];if(Te&&void 0!==Te.mean){var je="";"CT"===ie&&(je="HU"),ge.unit=je;var ye="Mean: ".concat(Object(C.default)(Te.mean.toFixed(2))," ").concat(je),Le="StdDev: ".concat(Object(C.default)(Te.stdDev.toFixed(2))," ").concat(je);me&&void 0!==me.mean&&(ye+=" SUV: "+Object(C.default)(me.mean.toFixed(2)),Le+=" SUV: "+Object(C.default)(me.stdDev.toFixed(2))),Ce.push(ye),Ce.push(Le)}if(De){var Ae=" mm".concat(String.fromCharCode(178)),Ue=Object(I.default)(ae);(!Ue.rowPixelSpacing||!Ue.colPixelSpacing)&&(Ae=" pixels".concat(String.fromCharCode(178)));var tt="Area: ".concat(Object(C.default)(De.toFixed(2))).concat(Ae);Ce.push(tt)}return Ce}function Oe(ge){return ge}}},{key:"addNewMeasurement",value:function(X){var w=X.detail;this._startDrawing(X),this._addPoint(w),ee(X)}},{key:"preMouseDownCallback",value:function(X){var w=X.detail,$=this._pointNearHandleAllTools(w);return!!w.event.ctrlKey&&(void 0!==$&&$.handleNearby.hasBoundingBox||p.call(this,X,$),ee(X),!0)}},{key:"handleSelectedCallback",value:function(X,w,$){var k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"mouse",ae=X.detail.element,te=Object(E.getToolState)(ae,this.name);if($.hasBoundingBox)Object(D.moveHandleNearImagePoint)(X,this,w,$,k);else{var oe=this.configuration;oe.dragOrigin={x:$.x,y:$.y};for(var se=0;se<te.data.length;se++)for(var ie=te.data[se].handles.points,fe=0;fe<ie.length;fe++)ie[fe]===$&&(oe.currentHandle=fe,oe.currentTool=se);this._modifying=!0,this._activateModify(ae),ee(X)}}},{key:"_drawingMouseMoveCallback",value:function(X){var w=X.detail,$=w.currentPoints,k=w.element,ae=Object(E.getToolState)(k,this.name),te=this.configuration,se=ae.data[te.currentTool],ie=$.canvas;this._getMouseLocation(w),this._checkInvalidHandleLocation(se,w);var fe=this._pointNearHandle(k,se,ie),ue=se.handles.points;void 0!==fe&&!fe.hasBoundingBox&&fe<ue.length-1&&(te.mouseLocation.handles.start.x=ue[fe].x,te.mouseLocation.handles.start.y=ue[fe].y),v.default.cornerstone.updateImage(k)}},{key:"_drawingMouseDragCallback",value:function(X){this.options.mouseButtonMask.includes(X.detail.buttons)&&this._drawingDrag(X)}},{key:"_drawingTouchDragCallback",value:function(X){this._drawingDrag(X)}},{key:"_drawingDrag",value:function(X){var w=X.detail,$=w.element,oe=Object(E.getToolState)($,this.name).data[this.configuration.currentTool];this._getMouseLocation(w),this._checkInvalidHandleLocation(oe,w),this._addPointPencilMode(w,oe.handles.points),this._dragging=!0,v.default.cornerstone.updateImage($)}},{key:"_drawingMouseUpCallback",value:function(X){var w=X.detail.element;if(this._dragging){this._dragging=!1;var $=this.configuration,k=$.currentTool,te=Object(E.getToolState)(w,this.name).data[k];!N.end(te.handles.points)&&te.canComplete&&this._endDrawing(w,$.currentHandle),ee(X)}}},{key:"_drawingMouseDownCallback",value:function(X){var w=X.detail,k=w.currentPoints,ae=w.element;if(this.options.mouseButtonMask.includes(w.buttons)){var te=k.canvas,oe=this.configuration,se=oe.currentTool,fe=Object(E.getToolState)(ae,this.name).data[se],ue=this._pointNearHandle(ae,fe,te);!N.end(fe.handles.points)&&fe.canComplete?this._endDrawing(ae,oe.currentHandle):void 0===ue&&this._addPoint(w),ee(X)}}},{key:"_drawingTouchStartCallback",value:function(X){var w=X.detail,k=w.element,ae=w.currentPoints.canvas,te=this.configuration,oe=te.currentTool,ie=Object(E.getToolState)(k,this.name).data[oe],fe=this._pointNearHandle(k,ie,ae);!N.end(ie.handles.points)&&ie.canComplete?this._endDrawing(k,te.currentHandle):void 0===fe&&this._addPoint(w),ee(X)}},{key:"completeDrawing",value:function(X){if(this._drawing){var w=Object(E.getToolState)(X,this.name),$=this.configuration,k=w.data[$.currentTool];if(!N.end(k.handles.points)&&k.handles.points.length>=2){var ae=$.currentHandle;k.polyBoundingBox={},this._endDrawing(X,ae)}}}},{key:"_drawingMouseDoubleClickCallback",value:function(X){this.completeDrawing(X.detail.element),ee(X)}},{key:"_drawingDoubleTapClickCallback",value:function(X){this.completeDrawing(X.detail.element),ee(X)}},{key:"_editMouseDragCallback",value:function(X){var w=X.detail,$=w.element;if(this.options.mouseButtonMask.includes(w.buttons)){var fe,ae=Object(E.getToolState)($,this.name),te=this.configuration,oe=ae.data[te.currentTool],se=te.currentHandle,ie=oe.handles.points;if(this._getMouseLocation(w),oe.handles.invalidHandlePlacement=N.modify(ie,se),oe.active=!0,oe.highlight=!0,ie[se].x=te.mouseLocation.handles.start.x,ie[se].y=te.mouseLocation.handles.start.y,fe=this._getPrevHandleIndex(se,ie),se>=0){var ve=ie[fe].lines[ie[fe].lines.length-1];ve.x=te.mouseLocation.handles.start.x,ve.y=te.mouseLocation.handles.start.y}v.default.cornerstone.updateImage($)}}},{key:"_editTouchDragCallback",value:function(X){var ie,w=X.detail,$=w.element,k=Object(E.getToolState)($,this.name),ae=this.configuration,te=k.data[ae.currentTool],oe=ae.currentHandle,se=te.handles.points;if(this._getMouseLocation(w),te.handles.invalidHandlePlacement=N.modify(se,oe),te.active=!0,te.highlight=!0,se[oe].x=ae.mouseLocation.handles.start.x,se[oe].y=ae.mouseLocation.handles.start.y,ie=this._getPrevHandleIndex(oe,se),oe>=0){var ue=se[ie].lines[se[ie].lines.length-1];ue.x=ae.mouseLocation.handles.start.x,ue.y=ae.mouseLocation.handles.start.y}v.default.cornerstone.updateImage($)}},{key:"_getPrevHandleIndex",value:function(X,w){return 0===X?w.length-1:X-1}},{key:"_editMouseUpCallback",value:function(X){var w=X.detail,$=w.element,k=Object(E.getToolState)($,this.name);this._deactivateModify($),this._dropHandle(w,k),this._endDrawing($),v.default.cornerstone.updateImage($)}},{key:"_dropHandle",value:function(X,w){var $=this.configuration,ae=w.data[$.currentTool].handles,te=ae.points;if(ae.invalidHandlePlacement){var ie,oe=$.currentHandle,se=te[oe];ie=0===oe?te[te.length-1]:te[oe-1],se.x=$.dragOrigin.x,se.y=$.dragOrigin.y,ie.lines[0]=se,ae.invalidHandlePlacement=!1}}},{key:"_startDrawing",value:function(X){var te,w=X.detail,$=this.createNewMeasurement(w),k=w.element,ae=this.configuration;X.type===c.default.MOUSE_DOWN_ACTIVATE?te="Mouse":X.type===c.default.TOUCH_START_ACTIVE&&(te="Touch"),this._activateDraw(k,te),this._getMouseLocation(w),Object(E.addToolState)(k,this.name,$);var oe=Object(E.getToolState)(k,this.name);ae.currentTool=oe.data.length-1,this._activeDrawingToolReference=oe.data[ae.currentTool]}},{key:"_addPoint",value:function(X){var w=X.currentPoints,$=X.element,k=Object(E.getToolState)($,this.name),ae=this.configuration,te=k.data[ae.currentTool];if(!te.handles.invalidHandlePlacement){var oe=new V(w.image);te.handles.points.length&&te.handles.points[ae.currentHandle-1].lines.push(w.image),te.handles.points.push(oe),ae.currentHandle+=1,v.default.cornerstone.updateImage($),this.fireModifiedEvent($,te)}}},{key:"_addPointPencilMode",value:function(X,w){var $=this,ae=X.element,te=this.configuration.mouseLocation.handles.start;w.every(function(ie){return $._isDistanceLargerThanSpacing(ae,ie,te)})&&this._addPoint(X)}},{key:"_endDrawing",value:function(X,w){var $=Object(E.getToolState)(X,this.name),k=this.configuration,ae=$.data[k.currentTool];if(ae.active=!1,ae.highlight=!1,ae.handles.invalidHandlePlacement=!1,void 0!==w){var te=ae.handles.points;te[k.currentHandle-1].lines.push(te[0])}this._modifying&&(this._modifying=!1,ae.invalidated=!0),k.currentHandle=0,k.currentTool=-1,ae.canComplete=!1,this._drawing&&this._deactivateDraw(X),v.default.cornerstone.updateImage(X),this.fireModifiedEvent(X,ae),this.fireCompletedEvent(X,ae)}},{key:"_pointNearHandle",value:function(X,w,$){if(void 0!==w.handles&&void 0!==w.handles.points&&!1!==w.visible){for(var k=0;k<w.handles.points.length;k++){var ae=v.default.cornerstone.pixelToCanvas(X,w.handles.points[k]);if(v.default.cornerstoneMath.point.distance(ae,$)<6)return k}if(w.handles.textBox&&Object(y.default)(w.handles.textBox,$))return w.handles.textBox}}},{key:"_pointNearHandleAllTools",value:function(X){var $=X.element,k=X.currentPoints.canvas,ae=Object(E.getToolState)($,this.name);if(ae)for(var te,oe=0;oe<ae.data.length;oe++)if(void 0!==(te=this._pointNearHandle($,ae.data[oe],k)))return{handleNearby:te,toolIndex:oe}}},{key:"_getMouseLocation",value:function(X){var w=X.currentPoints,$=X.image,k=this.configuration;k.mouseLocation.handles.start.x=w.image.x,k.mouseLocation.handles.start.y=w.image.y,Object(H.clipToBox)(k.mouseLocation.handles.start,$)}},{key:"_checkInvalidHandleLocation",value:function(X,w){if(X.handles.points.length<2)return!0;var $;$=this._dragging?this._checkHandlesPencilMode(X,w):this._checkHandlesPolygonMode(X,w),X.handles.invalidHandlePlacement=$}},{key:"_checkHandlesPolygonMode",value:function(X,w){var k=w.element,ae=this.configuration.mouseLocation.handles.start,te=X.handles.points,oe=!1;return X.canComplete=!1,this._isDistanceSmallerThanCompleteSpacingCanvas(k,te[0],ae)&&!N.end(te)&&te.length>2?(X.canComplete=!0,oe=!1):oe=N.newHandle(ae,te),oe}},{key:"_checkHandlesPencilMode",value:function(X,w){var te=N.newHandle(this.configuration.mouseLocation.handles.start,X.handles.points);return!1===te&&(te=this._invalidHandlePencilMode(X,w)),te}},{key:"_invalidHandlePencilMode",value:function(X,w){var k=w.element,ae=this.configuration.mouseLocation.handles.start,te=X.handles.points;if(this._isDistanceSmallerThanCompleteSpacingCanvas(k,te[0],ae))return X.canComplete=!0,!1;X.canComplete=!1;for(var se=1;se<te.length-1;se++)if(this._isDistanceSmallerThanSpacing(k,te[se],ae))return!0;return!1}},{key:"_isDistanceSmallerThanCompleteSpacingCanvas",value:function(X,w,$){var te,k=v.default.cornerstone.pixelToCanvas(X,w),ae=v.default.cornerstone.pixelToCanvas(X,$);return"Mouse"===this._drawingInteractionType?te=this.configuration.completeHandleRadius:"Touch"===this._drawingInteractionType&&(te=this.configuration.completeHandleRadiusTouch),this._compareDistanceToSpacing(X,k,ae,"<",te)}},{key:"_isDistanceSmallerThanSpacing",value:function(X,w,$){return this._compareDistanceToSpacing(X,w,$,"<")}},{key:"_isDistanceLargerThanSpacing",value:function(X,w,$){return this._compareDistanceToSpacing(X,w,$,">")}},{key:"_compareDistanceToSpacing",value:function(X,w,$){var ae=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.configuration.spacing;return">"===(arguments.length>3&&void 0!==arguments[3]?arguments[3]:">")?v.default.cornerstoneMath.point.distance(w,$)>ae:v.default.cornerstoneMath.point.distance(w,$)<ae}},{key:"_activateDraw",value:function(X){var w=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Mouse";this._drawing=!0,this._drawingInteractionType=w,P.state.isMultiPartToolActive=!0,Object(W.hideToolCursor)(this.element),X.addEventListener(c.default.MOUSE_DOWN,this._drawingMouseDownCallback),X.addEventListener(c.default.MOUSE_MOVE,this._drawingMouseMoveCallback),X.addEventListener(c.default.MOUSE_DOUBLE_CLICK,this._drawingMouseDoubleClickCallback),X.addEventListener(c.default.MOUSE_DRAG,this._drawingMouseDragCallback),X.addEventListener(c.default.MOUSE_UP,this._drawingMouseUpCallback),X.addEventListener(c.default.TOUCH_START,this._drawingMouseMoveCallback),X.addEventListener(c.default.TOUCH_START,this._drawingTouchStartCallback),X.addEventListener(c.default.TOUCH_DRAG,this._drawingTouchDragCallback),X.addEventListener(c.default.TOUCH_END,this._drawingMouseUpCallback),X.addEventListener(c.default.DOUBLE_TAP,this._drawingDoubleTapClickCallback),v.default.cornerstone.updateImage(X)}},{key:"_deactivateDraw",value:function(X){this._drawing=!1,P.state.isMultiPartToolActive=!1,this._activeDrawingToolReference=null,this._drawingInteractionType=null,Object(W.setToolCursor)(this.element,this.svgCursor),X.removeEventListener(c.default.MOUSE_DOWN,this._drawingMouseDownCallback),X.removeEventListener(c.default.MOUSE_MOVE,this._drawingMouseMoveCallback),X.removeEventListener(c.default.MOUSE_DOUBLE_CLICK,this._drawingMouseDoubleClickCallback),X.removeEventListener(c.default.MOUSE_DRAG,this._drawingMouseDragCallback),X.removeEventListener(c.default.MOUSE_UP,this._drawingMouseUpCallback),X.removeEventListener(c.default.TOUCH_START,this._drawingTouchStartCallback),X.removeEventListener(c.default.TOUCH_DRAG,this._drawingTouchDragCallback),X.removeEventListener(c.default.TOUCH_START,this._drawingMouseMoveCallback),X.removeEventListener(c.default.TOUCH_END,this._drawingMouseUpCallback),v.default.cornerstone.updateImage(X)}},{key:"_activateModify",value:function(X){P.state.isToolLocked=!0,X.addEventListener(c.default.MOUSE_UP,this._editMouseUpCallback),X.addEventListener(c.default.MOUSE_DRAG,this._editMouseDragCallback),X.addEventListener(c.default.MOUSE_CLICK,this._editMouseUpCallback),X.addEventListener(c.default.TOUCH_END,this._editMouseUpCallback),X.addEventListener(c.default.TOUCH_DRAG,this._editTouchDragCallback),v.default.cornerstone.updateImage(X)}},{key:"_deactivateModify",value:function(X){P.state.isToolLocked=!1,X.removeEventListener(c.default.MOUSE_UP,this._editMouseUpCallback),X.removeEventListener(c.default.MOUSE_DRAG,this._editMouseDragCallback),X.removeEventListener(c.default.MOUSE_CLICK,this._editMouseUpCallback),X.removeEventListener(c.default.TOUCH_END,this._editMouseUpCallback),X.removeEventListener(c.default.TOUCH_DRAG,this._editTouchDragCallback),v.default.cornerstone.updateImage(X)}},{key:"passiveCallback",value:function(X){this._closeToolIfDrawing(X)}},{key:"enabledCallback",value:function(X){this._closeToolIfDrawing(X)}},{key:"disabledCallback",value:function(X){this._closeToolIfDrawing(X)}},{key:"_closeToolIfDrawing",value:function(X){this._drawing&&(this._endDrawing(X,this.configuration.currentHandle),v.default.cornerstone.updateImage(X))}},{key:"fireModifiedEvent",value:function(X,w){var $=c.default.MEASUREMENT_MODIFIED,k={toolName:this.name,toolType:this.name,element:X,measurementData:w};Object(T.default)(X,$,k)}},{key:"fireCompletedEvent",value:function(X,w){var $=c.default.MEASUREMENT_COMPLETED,k={toolName:this.name,toolType:this.name,element:X,measurementData:w};Object(T.default)(X,$,k)}},{key:"cancelDrawing",value:function(X){if(this._drawing){var w=Object(E.getToolState)(X,this.name),$=this.configuration,k=w.data[$.currentTool];k.active=!1,k.highlight=!1,k.handles.invalidHandlePlacement=!1,$.currentHandle=0,$.currentTool=-1,k.canComplete=!1,Object(E.removeToolState)(X,this.name,k),this._deactivateDraw(X),v.default.cornerstone.updateImage(X)}}},{key:"newImageCallback",value:function(X){var w=this.configuration;if(this._drawing&&this._activeDrawingToolReference){var $=X.detail.element,k=this._activeDrawingToolReference;k.active=!1,k.highlight=!1,k.handles.invalidHandlePlacement=!1;var ae=k.handles.points;ae[w.currentHandle-1].lines.push(ae[0]),w.currentHandle=0,w.currentTool=-1,k.canComplete=!1,this._deactivateDraw($),v.default.cornerstone.updateImage($)}}},{key:"spacing",get:function(){return this.configuration.spacing},set:function(X){if("number"!=typeof X)throw new Error("Attempting to set freehand spacing to a value other than a number.");this.configuration.spacing=X,v.default.cornerstone.updateImage(this.element)}},{key:"activeHandleRadius",get:function(){return this.configuration.activeHandleRadius},set:function(X){if("number"!=typeof X)throw new Error("Attempting to set freehand activeHandleRadius to a value other than a number.");this.configuration.activeHandleRadius=X,v.default.cornerstone.updateImage(this.element)}},{key:"completeHandleRadius",get:function(){return this.configuration.completeHandleRadius},set:function(X){if("number"!=typeof X)throw new Error("Attempting to set freehand completeHandleRadius to a value other than a number.");this.configuration.completeHandleRadius=X,v.default.cornerstone.updateImage(this.element)}},{key:"alwaysShowHandles",get:function(){return this.configuration.alwaysShowHandles},set:function(X){if("boolean"!=typeof X)throw new Error("Attempting to set freehand alwaysShowHandles to a value other than a boolean.");this.configuration.alwaysShowHandles=X,v.default.cornerstone.updateImage(this.element)}},{key:"invalidColor",get:function(){return this.configuration.invalidColor},set:function(X){this.configuration.invalidColor=X,v.default.cornerstone.updateImage(this.element)}}]),le}(h.default);function ee(q){q.stopImmediatePropagation(),q.stopPropagation(),q.preventDefault()}},"./tools/annotation/LengthTool.js":
/*!****************************************!*\
          !*** ./tools/annotation/LengthTool.js ***!
          \****************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return I});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=e.n(f),o=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),n=e.n(o),a=e(
/*! ../base/BaseAnnotationTool.js */
"./tools/base/BaseAnnotationTool.js"),u=e(
/*! ./../../stateManagement/toolState.js */
"./stateManagement/toolState.js"),c=e(
/*! ./../../stateManagement/toolStyle.js */
"./stateManagement/toolStyle.js"),v=e(
/*! ./../../stateManagement/toolColors.js */
"./stateManagement/toolColors.js"),h=e(
/*! ./../../drawing/index.js */
"./drawing/index.js"),E=e(
/*! ./../../drawing/drawLinkedTextBox.js */
"./drawing/drawLinkedTextBox.js"),M=e(
/*! ./../../drawing/drawHandles.js */
"./drawing/drawHandles.js"),O=e(
/*! ./../../util/lineSegDistance.js */
"./util/lineSegDistance.js"),P=e(
/*! ../cursors/index.js */
"./tools/cursors/index.js"),T=e(
/*! ../../util/logger.js */
"./util/logger.js"),D=e(
/*! ../../util/getPixelSpacing */
"./util/getPixelSpacing.js"),y=e(
/*! ../../util/throttle */
"./util/throttle.js"),j=e(
/*! ../../store/index */
"./store/index.js"),C=Object(T.getLogger)("tools:annotation:LengthTool"),I=function(S){function K(){var H,W=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d()(this,K);var L={name:"Length",supportedInteractionTypes:["Mouse","Touch"],svgCursor:P.lengthCursor,configuration:{drawHandles:!0,drawHandlesOnHover:!1,hideHandlesIfMoving:!1,renderDashed:!1,digits:2}};return(H=i()(this,m()(K).call(this,W,L))).throttledUpdateCachedStats=Object(y.default)(H.updateCachedStats,110),H}return n()(K,S),s()(K,[{key:"createNewMeasurement",value:function(W){if(W&&W.currentPoints&&W.currentPoints.image){var x=W.currentPoints.image,_=x.x,R=x.y;return{visible:!0,active:!0,color:void 0,invalidated:!0,handles:{start:{x:_,y:R,highlight:!0,active:!1},end:{x:_,y:R,highlight:!0,active:!0},textBox:{active:!1,hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0}}}}C.error("required eventData not supplied to tool ".concat(this.name,"'s createNewMeasurement"))}},{key:"pointNearTool",value:function(W,L,x){return L&&L.handles&&L.handles.start&&L.handles.end?!1!==L.visible&&Object(O.default)(W,L.handles.start,L.handles.end,x)<25:(C.warn("invalid parameters supplied to tool ".concat(this.name,"'s pointNearTool")),!1)}},{key:"updateCachedStats",value:function(W,L,x){var _=Object(D.default)(W),p=(x.handles.end.x-x.handles.start.x)*(_.colPixelSpacing||1),U=(x.handles.end.y-x.handles.start.y)*(_.rowPixelSpacing||1),F=Math.sqrt(p*p+U*U);x.length=F,x.invalidated=!1}},{key:"renderToolData",value:function(W){var L=this,x=W.detail,_=this.configuration,R=_.handleRadius,A=_.drawHandlesOnHover,p=_.hideHandlesIfMoving,U=_.renderDashed,F=_.digits,N=Object(u.getToolState)(W.currentTarget,this.name);if(N)for(var V=Object(h.getNewContext)(x.canvasContext.canvas),Y=x.image,J=x.element,ee=Object(D.default)(Y),q=ee.rowPixelSpacing,le=ee.colPixelSpacing,Q=c.default.getToolWidth(),X=Object(j.getModule)("globalConfiguration").configuration.lineDash,w=function(se){var ie=N.data[se];if(!1===ie.visible)return"continue";Object(h.draw)(V,function(fe){Object(h.setShadow)(fe,L.configuration);var ue=v.default.getColorIfActive(ie),ve={color:ue};U&&(ve.lineDash=X),Object(h.drawLine)(fe,J,ie.handles.start,ie.handles.end,ve);var he={color:ue,handleRadius:R,drawHandlesIfActive:A,hideHandlesIfMoving:p};if(L.configuration.drawHandles&&Object(M.default)(fe,x,ie.handles,he),!ie.handles.textBox.hasMoved){var re={x:Math.max(ie.handles.start.x,ie.handles.end.x)};re.y=re.x===ie.handles.start.x?ie.handles.start.y:ie.handles.end.y,ie.handles.textBox.x=re.x,ie.handles.textBox.y=re.y}!0===ie.invalidated&&(ie.length?L.throttledUpdateCachedStats(Y,J,ie):L.updateCachedStats(Y,J,ie));var Me=function ae(oe,se,ie){var fe=function B(S){var K=Number(S);return!isNaN(K)?K:void 0}(oe.length);if(!fe)return"";var ue="mm";return(!se||!ie)&&(ue="pixels"),oe.unit=ue,"".concat(fe.toFixed(F)," ").concat(ue)}(ie,q,le);Object(E.default)(fe,J,ie.handles.textBox,Me,ie.handles,te,ue,Q,10,!0)})},$=0;$<N.data.length;$++)w($);function te(oe){return[oe.start,{x:(oe.start.x+oe.end.x)/2,y:(oe.start.y+oe.end.y)/2},oe.end]}}}]),K}(a.default)},"./tools/annotation/ProbeTool.js":
/*!***************************************!*\
          !*** ./tools/annotation/ProbeTool.js ***!
          \***************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return B});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=e.n(f),o=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),n=e.n(o),a=e(
/*! ../../externalModules.js */
"./externalModules.js"),u=e(
/*! ../base/BaseAnnotationTool.js */
"./tools/base/BaseAnnotationTool.js"),c=e(
/*! ../../stateManagement/toolState.js */
"./stateManagement/toolState.js"),v=e(
/*! ../../stateManagement/textStyle.js */
"./stateManagement/textStyle.js"),h=e(
/*! ../../stateManagement/toolColors.js */
"./stateManagement/toolColors.js"),E=e(
/*! ../../drawing/index.js */
"./drawing/index.js"),M=e(
/*! ../../drawing/drawTextBox.js */
"./drawing/drawTextBox.js"),O=e(
/*! ../../drawing/drawHandles.js */
"./drawing/drawHandles.js"),P=e(
/*! ../../util/getRGBPixels.js */
"./util/getRGBPixels.js"),T=e(
/*! ../../util/calculateSUV.js */
"./util/calculateSUV.js"),D=e(
/*! ../cursors/index.js */
"./tools/cursors/index.js"),y=e(
/*! ../../util/logger.js */
"./util/logger.js"),j=e(
/*! ../../util/throttle */
"./util/throttle.js"),C=e(
/*! ../../store/index */
"./store/index.js"),I=Object(y.getLogger)("tools:annotation:ProbeTool"),B=function(S){function K(){var H,W=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d()(this,K);var L={name:"Probe",supportedInteractionTypes:["Mouse","Touch"],svgCursor:D.probeCursor,configuration:{drawHandles:!0,renderDashed:!1}};return(H=i()(this,m()(K).call(this,W,L))).throttledUpdateCachedStats=Object(j.default)(H.updateCachedStats,110),H}return n()(K,S),s()(K,[{key:"createNewMeasurement",value:function(W){if(W&&W.currentPoints&&W.currentPoints.image)return{visible:!0,active:!0,color:void 0,invalidated:!0,handles:{end:{x:W.currentPoints.image.x,y:W.currentPoints.image.y,highlight:!0,active:!0}}};I.error("required eventData not supplied to tool ".concat(this.name,"'s createNewMeasurement"))}},{key:"pointNearTool",value:function(W,L,x){var R=L&&L.handles&&L.handles.end;if(R||I.warn("invalid parameters supplied to tool ".concat(this.name,"'s pointNearTool")),!R||!1===L.visible)return!1;var A=a.default.cornerstone.pixelToCanvas(W,L.handles.end);return a.default.cornerstoneMath.point.distance(A,x)<5}},{key:"updateCachedStats",value:function(W,L,x){var _=Math.round(x.handles.end.x),R=Math.round(x.handles.end.y),A={};_>=0&&R>=0&&_<W.columns&&R<W.rows&&(A.x=_,A.y=R,W.color?A.storedPixels=Object(P.default)(L,_,R,1,1):(A.storedPixels=a.default.cornerstone.getStoredPixels(L,_,R,1,1),A.sp=A.storedPixels[0],A.mo=A.sp*W.slope+W.intercept,A.suv=Object(T.default)(W,A.sp))),x.cachedStats=A,x.invalidated=!1}},{key:"renderToolData",value:function(W){var L=this,x=W.detail,_=this.configuration,R=_.handleRadius,A=_.renderDashed,p=Object(c.getToolState)(W.currentTarget,this.name);if(p)for(var U=Object(E.getNewContext)(x.canvasContext.canvas),F=x.image,N=x.element,V=v.default.getFontSize(),Y=Object(C.getModule)("globalConfiguration").configuration.lineDash,J=function(Q){var X=p.data[Q];if(!1===X.visible)return"continue";Object(E.draw)(U,function(w){var $=h.default.getColorIfActive(X);if(L.configuration.drawHandles){var k={handleRadius:R,color:$};A&&(k.lineDash=Y),Object(O.default)(w,x,X.handles,k)}!0===X.invalidated&&(X.cachedStats?L.throttledUpdateCachedStats(F,N,X):L.updateCachedStats(F,N,X));var ae,te,oe=X.cachedStats,se=oe.x,ie=oe.y,fe=oe.storedPixels,ue=oe.sp,ve=oe.mo,he=oe.suv;if(se>=0&&ie>=0&&se<F.columns&&ie<F.rows){ae="".concat(se,", ").concat(ie),F.color?te="R: ".concat(fe[0]," G: ").concat(fe[1]," B: ").concat(fe[2]):(te="SP: ".concat(ue," MO: ").concat(parseFloat(ve.toFixed(3))),he&&(te+=" SUV: ".concat(parseFloat(he.toFixed(3)))));var de=a.default.cornerstone.pixelToCanvas(x.element,{x:X.handles.end.x+3,y:X.handles.end.y-3});Object(M.default)(w,te,de.x,de.y+V+5,$),Object(M.default)(w,ae,de.x,de.y,$)}})},ee=0;ee<p.data.length;ee++)J(ee)}}]),K}(u.default)},"./tools/annotation/RectangleRoiTool.js":
/*!**********************************************!*\
          !*** ./tools/annotation/RectangleRoiTool.js ***!
          \**********************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return B});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=e.n(f),o=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),n=e.n(o),a=e(
/*! ./../../externalModules.js */
"./externalModules.js"),u=e(
/*! ../base/BaseAnnotationTool.js */
"./tools/base/BaseAnnotationTool.js"),c=e(
/*! ./../../stateManagement/toolState.js */
"./stateManagement/toolState.js"),v=e(
/*! ./../../stateManagement/toolStyle.js */
"./stateManagement/toolStyle.js"),h=e(
/*! ./../../stateManagement/toolColors.js */
"./stateManagement/toolColors.js"),E=e(
/*! ./../../drawing/index.js */
"./drawing/index.js"),M=e(
/*! ./../../util/calculateSUV.js */
"./util/calculateSUV.js"),O=e(
/*! ../../util/getROITextBoxCoords.js */
"./util/getROITextBoxCoords.js"),P=e(
/*! ./../../util/numbersWithCommas.js */
"./util/numbersWithCommas.js"),T=e(
/*! ./../../util/throttle.js */
"./util/throttle.js"),D=e(
/*! ../cursors/index.js */
"./tools/cursors/index.js"),y=e(
/*! ../../util/logger.js */
"./util/logger.js"),j=e(
/*! ../../util/getPixelSpacing */
"./util/getPixelSpacing.js"),C=e(
/*! ../../store/index */
"./store/index.js"),I=Object(y.getLogger)("tools:annotation:RectangleRoiTool"),B=function(R){function A(){var p,U=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d()(this,A);var F={name:"RectangleRoi",supportedInteractionTypes:["Mouse","Touch"],configuration:{drawHandles:!0,drawHandlesOnHover:!1,hideHandlesIfMoving:!1,renderDashed:!1},svgCursor:D.rectangleRoiCursor};return(p=i()(this,m()(A).call(this,U,F))).throttledUpdateCachedStats=Object(T.default)(p.updateCachedStats,110),p}return n()(A,R),s()(A,[{key:"createNewMeasurement",value:function(U){if(U&&U.currentPoints&&U.currentPoints.image)return{visible:!0,active:!0,color:void 0,invalidated:!0,handles:{start:{x:U.currentPoints.image.x,y:U.currentPoints.image.y,highlight:!0,active:!1},end:{x:U.currentPoints.image.x,y:U.currentPoints.image.y,highlight:!0,active:!0},initialRotation:U.viewport.rotation,textBox:{active:!1,hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0}}};I.error("required eventData not supplied to tool ".concat(this.name,"'s createNewMeasurement"))}},{key:"pointNearTool",value:function(U,F,N,V){var J=F&&F.handles&&F.handles.start&&F.handles.end;if(J||I.warn("invalid parameters supplied to tool ".concat(this.name,"'s pointNearTool")),!J||!1===F.visible)return!1;var ee="mouse"===V?15:25,q=a.default.cornerstone.pixelToCanvas(U,F.handles.start),le=a.default.cornerstone.pixelToCanvas(U,F.handles.end),Q={left:Math.min(q.x,le.x),top:Math.min(q.y,le.y),width:Math.abs(q.x-le.x),height:Math.abs(q.y-le.y)};return a.default.cornerstoneMath.rect.distanceToPoint(Q,N)<ee}},{key:"updateCachedStats",value:function(U,F,N){var Y=(a.default.cornerstone.metaData.get("generalSeriesModule",U.imageId)||{}).modality,J=Object(j.default)(U),ee=function K(R,A,p,U,F){var J,N=S(p.start,p.end),Y=function H(R,A){for(var p=0,U=0,F=0,N=0,V=R?R[0]:null,Y=R?R[0]:null,J=A.top;J<A.top+A.height;J++)for(var ee=A.left;ee<A.left+A.width;ee++)p+=R[N],U+=R[N]*R[N],V=Math.min(V,R[N]),Y=Math.max(Y,R[N]),F++,N++;if(0===F)return{count:F,mean:0,variance:0,stdDev:0,min:0,max:0};var q=p/F,le=U/F-q*q;return{count:F,mean:q,variance:le,stdDev:Math.sqrt(le),min:V,max:Y}}(a.default.cornerstone.getPixels(A,N.left,N.top,N.width,N.height),N);return"PT"===U&&(J={mean:Object(M.default)(R,Y.mean,!0)||0,stdDev:Object(M.default)(R,Y.stdDev,!0)||0}),{area:N.width*(F.colPixelSpacing||1)*(N.height*(F.rowPixelSpacing||1))||0,perimeter:2*N.width*(F.colPixelSpacing||1)+2*N.height*(F.rowPixelSpacing||1),count:Y.count||0,mean:Y.mean||0,variance:Y.variance||0,stdDev:Y.stdDev||0,min:Y.min||0,max:Y.max||0,meanStdDevSUV:J}}(U,F,N.handles,Y,J);N.cachedStats=ee,N.invalidated=!1}},{key:"renderToolData",value:function(U){var F=this,N=Object(c.getToolState)(U.currentTarget,this.name);if(N){var V=U.detail,Y=V.image,J=V.element,ee=v.default.getToolWidth(),q=Object(C.getModule)("globalConfiguration").configuration.lineDash,le=this.configuration,Q=le.handleRadius,X=le.drawHandlesOnHover,w=le.hideHandlesIfMoving,$=le.renderDashed,k=Object(E.getNewContext)(V.canvasContext.canvas),ae=Object(j.default)(Y),te=ae.rowPixelSpacing,oe=ae.colPixelSpacing,ie=(a.default.cornerstone.metaData.get("generalSeriesModule",Y.imageId)||{}).modality,fe=te&&oe;Object(E.draw)(k,function(ue){for(var ve=0;ve<N.data.length;ve++){var he=N.data[ve];if(!1!==he.visible){var re=h.default.getColorIfActive(he),de={color:re,handleRadius:Q,drawHandlesIfActive:X,hideHandlesIfMoving:w};Object(E.setShadow)(ue,F.configuration);var Me={color:re};if($&&(Me.lineDash=q),Object(E.drawRect)(ue,J,he.handles.start,he.handles.end,Me,"pixel",he.handles.initialRotation),F.configuration.drawHandles&&Object(E.drawHandles)(ue,V,he.handles,de),!0===he.invalidated&&(he.cachedStats?F.throttledUpdateCachedStats(Y,J,he):F.updateCachedStats(Y,J,he)),!he.handles.textBox.hasMoved){var Ee=Object(O.default)(V.viewport,he.handles);Object.assign(he.handles.textBox,Ee)}var ge=_(ue,Y.color,he.cachedStats,ie,fe,F.configuration);he.unit=x(ie,F.configuration.showHounsfieldUnits),Object(E.drawLinkedTextBox)(ue,J,he.handles.textBox,ge,he.handles,function(me){return W(me.start,me.end)},re,ee,10,!0)}}})}}}]),A}(u.default);function S(R,A){return{left:Math.min(R.x,A.x),top:Math.min(R.y,A.y),width:Math.abs(R.x-A.x),height:Math.abs(R.y-A.y)}}function W(R,A){var p=S(R,A),U=p.left,F=p.top,N=p.width,V=p.height;return[{x:U+N/2,y:F},{x:U,y:F+V/2},{x:U+N/2,y:F+V},{x:U+N,y:F+V/2}]}function x(R,A){return"CT"===R&&!1!==A?"HU":""}function _(R,A){var p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},U=p.area,F=void 0===U?0:U,N=p.mean,V=void 0===N?0:N,Y=p.stdDev,J=void 0===Y?0:Y,ee=p.min,q=void 0===ee?0:ee,le=p.max,Q=void 0===le?0:le,X=p.meanStdDevSUV,w=void 0===X?0:X,k=arguments.length>4?arguments[4]:void 0,ae=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},te=ae.showMinMax||!1,oe=[],se=[];if(!A){var ie=w&&0!==w.mean,fe=x(arguments.length>3?arguments[3]:void 0,ae.showHounsfieldUnits),ue="Mean: ".concat(Object(P.default)(V.toFixed(2))," ").concat(fe),ve="Std Dev: ".concat(Object(P.default)(J.toFixed(2))," ").concat(fe);if(ie){for(var re="".concat(" SUV: ").concat(Object(P.default)(w.mean.toFixed(2))),de="".concat(" SUV: ").concat(Object(P.default)(w.stdDev.toFixed(2))),Me=Math.floor(R.measureText("".concat(ve,"     ")).width);R.measureText(ue).width<Me;)ue+=" ";se.push("".concat(ue).concat(re)),se.push("".concat(ve,"     ").concat(de))}else se.push("".concat(ue)),se.push("".concat(ve));if(te){for(var Ee="Min: ".concat(q," ").concat(fe),Oe="Max: ".concat(Q," ").concat(fe),ge=Math.floor(ie?R.measureText("".concat(ve,"     ")).width:R.measureText("".concat(ue,"     ")).width);R.measureText(Ee).width<ge;)Ee+=" ";se.push("".concat(Ee).concat(Oe))}}return oe.push(function L(R,A){var p=A?" mm".concat(String.fromCharCode(178)):" px".concat(String.fromCharCode(178));return"Area: ".concat(Object(P.default)(R.toFixed(2))).concat(p)}(F,k)),se.forEach(function(Te){return oe.push(Te)}),oe}},"./tools/annotation/TextMarkerTool.js":
/*!********************************************!*\
          !*** ./tools/annotation/TextMarkerTool.js ***!
          \********************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return D});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=e.n(f),o=e(
/*! @babel/runtime/helpers/assertThisInitialized */
"../node_modules/@babel/runtime/helpers/assertThisInitialized.js"),n=e.n(o),a=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),u=e.n(a),c=e(
/*! ../base/BaseAnnotationTool.js */
"./tools/base/BaseAnnotationTool.js"),v=e(
/*! ./../../externalModules.js */
"./externalModules.js"),h=e(
/*! ./../../util/pointInsideBoundingBox.js */
"./util/pointInsideBoundingBox.js"),E=e(
/*! ./../../stateManagement/toolColors.js */
"./stateManagement/toolColors.js"),M=e(
/*! ./../../drawing/index.js */
"./drawing/index.js"),O=e(
/*! ./../../drawing/drawTextBox.js */
"./drawing/drawTextBox.js"),P=e(
/*! ./../../stateManagement/toolState.js */
"./stateManagement/toolState.js"),T=e(
/*! ../cursors/index.js */
"./tools/cursors/index.js"),D=function(j){function C(){var I,B=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d()(this,C);var S={name:"TextMarker",supportedInteractionTypes:["Mouse","Touch"],configuration:{markers:[],current:"",ascending:!0,loop:!1,changeTextCallback:y},svgCursor:T.textMarkerCursor};return(I=i()(this,m()(C).call(this,B,S))).touchPressCallback=I._changeText.bind(n()(I)),I.doubleClickCallback=I._changeText.bind(n()(I)),I}return u()(C,j),s()(C,[{key:"createNewMeasurement",value:function(B){var S=this.configuration;if(S.current){var K={visible:!0,active:!0,text:S.current,color:void 0,handles:{end:{x:B.currentPoints.image.x,y:B.currentPoints.image.y,highlight:!0,active:!0,hasBoundingBox:!0}}};if(v.default.cornerstoneMath.point.insideRect(K.handles.end,{left:0,top:0,width:B.image.width,height:B.image.height})){var W=S.markers.indexOf(S.current);return(W+=S.ascending?1:-1)>=S.markers.length?W=S.loop?0:-1:W<0&&(W=S.loop?S.markers.length:-1),S.current=S.markers[W],K}}}},{key:"pointNearTool",value:function(B,S,K){if(!1===S.visible)return!1;if(S.handles.end.boundingBox){var H=v.default.cornerstoneMath.rect.distanceToPoint(S.handles.end.boundingBox,K),W=Object(h.default)(S.handles.end,K);return H<10||W}}},{key:"updateCachedStats",value:function(){}},{key:"renderToolData",value:function(B){var S=B.detail,K=this.configuration,H=Object(P.getToolState)(S.element,this.name);if(H)for(var W=Object(M.getNewContext)(S.canvasContext.canvas),L=function(A){var p=H.data[A];if(!1===p.visible)return"continue";var U=E.default.getColorIfActive(p);Object(M.draw)(W,function(F){Object(M.setShadow)(F,K);var N=v.default.cornerstone.pixelToCanvas(S.element,p.handles.end);p.handles.end.boundingBox=Object(O.default)(F,p.text,N.x,N.y-10,U,{centering:{x:!0,y:!0}})})},x=0;x<H.data.length;x++)L(x)}},{key:"_changeText",value:function(B){var W,S=B.detail,K=S.element;function L(p,U,F){!0===F?Object(P.removeToolState)(K,this.name,p):p.text=U,p.active=!1,v.default.cornerstone.updateImage(K)}var x=this.configuration,_=S.currentPoints.canvas,R=Object(P.getToolState)(K,this.name);if(R)for(var A=0;A<R.data.length;A++)if(this.pointNearTool(K,W=R.data[A],_))return W.active=!0,v.default.cornerstone.updateImage(K),x.changeTextCallback(W,S,L),B.stopImmediatePropagation(),B.preventDefault(),void B.stopPropagation()}}]),C}(c.default),y=function(C,I,B){B(C,prompt("Change your annotation:"))}},"./tools/annotation/bidirectionalTool/addNewMeasurement.js":
/*!*****************************************************************!*\
          !*** ./tools/annotation/bidirectionalTool/addNewMeasurement.js ***!
          \*****************************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./../../../externalModules.js */
"./externalModules.js"),d=e(
/*! ./../../../events.js */
"./events.js"),l=e(
/*! ./../../../manipulators/index.js */
"./manipulators/index.js"),s=e(
/*! ./../../../manipulators/anyHandlesOutsideImage.js */
"./manipulators/anyHandlesOutsideImage.js"),g=e(
/*! ./../../../stateManagement/toolState.js */
"./stateManagement/toolState.js"),i=e(
/*! ../../../util/triggerEvent.js */
"./util/triggerEvent.js"),f=e(
/*! ../../../util/getActiveTool */
"./util/getActiveTool.js"),m=e(
/*! ../BidirectionalTool */
"./tools/annotation/BidirectionalTool.js"),o=e(
/*! ./utils/updatePerpendicularLineHandles.js */
"./tools/annotation/bidirectionalTool/utils/updatePerpendicularLineHandles.js");t.default=function(a,u){var c=this,v=a.detail,h=v.element,E=v.image,M=v.buttons,O=this.configuration;if(!n(E)){var P=this.createNewMeasurement(v),T=function(){P.active=!1,r.default.cornerstone.updateImage(h)};Object(g.addToolState)(h,this.name,P),r.default.cornerstone.updateImage(h);var D=(new Date).getTime(),y=P.handles,j=y.end,C=y.perpendicularStart;Object(l.moveNewHandle)(v,this.name,P,j,{},u,function(I){if(I){var B=P.handles,S=P.longestDiameter,K=P.shortestDiameter,H=Object(s.default)(v,B),W=parseFloat(S)||0,L=parseFloat(K)||0,x=W<1||L<1,_=(new Date).getTime()-D<150;H||x||_?(P.cancelled=!0,Object(g.removeToolState)(h,c.name,P)):O.getMeasurementLocationCallback(P,v,T),Object(o.default)(v,P),C.locked=!1,P.invalidated=!0,r.default.cornerstone.updateImage(h);var R=Object(f.default)(h,M,u);R instanceof m.default&&R.updateCachedStats(E,h,P);var A={toolName:c.name,toolType:c.name,element:h,measurementData:P};Object(i.default)(h,d.default.MEASUREMENT_MODIFIED,A),Object(i.default)(h,d.default.MEASUREMENT_COMPLETED,A)}else Object(g.removeToolState)(h,c.name,P)})}};var n=function(u){var c=r.default.cornerstone.metaData.get("imagePlaneModule",u.imageId),v=u.rowPixelSpacing,h=u.columnPixelSpacing;return c&&(v=c.rowPixelSpacing||c.rowImagePixelSpacing,h=c.columnPixelSpacing||c.colImagePixelSpacing),!v||!h}},"./tools/annotation/bidirectionalTool/createNewMeasurement.js":
/*!********************************************************************!*\
          !*** ./tools/annotation/bidirectionalTool/createNewMeasurement.js ***!
          \********************************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=function(l,s,g){return Object.assign({x:l,y:s,index:g,drawnIndependently:!1,allowedOutsideImage:!1,highlight:!0,active:!1},arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})};t.default=function(d){var l=d.currentPoints.image,s=l.x,g=l.y;return{toolName:this.name,toolType:this.name,isCreating:!0,visible:!0,active:!0,invalidated:!0,handles:{start:r(s,g,0),end:r(s,g,1,{active:!0}),perpendicularStart:r(s,g,2,{locked:!0}),perpendicularEnd:r(s,g,3),textBox:r(s-50,g-70,null,{highlight:!1,hasMoved:!0,active:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0})},longestDiameter:0,shortestDiameter:0}}},"./tools/annotation/bidirectionalTool/handleSelectedCallback.js":
/*!**********************************************************************!*\
          !*** ./tools/annotation/bidirectionalTool/handleSelectedCallback.js ***!
          \**********************************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),t.default=function(r,d,l){"touch"===(arguments.length>3&&void 0!==arguments[3]?arguments[3]:"mouse")?this.handleSelectedTouchCallback(r):this.handleSelectedMouseCallback(r)}},"./tools/annotation/bidirectionalTool/handleSelectedMouseCallback.js":
/*!***************************************************************************!*\
          !*** ./tools/annotation/bidirectionalTool/handleSelectedMouseCallback.js ***!
          \***************************************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! @babel/runtime/helpers/typeof */
"../node_modules/@babel/runtime/helpers/typeof.js"),d=e.n(r),l=e(
/*! ./../../../externalModules.js */
"./externalModules.js"),s=e(
/*! ./../../../events.js */
"./events.js"),g=e(
/*! ./../../../stateManagement/toolState.js */
"./stateManagement/toolState.js"),i=e(
/*! ./../../../manipulators/anyHandlesOutsideImage.js */
"./manipulators/anyHandlesOutsideImage.js"),f=e(
/*! ./../../../manipulators/getHandleNearImagePoint.js */
"./manipulators/getHandleNearImagePoint.js"),m=e(
/*! ./../../../manipulators/index.js */
"./manipulators/index.js"),o=e(
/*! ./moveHandle/moveHandle.js */
"./tools/annotation/bidirectionalTool/moveHandle/moveHandle.js"),n=e(
/*! ./invertHandles.js */
"./tools/annotation/bidirectionalTool/invertHandles.js"),a=e(
/*! ../../../store/setToolCursor.js */
"./store/setToolCursor.js"),u=e(
/*! ../../../util/getProximityThreshold.js */
"./util/getProximityThreshold.js");t.default=function(E){var T,M=this,O=E.detail,P=O.element,D=Object(u.default)("mouse",this.name),y=function(L){T.invalidated=!0,Object(i.default)(O,T.handles)&&Object(g.removeToolState)(P,M.name,T),L&&(L.moving=!1,L.selected=!0),Object(a.setToolCursor)(M.element,M.svgCursor),l.default.cornerstone.updateImage(P),P.addEventListener(s.default.MOUSE_MOVE,M._moveCallback),P.addEventListener(s.default.TOUCH_START,M._moveCallback)},j=O.startPoints.canvas,C=Object(g.getToolState)(E.currentTarget,this.name);if(C){for(var I=function(L){var _=f.default.apply(void 0,[P,(T=C.data[L]).handles,j,D]);if(_)return P.removeEventListener(s.default.MOUSE_MOVE,M._moveCallback),P.removeEventListener(s.default.TOUCH_START,M._moveCallback),T.active=!0,c(T.handles),_.moving=!0,(_=Object(n.default)(O,T,_)).hasBoundingBox||Object(a.hideToolCursor)(M.element),Object(o.default)(O,M.name,T,_,function(){return y(_)}),h(E),{v:!0}},B=0;B<C.data.length;B++){var S=I(B);if("object"===d()(S))return S.v}var K=function(L){return function(){v(L,!1),y()}};for(B=0;B<C.data.length;B++)if(this.pointNearTool(P,T=C.data[B],j,"mouse")){P.removeEventListener(s.default.MOUSE_MOVE,this._moveCallback),P.removeEventListener(s.default.TOUCH_START,this._moveCallback),T.active=!0,c(T.handles),v(T.handles,!0);var H=K(T.handles);return Object(m.moveAllHandles)(O,this.name,T,null,{deleteIfHandleOutsideImage:!0,preventHandleOutsideImage:!1},"mouse",H),h(E),!0}}};var c=function(M){var O=!1;return Object.keys(M).forEach(function(P){"textBox"!==P&&(M[P].selected=!1,O=M[P].active||O,M[P].active=!1)}),O},v=function(M,O){Object.keys(M).forEach(function(P){"textBox"!==P&&(M[P].moving=O)})},h=function(M){M.stopImmediatePropagation(),M.stopPropagation(),M.preventDefault()}},"./tools/annotation/bidirectionalTool/handleSelectedTouchCallback.js":
/*!***************************************************************************!*\
          !*** ./tools/annotation/bidirectionalTool/handleSelectedTouchCallback.js ***!
          \***************************************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! @babel/runtime/helpers/typeof */
"../node_modules/@babel/runtime/helpers/typeof.js"),d=e.n(r),l=e(
/*! ./../../../externalModules.js */
"./externalModules.js"),s=e(
/*! ../../../store/index.js */
"./store/index.js"),g=e(
/*! ./../../../events.js */
"./events.js"),i=e(
/*! ./../../../stateManagement/toolState.js */
"./stateManagement/toolState.js"),f=e(
/*! ./../../../manipulators/anyHandlesOutsideImage.js */
"./manipulators/anyHandlesOutsideImage.js"),m=e(
/*! ./../../../manipulators/getHandleNearImagePoint.js */
"./manipulators/getHandleNearImagePoint.js"),o=e(
/*! ./../../../manipulators/index.js */
"./manipulators/index.js"),n=e(
/*! ./moveHandle/touchMoveHandle.js */
"./tools/annotation/bidirectionalTool/moveHandle/touchMoveHandle.js");t.default=function(v){var O,h=this,E=v.detail,M=E.element,P=s.state.touchProximity,T=function(H){O.invalidated=!0,Object(f.default)(E,O.handles)&&Object(i.removeToolState)(M,h.name,O),H&&(H.moving=!1,H.selected=!0),l.default.cornerstone.updateImage(M),M.addEventListener(g.default.TOUCH_DRAG,h._moveCallback)},D=E.startPoints.canvas,y=Object(i.getToolState)(v.currentTarget,this.name);if(y){for(var j=function(H){var L=m.default.apply(void 0,[M,(O=y.data[H]).handles,D,P]);if(L)return M.removeEventListener(g.default.TOUCH_DRAG,h._moveCallback),O.active=!0,a(O.handles),L.moving=!0,Object(n.default)(E,h.name,O,L,function(){return T(L)}),c(v),{v:!0}},C=0;C<y.data.length;C++){var I=j(C);if("object"===d()(I))return I.v}var B=function(H){return function(){u(H,!1),T()}};for(C=0;C<y.data.length;C++)if(this.pointNearTool(M,O=y.data[C],D,"touch")){M.removeEventListener(g.default.TOUCH_DRAG,this._moveCallback),O.active=!0,a(O.handles),u(O.handles,!0);var S=B(O.handles);return Object(o.moveAllHandles)(E,this.name,O,null,{deleteIfHandleOutsideImage:!0,preventHandleOutsideImage:!1},"touch",S),c(v),!0}}};var a=function(h){var E=!1;return Object.keys(h).forEach(function(M){"textBox"!==M&&(h[M].selected=!1,E=h[M].active||E,h[M].active=!1)}),E},u=function(h,E){Object.keys(h).forEach(function(M){"textBox"!==M&&(h[M].moving=E)})},c=function(h){h.stopImmediatePropagation(),h.stopPropagation(),h.preventDefault()}},"./tools/annotation/bidirectionalTool/invertHandles.js":
/*!*************************************************************!*\
          !*** ./tools/annotation/bidirectionalTool/invertHandles.js ***!
          \*************************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return l});var r=function(g,i,f){var m=g[f];g[f]=i[f],i[f]=m},d=function(g,i){r(g,i,"x"),r(g,i,"y"),r(g,i,"moving"),r(g,i,"hover"),r(g,i,"active"),r(g,i,"selected")};function l(s,g,i){var f=s.image,m=f.rowPixelSpacing,o=f.columnPixelSpacing,n=g.handles,a=n.start,u=n.end,c=n.perpendicularStart,v=n.perpendicularEnd,h=(a.x-u.x)*(o||1),E=(a.y-u.y)*(m||1),M=Math.sqrt(h*h+E*E),O=(c.x-v.x)*(o||1),P=(c.y-v.y)*(m||1);return(Math.sqrt(O*O+P*P)||0)>M?(d(a,u),d(a,c),d(u,v),Object.values(n).find(function(D){return!0===D.moving})):i}},"./tools/annotation/bidirectionalTool/mouseMoveCallback.js":
/*!*****************************************************************!*\
          !*** ./tools/annotation/bidirectionalTool/mouseMoveCallback.js ***!
          \*****************************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./../../../externalModules.js */
"./externalModules.js"),d=e(
/*! ./../../../stateManagement/toolCoordinates.js */
"./stateManagement/toolCoordinates.js"),l=e(
/*! ./../../../manipulators/getHandleNearImagePoint.js */
"./manipulators/getHandleNearImagePoint.js"),s=e(
/*! ./../../../stateManagement/toolState.js */
"./stateManagement/toolState.js");t.default=function(i){var f=this,m=i.detail,o=m.element;d.default.setCoords(m);var n=Object(s.getToolState)(o,this.name);if(n){for(var a=!1,u=function(h){var E=m.currentPoints.canvas,M=n.data[h],O=function(f,m,o){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6,a=Object(l.default)(f,m,o,n),u=!1;return Object.keys(m).forEach(function(c){if("textBox"!==c){var v=m[c],h=v===a;v.active!==h&&(u=!0),v.active=h}}),u}(o,M.handles,E);Object.keys(M.handles).forEach(function(y){if("textBox"!==y){var j=M.handles[y];j.hover=j.active}}),O&&(a=!0);var P=f.pointNearTool(o,M,E,"mouse");(P&&!M.active||!P&&M.active)&&(M.active=!M.active,a=!0)},c=0;c<n.data.length;c++)u(c);!0===a&&r.default.cornerstone.updateImage(o)}}},"./tools/annotation/bidirectionalTool/moveHandle/getBaseData.js":
/*!**********************************************************************!*\
          !*** ./tools/annotation/bidirectionalTool/moveHandle/getBaseData.js ***!
          \**********************************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return s});var r=e(
/*! ../../../../externalModules.js */
"./externalModules.js"),d=e(
/*! ../utils/getDistanceWithPixelSpacing.js */
"./tools/annotation/bidirectionalTool/utils/getDistanceWithPixelSpacing.js");function l(g,i){return{start:g,end:i}}function s(g,i,f){var m=r.default.cornerstoneMath.lineSegment,o=g.handles,n=o.start,a=o.end,u=o.perpendicularStart,c=o.perpendicularEnd,v=i.image,h=v.columnPixelSpacing,E=void 0===h?1:h,M=v.rowPixelSpacing,O=void 0===M?1:M,P=l(n,a),T=l(u,c),D=m.intersectLine(P,T);return{columnPixelSpacing:E,rowPixelSpacing:O,start:n,end:a,perpendicularStart:u,perpendicularEnd:c,longLine:P,intersection:D,distanceToFixed:Object(d.default)(E,O,f,D),fixedPoint:f}}},"./tools/annotation/bidirectionalTool/moveHandle/moveHandle.js":
/*!*********************************************************************!*\
          !*** ./tools/annotation/bidirectionalTool/moveHandle/moveHandle.js ***!
          \*********************************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./../../../../externalModules.js */
"./externalModules.js"),d=e(
/*! ../../../../store/index.js */
"./store/index.js"),l=e(
/*! ./../../../../events.js */
"./events.js"),s=e(
/*! ./setHandlesPosition.js */
"./tools/annotation/bidirectionalTool/moveHandle/setHandlesPosition.js"),g=e(
/*! ../../../../util/getActiveTool */
"./util/getActiveTool.js"),i=e(
/*! ../../../base/BaseAnnotationTool */
"./tools/base/BaseAnnotationTool.js");t.default=function(f,m,o,n,a,u){var c=f.element,v=f.image,h=f.buttons,E={x:n.x-f.currentPoints.image.x,y:n.y-f.currentPoints.image.y},M=function(y){var j=y.detail;n.hasMoved=!0,null==n.index?(n.x=j.currentPoints.image.x+E.x,n.y=j.currentPoints.image.y+E.y):Object(s.default)(n,j,o,E),u&&(n.x=Math.max(n.x,0),n.x=Math.min(n.x,j.image.width),n.y=Math.max(n.y,0),n.y=Math.min(n.y,j.image.height)),o.invalidated=!0,r.default.cornerstone.updateImage(c);var C=Object(g.default)(c,h,"mouse");C instanceof i.default&&C.updateCachedStats(v,c,o),r.default.cornerstone.triggerEvent(c,l.default.MEASUREMENT_MODIFIED,{toolName:m,toolType:m,element:c,measurementData:o})};n.active=!0,n.moving=!0,d.state.isToolLocked=!0,c.addEventListener(l.default.MOUSE_DRAG,M),c.addEventListener(l.default.TOUCH_DRAG,M);var O=r.default.cornerstone.getImage(c),P=function(){r.default.cornerstone.getImage(c).imageId!==O.imageId&&T()};c.addEventListener(r.default.cornerstone.EVENTS.IMAGE_RENDERED,P);var T=function D(){n.active=!1,d.state.isToolLocked=!1,c.removeEventListener(r.default.cornerstone.EVENTS.IMAGE_RENDERED,P),c.removeEventListener(l.default.MOUSE_DRAG,M),c.removeEventListener(l.default.MOUSE_UP,D),c.removeEventListener(l.default.MOUSE_CLICK,D),c.removeEventListener(l.default.TOUCH_DRAG,M),c.removeEventListener(l.default.TOUCH_DRAG_END,D),c.removeEventListener(l.default.TAP,D),r.default.cornerstone.updateImage(c),"function"==typeof a&&a()};c.addEventListener(l.default.MOUSE_UP,T),c.addEventListener(l.default.MOUSE_CLICK,T),c.addEventListener(l.default.TOUCH_DRAG_END,T),c.addEventListener(l.default.TAP,T)}},"./tools/annotation/bidirectionalTool/moveHandle/moveLongLine/moveLongLine.js":
/*!************************************************************************************!*\
          !*** ./tools/annotation/bidirectionalTool/moveHandle/moveLongLine/moveLongLine.js ***!
          \************************************************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return s});var r=e(
/*! ../../utils/getDistanceWithPixelSpacing.js */
"./tools/annotation/bidirectionalTool/utils/getDistanceWithPixelSpacing.js"),d=e(
/*! ../getBaseData.js */
"./tools/annotation/bidirectionalTool/moveHandle/getBaseData.js"),l=e(
/*! ./updatePerpendicularLine.js */
"./tools/annotation/bidirectionalTool/moveHandle/moveLongLine/updatePerpendicularLine.js");function s(g,i,f,m){var o=Object(d.default)(i,f,m),n=o.columnPixelSpacing,a=o.rowPixelSpacing,u=o.distanceToFixed,c=Object(r.default)(n,a,m,g);if(c<=u)return!1;var v=u/c,h={x:m.x+(g.x-m.x)*v,y:m.y+(g.y-m.y)*v},E=Object(l.default)(o,h);return i.handles.perpendicularStart.x=E.start.x,i.handles.perpendicularStart.y=E.start.y,i.handles.perpendicularEnd.x=E.end.x,i.handles.perpendicularEnd.y=E.end.y,!0}},"./tools/annotation/bidirectionalTool/moveHandle/moveLongLine/updatePerpendicularLine.js":
/*!***********************************************************************************************!*\
          !*** ./tools/annotation/bidirectionalTool/moveHandle/moveLongLine/updatePerpendicularLine.js ***!
          \***********************************************************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return l});var r=e(
/*! ../../utils/getLineVector */
"./tools/annotation/bidirectionalTool/utils/getLineVector.js"),d=e(
/*! ../../utils/getDistanceWithPixelSpacing */
"./tools/annotation/bidirectionalTool/utils/getDistanceWithPixelSpacing.js");function l(s,g){var i=s.columnPixelSpacing,f=s.rowPixelSpacing,m=s.start,o=s.perpendicularStart,n=s.perpendicularEnd,a=s.intersection,u=s.fixedPoint,c=Object(d.default)(i,f,o,a),v=Object(d.default)(i,f,n,a),h=Object(r.default)(i,f,u,g),E=u===m?1:-1,M=E*f,O=E*i;return{start:{x:g.x+h.y*c*M,y:g.y+h.x*c*O*-1},end:{x:g.x+h.y*v*M*-1,y:g.y+h.x*v*O}}}},"./tools/annotation/bidirectionalTool/moveHandle/movePerpendicularLine/getDirectionMultiplier.js":
/*!*******************************************************************************************************!*\
          !*** ./tools/annotation/bidirectionalTool/moveHandle/movePerpendicularLine/getDirectionMultiplier.js ***!
          \*******************************************************************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return d});var r=e(
/*! ./isPerpendicularEndFixed.js */
"./tools/annotation/bidirectionalTool/moveHandle/movePerpendicularLine/isPerpendicularEndFixed.js");function d(l,s){return Object(r.default)(l,s)?-1:1}},"./tools/annotation/bidirectionalTool/moveHandle/movePerpendicularLine/getHelperLine.js":
/*!**********************************************************************************************!*\
          !*** ./tools/annotation/bidirectionalTool/moveHandle/movePerpendicularLine/getHelperLine.js ***!
          \**********************************************************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return d});var r=e(
/*! ./getDirectionMultiplier */
"./tools/annotation/bidirectionalTool/moveHandle/movePerpendicularLine/getDirectionMultiplier.js");function d(l,s,g){var i=l.columnPixelSpacing,f=l.rowPixelSpacing,m=l.perpendicularEnd,o=l.fixedPoint,n=Number.MAX_SAFE_INTEGER,a=Object(r.default)(o,m)*n;return{start:s,end:{x:s.x+g.y*f*a,y:s.y+g.x*i*a*-1}}}},"./tools/annotation/bidirectionalTool/moveHandle/movePerpendicularLine/getMovingPoint.js":
/*!***********************************************************************************************!*\
          !*** ./tools/annotation/bidirectionalTool/moveHandle/movePerpendicularLine/getMovingPoint.js ***!
          \***********************************************************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return d});var r=e(
/*! ./isPerpendicularEndFixed.js */
"./tools/annotation/bidirectionalTool/moveHandle/movePerpendicularLine/isPerpendicularEndFixed.js");function d(l,s,g){return Object(r.default)(l,g)?s:g}},"./tools/annotation/bidirectionalTool/moveHandle/movePerpendicularLine/isPerpendicularEndFixed.js":
/*!********************************************************************************************************!*\
          !*** ./tools/annotation/bidirectionalTool/moveHandle/movePerpendicularLine/isPerpendicularEndFixed.js ***!
          \********************************************************************************************************/
/*! exports provided: default */function(b,t,e){"use strict";function r(d,l){return d===l}e.r(t),e.d(t,"default",function(){return r})},"./tools/annotation/bidirectionalTool/moveHandle/movePerpendicularLine/lineHasLength.js":
/*!**********************************************************************************************!*\
          !*** ./tools/annotation/bidirectionalTool/moveHandle/movePerpendicularLine/lineHasLength.js ***!
          \**********************************************************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return d});var r=e(
/*! ../../utils/getDistanceWithPixelSpacing */
"./tools/annotation/bidirectionalTool/utils/getDistanceWithPixelSpacing.js");function d(l,s,g){return 0!==Object(r.default)(l,s,g.start,g.end)}},"./tools/annotation/bidirectionalTool/moveHandle/movePerpendicularLine/movePerpendicularLine.js":
/*!******************************************************************************************************!*\
          !*** ./tools/annotation/bidirectionalTool/moveHandle/movePerpendicularLine/movePerpendicularLine.js ***!
          \******************************************************************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return f});var r=e(
/*! ./../../../../../externalModules.js */
"./externalModules.js"),d=e(
/*! ../../utils/getLineVector.js */
"./tools/annotation/bidirectionalTool/utils/getLineVector.js"),l=e(
/*! ../getBaseData.js */
"./tools/annotation/bidirectionalTool/moveHandle/getBaseData.js"),s=e(
/*! ./lineHasLength.js */
"./tools/annotation/bidirectionalTool/moveHandle/movePerpendicularLine/lineHasLength.js"),g=e(
/*! ./getHelperLine.js */
"./tools/annotation/bidirectionalTool/moveHandle/movePerpendicularLine/getHelperLine.js"),i=e(
/*! ./updatePerpendicularLine.js */
"./tools/annotation/bidirectionalTool/moveHandle/movePerpendicularLine/updatePerpendicularLine.js");function f(m,o,n,a){var u=r.default.cornerstoneMath.lineSegment,c=Object(l.default)(o,n,a),v=c.columnPixelSpacing,h=c.rowPixelSpacing,E=c.start,M=c.longLine,O=c.intersection;if(!Object(s.default)(v,h,M))return!1;var P=Object(d.default)(v,h,E,O),T=Object(g.default)(c,m,P),D=u.intersectLine(M,T);if(!D)return!1;var y=Object(i.default)(c,D,T,P);return o.handles.perpendicularStart.x=y.start.x,o.handles.perpendicularStart.y=y.start.y,o.handles.perpendicularEnd.x=y.end.x,o.handles.perpendicularEnd.y=y.end.y,!0}},"./tools/annotation/bidirectionalTool/moveHandle/movePerpendicularLine/updatePerpendicularLine.js":
/*!********************************************************************************************************!*\
          !*** ./tools/annotation/bidirectionalTool/moveHandle/movePerpendicularLine/updatePerpendicularLine.js ***!
          \********************************************************************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return g});var r=e(
/*! @babel/runtime/helpers/defineProperty */
"../node_modules/@babel/runtime/helpers/defineProperty.js"),d=e.n(r),l=e(
/*! ./getDirectionMultiplier */
"./tools/annotation/bidirectionalTool/moveHandle/movePerpendicularLine/getDirectionMultiplier.js"),s=e(
/*! ./getMovingPoint */
"./tools/annotation/bidirectionalTool/moveHandle/movePerpendicularLine/getMovingPoint.js");function g(i,f,m,o){var n,a=i.columnPixelSpacing,u=i.rowPixelSpacing,c=i.fixedPoint,v=i.perpendicularStart,h=i.perpendicularEnd,E=i.distanceToFixed,M=Object(l.default)(c,h)*E,P=Object(s.default)(c,v,h)===v,T=P?"start":"end",D=P?"end":"start";return n={},d()(n,T,{x:m.start.x,y:m.start.y}),d()(n,D,{x:f.x+o.y*u*M,y:f.y+o.x*a*M*-1}),n}},"./tools/annotation/bidirectionalTool/moveHandle/setHandlesPosition.js":
/*!*****************************************************************************!*\
          !*** ./tools/annotation/bidirectionalTool/moveHandle/setHandlesPosition.js ***!
          \*****************************************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./../../../../externalModules.js */
"./externalModules.js"),d=e(
/*! ./moveLongLine/moveLongLine.js */
"./tools/annotation/bidirectionalTool/moveHandle/moveLongLine/moveLongLine.js"),l=e(
/*! ./movePerpendicularLine/movePerpendicularLine.js */
"./tools/annotation/bidirectionalTool/moveHandle/movePerpendicularLine/movePerpendicularLine.js");t.default=function(s,g,i,f){var o,a,u,c,v={},h={},E={x:g.currentPoints.image.x+f.x,y:g.currentPoints.image.y+f.y};0===s.index?Object(d.default)(E,i,g,i.handles.end)?(s.x=E.x,s.y=E.y):(g.currentPoints.image.x=s.x,g.currentPoints.image.y=s.y):1===s.index?Object(d.default)(E,i,g,i.handles.start)?(s.x=E.x,s.y=E.y):(g.currentPoints.image.x=s.x,g.currentPoints.image.y=s.y):2===s.index?(o=!1,v.start={x:i.handles.start.x,y:i.handles.start.y},v.end={x:i.handles.end.x,y:i.handles.end.y},h.start={x:i.handles.perpendicularEnd.x,y:i.handles.perpendicularEnd.y},h.end={x:E.x,y:E.y},(a=r.default.cornerstoneMath.lineSegment.intersectLine(v,h))||(h.end={x:i.handles.perpendicularStart.x,y:i.handles.perpendicularStart.y},a=r.default.cornerstoneMath.lineSegment.intersectLine(v,h),u=r.default.cornerstoneMath.point.distance(a,i.handles.start),c=r.default.cornerstoneMath.point.distance(a,i.handles.end),(!a||u<3||c<3)&&(o=!0)),o||Object(l.default)(E,i,g,i.handles.perpendicularEnd)||(g.currentPoints.image.x=i.handles.perpendicularStart.x,g.currentPoints.image.y=i.handles.perpendicularStart.y)):3===s.index&&(o=!1,v.start={x:i.handles.start.x,y:i.handles.start.y},v.end={x:i.handles.end.x,y:i.handles.end.y},h.start={x:i.handles.perpendicularStart.x,y:i.handles.perpendicularStart.y},h.end={x:E.x,y:E.y},(a=r.default.cornerstoneMath.lineSegment.intersectLine(v,h))||(h.end={x:i.handles.perpendicularEnd.x,y:i.handles.perpendicularEnd.y},a=r.default.cornerstoneMath.lineSegment.intersectLine(v,h),u=r.default.cornerstoneMath.point.distance(a,i.handles.start),c=r.default.cornerstoneMath.point.distance(a,i.handles.end),(!a||u<3||c<3)&&(o=!0)),o||Object(l.default)(E,i,g,i.handles.perpendicularStart)||(g.currentPoints.image.x=i.handles.perpendicularEnd.x,g.currentPoints.image.y=i.handles.perpendicularEnd.y))}},"./tools/annotation/bidirectionalTool/moveHandle/touchMoveHandle.js":
/*!**************************************************************************!*\
          !*** ./tools/annotation/bidirectionalTool/moveHandle/touchMoveHandle.js ***!
          \**************************************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./../../../../externalModules.js */
"./externalModules.js"),d=e(
/*! ../../../../store/index.js */
"./store/index.js"),l=e(
/*! ./../../../../events.js */
"./events.js"),s=e(
/*! ./setHandlesPosition.js */
"./tools/annotation/bidirectionalTool/moveHandle/setHandlesPosition.js"),g=e(
/*! ../../../../util/getActiveTool */
"./util/getActiveTool.js"),i=e(
/*! ../../../base/BaseAnnotationTool */
"./tools/base/BaseAnnotationTool.js"),f=[l.default.TOUCH_END,l.default.TOUCH_DRAG_END,l.default.TOUCH_PINCH,l.default.TOUCH_PRESS,l.default.TAP];t.default=function(m,o,n,a,u,c){var v=m.element,h=m.image,E=m.buttons,M={x:a.x-m.currentPoints.image.x,y:a.y-m.currentPoints.image.y},O=function(D){var y=D.detail;a.hasMoved=!0,null==a.index?(a.x=y.currentPoints.image.x+M.x,a.y=y.currentPoints.image.y+M.y):Object(s.default)(a,y,n,M),c&&(a.x=Math.max(a.x,0),a.x=Math.min(a.x,y.image.width),a.y=Math.max(a.y,0),a.y=Math.min(a.y,y.image.height)),n.invalidated=!0,r.default.cornerstone.updateImage(v);var j=Object(g.default)(v,E,"touch");j instanceof i.default&&j.updateCachedStats(h,v,n),r.default.cornerstone.triggerEvent(v,l.default.MEASUREMENT_MODIFIED,{toolName:o,toolType:o,element:v,measurementData:n})};a.active=!0,d.state.isToolLocked=!0,v.addEventListener(l.default.TOUCH_DRAG,O);var P=function T(){a.active=!1,d.state.isToolLocked=!1,v.removeEventListener(l.default.TOUCH_DRAG,O),f.forEach(function(D){v.removeEventListener(D,T)}),r.default.cornerstone.updateImage(v),"function"==typeof u&&u()};f.forEach(function(T){v.addEventListener(T,P)})}},"./tools/annotation/bidirectionalTool/pointNearTool.js":
/*!*************************************************************!*\
          !*** ./tools/annotation/bidirectionalTool/pointNearTool.js ***!
          \*************************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../../../util/getProximityThreshold.js */
"./util/getProximityThreshold.js"),d=e(
/*! ./../../../externalModules.js */
"./externalModules.js"),l=e(
/*! ./../../../util/pointInsideBoundingBox.js */
"./util/pointInsideBoundingBox.js");t.default=function(g,i,f){var m=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"mouse",o=d.default.cornerstone,n=d.default.cornerstoneMath,a=i.handles,u={start:o.pixelToCanvas(g,a.start),end:o.pixelToCanvas(g,a.end)},c=n.lineSegment.distanceToPoint(u,f);if(Object(l.default)(a.textBox,f))return!0;var v=Object(r.default)(m,"Bidirectional");return!!function(i,f,m,o){var n=d.default.cornerstone,a=d.default.cornerstoneMath,u={start:n.pixelToCanvas(i,f.perpendicularStart),end:n.pixelToCanvas(i,f.perpendicularEnd)};return a.lineSegment.distanceToPoint(u,m)<o}(g,a,f,v)||c<v}},"./tools/annotation/bidirectionalTool/renderToolData.js":
/*!**************************************************************!*\
          !*** ./tools/annotation/bidirectionalTool/renderToolData.js ***!
          \**************************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! @babel/runtime/helpers/toConsumableArray */
"../node_modules/@babel/runtime/helpers/toConsumableArray.js"),d=e.n(r),l=e(
/*! ./../../../drawing/drawHandles.js */
"./drawing/drawHandles.js"),s=e(
/*! ./utils/updatePerpendicularLineHandles.js */
"./tools/annotation/bidirectionalTool/utils/updatePerpendicularLineHandles.js"),g=e(
/*! ../../../store/index */
"./store/index.js"),i=e(
/*! ./../../../stateManagement/toolStyle.js */
"./stateManagement/toolStyle.js"),f=e(
/*! ./../../../stateManagement/toolColors.js */
"./stateManagement/toolColors.js"),m=e(
/*! ./../../../stateManagement/toolState.js */
"./stateManagement/toolState.js"),o=e(
/*! ./../../../drawing/index.js */
"./drawing/index.js"),n=e(
/*! ./../../../drawing/drawLinkedTextBox.js */
"./drawing/drawLinkedTextBox.js"),a=e(
/*! ../../../util/getPixelSpacing */
"./util/getPixelSpacing.js");t.default=function(c){var v=this,h=c.detail,E=h.element,M=h.canvasContext,O=h.image,P=this.configuration,T=P.handleRadius,D=P.drawHandlesOnHover,y=P.hideHandlesIfMoving,j=P.renderDashed,C=Object(g.getModule)("globalConfiguration").configuration.lineDash,I=Object(m.getToolState)(E,this.name);if(I){var B=Object(a.default)(O),S=B.rowPixelSpacing,K=B.colPixelSpacing;if(S&&K)for(var W,H=Object(o.getNewContext)(M.canvas),L=i.default.getToolWidth(),x=function(p){var U=I.data[p];if(!1===U.visible)return"continue";W=f.default.getColorIfActive(U),!0===U.invalidated&&(U.longestDiameter&&U.shortestDiameter?v.throttledUpdateCachedStats(O,E,U):v.updateCachedStats(O,E,U)),Object(o.draw)(H,function(F){Object(o.setShadow)(F,v.configuration);var N=U.handles,V=N.start,Y=N.end,J=N.perpendicularStart,ee=N.perpendicularEnd,q=N.textBox,le={color:W},Q={color:W,strokeWidth:X};j&&(le.lineDash=C,Q.lineDash=C),Object(o.drawLine)(F,E,V,Y,le);var X=L;Object(s.default)(h,U),Object(o.drawLine)(F,E,J,ee,Q);var w={color:W,handleRadius:T,drawHandlesIfActive:D,hideHandlesIfMoving:y};v.configuration.drawHandles&&Object(l.default)(F,h,U.handles,w);var ae=u(U,S,K);Object(n.default)(F,E,q,ae,U.handles,function(oe){return[oe.start,oe.end,oe.perpendicularStart,oe.perpendicularEnd]},W,L,10,!0)})},_=0;_<I.data.length;_++)x(_)}};var u=function(v,h,E){var M=" mm";(!h||!E)&&(M=" pixels");var O=" L ".concat(v.longestDiameter).concat(M),P=" W ".concat(v.shortestDiameter).concat(M),T=v.labels;return T&&Array.isArray(T)?[].concat(d()(T),[O,P]):[O,P]}},"./tools/annotation/bidirectionalTool/utils/calculateLongestAndShortestDiameters.js":
/*!******************************************************************************************!*\
          !*** ./tools/annotation/bidirectionalTool/utils/calculateLongestAndShortestDiameters.js ***!
          \******************************************************************************************/
/*! exports provided: default */function(b,t,e){"use strict";function r(d,l){var s=l.rowPixelSpacing,g=l.colPixelSpacing,i=d.handles,f=i.start,m=i.end,o=i.perpendicularStart,n=i.perpendicularEnd,a=(f.x-m.x)*(g||1),u=(f.y-m.y)*(s||1),c=Math.sqrt(a*a+u*u),v=(o.x-n.x)*(g||1),h=(o.y-n.y)*(s||1),E=Math.sqrt(v*v+h*h);if(E||(E=0),E>c){var O=c;c=E,E=O}return{longestDiameter:c.toFixed(1),shortestDiameter:E.toFixed(1)}}e.r(t),e.d(t,"default",function(){return r})},"./tools/annotation/bidirectionalTool/utils/getDistanceWithPixelSpacing.js":
/*!*********************************************************************************!*\
          !*** ./tools/annotation/bidirectionalTool/utils/getDistanceWithPixelSpacing.js ***!
          \*********************************************************************************/
/*! exports provided: default */function(b,t,e){"use strict";function r(d,l,s,g){var i=(s.x-g.x)/l,f=(s.y-g.y)/d;return Math.sqrt(i*i+f*f)}e.r(t),e.d(t,"default",function(){return r})},"./tools/annotation/bidirectionalTool/utils/getLineVector.js":
/*!*******************************************************************!*\
          !*** ./tools/annotation/bidirectionalTool/utils/getLineVector.js ***!
          \*******************************************************************/
/*! exports provided: default */function(b,t,e){"use strict";function r(d,l,s,g){var i=(s.x-g.x)*d,f=(s.y-g.y)*l,m=Math.sqrt(i*i+f*f);return{x:i/m,y:f/m,length:m}}e.r(t),e.d(t,"default",function(){return r})},"./tools/annotation/bidirectionalTool/utils/updatePerpendicularLineHandles.js":
/*!************************************************************************************!*\
          !*** ./tools/annotation/bidirectionalTool/utils/updatePerpendicularLineHandles.js ***!
          \************************************************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return d});var r=e(
/*! ./getLineVector */
"./tools/annotation/bidirectionalTool/utils/getLineVector.js");function d(l,s){if(!s.handles.perpendicularStart.locked)return!1;var g,i,f,m,o=s.handles,n=o.start,a=o.end,u=l.image,c=u.columnPixelSpacing,v=void 0===c?1:c,h=u.rowPixelSpacing,E=void 0===h?1:h;if(n.x===a.x&&n.y===a.y)g=n.x,i=n.y,f=a.x,m=a.y;else{var M={x:(n.x+a.x)/2,y:(n.y+a.y)/2},O=Object(r.default)(v,E,n,a),P=O.length/2,T=P/(2*E),D=P/(2*v);g=M.x+D*O.y,i=M.y-T*O.x,f=M.x-D*O.y,m=M.y+T*O.x}return s.handles.perpendicularStart.x=g,s.handles.perpendicularStart.y=i,s.handles.perpendicularEnd.x=f,s.handles.perpendicularEnd.y=m,!0}},"./tools/annotation/index.js":
/*!***********************************!*\
          !*** ./tools/annotation/index.js ***!
          \***********************************/
/*! exports provided: AngleTool, ArrowAnnotateTool, BidirectionalTool, CircleRoiTool, CobbAngleTool, EllipticalRoiTool, FreehandRoiTool, LengthTool, ProbeTool, RectangleRoiTool, TextMarkerTool, default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./AngleTool.js */
"./tools/annotation/AngleTool.js"),d=e(
/*! ./ArrowAnnotateTool.js */
"./tools/annotation/ArrowAnnotateTool.js"),l=e(
/*! ./BidirectionalTool.js */
"./tools/annotation/BidirectionalTool.js"),s=e(
/*! ./CircleRoiTool.js */
"./tools/annotation/CircleRoiTool.js"),g=e(
/*! ./CobbAngleTool.js */
"./tools/annotation/CobbAngleTool.js"),i=e(
/*! ./EllipticalRoiTool.js */
"./tools/annotation/EllipticalRoiTool.js"),f=e(
/*! ./FreehandRoiTool.js */
"./tools/annotation/FreehandRoiTool.js"),m=e(
/*! ./LengthTool.js */
"./tools/annotation/LengthTool.js"),o=e(
/*! ./ProbeTool.js */
"./tools/annotation/ProbeTool.js"),n=e(
/*! ./RectangleRoiTool.js */
"./tools/annotation/RectangleRoiTool.js"),a=e(
/*! ./TextMarkerTool.js */
"./tools/annotation/TextMarkerTool.js");e.d(t,"AngleTool",function(){return r.default}),e.d(t,"ArrowAnnotateTool",function(){return d.default}),e.d(t,"BidirectionalTool",function(){return l.default}),e.d(t,"CircleRoiTool",function(){return s.default}),e.d(t,"CobbAngleTool",function(){return g.default}),e.d(t,"EllipticalRoiTool",function(){return i.default}),e.d(t,"FreehandRoiTool",function(){return f.default}),e.d(t,"LengthTool",function(){return m.default}),e.d(t,"ProbeTool",function(){return o.default}),e.d(t,"RectangleRoiTool",function(){return n.default}),e.d(t,"TextMarkerTool",function(){return a.default}),t.default={AngleTool:r.default,ArrowAnnotateTool:d.default,BidirectionalTool:l.default,CircleRoiTool:s.default,CobbAngleTool:g.default,EllipticalRoiTool:i.default,FreehandRoiTool:f.default,LengthTool:m.default,ProbeTool:o.default,RectangleRoiTool:n.default,TextMarkerTool:a.default}},"./tools/base/BaseAnnotationTool.js":
/*!******************************************!*\
          !*** ./tools/base/BaseAnnotationTool.js ***!
          \******************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=e.n(f),o=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),n=e.n(o),a=e(
/*! ./BaseTool.js */
"./tools/base/BaseTool.js"),u=e(
/*! ./../../stateManagement/toolState.js */
"./stateManagement/toolState.js"),c=e(
/*! ./../../manipulators/handleActivator.js */
"./manipulators/handleActivator.js"),v=e(
/*! ./../../util/findAndMoveHelpers.js */
"./util/findAndMoveHelpers.js"),h=e(
/*! ../../util/logger */
"./util/logger.js"),E=Object(h.getLogger)("baseAnnotationTool"),M=function(O){function P(){return d()(this,P),i()(this,m()(P).apply(this,arguments))}return n()(P,O),s()(P,[{key:"createNewMeasurement",value:function(D){throw new Error("Method createNewMeasurement not implemented for ".concat(this.name,"."))}},{key:"pointNearTool",value:function(D,y,j){throw new Error("Method pointNearTool not implemented for ".concat(this.name,"."))}},{key:"distanceFromPoint",value:function(D,y,j){throw new Error("Method distanceFromPoint not implemented for ".concat(this.name,"."))}},{key:"renderToolData",value:function(D){throw new Error("renderToolData not implemented for ".concat(this.name,"."))}},{key:"mouseMoveCallback",value:function(D){for(var y=D.detail,j=y.element,I=y.currentPoints.canvas,B=Object(u.getToolState)(j,this.name),S=!1,K=0;K<B.data.length;K++){var H=B.data[K];!0===Object(c.default)(j,H.handles,I)&&(S=!0);var W=this.pointNearTool(j,H,I,"mouse")&&!H.active,L=!this.pointNearTool(j,H,I,"mouse")&&H.active;(W||L)&&(H.active=!H.active,S=!0)}return S}},{key:"handleSelectedCallback",value:function(D,y,j){var C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"mouse";Object(v.moveHandleNearImagePoint)(D,this,y,j,C)}},{key:"toolSelectedCallback",value:function(D,y){var j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mouse";Object(v.moveAnnotation)(D,this,y,j)}},{key:"updateCachedStats",value:function(D,y,j){E.warn("updateCachedStats not implemented for ".concat(this.name,"."))}}]),P}(a.default);t.default=M},"./tools/base/BaseBrushTool.js":
/*!*************************************!*\
          !*** ./tools/base/BaseBrushTool.js ***!
          \*************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=e.n(f),o=e(
/*! @babel/runtime/helpers/assertThisInitialized */
"../node_modules/@babel/runtime/helpers/assertThisInitialized.js"),n=e.n(o),a=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),u=e.n(a),c=e(
/*! ./BaseTool.js */
"./tools/base/BaseTool.js"),v=e(
/*! ./../../events.js */
"./events.js"),h=e(
/*! ./../../externalModules.js */
"./externalModules.js"),E=e(
/*! ./../../store/isToolActiveForElement.js */
"./store/isToolActiveForElement.js"),M=e(
/*! ./../../store/index.js */
"./store/index.js"),O=e(
/*! ../../util/segmentation */
"./util/segmentation/index.js"),P=Object(M.getModule)("segmentation"),T=function(D){function y(j){var C,I=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return d()(this,y),I.configuration||(I.configuration={alwaysEraseOnClick:!1}),(C=i()(this,m()(y).call(this,j,I))).updateOnMouseMove=!0,C.hideDefaultCursor=!0,C._drawing=!1,C._drawingMouseUpCallback=C._drawingMouseUpCallback.bind(n()(C)),C}return u()(y,D),s()(y,[{key:"renderBrush",value:function(C){throw new Error("Method renderBrush not implemented for ".concat(this.name,"."))}},{key:"_paint",value:function(C){throw new Error("Method _paint not implemented for ".concat(this.name,"."))}},{key:"mouseDragCallback",value:function(C){this._lastImageCoords=C.detail.currentPoints.image,this._drawing&&this._paint(C)}},{key:"preMouseDownCallback",value:function(C){var I=C.detail,B=I.element,S=I.currentPoints;return this._startPainting(C),this._lastImageCoords=S.image,this._drawing=!0,this._startListeningForMouseUp(B),this._paint(C),!0}},{key:"_startPainting",value:function(C){var I=C.detail,S=P.configuration,H=P.getters.labelmap2D(I.element),W=H.labelmap2D,L=H.labelmap3D,x=H.currentImageIdIndex,_=H.activeLabelmapIndex,R=this._isCtrlDown(I)||this.configuration.alwaysEraseOnClick;if(this.paintEventData={labelmap2D:W,labelmap3D:L,currentImageIdIndex:x,activeLabelmapIndex:_,shouldErase:R},S.storeHistory){var A=W.pixelData.slice();this.paintEventData.previousPixelData=A}}},{key:"_endPainting",value:function(C){for(var I=P.configuration,B=P.setters,S=this.paintEventData,K=S.labelmap2D,H=S.currentImageIdIndex,L=new Set(K.pixelData).values(),x=[],_=!1;!_;){var R=L.next();(_=R.done)||x.push(R.value)}if(K.segmentsOnLabelmap=x,I.storeHistory){var A=this.paintEventData.previousPixelData,p=K.pixelData,U={imageIdIndex:H,diff:Object(O.getDiffBetweenPixelData)(A,p)};B.pushState(this.element,[U])}Object(O.triggerLabelmapModifiedEvent)(this.element)}},{key:"mouseMoveCallback",value:function(C){this._lastImageCoords=C.detail.currentPoints.image}},{key:"renderToolData",value:function(C){var B=C.detail.element;Object(E.default)(B,this.name)&&this.renderBrush(C)}},{key:"passiveCallback",value:function(C){try{h.default.cornerstone.updateImage(this.element)}catch{return}}},{key:"_drawingMouseUpCallback",value:function(C){var B=C.detail.element;this._endPainting(C),this._drawing=!1,this._mouseUpRender=!0,this._stopListeningForMouseUp(B)}},{key:"newImageCallback",value:function(C){this._drawing&&(this._endPainting(C),this._startPainting(C))}},{key:"_startListeningForMouseUp",value:function(C){C.removeEventListener(v.default.MOUSE_UP,this._drawingMouseUpCallback),C.removeEventListener(v.default.MOUSE_CLICK,this._drawingMouseUpCallback),C.addEventListener(v.default.MOUSE_UP,this._drawingMouseUpCallback),C.addEventListener(v.default.MOUSE_CLICK,this._drawingMouseUpCallback),h.default.cornerstone.updateImage(C)}},{key:"_stopListeningForMouseUp",value:function(C){C.removeEventListener(v.default.MOUSE_UP,this._drawingMouseUpCallback),C.removeEventListener(v.default.MOUSE_CLICK,this._drawingMouseUpCallback),h.default.cornerstone.updateImage(C)}},{key:"increaseBrushSize",value:function(){var I=P.setters,B=P.configuration.radius,S=Math.floor(1.2*B);S===B&&(S+=1),I.radius(S)}},{key:"decreaseBrushSize",value:function(){var I=P.setters,S=Math.floor(.8*P.configuration.radius);I.radius(S)}},{key:"_isCtrlDown",value:function(C){return C.event&&C.event.ctrlKey||C.ctrlKey}}]),y}(c.default);t.default=T},"./tools/base/BaseTool.js":
/*!********************************!*\
          !*** ./tools/base/BaseTool.js ***!
          \********************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! @babel/runtime/helpers/typeof */
"../node_modules/@babel/runtime/helpers/typeof.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),i=e.n(g),f=e(
/*! ./../../mixins/index.js */
"./mixins/index.js"),m=e(
/*! ../../util/logger.js */
"./util/logger.js"),o=e(
/*! ./../../util/deepmerge.js */
"./util/deepmerge.js"),n=e(
/*! ../../store/setToolCursor.js */
"./store/setToolCursor.js"),a=e(
/*! ../../store */
"./store/index.js"),u=Object(m.getLogger)("tools:base:BaseTool"),c=Object(a.getModule)("globalConfiguration");t.default=function(){function h(E,M){s()(this,h),this.initialConfiguration=Object(o.default)(M,E);var O=this.initialConfiguration,T=O.strategies,D=O.defaultStrategy,y=O.configuration,j=O.supportedInteractionTypes,C=O.mixins,I=O.svgCursor;this.name=O.name,this.mode="disabled",this.element=void 0,this.supportedInteractionTypes=j||[],this.strategies=T||{},this.defaultStrategy=D||Object.keys(this.strategies)[0]||void 0,this.activeStrategy=this.defaultStrategy,I&&(this.svgCursor=I),this._options={},this._configuration=Object.assign({},y),this.updateOnMouseMove=!1,this.hideDefaultCursor=!1,C&&C.length&&this._applyMixins(C),this._cursors=Object.assign({},this.initialConfiguration.cursors);var B=this.defaultStrategy&&this._cursors[this.activeStrategy];B&&(this.svgCursor=B)}return i()(h,[{key:"mergeOptions",value:function(M){this._options=Object.assign({},this._options,M)}},{key:"clearOptions",value:function(){this._options={}}},{key:"applyActiveStrategy",value:function(M,O){return this.strategies[this.activeStrategy].call(this,M,O)}},{key:"_applyMixins",value:function(M){for(var O=0;O<M.length;O++){var P=f.default["".concat(M[O])];"object"===d()(P)?(Object.assign(this,P),"function"==typeof this.initializeMixin&&this.initializeMixin()):u.warn("".concat(this.name,": mixin ").concat(f.default[O]," does not exist."))}"function"===this.initializeMixin&&delete this.initializeMixin}},{key:"setActiveStrategy",value:function(M){this.activeStrategy=M,c.configuration.showSVGCursors&&this.changeCursor(this.element,M)}},{key:"changeCursor",value:function(M,O){if(M){var P=this._cursors[O];P&&(this.svgCursor=P,"active"===this.mode&&Object(n.setToolCursor)(M,P))}}},{key:"configuration",get:function(){return this._configuration},set:function(M){this._configuration=M}},{key:"options",get:function(){return this._options}}],[{key:"configuration",get:function(){}}]),h}()},"./tools/base/index.js":
/*!*****************************!*\
          !*** ./tools/base/index.js ***!
          \*****************************/
/*! exports provided: BaseAnnotationTool, BaseBrushTool, BaseTool, default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./BaseAnnotationTool.js */
"./tools/base/BaseAnnotationTool.js"),d=e(
/*! ./BaseTool.js */
"./tools/base/BaseTool.js"),l=e(
/*! ./BaseBrushTool.js */
"./tools/base/BaseBrushTool.js");e.d(t,"BaseAnnotationTool",function(){return r.default}),e.d(t,"BaseBrushTool",function(){return l.default}),e.d(t,"BaseTool",function(){return d.default}),t.default={BaseAnnotationTool:r.default,BaseBrushTool:l.default,BaseTool:d.default}},"./tools/cursors/MouseCursor.js":
/*!**************************************!*\
          !*** ./tools/cursors/MouseCursor.js ***!
          \**************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return m});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),s=e.n(l),g=e(
/*! ../../stateManagement/toolColors.js */
"./stateManagement/toolColors.js"),f=e(
/*! ../../store/index.js */
"./store/index.js").modules.cursor,m=function(){function o(n,a){d()(this,o),this.iconGroupString=n,this.options=Object.assign({},f.getters.defaultOptions(),a)}return s()(o,[{key:"getIconSVG",value:function(){var u=this._generateIconSVGString(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return new Blob([u],{type:"image/svg+xml"})}},{key:"getIconSVGString",value:function(){return this._generateIconSVGString(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}},{key:"getIconWithPointerSVG",value:function(){var u=this._generateIconWithPointerSVGString(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return new Blob([u],{type:"image/svg+xml"})}},{key:"getIconWithPointerString",value:function(){return this._generateIconWithPointerSVGString(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}},{key:"_generateIconWithPointerSVGString",value:function(){var u=Object.assign({},this.options,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),c=u.mousePointerGroupString,v=u.iconSize,h=u.viewBox,E=v/Math.max(h.x,h.y),M=16+v,O='\n        <svg\n        data-icon="cursor" role="img" xmlns="http://www.w3.org/2000/svg"\n        width="'.concat(M,'" height="').concat(M,'" viewBox="0 0 ').concat(M," ").concat(M,'"\n      >\n        <g>\n          ').concat(c,'\n        </g>\n        <g transform="translate(16, 16) scale(').concat(E,')">\n          ').concat(this.iconGroupString,"\n        </g>\n      </svg>");return this._injectColors(O,u)}},{key:"_generateIconSVGString",value:function(){var u=Object.assign({},this.options,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),c=u.iconSize,v=u.viewBox,h='\n      <svg\n        data-icon="cursor" role="img" xmlns="http://www.w3.org/2000/svg"\n        width="'.concat(c,'" height="').concat(c,'" viewBox="0 0\n        ').concat(v.x," ").concat(v.y,'"\n      >\n        ').concat(this.iconGroupString,"\n      </svg>");return this._injectColors(h,u)}},{key:"_injectColors",value:function(a){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=u.activeColor||g.default.getActiveColor(),v=u.toolColor||g.default.getToolColor(),h=u.fillColor||g.default.getFillColor();return a.replace(/ACTIVE_COLOR/g,"".concat(c)).replace(/TOOL_COLOR/g,"".concat(v)).replace(/FILL_COLOR/g,"".concat(h))}},{key:"mousePoint",get:function(){var a=this.options.mousePoint;return"".concat(a.x," ").concat(a.y)}}]),o}()},"./tools/cursors/index.js":
/*!********************************!*\
          !*** ./tools/cursors/index.js ***!
          \********************************/
/*! exports provided: angleCursor, arrowAnnotateCursor, bidirectionalCursor, cobbAngleCursor, circleRoiCursor, ellipticalRoiCursor, freehandRoiCursor, freehandRoiSculptorCursor, lengthCursor, probeCursor, rectangleRoiCursor, textMarkerCursor, crosshairsCursor, eraserCursor, magnifyCursor, panCursor, rotateCursor, stackScrollCursor, wwwcRegionCursor, wwwcCursor, zoomCursor, freehandEraseInsideCursor, freehandFillInsideCursor, freehandEraseOutsideCursor, freehandFillOutsideCursor, segRectangleEraseInsideCursor, segRectangleFillInsideCursor, segRectangleEraseOutsideCursor, segRectangleFillOutsideCursor, segCircleEraseInsideCursor, segCircleFillInsideCursor, segCircleEraseOutsideCursor, segCircleFillOutsideCursor */function(b,t,e){"use strict";e.r(t),e.d(t,"angleCursor",function(){return d}),e.d(t,"arrowAnnotateCursor",function(){return l}),e.d(t,"bidirectionalCursor",function(){return s}),e.d(t,"cobbAngleCursor",function(){return g}),e.d(t,"circleRoiCursor",function(){return i}),e.d(t,"ellipticalRoiCursor",function(){return f}),e.d(t,"freehandRoiCursor",function(){return m}),e.d(t,"freehandRoiSculptorCursor",function(){return o}),e.d(t,"lengthCursor",function(){return n}),e.d(t,"probeCursor",function(){return a}),e.d(t,"rectangleRoiCursor",function(){return u}),e.d(t,"textMarkerCursor",function(){return c}),e.d(t,"crosshairsCursor",function(){return v}),e.d(t,"eraserCursor",function(){return h}),e.d(t,"magnifyCursor",function(){return E}),e.d(t,"panCursor",function(){return M}),e.d(t,"rotateCursor",function(){return O}),e.d(t,"stackScrollCursor",function(){return P}),e.d(t,"wwwcRegionCursor",function(){return T}),e.d(t,"wwwcCursor",function(){return D}),e.d(t,"zoomCursor",function(){return y}),e.d(t,"freehandEraseInsideCursor",function(){return H}),e.d(t,"freehandFillInsideCursor",function(){return W}),e.d(t,"freehandEraseOutsideCursor",function(){return L}),e.d(t,"freehandFillOutsideCursor",function(){return x}),e.d(t,"segRectangleEraseInsideCursor",function(){return _}),e.d(t,"segRectangleFillInsideCursor",function(){return R}),e.d(t,"segRectangleEraseOutsideCursor",function(){return A}),e.d(t,"segRectangleFillOutsideCursor",function(){return p}),e.d(t,"segCircleEraseInsideCursor",function(){return U}),e.d(t,"segCircleFillInsideCursor",function(){return F}),e.d(t,"segCircleEraseOutsideCursor",function(){return N}),e.d(t,"segCircleFillOutsideCursor",function(){return V});var r=e(
/*! ./MouseCursor.js */
"./tools/cursors/MouseCursor.js"),d=new r.default('<path fill="ACTIVE_COLOR" d="M1203 544q0 13-10 23l-393 393 393 393q10 10 10 23t-10 23l-50\n        50q-10 10-23 10t-23-10l-466-466q-10-10-10-23t10-23l466-466q10-10 23-10t23\n        10l50 50q10 10 10 23z"\n      />',{viewBox:{x:1792,y:1792}}),l=new r.default('<g id="arrowAnnotate-group" fill="none" stroke-width="1" stroke="ACTIVE_COLOR" stroke-linecap="round" stroke-linejoin="round">\n    <path id="arrowAnnotate-arrow" d="M23,7 l-15,15 M7,17 l0,6 6,0" stroke-width="2" />\n  </g>',{viewBox:{x:24,y:24}}),s=new r.default('<g fill="ACTIVE_COLOR" stroke-width="3" stroke="ACTIVE_COLOR">\n    <path d="M27.63 3.21L3.12 28.81"></path>\n    <path d="M27.63 15.75L15.27 4.43"></path>\n    <path d="M16.5 4.28C16.5 4.96 15.95 5.51 15.27 5.51C14.59 5.51 14.03 4.96 14.03 4.28C14.03 3.59 14.59 3.04 15.27 3.04C15.95 3.04 16.5 3.59 16.5 4.28Z" ></path>\n    <path d="M28.87 3.19C28.87 3.87 28.31 4.43 27.63 4.43C26.95 4.43 26.4 3.87 26.4 3.19C26.4 2.51 26.95 1.95 27.63 1.95C28.31 1.95 28.87 2.51 28.87 3.19Z"></path>\n    <path d="M28.87 15.75C28.87 16.43 28.31 16.99 27.63 16.99C26.95 16.99 26.4 16.43 26.4 15.75C26.4 15.07 26.95 14.51 27.63 14.51C28.31 14.51 28.87 15.07 28.87 15.75Z"></path>\n    <path d="M4.73 28.44C4.73 29.12 4.17 29.68 3.49 29.68C2.81 29.68 2.25 29.12 2.25 28.44C2.25 27.76 2.81 27.2 3.49 27.2C4.17 27.2 4.73 27.76 4.73 28.44Z"></path>\n  </g>',{viewBox:{x:48,y:48}}),g=new r.default('<g stroke="ACTIVE_COLOR" stroke-width="3">\n    <path d="M28.59 2.34L3.82 12.32"></path>\n    <path d="M28.59 29.66L3.82 19.68"></path>\n    <path stroke-dasharray="2" fill-opacity="0" d="M12.37\n      23.06C12.67 22.36 12.85 21.93 12.92 21.76C14.6 17.8 14.68 13.35 13.15\n      9.33C13.11 9.24 13.02 9 12.88 8.63">\n    </path>\n  </g>',{viewBox:{x:32,y:32}}),i=new r.default('<circle stroke="ACTIVE_COLOR" fill="none" stroke-width="3" cx="16" cy="16" r="14" />',{viewBox:{x:32,y:32}}),f=new r.default('<path stroke="ACTIVE_COLOR" fill="none" stroke-width="3" d="M30.74 15.76C30.74 20.99 24.14 25.23 16\n    25.23C7.86 25.23 1.26 20.99 1.26 15.76C1.26 10.54 7.86 6.3 16 6.3C24.14\n    6.3 30.74 10.54 30.74 15.76Z"\n    />',{viewBox:{x:32,y:32}}),m=new r.default('\n  <g fill="ACTIVE_COLOR" stroke="ACTIVE_COLOR" stroke-width="2">\n    <ellipse ry="1" rx="1" id="svg_3" cy="4.240343" cx="14.306499"/>\n    <line id="svg_4" y2="3.58462" x2="12.242186" y1="3.997482" x1="13.432202"/>\n    <line id="svg_5" y2="3.268901" x2="10.857882" y1="3.608906" x1="12.387902"/>\n    <line id="svg_6" y2="3.147471" x2="9.740724" y1="3.293187" x1="10.955026"/>\n    <line id="svg_7" y2="3.147471" x2="8.089274" y1="3.196043" x1="9.983585"/>\n    <line id="svg_8" y2="3.268901" x2="6.874972" y1="3.123185" x1="8.307848"/>\n    <line id="svg_9" y2="3.657478" x2="5.587812" y1="3.220329" x1="7.020688"/>\n    <line id="svg_10" y2="4.046054" x2="4.737801" y1="3.560334" x1="5.854959"/>\n    <line id="svg_11" y2="4.337487" x2="4.300652" y1="3.997482" x1="4.834945"/>\n    <line id="svg_12" y2="4.726063" x2="3.88779" y1="4.191771" x1="4.470655"/>\n    <line id="svg_15" y2="5.3575" x2="3.377783" y1="4.604633" x1="3.960648"/>\n    <line id="svg_16" y2="6.183226" x2="2.916348" y1="5.138926" x1="3.547785"/>\n    <line id="svg_17" y2="6.960379" x2="2.770632" y1="5.867507" x1="3.037779"/>\n    <line id="svg_18" y2="7.713246" x2="2.673488" y1="6.741804" x1="2.819204"/>\n    <line id="svg_19" y2="8.684687" x2="2.697774" y1="7.616102" x1="2.673488"/>\n    <line id="svg_20" y2="9.753273" x2="2.892062" y1="8.611829" x1="2.697774"/>\n    <line id="svg_21" y2="10.724714" x2="3.134923" y1="9.534698" x1="2.84349"/>\n    <line id="svg_23" y2="11.647583" x2="3.596357" y1="10.578998" x1="3.086351"/>\n    <line id="svg_25" y2="12.521881" x2="4.276366" y1="11.501867" x1="3.499213"/>\n    <line id="svg_26" y2="13.930471" x2="5.830673" y1="12.376165" x1="4.13065"/>\n    <line id="svg_28" y2="14.707624" x2="7.263549" y1="13.881899" x1="5.733528"/>\n    <line id="svg_29" y2="15.339061" x2="8.963571" y1="14.61048" x1="7.06926"/>\n    <line id="svg_30" y2="15.581921" x2="10.882168" y1="15.314775" x1="8.817855"/>\n    <line id="svg_31" y2="15.460491" x2="12.023612" y1="15.581921" x1="10.785024"/>\n    <line id="svg_33" y2="15.120487" x2="13.092197" y1="15.484777" x1="11.877895"/>\n    <line id="svg_34" y2="14.586194" x2="13.86935" y1="15.217631" x1="12.897909"/>\n    <line id="svg_35" y2="13.833327" x2="14.597931" y1="14.756196" x1="13.699348"/>\n    <line id="svg_37" y2="12.716169" x2="15.180796" y1="13.881899" x1="14.549359"/>\n    <line id="svg_39" y2="11.429009" x2="15.520801" y1="12.813313" x1="15.15651"/>\n    <ellipse ry="1" rx="1" id="svg_40" cy="10.967574" cx="15.520801"/>\n  </g>',{viewBox:{x:18,y:18}}),o=new r.default('<g id="icon-freehand-sculpt" fill="none" stroke-width="1.5" stroke="ACTIVE_COLOR" stroke-linecap="round" stroke-linejoin="round">\n      <line id="svg_1" y2="2.559367" x2="10.184807" y1="4.467781" x1="8.81711"/>\n      <line id="svg_4" y2="1.493836" x2="11.727442" y1="2.766112" x1="10.089386"/>\n      <line id="svg_7" y2="1.080346" x2="13.047428" y1="1.748291" x1="11.345759"/>\n      <line id="svg_8" y2="1.000829" x2="14.351511" y1="1.112153" x1="12.77707"/>\n      <line id="svg_9" y2="1.350705" x2="15.242104" y1="0.905408" x1="13.969828"/>\n      <line id="svg_10" y2="2.098167" x2="15.862339" y1="1.14396" x1="14.955842"/>\n      <line id="svg_11" y2="3.195505" x2="16.41896" y1="1.939133" x1="15.766918"/>\n      <line id="svg_12" y2="4.292843" x2="16.530284" y1="2.925147" x1="16.387153"/>\n      <line id="svg_16" y2="5.644637" x2="16.196311" y1="3.831643" x1="16.593898"/>\n      <line id="svg_18" y2="7.266789" x2="15.623787" y1="5.19934" x1="16.275829"/>\n      <line id="svg_19" y2="10.813258" x2="14.526449" y1="6.726071" x1="15.766918"/>\n      <line id="svg_20" y2="5.056209" x2="8.085552" y1="4.181519" x1="8.976145"/>\n      <line id="svg_23" y2="5.326568" x2="7.481221" y1="4.78585" x1="8.403621"/>\n      <line id="svg_24" y2="5.565119" x2="6.749662" y1="5.294761" x1="7.624352"/>\n      <line id="svg_25" y2="5.994512" x2="5.429675" y1="5.533312" x1="6.956407"/>\n      <line id="svg_27" y2="6.551133" x2="4.284627" y1="5.962706" x1="5.572807"/>\n      <line id="svg_28" y2="7.584858" x2="3.044158" y1="6.392099" x1="4.427758"/>\n      <line id="svg_29" y2="8.84123" x2="2.185372" y1="7.489437" x1="3.219096"/>\n      <line id="svg_31" y2="10.606513" x2="1.644654" y1="8.602678" x1="2.280792"/>\n      <line id="svg_32" y2="13.214679" x2="1.48562" y1="10.352058" x1="1.724171"/>\n      <line id="svg_33" y2="14.375631" x2="1.676461" y1="12.992031" x1="1.453813"/>\n      <line id="svg_34" y2="15.298031" x2="2.264889" y1="14.152983" x1="1.517427"/>\n      <line id="svg_35" y2="16.172721" x2="3.521261" y1="14.948155" x1="1.915013"/>\n      <line id="svg_36" y2="16.824762" x2="5.207027" y1="15.997783" x1="3.28271"/>\n      <line id="svg_38" y2="17.063314" x2="7.035924" y1="16.745245" x1="4.968475"/>\n      <line id="svg_39" y2="16.888376" x2="9.278311" y1="17.047411" x1="6.733758"/>\n      <line id="svg_40" y2="16.284045" x2="10.661911" y1="16.983797" x1="8.992048"/>\n      <line id="svg_41" y2="15.313934" x2="11.647925" y1="16.395369" x1="10.455166"/>\n      <line id="svg_44" y2="13.898527" x2="12.82478" y1="15.425259" x1="11.504794"/>\n      <line id="svg_45" y2="12.037824" x2="14.144766" y1="14.312017" x1="12.522614"/>\n      <line id="svg_47" y2="10.59061" x2="14.605966" y1="12.228665" x1="13.953925"/>\n      <ellipse ry="1" rx="1" id="svg_48" cy="3.982726" cx="13.460918"/>\n    </g>',{viewBox:{x:18,y:18}}),n=new r.default('<g id="length-group" fill="none" stroke-width="1" stroke="ACTIVE_COLOR" stroke-linecap="round" stroke-linejoin="round">\n    <path id="length-dashes" d="m22.5,6 -16.5,16.5" stroke-width="3" stroke-dasharray="0.6666,5" />\n  </g>',{viewBox:{x:24,y:24}}),a=new r.default('<path fill="ACTIVE_COLOR" d="M1152 896q0 106-75 181t-181 75-181-75-75-181 75-181 181-75 181 75\n    75 181zm-256-544q-148 0-273 73t-198 198-73 273 73 273 198 198 273 73 273-73\n    198-198 73-273-73-273-198-198-273-73zm768 544q0 209-103 385.5t-279.5\n    279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5\n    385.5-103 385.5 103 279.5 279.5 103 385.5z"\n  />',{viewBox:{x:1792,y:1792}}),u=new r.default('<path fill="ACTIVE_COLOR" d="M1312 256h-832q-66 0-113 47t-47 113v832q0 66 47\n    113t113 47h832q66 0 113-47t47-113v-832q0-66-47-113t-113-47zm288 160v832q0\n    119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119\n    84.5-203.5t203.5-84.5h832q119 0 203.5 84.5t84.5 203.5z"\n  />',{viewBox:{x:1792,y:1792}}),c=new r.default('<path fill="ACTIVE_COLOR" d="M789 559l-170 450q33 0 136.5 2t160.5 2q19 0\n    57-2-87-253-184-452zm-725 1105l2-79q23-7 56-12.5t57-10.5 49.5-14.5 44.5-29\n    31-50.5l237-616 280-724h128q8 14 11 21l205 480q33 78 106 257.5t114 274.5q15\n    34 58 144.5t72 168.5q20 45 35 57 19 15 88 29.5t84 20.5q6 38 6 57 0 5-.5\n    13.5t-.5 12.5q-63 0-190-8t-191-8q-76 0-215 7t-178 8q0-43 4-78l131-28q1 0\n    12.5-2.5t15.5-3.5 14.5-4.5 15-6.5 11-8 9-11\n    2.5-14q0-16-31-96.5t-72-177.5-42-100l-450-2q-26 58-76.5 195.5t-50.5 162.5q0\n    22 14 37.5t43.5 24.5 48.5 13.5 57 8.5 41 4q1 19 1 58 0 9-2 27-58\n    0-174.5-10t-174.5-10q-8 0-26.5 4t-21.5 4q-80 14-188 14z"\n  />',{viewBox:{x:1792,y:1792}}),v=new r.default('<path fill="ACTIVE_COLOR" d="M1325 1024h-109q-26 0-45-19t-19-45v-128q0-26\n    19-45t45-19h109q-32-108-112.5-188.5t-188.5-112.5v109q0 26-19 45t-45\n    19h-128q-26 0-45-19t-19-45v-109q-108 32-188.5 112.5t-112.5 188.5h109q26\n    0 45 19t19 45v128q0 26-19 45t-45 19h-109q32 108 112.5 188.5t188.5\n    112.5v-109q0-26 19-45t45-19h128q26 0 45 19t19 45v109q108-32\n    188.5-112.5t112.5-188.5zm339-192v128q0 26-19 45t-45 19h-143q-37 161-154.5\n    278.5t-278.5 154.5v143q0 26-19 45t-45 19h-128q-26\n    0-45-19t-19-45v-143q-161-37-278.5-154.5t-154.5-278.5h-143q-26\n    0-45-19t-19-45v-128q0-26 19-45t45-19h143q37-161\n    154.5-278.5t278.5-154.5v-143q0-26 19-45t45-19h128q26 0 45 19t19 45v143q161\n    37 278.5 154.5t154.5 278.5h143q26 0 45 19t19 45z"\n  />',{viewBox:{x:1792,y:1792}}),h=new r.default('<path transform="translate(0,1792) scale(1,-1)" fill="ACTIVE_COLOR" d="M960 1408l336-384h-768l-336 384h768zm1013-1077q15\n      34 9.5 71.5t-30.5 65.5l-896 1024q-38 44-96 44h-768q-38\n      0-69.5-20.5t-47.5-54.5q-15-34-9.5-71.5t30.5-65.5l896-1024q38-44 96-44h768q38\n      0 69.5 20.5t47.5 54.5z"\n    />',{viewBox:{x:2048,y:1792}}),E=new r.default('<path fill="ACTIVE_COLOR" d="M508.5 481.6l-129-129c-2.3-2.3-5.3-3.5-8.5-3.5h-10.3C395\n      312 416 262.5 416 208 416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c54.5\n      0 104-21 141.1-55.2V371c0 3.2 1.3 6.2 3.5 8.5l129 129c4.7 4.7 12.3 4.7 17\n      0l9.9-9.9c4.7-4.7 4.7-12.3 0-17zM208 384c-97.3 0-176-78.7-176-176S110.7 32 208\n      32s176 78.7 176 176-78.7 176-176 176z"\n    />',{viewBox:{x:512,y:512}}),M=new r.default('<path fill="ACTIVE_COLOR" d="M1411 541l-355 355 355 355 144-144q29-31 70-14 39 17\n      39 59v448q0 26-19 45t-45 19h-448q-42 0-59-40-17-39 14-69l144-144-355-355-355\n      355 144 144q31 30 14 69-17 40-59 40h-448q-26 0-45-19t-19-45v-448q0-42 40-59\n      39-17 69 14l144 144 355-355-355-355-144 144q-19 19-45 19-12\n      0-24-5-40-17-40-59v-448q0-26 19-45t45-19h448q42 0 59 40 17 39-14 69l-144\n      144 355 355 355-355-144-144q-31-30-14-69 17-40 59-40h448q26 0 45 19t19\n      45v448q0 42-39 59-13 5-25 5-26 0-45-19z"\n    />',{viewBox:{x:1792,y:1792}}),O=new r.default('<path fill="ACTIVE_COLOR" d="M1664 256v448q0 26-19 45t-45 19h-448q-42 0-59-40-17-39\n      14-69l138-138q-148-137-349-137-104 0-198.5 40.5t-163.5 109.5-109.5\n      163.5-40.5 198.5 40.5 198.5 109.5 163.5 163.5 109.5 198.5 40.5q119 0\n      225-52t179-147q7-10 23-12 15 0 25 9l137 138q9 8 9.5 20.5t-7.5 22.5q-109\n      132-264 204.5t-327 72.5q-156 0-298-61t-245-164-164-245-61-298 61-298\n      164-245 245-164 298-61q147 0 284.5 55.5t244.5 156.5l130-129q29-31 70-14\n      39 17 39 59z"\n    />',{viewBox:{x:1792,y:1792}}),P=new r.default('<path fill="ACTIVE_COLOR" d="M24 21v2c0 0.547-0.453 1-1 1h-22c-0.547\n      0-1-0.453-1-1v-2c0-0.547 0.453-1 1-1h22c0.547 0 1 0.453 1 1zM24 13v2c0\n      0.547-0.453 1-1 1h-22c-0.547 0-1-0.453-1-1v-2c0-0.547 0.453-1 1-1h22c0.547\n      0 1 0.453 1 1zM24 5v2c0 0.547-0.453 1-1 1h-22c-0.547\n      0-1-0.453-1-1v-2c0-0.547 0.453-1 1-1h22c0.547 0 1 0.453 1 1z"\n      />',{viewBox:{x:24,y:28}}),T=new r.default('<path fill="ACTIVE_COLOR" d="M1664 416v960q0 119-84.5 203.5t-203.5 84.5h-960q-119\n    0-203.5-84.5t-84.5-203.5v-960q0-119 84.5-203.5t203.5-84.5h960q119 0 203.5\n    84.5t84.5 203.5z"\n  />',{viewBox:{x:1792,y:1792}}),D=new r.default('<path fill="ACTIVE_COLOR" d="M14.5,3.5 a1 1 0 0 1 -11,11 Z" stroke="none" opacity="0.8" />\n    <circle cx="9" cy="9" r="8" fill="none" stroke-width="2" stroke="ACTIVE_COLOR" />',{viewBox:{x:18,y:18}}),y=new r.default('<path fill="ACTIVE_COLOR" d="M508.5 481.6l-129-129c-2.3-2.3-5.3-3.5-8.5-3.5h-10.3C395\n      312 416 262.5 416 208 416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c54.5\n      0 104-21 141.1-55.2V371c0 3.2 1.3 6.2 3.5 8.5l129 129c4.7 4.7 12.3 4.7 17\n      0l9.9-9.9c4.7-4.7 4.7-12.3 0-17zM208 384c-97.3 0-176-78.7-176-176S110.7 32 208\n      32s176 78.7 176 176-78.7 176-176 176z"\n    />\n    <path fill="ACTIVE_COLOR" transform="scale(0.22,0.22) translate(1400,0)" d="M1216\n      320q0 26-19 45t-45 19h-128v1024h128q26 0 45 19t19 45-19 45l-256 256q-19\n      19-45 19t-45-19l-256-256q-19-19-19-45t19-45 45-19h128v-1024h-128q-26\n      0-45-19t-19-45 19-45l256-256q19-19 45-19t45 19l256 256q19 19 19 45z"\n    />',{viewBox:{x:640,y:512}}),j={x:127,y:60},C=function(){return'<rect fill="'.concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ACTIVE_COLOR",'" x="80.19" y="25.03" width="47.14" height="15.85"/>')},I=function(){var J=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ACTIVE_COLOR";return'<rect fill="'.concat(J,'" x="80.19" y="25.03" width="47.14" height="15.85"/>\n      <rect fill="').concat(J,'" x="95.84" y="9.38" width="15.85" height="47.14"/>')},B='<path fill="ACTIVE_COLOR" d="M82.89,10a12.09,12.09,0,0,0-16.8-2.5l-27.5,20.4-8.5-6.3a2.93,2.93,0,0,1-1.1-3,14.66,14.66,0,0,0,.1-6.6,14.08,14.08,0,1,0-6.5,15.2,2.87,2.87,0,0,1,3.2.2l8.2,6.1-8.2,6.1a2.87,2.87,0,0,1-3.2.2,14.16,14.16,0,1,0,6.7,14.4,14,14,0,0,0-.3-5.8,2.93,2.93,0,0,1,1.1-3l8.5-6.3,27.5,20.4A11.91,11.91,0,0,0,82.89,57l-31.7-23.5ZM15.29,21a5.9,5.9,0,1,1,5.9-5.9A5.91,5.91,0,0,1,15.29,21Zm0,36.8a5.9,5.9,0,1,1,5.9-5.9A5.91,5.91,0,0,1,15.29,57.77Zm28.3-21.5a2.8,2.8,0,1,1,2.8-2.8A2.8,2.8,0,0,1,43.59,36.27Z" transform="translate(-1.17 -0.96)"/>',S='<path fill="ACTIVE_COLOR" d="M8.86,2.25V66.08H72.69V2.25H8.86ZM65.28,58.67h-49v-49h49v49Z" transform="translate(-8.86 -2.25)"/>',K='<path fill="ACTIVE_COLOR" d="M40.77,2.25A31.92,31.92,0,1,0,72.69,34.16,31.92,31.92,0,0,0,40.77,2.25Zm0,57.63A25.71,25.71,0,1,1,66.48,34.16,25.71,25.71,0,0,1,40.77,59.87Z" transform="translate(-8.86 -2.25)"/>',H=new r.default("".concat(B," ").concat(C()),{viewBox:j}),W=new r.default("".concat(B," ").concat(I()),{viewBox:j}),L=new r.default("".concat(B," ").concat(C()),{viewBox:j}),x=new r.default("".concat(B," ").concat(I()),{viewBox:j}),_=new r.default("".concat(S," ").concat(C()),{viewBox:j}),R=new r.default("".concat(S," ").concat(I()),{viewBox:j}),A=new r.default("".concat(S," ").concat(C()),{viewBox:j}),p=new r.default("".concat(S," ").concat(I()),{viewBox:j}),U=new r.default("".concat(K," ").concat(C()),{viewBox:j}),F=new r.default("".concat(K," ").concat(I()),{viewBox:j}),N=new r.default("".concat(K," ").concat(C()),{viewBox:j}),V=new r.default("".concat(K," ").concat(I()),{viewBox:j})},"./tools/index.js":
/*!************************!*\
          !*** ./tools/index.js ***!
          \************************/
/*! exports provided: CrosshairsTool, DoubleTapFitToWindowTool, DragProbeTool, EraserTool, FreehandRoiSculptorTool, MagnifyTool, OverlayTool, OrientationMarkersTool, PanMultiTouchTool, PanTool, ReferenceLinesTool, RotateTool, RotateTouchTool, ScaleOverlayTool, StackScrollMouseWheelTool, StackScrollMultiTouchTool, StackScrollTool, WwwcRegionTool, WwwcTool, ZoomMouseWheelTool, ZoomTool, ZoomTouchPinchTool, default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./CrosshairsTool.js */
"./tools/CrosshairsTool.js");e.d(t,"CrosshairsTool",function(){return r.default});var d=e(
/*! ./DoubleTapFitToWindowTool.js */
"./tools/DoubleTapFitToWindowTool.js");e.d(t,"DoubleTapFitToWindowTool",function(){return d.default});var l=e(
/*! ./DragProbeTool.js */
"./tools/DragProbeTool.js");e.d(t,"DragProbeTool",function(){return l.default});var s=e(
/*! ./EraserTool.js */
"./tools/EraserTool.js");e.d(t,"EraserTool",function(){return s.default});var g=e(
/*! ./FreehandRoiSculptorTool.js */
"./tools/FreehandRoiSculptorTool.js");e.d(t,"FreehandRoiSculptorTool",function(){return g.default});var i=e(
/*! ./MagnifyTool.js */
"./tools/MagnifyTool.js");e.d(t,"MagnifyTool",function(){return i.default});var f=e(
/*! ./OverlayTool.js */
"./tools/OverlayTool.js");e.d(t,"OverlayTool",function(){return f.default});var m=e(
/*! ./OrientationMarkersTool.js */
"./tools/OrientationMarkersTool.js");e.d(t,"OrientationMarkersTool",function(){return m.default});var o=e(
/*! ./PanMultiTouchTool.js */
"./tools/PanMultiTouchTool.js");e.d(t,"PanMultiTouchTool",function(){return o.default});var n=e(
/*! ./PanTool.js */
"./tools/PanTool.js");e.d(t,"PanTool",function(){return n.default});var a=e(
/*! ./ReferenceLinesTool.js */
"./tools/ReferenceLinesTool.js");e.d(t,"ReferenceLinesTool",function(){return a.default});var u=e(
/*! ./RotateTool.js */
"./tools/RotateTool.js");e.d(t,"RotateTool",function(){return u.default});var c=e(
/*! ./RotateTouchTool.js */
"./tools/RotateTouchTool.js");e.d(t,"RotateTouchTool",function(){return c.default});var v=e(
/*! ./ScaleOverlayTool.js */
"./tools/ScaleOverlayTool.js");e.d(t,"ScaleOverlayTool",function(){return v.default});var h=e(
/*! ./StackScrollMouseWheelTool.js */
"./tools/StackScrollMouseWheelTool.js");e.d(t,"StackScrollMouseWheelTool",function(){return h.default});var E=e(
/*! ./StackScrollMultiTouchTool.js */
"./tools/StackScrollMultiTouchTool.js");e.d(t,"StackScrollMultiTouchTool",function(){return E.default});var M=e(
/*! ./StackScrollTool.js */
"./tools/StackScrollTool.js");e.d(t,"StackScrollTool",function(){return M.default});var O=e(
/*! ./WwwcRegionTool.js */
"./tools/WwwcRegionTool.js");e.d(t,"WwwcRegionTool",function(){return O.default});var P=e(
/*! ./WwwcTool.js */
"./tools/WwwcTool.js");e.d(t,"WwwcTool",function(){return P.default});var T=e(
/*! ./ZoomMouseWheelTool.js */
"./tools/ZoomMouseWheelTool.js");e.d(t,"ZoomMouseWheelTool",function(){return T.default});var D=e(
/*! ./ZoomTool.js */
"./tools/ZoomTool.js");e.d(t,"ZoomTool",function(){return D.default});var y=e(
/*! ./ZoomTouchPinchTool.js */
"./tools/ZoomTouchPinchTool.js");e.d(t,"ZoomTouchPinchTool",function(){return y.default}),t.default={CrosshairsTool:r.default,DoubleTapFitToWindowTool:d.default,DragProbeTool:l.default,EraserTool:s.default,FreehandRoiSculptorTool:g.default,MagnifyTool:i.default,OverlayTool:f.default,OrientationMarkersTool:m.default,PanMultiTouchTool:o.default,PanTool:n.default,ReferenceLinesTool:a.default,RotateTool:u.default,RotateTouchTool:c.default,ScaleOverlayTool:v.default,StackScrollMouseWheelTool:h.default,StackScrollMultiTouchTool:E.default,StackScrollTool:M.default,WwwcRegionTool:O.default,WwwcTool:P.default,ZoomMouseWheelTool:T.default,ZoomTool:D.default,ZoomTouchPinchTool:y.default}},"./tools/referenceLines/calculateReferenceLine.js":
/*!********************************************************!*\
          !*** ./tools/referenceLines/calculateReferenceLine.js ***!
          \********************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./../../util/pointProjector.js */
"./util/pointProjector.js");t.default=function(d,l){var s=Object(r.planePlaneIntersection)(d,l);if(s)return{start:Object(r.projectPatientPointToImagePlane)(s.start,d),end:Object(r.projectPatientPointToImagePlane)(s.end,d)}}},"./tools/referenceLines/renderActiveReferenceLine.js":
/*!***********************************************************!*\
          !*** ./tools/referenceLines/renderActiveReferenceLine.js ***!
          \***********************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./../../externalModules.js */
"./externalModules.js"),d=e(
/*! ./calculateReferenceLine.js */
"./tools/referenceLines/calculateReferenceLine.js"),l=e(
/*! ./../../stateManagement/toolColors.js */
"./stateManagement/toolColors.js"),s=e(
/*! ./../../util/convertToVector3.js */
"./util/convertToVector3.js"),g=e(
/*! ./../../drawing/index.js */
"./drawing/index.js");t.default=function(i,f,m,o){var n=r.default.cornerstone,a=n.getEnabledElement(m).image,u=n.getEnabledElement(o).image;if(a&&u){var c=n.metaData.get("imagePlaneModule",a.imageId),v=n.metaData.get("imagePlaneModule",u.imageId);if(c&&v&&c.rowCosines&&c.columnCosines&&c.imagePositionPatient&&v.rowCosines&&v.columnCosines&&v.imagePositionPatient&&c.frameOfReferenceUID===v.frameOfReferenceUID){c.rowCosines=Object(s.default)(c.rowCosines),c.columnCosines=Object(s.default)(c.columnCosines),c.imagePositionPatient=Object(s.default)(c.imagePositionPatient),v.rowCosines=Object(s.default)(v.rowCosines),v.columnCosines=Object(s.default)(v.columnCosines),v.imagePositionPatient=Object(s.default)(v.imagePositionPatient);var h=c.rowCosines.clone().cross(c.columnCosines),E=v.rowCosines.clone().cross(v.columnCosines),M=h.angleTo(E);if(!((M=Math.abs(M))<.5)){var O=Object(d.default)(c,v);if(O){var P=l.default.getActiveColor();i.setTransform(1,0,0,1,0,0),Object(g.draw)(i,function(T){Object(g.drawLine)(T,f.element,O.start,O.end,{color:P})})}}}}}},"./tools/segmentation/BrushTool.js":
/*!*****************************************!*\
          !*** ./tools/segmentation/BrushTool.js ***!
          \*****************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return T});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=e.n(f),o=e(
/*! @babel/runtime/helpers/assertThisInitialized */
"../node_modules/@babel/runtime/helpers/assertThisInitialized.js"),n=e.n(o),a=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),u=e.n(a),c=e(
/*! ./../../externalModules.js */
"./externalModules.js"),v=e(
/*! ../base */
"./tools/base/index.js"),h=e(
/*! ./../../store/index.js */
"./store/index.js"),E=e(
/*! ../../util/segmentation/index.js */
"./util/segmentation/index.js"),M=e(
/*! ../../util/logger.js */
"./util/logger.js"),P=(Object(M.getLogger)("tools:BrushTool"),Object(h.getModule)("segmentation")),T=function(D){function y(){var j,C=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d()(this,y),(j=i()(this,m()(y).call(this,C,{name:"Brush",supportedInteractionTypes:["Mouse","Touch"],configuration:{},mixins:["renderBrushMixin"]}))).touchDragCallback=j._paint.bind(n()(j)),j}return u()(y,D),s()(y,[{key:"_paint",value:function(C){var B=C.detail,K=B.image,H=K.rows,W=K.columns,L=B.currentPoints.image,x=L.x,_=L.y;if(!(x<0||x>W||_<0||_>H)){var R=P.configuration.radius,A=Object(E.getCircle)(R,H,W,x,_),p=this.paintEventData,U=p.labelmap2D,F=p.labelmap3D,N=p.shouldErase;Object(E.drawBrushPixels)(A,U.pixelData,F.activeSegmentIndex,W,N),c.default.cornerstone.updateImage(C.detail.element)}}}]),y}(v.BaseBrushTool)},"./tools/segmentation/CircleScissorsTool.js":
/*!**************************************************!*\
          !*** ./tools/segmentation/CircleScissorsTool.js ***!
          \**************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return u});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),m=e.n(f),o=e(
/*! ../base */
"./tools/base/index.js"),n=e(
/*! ./strategies */
"./tools/segmentation/strategies/index.js"),a=e(
/*! ../cursors */
"./tools/cursors/index.js"),u=function(c){function v(){var h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d()(this,v);var E={name:"CircleScissors",strategies:{FILL_INSIDE:n.fillInsideCircle,FILL_OUTSIDE:n.fillOutsideCircle,ERASE_OUTSIDE:n.eraseOutsideCircle,ERASE_INSIDE:n.eraseInsideCircle},cursors:{FILL_INSIDE:a.segCircleFillInsideCursor,FILL_OUTSIDE:a.segCircleFillOutsideCursor,ERASE_OUTSIDE:a.segCircleEraseOutsideCursor,ERASE_INSIDE:a.segCircleEraseInsideCursor},defaultStrategy:"FILL_INSIDE",supportedInteractionTypes:["Mouse","Touch"],svgCursor:a.segCircleFillInsideCursor,mixins:["circleSegmentationMixin"]};return s()(this,i()(v).call(this,h,E))}return m()(v,c),v}(o.BaseTool)},"./tools/segmentation/CorrectionScissorsTool.js":
/*!******************************************************!*\
          !*** ./tools/segmentation/CorrectionScissorsTool.js ***!
          \******************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return u});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),m=e.n(f),o=e(
/*! ../base */
"./tools/base/index.js"),n=e(
/*! ../cursors */
"./tools/cursors/index.js"),a=e(
/*! ./strategies */
"./tools/segmentation/strategies/index.js"),u=function(c){function v(){var h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d()(this,v);var E={name:"CorrectionScissors",strategies:{CORRECTION:a.correction},cursors:{CORRECTION:n.freehandFillInsideCursor},defaultStrategy:"CORRECTION",supportedInteractionTypes:["Mouse","Touch"],svgCursor:n.freehandFillInsideCursor,mixins:["polylineSegmentationMixin"]};return s()(this,i()(v).call(this,h,E))}return m()(v,c),v}(o.BaseTool)},"./tools/segmentation/FreehandScissorsTool.js":
/*!****************************************************!*\
          !*** ./tools/segmentation/FreehandScissorsTool.js ***!
          \****************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return u});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),m=e.n(f),o=e(
/*! ../cursors */
"./tools/cursors/index.js"),n=e(
/*! ./strategies */
"./tools/segmentation/strategies/index.js"),u=function(c){function v(){var h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d()(this,v);var E={name:"FreehandScissors",strategies:{FILL_INSIDE:n.fillInsideFreehand,FILL_OUTSIDE:n.fillOutsideFreehand,ERASE_OUTSIDE:n.eraseOutsideFreehand,ERASE_INSIDE:n.eraseInsideFreehand},cursors:{FILL_INSIDE:o.freehandFillInsideCursor,FILL_OUTSIDE:o.freehandFillOutsideCursor,ERASE_OUTSIDE:o.freehandEraseOutsideCursor,ERASE_INSIDE:o.freehandEraseInsideCursor},defaultStrategy:"FILL_INSIDE",supportedInteractionTypes:["Mouse","Touch"],svgCursor:o.freehandFillInsideCursor,mixins:["freehandSegmentationMixin"]};return s()(this,i()(v).call(this,h,E))}return m()(v,c),v}(e(
/*! ../base */
"./tools/base/index.js").BaseTool)},"./tools/segmentation/RectangleScissorsTool.js":
/*!*****************************************************!*\
          !*** ./tools/segmentation/RectangleScissorsTool.js ***!
          \*****************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return u});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),m=e.n(f),o=e(
/*! ../base */
"./tools/base/index.js"),n=e(
/*! ./strategies */
"./tools/segmentation/strategies/index.js"),a=e(
/*! ../cursors */
"./tools/cursors/index.js"),u=function(c){function v(){var h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d()(this,v);var E={name:"RectangleScissors",strategies:{FILL_INSIDE:n.fillInsideRectangle,FILL_OUTSIDE:n.fillOutsideRectangle,ERASE_OUTSIDE:n.eraseOutsideRectangle,ERASE_INSIDE:n.eraseInsideRectangle},cursors:{FILL_INSIDE:a.segRectangleFillInsideCursor,FILL_OUTSIDE:a.segRectangleFillOutsideCursor,ERASE_OUTSIDE:a.segRectangleEraseOutsideCursor,ERASE_INSIDE:a.segRectangleEraseInsideCursor},defaultStrategy:"FILL_INSIDE",supportedInteractionTypes:["Mouse","Touch"],mixins:["rectangleSegmentationMixin"]};return s()(this,i()(v).call(this,h,E))}return m()(v,c),v}(o.BaseTool)},"./tools/segmentation/SphericalBrushTool.js":
/*!**************************************************!*\
          !*** ./tools/segmentation/SphericalBrushTool.js ***!
          \**************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return D});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),s=e.n(l),g=e(
/*! @babel/runtime/helpers/possibleConstructorReturn */
"../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),i=e.n(g),f=e(
/*! @babel/runtime/helpers/getPrototypeOf */
"../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=e.n(f),o=e(
/*! @babel/runtime/helpers/assertThisInitialized */
"../node_modules/@babel/runtime/helpers/assertThisInitialized.js"),n=e.n(o),a=e(
/*! @babel/runtime/helpers/inherits */
"../node_modules/@babel/runtime/helpers/inherits.js"),u=e.n(a),c=e(
/*! ./../../externalModules.js */
"./externalModules.js"),v=e(
/*! ./../base/BaseBrushTool.js */
"./tools/base/BaseBrushTool.js"),h=e(
/*! ./../../store/index.js */
"./store/index.js"),E=e(
/*! ./../../util/segmentation */
"./util/segmentation/index.js"),M=e(
/*! ../../stateManagement/toolState.js */
"./stateManagement/toolState.js"),O=e(
/*! ../../util/logger.js */
"./util/logger.js"),P=Object(O.getLogger)("tools:SphericalBrushTool"),T=Object(h.getModule)("segmentation"),D=function(y){function j(){var C,I=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d()(this,j),(C=i()(this,m()(j).call(this,I,{name:"SphericalBrush",supportedInteractionTypes:["Mouse","Touch"],configuration:{alwaysEraseOnClick:!1},mixins:["renderBrushMixin"]}))).touchDragCallback=C._paint.bind(n()(C)),C}return u()(j,y),s()(j,[{key:"_startPainting",value:function(I){var Q,B=T.configuration,S=T.getters,K=I.detail,H=K.element,W=K.image,L=c.default.cornerstone,x=B.radius,_=W.rows,R=W.columns,A=Math.max(W.rowPixelSpacing,W.columnPixelSpacing),F=Object(M.getToolState)(H,"stack").data[0].imageIds,N=S.labelmap2D(H),V=N.labelmap2D,Y=N.labelmap3D,J=N.currentImageIdIndex,ee=N.activeLabelmapIndex,q=this._isCtrlDown(K)||this.configuration.alwaysEraseOnClick,le=L.metaData.get("imagePlaneModule",W.imageId);if(le?Q=this._getImagesInRange(J,le.imagePositionPatient,F,x,A):(P.warn("No imagePlane metadata found for image, defaulting to circle brush application."),Q=[{imageIdIndex:J,radiusOnImage:x}]),this.paintEventData={labelmap2D:V,labelmap3D:Y,currentImageIdIndex:J,activeLabelmapIndex:ee,shouldErase:q,imagesInRange:Q},B.storeHistory){for(var w=[],$=0;$<Q.length;$++){var te=S.labelmap2DByImageIdIndex(Y,Q[$].imageIdIndex,_,R).pixelData.slice();w.push(te)}this.paintEventData.previousPixeldataForImagesInRange=w}}},{key:"_paint",value:function(I){var B=T.getters,S=I.detail,H=S.image,W=H.rows,L=H.columns,x=S.currentPoints.image,_=x.x,R=x.y;if(!(_<0||_>L||R<0||R>W)){for(var A=this.paintEventData,p=A.labelmap3D,U=A.imagesInRange,F=A.shouldErase,N=0;N<U.length;N++){var V=U[N],Y=V.imageIdIndex,J=V.radiusOnImage,ee=Object(E.getCircle)(J,W,L,_,R),q=B.labelmap2DByImageIdIndex(p,Y,W,L);Object(E.drawBrushPixels)(ee,q.pixelData,p.activeSegmentIndex,L,F)}c.default.cornerstone.updateImage(I.detail.element)}}},{key:"_getImagesInRange",value:function(I,B,S,K,H){for(var W=K*H,L=[{imageIdIndex:I,radiusOnImage:K}],x=I+1;x<S.length;x++){var _=this._getRadiusOnImage(S[x],B,W,H);if(!_)break;L.push({imageIdIndex:x,radiusOnImage:_})}for(var R=I-1;R>=0;R--){var A=this._getRadiusOnImage(S[R],B,W,H);if(!A)break;L.push({imageIdIndex:R,radiusOnImage:A})}return L}},{key:"_getRadiusOnImage",value:function(I,B,S,K){var H=c.default.cornerstone.metaData.get("imagePlaneModule",I);if(H){var W=H.imagePositionPatient,L=Math.sqrt(Math.pow(W[0]-B[0],2)+Math.pow(W[1]-B[1],2)+Math.pow(W[2]-B[2],2));return L>S?void 0:Math.floor(Math.sqrt(Math.pow(S,2)-Math.pow(L,2))/K)}P.warn("Can't find imagePlane metadata for image, cancelling spherical brushing on: ".concat(I,","))}},{key:"_endPainting",value:function(I){for(var B=this.paintEventData,S=B.labelmap3D,K=B.imagesInRange,H=[],W=T.configuration,L=T.setters,x=0;x<K.length;x++){for(var _=K[x].imageIdIndex,R=S.labelmaps2D[_],p=new Set(R.pixelData).values(),U=[],F=!1;!F;){var N=p.next();(F=N.done)||U.push(N.value)}if(R.segmentsOnLabelmap=U,W.storeHistory){var Y=this.paintEventData.previousPixeldataForImagesInRange[x],ee=S.labelmaps2D[_].pixelData;H.push({imageIdIndex:_,diff:Object(E.getDiffBetweenPixelData)(Y,ee)})}}W.storeHistory&&L.pushState(this.element,H),Object(E.triggerLabelmapModifiedEvent)(this.element)}}]),j}(v.default)},"./tools/segmentation/index.js":
/*!*************************************!*\
          !*** ./tools/segmentation/index.js ***!
          \*************************************/
/*! exports provided: BrushTool, SphericalBrushTool, FreehandScissorsTool, RectangleScissorsTool, CircleScissorsTool, CorrectionScissorsTool, default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./BrushTool */
"./tools/segmentation/BrushTool.js"),d=e(
/*! ./SphericalBrushTool */
"./tools/segmentation/SphericalBrushTool.js"),l=e(
/*! ./FreehandScissorsTool */
"./tools/segmentation/FreehandScissorsTool.js"),s=e(
/*! ./RectangleScissorsTool */
"./tools/segmentation/RectangleScissorsTool.js"),g=e(
/*! ./CircleScissorsTool */
"./tools/segmentation/CircleScissorsTool.js"),i=e(
/*! ./CorrectionScissorsTool */
"./tools/segmentation/CorrectionScissorsTool.js");e.d(t,"BrushTool",function(){return r.default}),e.d(t,"SphericalBrushTool",function(){return d.default}),e.d(t,"FreehandScissorsTool",function(){return l.default}),e.d(t,"RectangleScissorsTool",function(){return s.default}),e.d(t,"CircleScissorsTool",function(){return g.default}),e.d(t,"CorrectionScissorsTool",function(){return i.default}),t.default={BrushTool:r.default,SphericalBrushTool:d.default,CircleScissorsTool:g.default,CorrectionScissorsTool:i.default,FreehandScissorsTool:l.default,RectangleScissorsTool:s.default}},"./tools/segmentation/strategies/correction.js":
/*!*****************************************************!*\
          !*** ./tools/segmentation/strategies/correction.js ***!
          \*****************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return o});var r=e(
/*! @babel/runtime/helpers/toConsumableArray */
"../node_modules/@babel/runtime/helpers/toConsumableArray.js"),d=e.n(r),l=e(
/*! ./index.js */
"./tools/segmentation/strategies/index.js"),s=e(
/*! ../../../util/segmentation */
"./util/segmentation/index.js"),g=e(
/*! ../../../util/clip */
"./util/clip.js"),i=e(
/*! ../../../util/isPointInImage */
"./util/isPointInImage.js"),f=e(
/*! ../../../util/logger */
"./util/logger.js"),m=Object(f.getLogger)("util:segmentation:operations:correction");function o(P,T){var D=T.pixelData,y=T.segmentIndex,j=T.segmentationMixinType;if("freehandSegmentationMixin"===j){var C=function n(P,T){for(var D=T.pixelData,y=T.points,j=P.detail.image,C=j.width,I=j.height,B=[],S=0;S<y.length;S++){var K=y[S],H=Math.floor(K.x),W=Math.floor(K.y);H=Object(g.default)(H,0,C-1),W=Object(g.default)(W,0,I-1);var L=B[B.length-1];L&&H===L.x&&W===L.y||B.push({x:H,y:W,segment:D[W*C+H]})}return B}(P,T),I=function a(P,T){for(var D=!0,y=!0,j=0;j<P.length&&(P[j].segment===T?y=!1:D=!1,D||y);j++);return y?{isScissorOperation:!0,operation:"fillInsideFreehand"}:D?{isScissorOperation:!0,operation:"eraseInsideFreehand"}:{isScissorOperation:!1}}(C,y);if(I.isScissorOperation)"fillInsideFreehand"===I.operation?(m.warn("The line never intersects a segment."),Object(l.fillInsideFreehand)(P,T)):"eraseInsideFreehand"===I.operation&&(m.warn("The line is only ever inside the segment."),Object(l.eraseInsideFreehand)(P,T));else{var B=new Uint8Array(D.length),S=function O(P,T){var D=P[0].segment===T,y=[];y.push({additive:!D,nodes:[]});for(var j=0,C=0;C<P.length;C++){var I=P[C];D?(y[j].nodes.push(I),I.segment!==T&&(j++,D=!D,y.push({additive:!0,nodes:[]}),y[j].nodes.push(P[C-1]),y[j].nodes.push(I))):(y[j].nodes.push(I),I.segment===T&&(j++,D=!D,y.push({additive:!1,nodes:[]}),y[j].nodes.push(P[C-1]),y[j].nodes.push(I)))}return y.pop(),y.shift(),y}(C,y);S.forEach(function(K){!function u(P,T,D,y,j){var de,C=j.detail.image,I=C.width,B=C.height,S=P.nodes,K=P.additive,H=K?0:1,W=function(de){return de.y*I+de.x};m.warn(K?"additive operation...":"subtractive operation...");for(var x=function E(P){for(var T=[],D=0;D<P.length-1;D++)T.push(P[D]),T.push.apply(T,d()(Object(s.getPixelPathBetweenPixels)(P[D],P[D+1])));for(var y=[],j=[],C=0;C<T.length-1;C++){var I=M(T[C],T[C+1]),S=I.right;y.push(I.left),j.push(S)}return{pixelPath:T,leftPath:y,rightPath:j}}(S),_=x.pixelPath,R=x.leftPath,A=x.rightPath,p=_[0],U={xMin:p.x,xMax:p.x,yMin:p.y,yMax:p.y},F=0;F<D.length;F++)T[F]===y?(c(U,{x:(de=F)%I,y:Math.floor(de/I)}),D[F]=1):D[F]=0;for(var V=0;V<_.length;V++){var Y=_[V];D[W(Y)]=2,c(U,Y)}!function v(P,T,D){P.xMax=Math.min(P.xMax+2,D),P.xMin=Math.max(P.xMin-2,0),P.yMax=Math.min(P.yMax+2,T),P.yMin=Math.max(P.yMin-2,0)}(U,B,I);var J=U.xMin,ee=U.xMax,q=U.yMin,le=U.yMax;function Q(re,de){if(!(re>=ee||re<J||de>=le||de<q))return D[de*I+re]}for(var X=0,w=0,$=0;$<R.length;$++){var k=R[$];D[W(k)]===H&&Object(i.default)(k,B,I)&&(X+=h(k,3,D,Q,I));var te=A[$];D[W(te)]===H&&Object(i.default)(te,B,I)&&(w+=h(te,4,D,Q,I))}if(0!==X&&0!==w){for(var se=K?y:0,ie=X<w?3:4,fe=0;fe<D.length;fe++)D[fe]===ie&&(T[fe]=se);if(se===y)for(var ue=0;ue<_.length;ue++)T[W(_[ue])]=y;else for(var ve=0;ve<_.length;ve++){var he=W(_[ve]);T[he]===y&&(T[he]=0)}}}(K,D,B,y,P)})}}else m.error("correction operation requires freehandSegmentationMixin operationData, recieved ".concat(j))}function c(P,T){var D=T.x,y=T.y;D<P.xMin&&(P.xMin=D),D>P.xMax&&(P.xMax=D),y<P.yMin&&(P.yMin=y),y>P.yMax&&(P.yMax=y)}function h(P,T,D,y,j){for(var I=Object(s.floodFill)(y,[P.x,P.y]).flooded,B=0;B<I.length;B++){var S=I[B];D[S[1]*j+S[0]]=T}return I.length}function M(P,T){var D={x:T.x-P.x,y:T.y-P.y};return-1===D.x&&1===D.y?{left:{x:P.x-1,y:P.y-1},right:{x:P.x+1,y:P.y+1}}:0===D.x&&1===D.y?{left:{x:P.x-1,y:P.y},right:{x:P.x+1,y:P.y}}:1===D.x&&1===D.y?{left:{x:P.x-1,y:P.y+1},right:{x:P.x+1,y:P.y-1}}:1===D.x&&0===D.y?{left:{x:P.x,y:P.y+1},right:{x:P.x,y:P.y-1}}:1===D.x&&-1===D.y?{left:{x:P.x+1,y:P.y+1},right:{x:P.x-1,y:P.y-1}}:0===D.x&&-1===D.y?{left:{x:P.x+1,y:P.y},right:{x:P.x-1,y:P.y}}:-1===D.x&&-1===D.y?{left:{x:P.x+1,y:P.y-1},right:{x:P.x-1,y:P.y+1}}:-1===D.x&&0===D.y?{left:{x:P.x,y:P.y-1},right:{x:P.x,y:P.y+1}}:void m.error("Unable to find left and right paths for flood fill ",P,T,D)}},"./tools/segmentation/strategies/eraseCircle.js":
/*!******************************************************!*\
          !*** ./tools/segmentation/strategies/eraseCircle.js ***!
          \******************************************************/
/*! exports provided: eraseInsideCircle, eraseOutsideCircle */function(b,t,e){"use strict";e.r(t),e.d(t,"eraseInsideCircle",function(){return o}),e.d(t,"eraseOutsideCircle",function(){return n});var r=e(
/*! @babel/runtime/helpers/slicedToArray */
"../node_modules/@babel/runtime/helpers/slicedToArray.js"),d=e.n(r),l=e(
/*! ../../../util/ellipse */
"./util/ellipse/index.js"),s=e(
/*! ../../../util/logger */
"./util/logger.js"),g=e(
/*! ../../../util/segmentation */
"./util/segmentation/index.js"),i=e(
/*! ../../../util/getCircleCoords.js */
"./util/getCircleCoords.js"),f=Object(s.getLogger)("util:segmentation:operations:eraseInsideCircle");function m(a,u){var c=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],v=u.segmentationMixinType;if("circleSegmentationMixin"===v){var h=a.detail,E=Object(g.getBoundingBoxAroundCircle)(a),M=d()(E,2),O=M[0],P=M[1],T=Object(i.default)(h.handles.start,h.handles.end);c?Object(g.eraseInsideShape)(a,u,function(D){return Object(l.pointInEllipse)(T,D)},O,P):Object(g.eraseOutsideShape)(a,u,function(D){return Object(l.pointInEllipse)(T,D)},O,P)}else f.error("eraseInsideCircle operation requires circleSegmentationMixin operationData, recieved ".concat(v))}function o(a,u){m(a,u,!0)}function n(a,u){m(a,u,!1)}},"./tools/segmentation/strategies/eraseFreehand.js":
/*!********************************************************!*\
          !*** ./tools/segmentation/strategies/eraseFreehand.js ***!
          \********************************************************/
/*! exports provided: eraseInsideFreehand, eraseOutsideFreehand */function(b,t,e){"use strict";e.r(t),e.d(t,"eraseInsideFreehand",function(){return m}),e.d(t,"eraseOutsideFreehand",function(){return o});var r=e(
/*! @babel/runtime/helpers/slicedToArray */
"../node_modules/@babel/runtime/helpers/slicedToArray.js"),d=e.n(r),l=e(
/*! ../../../util/segmentation */
"./util/segmentation/index.js"),s=e(
/*! ../../../util/isPointInPolygon */
"./util/isPointInPolygon.js"),g=e(
/*! ../../../util/logger */
"./util/logger.js"),i=Object(g.getLogger)("util:segmentation:operations:eraseInsideFreehand");function f(n,a){var u=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],v=a.segmentationMixinType;if("freehandSegmentationMixin"===v){var h=n.detail.image,E=a.points.map(function(D){return[D.x,D.y]}),M=Object(l.getBoundingBoxAroundPolygon)(E,h),O=d()(M,2),P=O[0],T=O[1];u?Object(l.eraseInsideShape)(n,a,function(D){return Object(s.default)([D.x,D.y],E)},P,T):Object(l.eraseOutsideShape)(n,a,function(D){return Object(s.default)([D.x,D.y],E)},P,T)}else i.error("eraseInsideFreehand operation requires freehandSegmentationMixin operationData, recieved ".concat(v))}function m(n,a){f(n,a,!0)}function o(n,a){f(n,a,!1)}},"./tools/segmentation/strategies/eraseRectangle.js":
/*!*********************************************************!*\
          !*** ./tools/segmentation/strategies/eraseRectangle.js ***!
          \*********************************************************/
/*! exports provided: eraseInsideRectangle, eraseOutsideRectangle */function(b,t,e){"use strict";e.r(t),e.d(t,"eraseInsideRectangle",function(){return f}),e.d(t,"eraseOutsideRectangle",function(){return m});var r=e(
/*! @babel/runtime/helpers/slicedToArray */
"../node_modules/@babel/runtime/helpers/slicedToArray.js"),d=e.n(r),l=e(
/*! ../../../util/logger */
"./util/logger.js"),s=e(
/*! ../../../util/segmentation */
"./util/segmentation/index.js"),g=Object(l.getLogger)("util:segmentation:operations:eraseInsideRectangle");function i(o,n){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],c=n.segmentationMixinType;if("rectangleSegmentationMixin"===c){var h=o.detail.image,E=n.points.map(function(D){return[D.x,D.y]}),M=Object(s.getBoundingBoxAroundPolygon)(E,h),O=d()(M,2),P=O[0],T=O[1];a?Object(s.eraseInsideShape)(o,n,function(){return!0},P,T):Object(s.eraseOutsideBoundingBox)(o,n,P,T)}else g.error("eraseInsideRectangle operation requires rectangleSegmentationMixin operationData, recieved ".concat(c))}function f(o,n){i(o,n,!0)}function m(o,n){i(o,n,!1)}},"./tools/segmentation/strategies/fillCircle.js":
/*!*****************************************************!*\
          !*** ./tools/segmentation/strategies/fillCircle.js ***!
          \*****************************************************/
/*! exports provided: fillInsideCircle, fillOutsideCircle */function(b,t,e){"use strict";e.r(t),e.d(t,"fillInsideCircle",function(){return o}),e.d(t,"fillOutsideCircle",function(){return n});var r=e(
/*! @babel/runtime/helpers/slicedToArray */
"../node_modules/@babel/runtime/helpers/slicedToArray.js"),d=e.n(r),l=e(
/*! ../../../util/segmentation */
"./util/segmentation/index.js"),s=e(
/*! ../../../util/ellipse */
"./util/ellipse/index.js"),g=e(
/*! ../../../util/getCircleCoords */
"./util/getCircleCoords.js"),i=e(
/*! ../../../util/logger */
"./util/logger.js"),f=Object(i.getLogger)("util:segmentation:operations:fillCircle");function m(a,u){var c=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],v=u.segmentationMixinType;if("circleSegmentationMixin"===v){var h=a.detail,E=Object(l.getBoundingBoxAroundCircle)(a),M=d()(E,2),O=M[0],P=M[1],T=Object(g.default)(h.handles.start,h.handles.end);c?Object(l.fillInsideShape)(a,u,function(D){return Object(s.pointInEllipse)(T,D)},O,P):Object(l.fillOutsideShape)(a,u,function(D){return Object(s.pointInEllipse)(T,D)},O,P)}else f.error("fillInsideCircle operation requires circleSegmentationMixin operationData, recieved ".concat(v))}function o(a,u){m(a,u,!0)}function n(a,u){m(a,u,!1)}},"./tools/segmentation/strategies/fillFreehand.js":
/*!*******************************************************!*\
          !*** ./tools/segmentation/strategies/fillFreehand.js ***!
          \*******************************************************/
/*! exports provided: fillInsideFreehand, fillOutsideFreehand */function(b,t,e){"use strict";e.r(t),e.d(t,"fillInsideFreehand",function(){return m}),e.d(t,"fillOutsideFreehand",function(){return o});var r=e(
/*! @babel/runtime/helpers/slicedToArray */
"../node_modules/@babel/runtime/helpers/slicedToArray.js"),d=e.n(r),l=e(
/*! ../../../util/segmentation */
"./util/segmentation/index.js"),s=e(
/*! ../../../util/isPointInPolygon */
"./util/isPointInPolygon.js"),g=e(
/*! ../../../util/logger */
"./util/logger.js"),i=Object(g.getLogger)("util:segmentation:operations:fillInsideFreehand");function f(n,a){var u=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],v=a.segmentationMixinType;if("freehandSegmentationMixin"===v){var h=n.detail.image,E=a.points.map(function(D){return[D.x,D.y]}),M=Object(l.getBoundingBoxAroundPolygon)(E,h),O=d()(M,2),P=O[0],T=O[1];u?Object(l.fillInsideShape)(n,a,function(D){return Object(s.default)([D.x,D.y],E)},P,T):Object(l.fillOutsideShape)(n,a,function(D){return Object(s.default)([D.x,D.y],E)},P,T)}else i.error("eraseInsideFreehand operation requires freehandSegmentationMixin operationData, recieved ".concat(v))}function m(n,a){f(n,a,!0)}function o(n,a){f(n,a,!1)}},"./tools/segmentation/strategies/fillRectangle.js":
/*!********************************************************!*\
          !*** ./tools/segmentation/strategies/fillRectangle.js ***!
          \********************************************************/
/*! exports provided: fillInsideRectangle, fillOutsideRectangle */function(b,t,e){"use strict";e.r(t),e.d(t,"fillInsideRectangle",function(){return f}),e.d(t,"fillOutsideRectangle",function(){return m});var r=e(
/*! @babel/runtime/helpers/slicedToArray */
"../node_modules/@babel/runtime/helpers/slicedToArray.js"),d=e.n(r),l=e(
/*! ../../../util/segmentation */
"./util/segmentation/index.js"),s=e(
/*! ../../../util/logger */
"./util/logger.js"),g=Object(s.getLogger)("util:segmentation:operations:fillInsideRectangle");function i(o,n){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],c=n.segmentationMixinType;if("rectangleSegmentationMixin"===c){var v=o.detail.image,h=n.points.map(function(T){return[T.x,T.y]}),E=Object(l.getBoundingBoxAroundPolygon)(h,v),M=d()(E,2),O=M[0],P=M[1];a?Object(l.fillInsideShape)(o,n,function(){return!0},O,P):Object(l.fillOutsideBoundingBox)(o,n,O,P)}else g.error("eraseInsideRectangle operation requires rectangleSegmentationMixin operationData, recieved ".concat(c))}function f(o,n){i(o,n,!0)}function m(o,n){i(o,n,!1)}},"./tools/segmentation/strategies/index.js":
/*!************************************************!*\
          !*** ./tools/segmentation/strategies/index.js ***!
          \************************************************/
/*! exports provided: correction, eraseInsideFreehand, eraseOutsideFreehand, eraseInsideRectangle, eraseOutsideRectangle, fillInsideFreehand, fillOutsideFreehand, fillInsideRectangle, fillOutsideRectangle, fillInsideCircle, fillOutsideCircle, eraseInsideCircle, eraseOutsideCircle */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./correction */
"./tools/segmentation/strategies/correction.js");e.d(t,"correction",function(){return r.default});var d=e(
/*! ./eraseFreehand */
"./tools/segmentation/strategies/eraseFreehand.js");e.d(t,"eraseInsideFreehand",function(){return d.eraseInsideFreehand}),e.d(t,"eraseOutsideFreehand",function(){return d.eraseOutsideFreehand});var l=e(
/*! ./eraseRectangle.js */
"./tools/segmentation/strategies/eraseRectangle.js");e.d(t,"eraseInsideRectangle",function(){return l.eraseInsideRectangle}),e.d(t,"eraseOutsideRectangle",function(){return l.eraseOutsideRectangle});var s=e(
/*! ./fillFreehand */
"./tools/segmentation/strategies/fillFreehand.js");e.d(t,"fillInsideFreehand",function(){return s.fillInsideFreehand}),e.d(t,"fillOutsideFreehand",function(){return s.fillOutsideFreehand});var g=e(
/*! ./fillRectangle */
"./tools/segmentation/strategies/fillRectangle.js");e.d(t,"fillInsideRectangle",function(){return g.fillInsideRectangle}),e.d(t,"fillOutsideRectangle",function(){return g.fillOutsideRectangle});var i=e(
/*! ./fillCircle */
"./tools/segmentation/strategies/fillCircle.js");e.d(t,"fillInsideCircle",function(){return i.fillInsideCircle}),e.d(t,"fillOutsideCircle",function(){return i.fillOutsideCircle});var f=e(
/*! ./eraseCircle */
"./tools/segmentation/strategies/eraseCircle.js");e.d(t,"eraseInsideCircle",function(){return f.eraseInsideCircle}),e.d(t,"eraseOutsideCircle",function(){return f.eraseOutsideCircle})},"./util/SaveAs.js":
/*!************************!*\
          !*** ./util/SaveAs.js ***!
          \************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),t.default=function(r,d){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",s=r.querySelector("canvas");if(s.msToBlob){var g=s.msToBlob();return window.navigator.msSaveBlob(g,d)}var i=document.createElement("a");if(i.download=d,i.href=s.toDataURL(l,1),document.createEvent){var f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),i.dispatchEvent(f)}else i.fireEvent&&i.fireEvent("onclick")}},"./util/angleBetweenPoints.js":
/*!************************************!*\
          !*** ./util/angleBetweenPoints.js ***!
          \************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),t.default=function(r,d,l){var s=Math.sqrt(Math.pow(r.x-d.x,2)+Math.pow(r.y-d.y,2)),g=Math.sqrt(Math.pow(r.x-l.x,2)+Math.pow(r.y-l.y,2)),i=Math.sqrt(Math.pow(d.x-l.x,2)+Math.pow(d.y-l.y,2));return{angle:180*Math.acos((Math.pow(s,2)+Math.pow(g,2)-Math.pow(i,2))/(2*s*g))/Math.PI,direction:(d.x-r.x)*(l.y-r.y)-(d.y-r.y)*(l.x-r.x)}}},"./util/calculateSUV.js":
/*!******************************!*\
          !*** ./util/calculateSUV.js ***!
          \******************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../externalModules.js */
"./externalModules.js");function d(l){return parseFloat(".".concat(l))}t.default=function(l,s){var g=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=r.default.cornerstone,f=i.metaData.get("patientStudyModule",l.imageId),m=i.metaData.get("generalSeriesModule",l.imageId);if(f&&m&&"PT"===m.modality){var n=g?s:s*l.slope+l.intercept,a=f.patientWeight;if(a){var u=i.metaData.get("petIsotopeModule",l.imageId);if(u){var c=u.radiopharmaceuticalInfo,v=c.radiopharmaceuticalStartTime,h=c.radionuclideTotalDose,E=c.radionuclideHalfLife,M=m.seriesTime;if(v&&h&&E&&M){var O=d(M.fractionalSeconds||0)+M.seconds+60*M.minutes+60*M.hours*60,P=d(v.fractionalSeconds||0)+v.seconds+60*v.minutes+60*v.hours*60;return n*a/(h*Math.exp(-(O-P)*Math.log(2)/E))*1e3}}}}}},"./util/clip.js":
/*!**********************!*\
          !*** ./util/clip.js ***!
          \**********************/
/*! exports provided: clip, clipToBox, clipBoxToDisplayedArea, default */function(b,t,e){"use strict";e.r(t),e.d(t,"clip",function(){return s}),e.d(t,"clipToBox",function(){return g}),e.d(t,"clipBoxToDisplayedArea",function(){return m});var r=e(
/*! @babel/runtime/helpers/toConsumableArray */
"../node_modules/@babel/runtime/helpers/toConsumableArray.js"),d=e.n(r),l=e(
/*! ../externalModules.js */
"./externalModules.js");function s(o,n,a){return Math.min(Math.max(n,o),a)}function g(o,n){var a=n.left||0,u=n.top||0;o.x=s(o.x,a,a+n.width),o.y=s(o.y,u,u+n.height)}var i=function(n,a){var u=function(I){return l.default.cornerstone.canvasToPixel(n,I)},c=a.top,v=a.left,h=a.width,E=a.height,D=[u({x:v,y:c}),u({x:v+h,y:c}),u({x:v,y:c+E}),u({x:v+h,y:c+E})],y=D.map(function(C){return C.x}),j=D.map(function(C){return C.y});return{minX:Math.min.apply(Math,d()(y)),minY:Math.min.apply(Math,d()(j)),maxX:Math.max.apply(Math,d()(y)),maxY:Math.max.apply(Math,d()(j))}},f=function(n,a,u,c,v,h){h-v<c-u?(n[a]+=v-u,n[a]+=(h-v)/2,n[a]-=(c-u)/2):u<v?n[a]+=v-u:c>h&&(n[a]-=c-h)};function m(o,n){var a=l.default.cornerstone,u=a.pixelToCanvas,v=a.getViewport,h=a.getEnabledElement,E=a.getDisplayedArea,M=(0,a.canvasToPixel)(o,{x:n.left,y:n.top}),O=i(o,n),P=O.minX,T=O.minY,D=O.maxX,y=O.maxY,j=v(o),I=E(h(o).image,j),B=j.displayedArea?j.displayedArea:I,S=B.tlhc,K=B.brhc,W=S.x-1,x=K.x;f(M,"y",T,y,S.y-1,K.y),f(M,"x",P,D,W,x);var _=u(o,M);n.top=_.y,n.left=_.x}t.default=s},"./util/convertToVector3.js":
/*!**********************************!*\
          !*** ./util/convertToVector3.js ***!
          \**********************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return d});var r=e(
/*! ../externalModules.js */
"./externalModules.js");function d(l){var s=r.default.cornerstoneMath;if(l instanceof s.Vector3)return l;var g=Object.keys(l);return g.includes("x")&&g.includes("y")&&g.includes("z")?new s.Vector3(l.x,l.y,l.z):new s.Vector3(l[0],l[1],l[2])}},"./util/copyPoints.js":
/*!****************************!*\
          !*** ./util/copyPoints.js ***!
          \****************************/
/*! exports provided: default */function(b,t,e){"use strict";function r(){var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{x:d.x,y:d.y}}e.r(t),t.default=function(d){return{page:r(d.page),image:r(d.image),client:r(d.client),canvas:r(d.canvas)}}},"./util/debounce.js":
/*!**************************!*\
          !*** ./util/debounce.js ***!
          \**************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./isObject.js */
"./util/isObject.js");t.default=function d(l,s,g){var i,f,m,o,n,a,u=0,c=!1,v=!1,h=!0,E=!s&&0!==s&&"function"==typeof window.requestAnimationFrame;if("function"!=typeof l)throw new TypeError("Expected a function");function M(H){var W=i,L=f;return i=f=void 0,u=H,o=l.apply(L,W)}function O(H,W){return E?window.requestAnimationFrame(H):setTimeout(H,W)}function y(H){var W=H-a;return void 0===a||W>=s||W<0||v&&H-u>=m}function j(){var H=Date.now();if(y(H))return C(H);n=O(j,function D(H){var x=s-(H-a);return v?Math.min(x,m-(H-u)):x}(H))}function C(H){return n=void 0,h&&i?M(H):(i=f=void 0,o)}function K(){for(var H=Date.now(),W=y(H),L=arguments.length,x=new Array(L),_=0;_<L;_++)x[_]=arguments[_];if(i=x,f=this,a=H,W){if(void 0===n)return function T(H){return u=H,n=O(j,s),c?M(H):o}(a);if(v)return n=O(j,s),M(a)}return void 0===n&&(n=O(j,s)),o}return s=Number(s)||0,Object(r.default)(g)&&(c=!!g.leading,m=(v="maxWait"in g)?Math.max(Number(g.maxWait)||0,s):m,h="trailing"in g?!!g.trailing:h),K.cancel=function I(){void 0!==n&&function P(H){if(E)return window.cancelAnimationFrame(H);clearTimeout(H)}(n),u=0,i=a=f=n=void 0},K.flush=function B(){return void 0===n?o:C(Date.now())},K.pending=function S(){return void 0!==n},K}},"./util/debugLib/common.js":
/*!*********************************!*\
          !*** ./util/debugLib/common.js ***!
          \*********************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! @babel/runtime/helpers/toConsumableArray */
"../node_modules/@babel/runtime/helpers/toConsumableArray.js"),d=e.n(r);t.default=function l(s){function g(v){for(var h=0,E=0;E<v.length;E++)h=(h<<5)-h+v.charCodeAt(E),h|=0;return i.colors[Math.abs(h)%i.colors.length]}function i(v){var h;function E(){for(var M=arguments.length,O=new Array(M),P=0;P<M;P++)O[P]=arguments[P];if(E.enabled){var T=E,D=Number(new Date);T.diff=D-(h||D),T.prev=h,T.curr=D,h=D,O[0]=i.coerce(O[0]),"string"!=typeof O[0]&&O.unshift("%O");var j=0;O[0]=O[0].replace(/%([a-zA-Z%])/g,function(I,B){if("%%"===I)return I;j++;var S=i.formatters[B];return"function"==typeof S&&(I=S.call(T,O[j]),O.splice(j,1),j--),I}),i.formatArgs.call(T,O),(T.log||i.log).apply(T,O)}}return E.namespace=v,E.enabled=i.enabled(v),E.useColors=i.useColors(),E.color=g(v),E.destroy=f,E.extend=m,"function"==typeof i.init&&i.init(E),i.instances.push(E),E}function f(){var v=i.instances.indexOf(this);return-1!==v&&(i.instances.splice(v,1),!0)}function m(v,h){var E=i(this.namespace+(typeof h>"u"?":":h)+v);return E.log=this.log,E}function u(v){return v.toString().substring(2,v.toString().length-2).replace(/\.\*\?$/,"*")}return i.debug=i,i.default=i,i.coerce=function c(v){return v instanceof Error?v.stack||v.message:v},i.disable=function n(){var v=[].concat(d()(i.names.map(u)),d()(i.skips.map(u).map(function(h){return"-".concat(h)}))).join(",");return i.enable(""),v},i.enable=function o(v){i.save(v),i.names=[],i.skips=[];var h,E=("string"==typeof v?v:"").split(/[\s,]+/),M=E.length;for(h=0;h<M;h++)E[h]&&("-"===(v=E[h].replace(/\*/g,".*?"))[0]?i.skips.push(new RegExp("^".concat(v.substr(1),"$"))):i.names.push(new RegExp("^".concat(v,"$"))));for(h=0;h<i.instances.length;h++){var O=i.instances[h];O.enabled=i.enabled(O.namespace)}},i.enabled=function a(v){if("*"===v[v.length-1])return!0;var h,E;for(h=0,E=i.skips.length;h<E;h++)if(i.skips[h].test(v))return!1;for(h=0,E=i.names.length;h<E;h++)if(i.names[h].test(v))return!0;return!1},i.humanize=e(
/*! ms */
"../node_modules/ms/index.js"),Object.keys(s).forEach(function(v){i[v]=s[v]}),i.instances=[],i.names=[],i.skips=[],i.formatters={},i.selectColor=g,i.enable(i.load()),i}},"./util/debugLib/index.js":
/*!********************************!*\
          !*** ./util/debugLib/index.js ***!
          \********************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),function(r){var d=e(
/*! ./common.js */
"./util/debugLib/common.js"),s={formatArgs:function i(u){if(u[0]="".concat((this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" "),"+").concat(n.humanize(this.diff)),this.useColors){var c="color: ".concat(this.color);u.splice(1,0,c,"color: inherit");var v=0,h=0;u[0].replace(/%[a-zA-Z%]/g,function(E){"%%"!==E&&(v++,"%c"===E&&(h=v))}),u.splice(h,0,c)}},save:function f(u){try{u?s.storage.setItem("debug",u):s.storage.removeItem("debug")}catch{}},load:function m(){var u;try{u=s.storage.getItem("debug")}catch(c){console.warn(c)}return!u&&typeof r<"u"&&"env"in r&&(u=r.env.DEBUG),u},useColors:function g(){return!(!(typeof window<"u"&&window.process)||"renderer"!==window.process.type&&!window.process.__nwjs)||!(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},storage:function o(){try{return localStorage}catch{}}(),colors:["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"]};s.log=console.debug||console.log||function(){};var n=Object(d.default)(s);n.formatters.j=function(u){try{return JSON.stringify(u)}catch(c){return"[UnexpectedJSONParseError]: ".concat(c.message)}},t.default=n}.call(this,e(
/*! ./../../../node_modules/process/browser.js */
"../node_modules/process/browser.js"))},"./util/deepmerge.js":
/*!***************************!*\
          !*** ./util/deepmerge.js ***!
          \***************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! @babel/runtime/helpers/typeof */
"../node_modules/@babel/runtime/helpers/typeof.js"),d=e.n(r),l=function(n){return n&&"object"===d()(n)&&"[object RegExp]"!==Object.prototype.toString.call(n)&&"[object Date]"!==Object.prototype.toString.call(n)},g=function(n,a){return a&&!0===a.clone&&l(n)?m(function(n){return Array.isArray(n)?[]:{}}(n),n,a):n},i=function(n,a,u){var c=n.slice();return a.forEach(function(v,h){typeof c[h]>"u"?c[h]=g(v,u):l(v)?c[h]=m(n[h],v,u):-1===n.indexOf(v)&&c.push(g(v,u))}),c},m=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=arguments.length>2?arguments[2]:void 0,c=Array.isArray(a),h=(u||{arrayMerge:i}).arrayMerge||i;if(c)return Array.isArray(n)?h(n,a,u):g(a,u);var E=function(n,a,u){var c={};return l(n)&&Object.keys(n).forEach(function(v){c[v]=g(n[v],u)}),Object.keys(a).forEach(function(v){c[v]=l(a[v])&&n[v]?m(n[v],a[v],u):g(a[v],u)}),c}(n,a,u);return Object.getPrototypeOf(n)!==Object.prototype&&Object.setPrototypeOf(E,Object.getPrototypeOf(n)),E};t.default=m},"./util/ellipse/calculateEllipseStatistics.js":
/*!****************************************************!*\
          !*** ./util/ellipse/calculateEllipseStatistics.js ***!
          \****************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./pointInEllipse.js */
"./util/ellipse/pointInEllipse.js");t.default=function(d,l){for(var s=0,g=0,i=0,f=0,m=null,o=null,n=l.top;n<l.top+l.height;n++)for(var a=l.left;a<l.left+l.width;a++){var u={x:a,y:n};Object(r.default)(l,u)&&(null===m&&(m=d[f],o=d[f]),s+=d[f],g+=d[f]*d[f],m=Math.min(m,d[f]),o=Math.max(o,d[f]),i++),f++}if(0===i)return{count:i,mean:0,variance:0,stdDev:0,min:0,max:0};var c=s/i,v=g/i-c*c;return{count:i,mean:c,variance:v,stdDev:Math.sqrt(v),min:m,max:o}}},"./util/ellipse/index.js":
/*!*******************************!*\
          !*** ./util/ellipse/index.js ***!
          \*******************************/
/*! exports provided: calculateEllipseStatistics, pointInEllipse, default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./calculateEllipseStatistics.js */
"./util/ellipse/calculateEllipseStatistics.js");e.d(t,"calculateEllipseStatistics",function(){return r.default});var d=e(
/*! ./pointInEllipse.js */
"./util/ellipse/pointInEllipse.js");e.d(t,"pointInEllipse",function(){return d.default}),t.default={calculateEllipseStatistics:r.default,pointInEllipse:d.default}},"./util/ellipse/pointInEllipse.js":
/*!****************************************!*\
          !*** ./util/ellipse/pointInEllipse.js ***!
          \****************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),t.default=function(r,d){var l=r.width/2,s=r.height/2;if(l<=0||s<=0)return!1;var i_x=d.x-(r.left+l),i_y=d.y-(r.top+s);return i_x*i_x/(l*l)+i_y*i_y/(s*s)<=1}},"./util/findAndMoveHelpers.js":
/*!************************************!*\
          !*** ./util/findAndMoveHelpers.js ***!
          \************************************/
/*! exports provided: moveHandleNearImagePoint, findHandleDataNearImagePoint, moveAnnotation */function(b,t,e){"use strict";e.r(t),e.d(t,"moveHandleNearImagePoint",function(){return a}),e.d(t,"findHandleDataNearImagePoint",function(){return u}),e.d(t,"moveAnnotation",function(){return c});var r=e(
/*! @babel/runtime/helpers/defineProperty */
"../node_modules/@babel/runtime/helpers/defineProperty.js"),d=e.n(r),l=e(
/*! ../store/index.js */
"./store/index.js"),s=e(
/*! ../manipulators/getHandleNearImagePoint.js */
"./manipulators/getHandleNearImagePoint.js"),g=e(
/*! ./../manipulators/index.js */
"./manipulators/index.js"),i=e(
/*! ./getProximityThreshold.js */
"./util/getProximityThreshold.js"),f=e(
/*! ../events */
"./events.js"),m=e(
/*! ./triggerEvent */
"./util/triggerEvent.js");function o(v,h){var E=Object.keys(v);if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(v);h&&(M=M.filter(function(O){return Object.getOwnPropertyDescriptor(v,O).enumerable})),E.push.apply(E,M)}return E}function n(v){for(var h=1;h<arguments.length;h++){var E=null!=arguments[h]?arguments[h]:{};h%2?o(E,!0).forEach(function(M){d()(v,M,E[M])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(E)):o(E).forEach(function(M){Object.defineProperty(v,M,Object.getOwnPropertyDescriptor(E,M))})}return v}var a=function(h,E,M,O,P){M.active=!0,l.state.isToolLocked=!0,Object(g.moveHandle)(h.detail,E.name,M,O,E.options,P,function(y){var j=h.detail.element,C=M.toolType||M.toolName,I={toolName:C,toolType:C,element:j,measurementData:n({},M,{active:!1})};Object(m.default)(j,f.default.MEASUREMENT_COMPLETED,I)}),h.stopImmediatePropagation(),h.stopPropagation(),h.preventDefault()},u=function(h,E,M,O){for(var P=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"mouse",T=0;T<E.data.length;T++){var D=E.data[T],y=Object(s.default)(h,D.handles,O,Object(i.default)(P,M));if(y)return{handle:y,data:D}}},c=function(h,E,M){var O=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"mouse";M.active=!0,l.state.isToolLocked=!0,Object(g.moveAllHandles)(h.detail,E.name,M,null,E.options,O,function(){M.active=!1,l.state.isToolLocked=!1}),h.stopImmediatePropagation(),h.stopPropagation(),h.preventDefault()}},"./util/freehand/ClickedLineData.js":
/*!******************************************!*\
          !*** ./util/freehand/ClickedLineData.js ***!
          \******************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return l});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=function s(g,i){d()(this,s),this.toolIndex=g,this.handleIndexArray=i}},"./util/freehand/FreehandHandleData.js":
/*!*********************************************!*\
          !*** ./util/freehand/FreehandHandleData.js ***!
          \*********************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return l});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=function s(g){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],f=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];d()(this,s),this.x=g.x,this.y=g.y,this.highlight=i,this.active=f,this.lines=[]}},"./util/freehand/FreehandLineFinder.js":
/*!*********************************************!*\
          !*** ./util/freehand/FreehandLineFinder.js ***!
          \*********************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return o});var r=e(
/*! @babel/runtime/helpers/classCallCheck */
"../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=e.n(r),l=e(
/*! @babel/runtime/helpers/createClass */
"../node_modules/@babel/runtime/helpers/createClass.js"),s=e.n(l),g=e(
/*! ../../stateManagement/toolState.js */
"./stateManagement/toolState.js"),i=e(
/*! ../../externalModules.js */
"./externalModules.js"),f=e(
/*! ./ClickedLineData.js */
"./util/freehand/ClickedLineData.js"),o=function(){function n(a,u){d()(this,n),this._eventData=a,this._toolName=u}return s()(n,[{key:"findLine",value:function(){var u=this.findTool();if(null===u)return null;var c=this._getCloseLinesInTool(u);return c?this._findCorrectLine(u,c):null}},{key:"findTool",value:function(){return this._toolData=Object(g.getToolState)(this._eventData.element,this._toolName),this._mousePoint=this._eventData.currentPoints.canvas,this._toolData?this._nearestHandleToPointAllTools().toolIndex:null}},{key:"_nearestHandleToPointAllTools",value:function(){for(var u=this._toolData,c={toolIndex:null,handleIndex:null,distance:1/0},v=0;v<u.data.length;v++){var h=this._nearestHandleToPoint(v);null!==h&&h.distance<c.distance&&(c=h)}return c}},{key:"_nearestHandleToPoint",value:function(u){var c=this._eventData,h=this._toolData.data[u],E=h.handles.points;if(void 0===E||!1===h.visible)return null;for(var M={toolIndex:u,handleIndex:null,distance:1/0},O=0;O<E.length;O++){var P=i.default.cornerstone.pixelToCanvas(c.element,E[O]),T=i.default.cornerstoneMath.point.distance(P,this._mousePoint);T<M.distance&&(M.handleIndex=O,M.distance=T)}return M}},{key:"_getCloseLinesInTool",value:function(u){for(var v=this._toolData.data[u].handles.points,h=[],E=0;E<v.length;E++){var M=n.getNextHandleIndex(E,v.length);this._distanceOfPointfromLine(v[E],v[M])<10&&h.push([E,M])}return h}},{key:"_findCorrectLine",value:function(u,c){for(var v=0;v<c.length;v++)if(this._pointProjectsToLineSegment(u,c[v]))return new f.default(u,c[v]);return null}},{key:"_pointProjectsToLineSegment",value:function(u,c){var E=this._toolData.data[u],M=E.handles.points;if(void 0!==E.handles.points){if(!1===E.visible)return!1;var T=n.getCanvasPointsFromHandles(M[c[0]],M[c[1]],this._eventData.element),D=n.getLineAsVector(T),y=this._getLineOriginToMouseAsVector(T),j=(y[0]*D[0]+y[1]*D[1])/D.magnitude;return j>0&&j<D.magnitude}}},{key:"_getLineOriginToMouseAsVector",value:function(u){return[this._mousePoint.x-u[0].x,this._mousePoint.y-u[0].y]}},{key:"_distanceOfPointfromLine",value:function(u,c){var v=this._eventData,h=i.default.cornerstone.pixelToCanvas(v.element,u),E=i.default.cornerstone.pixelToCanvas(v.element,c),M=this._mousePoint;return Math.abs((E.y-h.y)*M.x-(E.x-h.x)*M.y+E.x*h.y-E.y*h.x)/i.default.cornerstoneMath.point.distance(h,E)}}],[{key:"getCanvasPointsFromHandles",value:function(u,c,v){var h=[];return u.x<c.x?(h.push(i.default.cornerstone.pixelToCanvas(v,u)),h.push(i.default.cornerstone.pixelToCanvas(v,c))):(h.push(i.default.cornerstone.pixelToCanvas(v,c)),h.push(i.default.cornerstone.pixelToCanvas(v,u))),h}},{key:"getLineAsVector",value:function(u){var c=[u[1].x-u[0].x,u[1].y-u[0].y];return c.magnitude=i.default.cornerstoneMath.point.distance(u[0],u[1]),c}},{key:"getNextHandleIndex",value:function(u,c){return u<c-1?u+1:0}}]),n}()},"./util/freehand/addLine.js":
/*!**********************************!*\
          !*** ./util/freehand/addLine.js ***!
          \**********************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),t.default=function(r,d){r[d].lines.push(d===r.length-1?r[0]:r[d+1])}},"./util/freehand/calculateFreehandStatistics.js":
/*!******************************************************!*\
          !*** ./util/freehand/calculateFreehandStatistics.js ***!
          \******************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./pointInFreehand.js */
"./util/freehand/pointInFreehand.js");function l(s,g,i,f){Object(r.default)(s,g)&&(i.value+=f,i.squared+=f*f,i.count++)}t.default=function(s,g,i){var f={count:0,mean:0,variance:0,stdDev:0},m=function d(s,g,i){for(var f={value:0,squared:0,count:0},m=0,o=g.top;o<g.top+g.height;o++)for(var n=g.left;n<g.left+g.width;n++)l(i,{x:n,y:o},f,s[m]),m++;return f}(s,g,i);return 0===m.count||(f.count=m.count,f.mean=m.value/m.count,f.variance=m.squared/m.count-f.mean*f.mean,f.stdDev=Math.sqrt(f.variance)),f}},"./util/freehand/freehandArea.js":
/*!***************************************!*\
          !*** ./util/freehand/freehandArea.js ***!
          \***************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),t.default=function(r,d){var l=0,s=r.length-1;d=d||1;for(var g=0;g<r.length;g++)l+=(r[s].x+r[g].x)*(r[s].y-r[g].y),s=g;return Math.abs(l*d/2)}},"./util/freehand/freehandIntersect.js":
/*!********************************************!*\
          !*** ./util/freehand/freehandIntersect.js ***!
          \********************************************/
/*! exports provided: default */function(b,t,e){"use strict";function s(o,n,a,u){for(var c=o.length-1,v=0;v<o.length;v++)if(-1===u.indexOf(v)&&-1===u.indexOf(c)){if(g(n,a,i(o[c]),i(o[v])))return!0;c=v}else c=v;return!1}function g(o,n,a,u){var c=!1,v=[f(o,n,a),f(o,n,u),f(a,u,o),f(a,u,n)];return v[0]!==v[1]&&v[2]!==v[3]||((0===v[0]&&m(o,a,n)||0===v[1]&&m(o,u,n)||0===v[2]&&m(a,o,u)||0===v[3]&&m(a,n,u))&&(c=!0),c)}function i(o){return{x:o.x,y:o.y}}function f(o,n,a){var u=(n.y-o.y)*(a.x-n.x)-(n.x-o.x)*(a.y-n.y);return 0===u?0:u>0?1:2}function m(o,n,a){return n.x<=Math.max(o.x,a.x)&&n.x>=Math.min(o.x,a.x)&&n.y<=Math.max(o.y,a.y)&&n.y>=Math.min(o.y,a.y)}e.r(t),t.default={newHandle:function r(o,n){var a=n.length-1;return s(n,i(n[a]),i(o),[a])},end:function d(o){var n=o.length-1;return s(o,i(o[n]),i(o[0]),[n,0])},modify:function l(o,n){var a=i(o[n]),u=n-1;0===n&&(u=o.length-1);var c=i(o[u]);return!!s(o,a,c,[n,u])||s(o,a,c=i(o[u=n===o.length-1?0:n+1]),[n,u])}}},"./util/freehand/index.js":
/*!********************************!*\
          !*** ./util/freehand/index.js ***!
          \********************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./calculateFreehandStatistics.js */
"./util/freehand/calculateFreehandStatistics.js"),d=e(
/*! ./ClickedLineData.js */
"./util/freehand/ClickedLineData.js"),l=e(
/*! ./freehandArea.js */
"./util/freehand/freehandArea.js"),s=e(
/*! ./FreehandHandleData.js */
"./util/freehand/FreehandHandleData.js"),g=e(
/*! ./freehandIntersect.js */
"./util/freehand/freehandIntersect.js"),i=e(
/*! ./FreehandLineFinder.js */
"./util/freehand/FreehandLineFinder.js"),f=e(
/*! ./insertOrDelete.js */
"./util/freehand/insertOrDelete.js"),m=e(
/*! ./pointInFreehand.js */
"./util/freehand/pointInFreehand.js"),o=e(
/*! ./addLine.js */
"./util/freehand/addLine.js");t.default={calculateFreehandStatistics:r.default,ClickedLineData:d.default,freehandArea:l.default,FreehandHandleData:s.default,freehandIntersect:g.default,FreehandLineFinder:i.default,insertOrDelete:f.default,pointInFreehand:m.default,addLine:o.default}},"./util/freehand/insertOrDelete.js":
/*!*****************************************!*\
          !*** ./util/freehand/insertOrDelete.js ***!
          \*****************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./FreehandLineFinder.js */
"./util/freehand/FreehandLineFinder.js"),d=e(
/*! ./FreehandHandleData.js */
"./util/freehand/FreehandHandleData.js"),l=e(
/*! ../../stateManagement/toolState.js */
"./stateManagement/toolState.js"),s=e(
/*! ../../externalModules.js */
"./externalModules.js"),g=e(
/*! ./addLine.js */
"./util/freehand/addLine.js");function i(o,n){var a=Object(l.getToolState)(o.element,this.name);if(void 0!==a){var u=n.handleIndex,v=a.data[n.toolIndex],h=v.handles.points;h.length<=3||(u===h.length-1?(h[u-1].lines.pop(),h[u-1].lines.push(h[0])):0===u?(h[h.length-1].lines.pop(),h[h.length-1].lines.push(h[u+1])):(h[u-1].lines.pop(),h[u-1].lines.push(h[u+1])),h.splice(u,1),v.invalidated=!0,v.active=!0,v.highlight=!0,s.default.cornerstone.updateImage(o.element))}}function f(o,n){var a=Object(l.getToolState)(o.element,this.name);if(void 0!==a){var u=a.data[n.toolIndex],c=function m(o){for(var n=o.handleIndexArray,a=1/0,u=n.includes(0),c=0;c<n.length;c++){var v=n[c];0!==v&&v<a&&(a=v)}return u&&1===a&&(a=0),++a}(n);if(c!==1/0){var v=new d.default(o.currentPoints.image),h=u.handles.points;h.splice(c,0,v),h[c-1].lines.pop(),h[c-1].lines.push(o.currentPoints.image),Object(g.default)(h,c),u.active=!0,u.highlight=!0,u.invalidated=!0,s.default.cornerstone.updateImage(o.element)}}}t.default=function(o,n){var a=o.detail;if(n&&null!==n.handleNearby)i.call(this,a,{toolIndex:n.toolIndex,handleIndex:n.handleNearby});else{var v=new r.default(a,this.name).findLine();v&&f.call(this,a,v)}}},"./util/freehand/pointInFreehand.js":
/*!******************************************!*\
          !*** ./util/freehand/pointInFreehand.js ***!
          \******************************************/
/*! exports provided: default */function(b,t,e){"use strict";function s(g,i,f){return!(!function r(g,i,f){return i<g&&g<f||f<g&&g<i}(g.y,i.y,f.y)||!function d(g,i,f){if(i.x>g.x&&f.x>g.x)return!0;if(i.x===f.x)return g.x<i.x;if(i.x>f.x){var m=i;i=f,f=m}var o=function l(g,i,f){var m=(f.y-i.y)/(f.x-i.x);return{value:i.y+m*(g.x-i.x),gradient:m}}(g,i,f);return Math.sign(o.gradient)*g.y>Math.sign(o.gradient)*o.value}(g,i,f))}e.r(t),t.default=function(g,i){for(var f=!1,m=g.length-1,o=0;o<g.length;o++)s(i,g[o],g[m])&&(f=!f),m=o;return f}},"./util/getActiveTool.js":
/*!*******************************!*\
          !*** ./util/getActiveTool.js ***!
          \*******************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return s});var r=e(
/*! ../store */
"./store/index.js"),d=e(
/*! ../store/getActiveToolsForElement */
"./store/getActiveToolsForElement.js"),l=e(
/*! ../store/filterToolsUsableWithMultiPartTools */
"./store/filterToolsUsableWithMultiPartTools.js");function s(g,i){var m;if("touch"===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mouse")?m=(m=Object(d.default)(g,r.getters.touchTools())).filter(function(o){return o.options.isTouchActive}):(m=(m=Object(d.default)(g,r.getters.mouseTools())).filter(function(o){return Array.isArray(o.options.mouseButtonMask)&&i&&o.options.mouseButtonMask.includes(i)&&o.options.isMouseActive}),r.state.isMultiPartToolActive&&(m=Object(l.default)(m))),0!==m.length)return m[0]}},"./util/getCircleCoords.js":
/*!*********************************!*\
          !*** ./util/getCircleCoords.js ***!
          \*********************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return d});var r=e(
/*! ../externalModules */
"./externalModules.js");function d(l,s){var i=(0,r.default.cornerstoneMath.point.distance)(l,s);return{left:Math.floor(Math.min(l.x-i,s.x)),top:Math.floor(Math.min(l.y-i,s.y)),width:2*i,height:2*i}}},"./util/getDefault.js":
/*!****************************!*\
          !*** ./util/getDefault.js ***!
          \****************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),t.default=function(r,d){return void 0===r?d:r}},"./util/getKeyPressData.js":
/*!*********************************!*\
          !*** ./util/getKeyPressData.js ***!
          \*********************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return l});var r=e(
/*! ../store/ */
"./store/index.js"),d=e(
/*! ../externalModules */
"./externalModules.js");function l(s){var g=d.default.cornerstone,i=s.currentTarget,f=g.getEnabledElement(i);if(f&&f.image){var m=r.default.state.mousePositionImage;return{event:window.event||s,element:i,viewport:g.getViewport(i),image:f.image,currentPoints:{image:m,canvas:g.pixelToCanvas(i,m)},keyCode:s.keyCode,which:s.which}}}},"./util/getLuminance.js":
/*!******************************!*\
          !*** ./util/getLuminance.js ***!
          \******************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../externalModules.js */
"./externalModules.js");t.default=function(d,l,s,g,i){if(!d)throw new Error("getLuminance: parameter element must not be undefined");l=Math.round(l),s=Math.round(s);var u,c,v,m=r.default.cornerstone.getEnabledElement(d).image,o=[],n=0,a=m.getPixelData();if(m.color)for(c=0;c<i;c++)for(v=0;v<g;v++)o[n++]=.2126*a[u=4*((c+s)*m.columns+(v+l))]+.7152*a[u+1]+.0722*a[u+2];else for(c=0;c<i;c++)for(v=0;v<g;v++)o[n++]=a[u=(c+s)*m.columns+(v+l)]*m.slope+m.intercept;return o}},"./util/getMaxSimultaneousRequests.js":
/*!********************************************!*\
          !*** ./util/getMaxSimultaneousRequests.js ***!
          \********************************************/
/*! exports provided: getDefaultSimultaneousRequests, getMaxSimultaneousRequests, setMaxSimultaneousRequests, getBrowserInfo, isMobileDevice */function(b,t,e){"use strict";e.r(t),e.d(t,"getDefaultSimultaneousRequests",function(){return i}),e.d(t,"getMaxSimultaneousRequests",function(){return g}),e.d(t,"setMaxSimultaneousRequests",function(){return s}),e.d(t,"getBrowserInfo",function(){return l}),e.d(t,"isMobileDevice",function(){return f});var r,d={default:6,IE:{9:6,10:8,default:8},Firefox:{default:6},Opera:{10:8,11:6,12:6,default:6},Chrome:{default:6},Safari:{default:6}};function l(){var n,m=navigator.userAgent,o=m.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(o[1])?(n=/\brv[ :]+(\d+)/g.exec(m)||[],"IE ".concat(n[1]||"")):"Chrome"===o[1]&&null!==(n=m.match(/\b(OPR|Edge)\/(\d+)/))?n.slice(1).join(" ").replace("OPR","Opera"):(o=o[2]?[o[1],o[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(n=m.match(/version\/(\d+)/i))&&o.splice(1,1,n[1]),o.join(" "))}function s(m){r=m}function g(){return r||i()}function i(){var o=l().split(" "),a=o[1],u=d[o[0]];return u?u[a]?u[a]:u.default:d.default}function f(){return new RegExp("Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini").test(navigator.userAgent)}},"./util/getPixelSpacing.js":
/*!*********************************!*\
          !*** ./util/getPixelSpacing.js ***!
          \*********************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return d});var r=e(
/*! ../externalModules */
"./externalModules.js");function d(l){var s=r.default.cornerstone.metaData.get("imagePlaneModule",l.imageId);return s?{rowPixelSpacing:s.rowPixelSpacing||s.rowImagePixelSpacing,colPixelSpacing:s.columnPixelSpacing||s.colImagePixelSpacing}:{rowPixelSpacing:l.rowPixelSpacing,colPixelSpacing:l.columnPixelSpacing}}},"./util/getProximityThreshold.js":
/*!***************************************!*\
          !*** ./util/getProximityThreshold.js ***!
          \***************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return d});var r=e(
/*! ../store */
"./store/index.js");function d(l,s){var g=r.state.clickProximity,i=r.state.touchProximity,f=r.state.tools.find(function(m){return m.name===s});return f&&f.configuration&&(g=f.configuration.clickProximity||g,i=f.configuration.touchProximity||i),"mouse"===l?g:i}},"./util/getRGBPixels.js":
/*!******************************!*\
          !*** ./util/getRGBPixels.js ***!
          \******************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../externalModules.js */
"./externalModules.js");t.default=function(d,l,s,g,i){if(!d)throw new Error("getRGBPixels: parameter element must not be undefined");l=Math.round(l),s=Math.round(s);var a,u,c,f=r.default.cornerstone.getEnabledElement(d),m=[],o=0,n=f.image.getPixelData();if(f.image.color)for(u=0;u<i;u++)for(c=0;c<g;c++){var h=n[1+(a=4*((u+s)*f.image.columns+(c+l)))],E=n[a+2],M=n[a+3];m[o++]=n[a],m[o++]=h,m[o++]=E,m[o++]=M}return m}},"./util/getROITextBoxCoords.js":
/*!*************************************!*\
          !*** ./util/getROITextBoxCoords.js ***!
          \*************************************/
/*! exports provided: default */function(b,t,e){"use strict";function r(l,s){var g=function d(l){var s=[l.start,l.end].sort(function n(u,c){return u.x<c.x?-1:1}),g=[l.start,l.end].sort(function a(u,c){return u.y<c.y?-1:1});return{top:g[0],left:s[0],bottom:g[g.length-1],right:s[s.length-1]}}(s),i=(g.left.x+g.right.x)/2,f=(g.top.y+g.bottom.y)/2,m={};return l.rotation>=0&&l.rotation<90&&(m.x=l.hflip?g.left.x:g.right.x,m.y=f),l.rotation>=90&&l.rotation<180&&(m.x=i,m.y=l.vflip?g.bottom.y:g.top.y),l.rotation>=180&&l.rotation<270&&(m.x=l.hflip?g.right.x:g.left.x,m.y=f),l.rotation>=270&&l.rotation<360&&(m.x=i,m.y=l.vflip?g.top.y:g.bottom.y),m}e.r(t),e.d(t,"default",function(){return r})},"./util/isEmptyObject.js":
/*!*******************************!*\
          !*** ./util/isEmptyObject.js ***!
          \*******************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),t.default=function(l){return 0===Object.keys(l).length&&l.constructor===Object}},"./util/isObject.js":
/*!**************************!*\
          !*** ./util/isObject.js ***!
          \**************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! @babel/runtime/helpers/typeof */
"../node_modules/@babel/runtime/helpers/typeof.js"),d=e.n(r);t.default=function l(s){var g=d()(s);return null!==s&&("object"===g||"function"===g)}},"./util/isPointInImage.js":
/*!********************************!*\
          !*** ./util/isPointInImage.js ***!
          \********************************/
/*! exports provided: default */function(b,t,e){"use strict";function r(d,l,s){var g=d.x,i=d.y;return g<s&&g>=0&&i<l&&i>=0}e.r(t),e.d(t,"default",function(){return r})},"./util/isPointInPolygon.js":
/*!**********************************!*\
          !*** ./util/isPointInPolygon.js ***!
          \**********************************/
/*! exports provided: default */function(b,t,e){"use strict";function r(d,l){for(var s=d[0],g=d[1],i=!1,f=0,m=l.length-1;f<l.length;m=f++){var o=l[f][0],n=l[f][1],u=l[m][1];n>g!=u>g&&s<(l[m][0]-o)*(g-n)/(u-n)+o&&(i=!i)}return i}e.r(t),e.d(t,"default",function(){return r})},"./util/lineSegDistance.js":
/*!*********************************!*\
          !*** ./util/lineSegDistance.js ***!
          \*********************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../externalModules.js */
"./externalModules.js");t.default=function(d,l,s,g){var i=r.default.cornerstone,f={start:i.pixelToCanvas(d,l),end:i.pixelToCanvas(d,s)};return r.default.cornerstoneMath.lineSegment.distanceToPoint(f,g)}},"./util/logger.js":
/*!************************!*\
          !*** ./util/logger.js ***!
          \************************/
/*! exports provided: getLogger, enable, disable */function(b,t,e){"use strict";e.r(t),e.d(t,"getLogger",function(){return g}),e.d(t,"enable",function(){return i}),e.d(t,"disable",function(){return f});var r=e(
/*! ./debugLib/index.js */
"./util/debugLib/index.js"),d="cornerstoneTools",l=Object(r.default)(d);!l.enabled&&(console.log("%cCornerstone Tools","background: #339955; padding: 4px; font-weight: bold; color: white"),console.info('run %clocalStorage.setItem("debug", "cornerstoneTools")%c to see console output',"background: #eaeaea; color: #333; font-family: monospace",""));var g=function(o){return{log:l.extend(o),warn:console.warn.bind(console),error:console.error.bind(console)}},i=function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"".concat(d,":*");return r.default.enable(o)},f=function(){return r.default.disable()}},"./util/makeUnselectable.js":
/*!**********************************!*\
          !*** ./util/makeUnselectable.js ***!
          \**********************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),t.default=function(r,d){r.style.webkitUserSelect="none",r.style.webkitTouchCallout="none",r.style.mozUserSelect="none",r.style.msUserSelect="none",r.style.oUserSelect="none",r.style.khtmlUserSelect="none",r.style.userSelect="none",r.unselectable="on",r.oncontextmenu=function(){return!1},!0===d&&(r.style.pointerEvents="none")}},"./util/numbersWithCommas.js":
/*!***********************************!*\
          !*** ./util/numbersWithCommas.js ***!
          \***********************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),t.default=function(r){var d=r.toString().split(".");return d[0]=d[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),d.join(".")}},"./util/pointInsideBoundingBox.js":
/*!****************************************!*\
          !*** ./util/pointInsideBoundingBox.js ***!
          \****************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../externalModules.js */
"./externalModules.js");t.default=function(d,l){if(d.boundingBox)return r.default.cornerstoneMath.point.insideRect(l,d.boundingBox)}},"./util/pointProjector.js":
/*!********************************!*\
          !*** ./util/pointProjector.js ***!
          \********************************/
/*! exports provided: projectPatientPointToImagePlane, imagePointToPatientPoint, planePlaneIntersection, rotatePoint */function(b,t,e){"use strict";e.r(t),e.d(t,"projectPatientPointToImagePlane",function(){return l}),e.d(t,"imagePointToPatientPoint",function(){return s}),e.d(t,"planePlaneIntersection",function(){return f}),e.d(t,"rotatePoint",function(){return m});var r=e(
/*! ../externalModules.js */
"./externalModules.js"),d=e(
/*! ../util/convertToVector3.js */
"./util/convertToVector3.js");function l(o,n){var a=Object(d.default)(n.rowCosines),u=Object(d.default)(n.columnCosines),c=Object(d.default)(n.imagePositionPatient),v=o.clone().sub(c);return{x:a.dot(v)/n.columnPixelSpacing,y:u.dot(v)/n.rowPixelSpacing}}function s(o,n){var a=Object(d.default)(n.rowCosines),u=Object(d.default)(n.columnCosines),c=Object(d.default)(n.imagePositionPatient),v=a.clone().multiplyScalar(o.x);v.multiplyScalar(n.columnPixelSpacing);var h=u.clone().multiplyScalar(o.y);h.multiplyScalar(n.rowPixelSpacing);var E=v.add(h);return E.add(c),E}function f(o,n){var a=Object(d.default)(o.rowCosines),u=Object(d.default)(o.columnCosines),c=Object(d.default)(o.imagePositionPatient),v=Object(d.default)(n.rowCosines),h=Object(d.default)(n.columnCosines),E=Object(d.default)(n.imagePositionPatient),M=a.clone().cross(u),O=new r.default.cornerstoneMath.Plane;O.setFromNormalAndCoplanarPoint(M,c);var P=v.clone().cross(h),T=new r.default.cornerstoneMath.Plane;T.setFromNormalAndCoplanarPoint(P,E);var D=T.clone().intersectPlane(O),y=D.origin,j=D.direction,C=s({x:n.columns,y:n.rows},n),I=E.distanceTo(C),B=new r.default.cornerstoneMath.Line3;B.start=y,B.end=y.clone().add(j.multiplyScalar(I));var S=function g(o){var n=s({x:0,y:0},o),a=s({x:o.columns,y:0},o),u=s({x:0,y:o.rows},o),c=s({x:o.columns,y:o.rows},o);return{top:new r.default.cornerstoneMath.Line3(n,a),left:new r.default.cornerstoneMath.Line3(n,u),right:new r.default.cornerstoneMath.Line3(a,c),bottom:new r.default.cornerstoneMath.Line3(u,c)}}(n),K=function i(o,n){var a=[];return Object.keys(n).forEach(function(u){var v=o.intersectLine(n[u]);v&&a.push(v)}),a}(B,S);if(2===K.length)return{start:K[0],end:K[1]}}function m(o,n,a){var u=a*(Math.PI/180);return{x:Math.cos(u)*(o.x-n.x)-Math.sin(u)*(o.y-n.y)+n.x,y:Math.sin(u)*(o.x-n.x)+Math.cos(u)*(o.y-n.y)+n.y}}},"./util/roundToDecimal.js":
/*!********************************!*\
          !*** ./util/roundToDecimal.js ***!
          \********************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),t.default=function(r,d){var l=Math.pow(10,d);return Math.round(r*l)/l}},"./util/scroll.js":
/*!************************!*\
          !*** ./util/scroll.js ***!
          \************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./scrollToIndex.js */
"./util/scrollToIndex.js"),d=e(
/*! ../stateManagement/toolState.js */
"./stateManagement/toolState.js"),l=e(
/*! ./clip.js */
"./util/clip.js"),s=e(
/*! ./../externalModules.js */
"./externalModules.js");function g(i,f,m){if(i.pending[0]===f){if(i.currentImageIdIndex===f.index)return i.pending.splice(i.pending.indexOf(f),1),void(i.pending.length>0&&g(i,i.pending[0],m));m.addEventListener(s.default.cornerstone.EVENTS.NEW_IMAGE,function n(a){i.imageIds.indexOf(a.detail.image.imageId)===f.index&&(i.pending.splice(i.pending.indexOf(f),1),m.removeEventListener(s.default.cornerstone.EVENTS.NEW_IMAGE,n),i.pending.length>0&&g(i,i.pending[0],m))}),Object(r.default)(m,f.index)}}t.default=function(i,f){var m=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=Object(d.getToolState)(i,"stack");if(n&&n.data&&n.data.length){var a=n.data[0];a.pending||(a.pending=[]);var u=a.currentImageIdIndex+f;if(m?u%=a.imageIds.length:u=Object(l.default)(u,0,a.imageIds.length-1),o)Object(r.default)(i,u);else{var v={index:u};a.pending.push(v),g(a,v,i)}}}},"./util/scrollToIndex.js":
/*!*******************************!*\
          !*** ./util/scrollToIndex.js ***!
          \*******************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../events.js */
"./events.js"),d=e(
/*! ../externalModules.js */
"./externalModules.js"),l=e(
/*! ../stateManagement/toolState.js */
"./stateManagement/toolState.js"),s=e(
/*! ../stateManagement/loadHandlerManager.js */
"./stateManagement/loadHandlerManager.js"),g=e(
/*! ../util/triggerEvent.js */
"./util/triggerEvent.js");t.default=function(i,f){var m=Object(l.getToolState)(i,"stack");if(m&&m.data&&m.data.length){var n,o=d.default.cornerstone;if(m.data.length>1){var a=Object(l.getToolState)(i,"stackRenderer");a&&a.data&&a.data.length&&(n=a.data[0])}var u=m.data[0];f<0&&(f+=u.imageIds.length);var c=s.default.getStartLoadHandler(i),v=s.default.getEndLoadHandler(i),h=s.default.getErrorLoadingHandler(i);if(f!==u.currentImageIdIndex){c&&c(i);var O={newImageIdIndex:f,direction:f-u.currentImageIdIndex};u.currentImageIdIndex=f;var P=u.imageIds[f];(u.preventCache?o.loadImage(P):o.loadAndCacheImage(P)).then(function E(y){if(u.currentImageIdIndex===f){try{o.getEnabledElement(i)}catch{return}n?(n.currentImageIdIndex=f,n.render(i,m.data)):o.displayImage(i,y),v&&v(i,y)}},function M(y){h&&h(i,u.imageIds[f],y)}),Object(g.default)(i,r.default.STACK_SCROLL,O)}}}},"./util/segmentation/drawBrush.js":
/*!****************************************!*\
          !*** ./util/segmentation/drawBrush.js ***!
          \****************************************/
/*! exports provided: drawBrushPixels */function(b,t,e){"use strict";e.r(t),e.d(t,"drawBrushPixels",function(){return s});var r=e(
/*! @babel/runtime/helpers/toConsumableArray */
"../node_modules/@babel/runtime/helpers/toConsumableArray.js"),d=e.n(r),l=e(
/*! ./eraseIfSegmentIndex.js */
"./util/segmentation/eraseIfSegmentIndex.js");function s(g,i,f,m){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],n=function(u,c){return c*m+u};g.forEach(function(a){var u=n.apply(void 0,d()(a));o?Object(l.default)(u,i,f):i[u]=f})}},"./util/segmentation/eraseIfSegmentIndex.js":
/*!**************************************************!*\
          !*** ./util/segmentation/eraseIfSegmentIndex.js ***!
          \**************************************************/
/*! exports provided: default */function(b,t,e){"use strict";function r(d,l,s){l[d]===s&&(l[d]=0)}e.r(t),e.d(t,"default",function(){return r})},"./util/segmentation/eraseOutsideBoundingBox.js":
/*!******************************************************!*\
          !*** ./util/segmentation/eraseOutsideBoundingBox.js ***!
          \******************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return d});var r=e(
/*! ./eraseIfSegmentIndex */
"./util/segmentation/eraseIfSegmentIndex.js");function d(l,s,g,i){for(var m=s.pixelData,o=s.segmentIndex,n=l.detail.image,a=n.width,u=n.height,c=0;c<a;c++)for(var v=0;v<g[1];v++)Object(r.default)(v*a+c,m,o);for(var h=0;h<g[0];h++)for(var E=g[1];E<i[1];E++)Object(r.default)(E*a+h,m,o);for(var M=i[0];M<a;M++)for(var O=g[1];O<i[1];O++)Object(r.default)(O*a+M,m,o);for(var P=0;P<a;P++)for(var T=i[1];T<u;T++)Object(r.default)(T*a+P,m,o)}},"./util/segmentation/eraseShape.js":
/*!*****************************************!*\
          !*** ./util/segmentation/eraseShape.js ***!
          \*****************************************/
/*! exports provided: eraseInsideShape, eraseOutsideShape */function(b,t,e){"use strict";e.r(t),e.d(t,"eraseInsideShape",function(){return m}),e.d(t,"eraseOutsideShape",function(){return o});var r=e(
/*! @babel/runtime/helpers/slicedToArray */
"../node_modules/@babel/runtime/helpers/slicedToArray.js"),d=e.n(r),l=e(
/*! ./eraseOutsideBoundingBox */
"./util/segmentation/eraseOutsideBoundingBox.js"),s=e(
/*! ./isSameSegment.js */
"./util/segmentation/isSameSegment.js"),g=e(
/*! ../logger.js */
"./util/logger.js");function f(n,a,u,c,v){var h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"inside",E=n.detail.image.width,M=a.pixelData,O=a.segmentIndex,P=d()(c,2),T=P[0],D=P[1],y=d()(v,2),j=y[0],C=y[1];"outside"===h&&Object(l.default)(n,a,c,v);for(var I=T;I<j;I++)for(var B=D;B<C;B++){var S=B*E+I;Object(s.default)(S,M,O)&&u({x:I,y:B})&&(M[S]=0)}}function m(n,a,u,c,v){f(n,a,u,c,v,"inside")}function o(n,a,u,c,v){f(n,a,function(h){return!u(h)},c,v,"outside")}Object(g.getLogger)("util:segmentation:operations:eraseOutsideCircle")},"./util/segmentation/fillOutsideBoundingBox.js":
/*!*****************************************************!*\
          !*** ./util/segmentation/fillOutsideBoundingBox.js ***!
          \*****************************************************/
/*! exports provided: default */function(b,t,e){"use strict";function r(d,l,s,g){for(var i=l.pixelData,f=l.segmentIndex,m=d.detail.image,o=m.width,n=m.height,a=0;a<o;a++)for(var u=0;u<s[1];u++)i[u*o+a]=f;for(var c=0;c<s[0];c++)for(var v=s[1];v<g[1];v++)i[v*o+c]=f;for(var h=g[0];h<o;h++)for(var E=s[1];E<g[1];E++)i[E*o+h]=f;for(var M=0;M<o;M++)for(var O=g[1];O<n;O++)i[O*o+M]=f}e.r(t),e.d(t,"default",function(){return r})},"./util/segmentation/fillShape.js":
/*!****************************************!*\
          !*** ./util/segmentation/fillShape.js ***!
          \****************************************/
/*! exports provided: fillInsideShape, fillOutsideShape */function(b,t,e){"use strict";e.r(t),e.d(t,"fillInsideShape",function(){return f}),e.d(t,"fillOutsideShape",function(){return m});var r=e(
/*! @babel/runtime/helpers/slicedToArray */
"../node_modules/@babel/runtime/helpers/slicedToArray.js"),d=e.n(r),l=e(
/*! ./fillOutsideBoundingBox */
"./util/segmentation/fillOutsideBoundingBox.js"),s=e(
/*! ../logger.js */
"./util/logger.js"),g=Object(s.getLogger)("util:segmentation:operations:helpers:fillShape");function i(o,n,a,u,c){var v=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"inside",h=n.pixelData,E=n.segmentIndex;if(void 0!==h&&void 0!==E){var M=o.detail.image.width,O=d()(u,2),P=O[0],T=O[1],D=d()(c,2),y=D[0],j=D[1];"outside"===v&&Object(l.default)(o,n,u,c);for(var C=P;C<y;C++)for(var I=T;I<j;I++){var B=I*M+C;a({x:C,y:I})&&(h[B]=E)}}else g.error("fillInsideShape requires operationData to contain pixelData and segmentIndex")}function f(o,n,a,u,c){i(o,n,a,u,c,"inside")}function m(o,n,a,u,c){i(o,n,function(v){return!a(v)},u,c,"outside")}},"./util/segmentation/floodFill.js":
/*!****************************************!*\
          !*** ./util/segmentation/floodFill.js ***!
          \****************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! @babel/runtime/helpers/toConsumableArray */
"../node_modules/@babel/runtime/helpers/toConsumableArray.js"),d=e.n(r);function l(i,f){return i===f}function g(i,f,m){return(new Array(m+1).join(f)+i).slice(-m)}t.default=function(i,f){var L,x,_,m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=m.onFlood||function(){},n=m.onBoundary||function(){},a=m.equals||l,u=m.diagonals||!1,c=B(f),v=function K(){return function H(L){for(var x=[],R=0;R<Math.pow(3,L);R+=1){var A=g(R.toString(3),"0",L);x.push(A.split("").map(function(F){return parseInt(F,10)-1}))}return x}(f.length).filter(function(x){var _=function s(i){for(var f=0,m=0;m<i.length;m+=1)0!==i[m]&&(f+=1);return f}(x);return 0!==_&&(1===_||u)})}(),h=[],E=[],M={},O={};for(h.push({currentArgs:f});h.length>0;)void 0,void 0,_=(L=h.pop()).previousArgs,function T(L){return!0===M[L]}(x=L.currentArgs)||(function D(L){M[L]=!0}(x),function y(L){var x=S(B,[L]);return S(a,[x,c])}(x)?(function j(L){E.push(L),o.apply(void 0,d()(L))}(x),function I(L){for(var x=0;x<v.length;x+=1){for(var _=v[x],R=L.slice(0),A=0;A<L.length;A+=1)R[A]+=_[A];h.push({currentArgs:R,previousArgs:L})}}(x)):function C(L){O[L]=L,n.apply(void 0,d()(L))}(_));return{flooded:E,boundaries:function W(){var L=[];for(var x in O)O.hasOwnProperty(x)&&L.unshift(O[x]);return L}()};function B(L){return i.apply(void 0,d()(L))}function S(L,x){try{return L.apply(void 0,d()(x))}catch{return}}}},"./util/segmentation/getBoundingBoxAroundCircle.js":
/*!*********************************************************!*\
          !*** ./util/segmentation/getBoundingBoxAroundCircle.js ***!
          \*********************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return d});var r=e(
/*! ../getCircleCoords */
"./util/getCircleCoords.js");function d(l){var s=l.detail.handles,g=l.detail.image,i=g.width,f=g.height,m=Object(r.default)(s.start,s.end),o=m.width+m.left,n=m.left,a=m.top+m.height,u=m.top;return n=Math.floor(n),u=Math.floor(u),o=Math.floor(o),a=Math.floor(a),o=Math.min(i,o),n=Math.max(0,n),a=Math.min(f,a),[[n,u=Math.max(0,u)],[o,a]]}},"./util/segmentation/getBoundingBoxAroundPolygon.js":
/*!**********************************************************!*\
          !*** ./util/segmentation/getBoundingBoxAroundPolygon.js ***!
          \**********************************************************/
/*! exports provided: default */function(b,t,e){"use strict";function r(d,l){var s=1/0,g=0,i=1/0,f=0,m=l.width,o=l.height;return d.forEach(function(n){s=Math.min(n[0],s),g=Math.max(n[0],g),i=Math.min(n[1],i),f=Math.max(n[1],f)}),s=Math.floor(s),i=Math.floor(i),g=Math.floor(g),f=Math.floor(f),g=Math.min(m,g),s=Math.max(0,s),f=Math.min(o,f),i=Math.max(0,i),[[s,i],[g,f]]}e.r(t),e.d(t,"default",function(){return r})},"./util/segmentation/getCircle.js":
/*!****************************************!*\
          !*** ./util/segmentation/getCircle.js ***!
          \****************************************/
/*! exports provided: default */function(b,t,e){"use strict";function r(d,l,s){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,f=Math.floor(arguments.length>3&&void 0!==arguments[3]?arguments[3]:0),m=Math.floor(i);if(1===d)return[[f,m]];for(var o=[],n=0,a=-d;a<=d;a++){var u=m+a;if(!(u>l||u<0))for(var c=-d;c<=d;c++){var v=f+c;v>=s||v<0||c*c+a*a<d*d&&(o[n++]=[f+c,m+a])}}return o}e.r(t),e.d(t,"default",function(){return r})},"./util/segmentation/getDiffBetweenPixelData.js":
/*!******************************************************!*\
          !*** ./util/segmentation/getDiffBetweenPixelData.js ***!
          \******************************************************/
/*! exports provided: default */function(b,t,e){"use strict";function r(d,l){for(var s=[],g=0;g<d.length;g++)d[g]!==l[g]&&s.push([g,d[g],l[g]]);return s}e.r(t),e.d(t,"default",function(){return r})},"./util/segmentation/getPixelPathBetweenPixels.js":
/*!********************************************************!*\
          !*** ./util/segmentation/getPixelPathBetweenPixels.js ***!
          \********************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../../externalModules.js */
"./externalModules.js"),d=1/Math.sqrt(2),l={up:{x:0,y:1},upRight:{x:d,y:d},right:{x:1,y:0},downRight:{x:d,y:-d},down:{x:0,y:1},downLeft:{x:-d,y:-d},left:{x:-1,y:0},upLeft:{x:-d,y:d}};function s(a,u){var c=m(a,u);switch(n([o(c,l.up),o(c,l.right),o(c,l.upRight)])){case 0:a.y++;break;case 1:a.x++;break;case 2:a.y++,a.x++}}function g(a,u){var c=m(a,u);switch(n([o(c,l.up),o(c,l.left),o(c,l.upLeft)])){case 0:a.y++;break;case 1:a.x--;break;case 2:a.y++,a.x--}}function i(a,u){var c=m(a,u);switch(n([o(c,l.down),o(c,l.right),o(c,l.downRight)])){case 0:a.y--;break;case 1:a.x++;break;case 2:a.y--,a.x++}}function f(a,u){var c=m(a,u);switch(n([o(c,l.down),o(c,l.left),o(c,l.downLeft)])){case 0:a.y--;break;case 1:a.x--;break;case 2:a.y--,a.x--}}function m(a,u){var c=r.default.cornerstoneMath.point.distance(a,u);return{x:(u.x-a.x)/c,y:(u.y-a.y)/c}}function o(a,u){return a.x*u.x+a.y*u.y}function n(a){var u=a[0]>a[1]?0:1;return a[2]>a[u]&&(u=2),u}t.default=function(a,u){for(var c={x:a.x,y:a.y},v=[];u.x!==c.x||u.y!==c.y;)u.x===c.x?u.y>c.y?c.y++:c.y--:u.y===c.y?u.x>c.x?c.x++:c.x--:u.y>c.y?u.x>c.x?s(c,u):g(c,u):u.x>c.x?i(c,u):f(c,u),v.push({x:c.x,y:c.y});return v.pop(),v}},"./util/segmentation/index.js":
/*!************************************!*\
          !*** ./util/segmentation/index.js ***!
          \************************************/
/*! exports provided: drawBrushPixels, eraseIfSegmentIndex, eraseOutsideBoundingBox, eraseInsideShape, eraseOutsideShape, fillOutsideBoundingBox, fillInsideShape, fillOutsideShape, floodFill, getBoundingBoxAroundCircle, getBoundingBoxAroundPolygon, getCircle, getPixelPathBetweenPixels, isSameSegment, triggerLabelmapModifiedEvent, getDiffBetweenPixelData */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./drawBrush */
"./util/segmentation/drawBrush.js");e.d(t,"drawBrushPixels",function(){return r.drawBrushPixels});var d=e(
/*! ./eraseIfSegmentIndex */
"./util/segmentation/eraseIfSegmentIndex.js");e.d(t,"eraseIfSegmentIndex",function(){return d.default});var l=e(
/*! ./eraseOutsideBoundingBox */
"./util/segmentation/eraseOutsideBoundingBox.js");e.d(t,"eraseOutsideBoundingBox",function(){return l.default});var s=e(
/*! ./eraseShape */
"./util/segmentation/eraseShape.js");e.d(t,"eraseInsideShape",function(){return s.eraseInsideShape}),e.d(t,"eraseOutsideShape",function(){return s.eraseOutsideShape});var g=e(
/*! ./fillOutsideBoundingBox */
"./util/segmentation/fillOutsideBoundingBox.js");e.d(t,"fillOutsideBoundingBox",function(){return g.default});var i=e(
/*! ./fillShape */
"./util/segmentation/fillShape.js");e.d(t,"fillInsideShape",function(){return i.fillInsideShape}),e.d(t,"fillOutsideShape",function(){return i.fillOutsideShape});var f=e(
/*! ./floodFill */
"./util/segmentation/floodFill.js");e.d(t,"floodFill",function(){return f.default});var m=e(
/*! ./getBoundingBoxAroundCircle */
"./util/segmentation/getBoundingBoxAroundCircle.js");e.d(t,"getBoundingBoxAroundCircle",function(){return m.default});var o=e(
/*! ./getBoundingBoxAroundPolygon */
"./util/segmentation/getBoundingBoxAroundPolygon.js");e.d(t,"getBoundingBoxAroundPolygon",function(){return o.default});var n=e(
/*! ./getCircle */
"./util/segmentation/getCircle.js");e.d(t,"getCircle",function(){return n.default});var a=e(
/*! ./getPixelPathBetweenPixels */
"./util/segmentation/getPixelPathBetweenPixels.js");e.d(t,"getPixelPathBetweenPixels",function(){return a.default});var u=e(
/*! ./isSameSegment */
"./util/segmentation/isSameSegment.js");e.d(t,"isSameSegment",function(){return u.default});var c=e(
/*! ./triggerLabelmapModifiedEvent */
"./util/segmentation/triggerLabelmapModifiedEvent.js");e.d(t,"triggerLabelmapModifiedEvent",function(){return c.default});var v=e(
/*! ./getDiffBetweenPixelData */
"./util/segmentation/getDiffBetweenPixelData.js");e.d(t,"getDiffBetweenPixelData",function(){return v.default})},"./util/segmentation/isSameSegment.js":
/*!********************************************!*\
          !*** ./util/segmentation/isSameSegment.js ***!
          \********************************************/
/*! exports provided: default */function(b,t,e){"use strict";function r(d,l,s){return l[d]===s}e.r(t),e.d(t,"default",function(){return r})},"./util/segmentation/triggerLabelmapModifiedEvent.js":
/*!***********************************************************!*\
          !*** ./util/segmentation/triggerLabelmapModifiedEvent.js ***!
          \***********************************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),e.d(t,"default",function(){return s});var r=e(
/*! ../../externalModules */
"./externalModules.js"),d=e(
/*! ../../events.js */
"./events.js"),l=e(
/*! ../../store */
"./store/index.js");function s(g,i){var f=Object(l.getModule)("segmentation");i=void 0===i?f.getters.activeLabelmapIndex(g):i,r.default.cornerstone.triggerEvent(g,d.default.LABELMAP_MODIFIED,{labelmapIndex:i})}},"./util/setContextToDisplayFontSize.js":
/*!*********************************************!*\
          !*** ./util/setContextToDisplayFontSize.js ***!
          \*********************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ../externalModules.js */
"./externalModules.js");t.default=function(d,l,s){var g=.1;return r.default.cornerstone.setToPixelCoordinateSystem(d,l,g),{fontSize:s/d.viewport.scale/g,lineHeight:s/d.viewport.scale/g,fontScale:g}}},"./util/throttle.js":
/*!**************************!*\
          !*** ./util/throttle.js ***!
          \**************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./debounce.js */
"./util/debounce.js"),d=e(
/*! ./isObject.js */
"./util/isObject.js");t.default=function l(s,g,i){var f=!0,m=!0;if("function"!=typeof s)throw new TypeError("Expected a function");return Object(d.default)(i)&&(f="leading"in i?!!i.leading:f,m="trailing"in i?!!i.trailing:m),Object(r.default)(s,g,{leading:f,trailing:m,maxWait:g})}},"./util/triggerEvent.js":
/*!******************************!*\
          !*** ./util/triggerEvent.js ***!
          \******************************/
/*! exports provided: default */function(b,t,e){"use strict";function r(d,l){var g,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return"function"==typeof window.CustomEvent?g=new CustomEvent(l,{detail:s,cancelable:!0}):(g=document.createEvent("CustomEvent")).initCustomEvent(l,!0,!0,s),d.dispatchEvent(g)}e.r(t),e.d(t,"default",function(){return r})},"./util/uuidv4.js":
/*!************************!*\
          !*** ./util/uuidv4.js ***!
          \************************/
/*! exports provided: default */function(b,t,e){"use strict";function r(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(d){var l=16*Math.random()|0;return("x"===d?l:3&l|8).toString(16)})}e.r(t),e.d(t,"default",function(){return r})},"./util/wait.js":
/*!**********************!*\
          !*** ./util/wait.js ***!
          \**********************/
/*! exports provided: wait, waitForEnabledElementImageToLoad, default */function(b,t,e){"use strict";e.r(t),e.d(t,"wait",function(){return d}),e.d(t,"waitForEnabledElementImageToLoad",function(){return l});var r=e(
/*! ./../externalModules.js */
"./externalModules.js"),d=function(g){return new Promise(function(i){return setTimeout(i,g)})};function l(s){try{var g=r.default.cornerstone.getEnabledElement(s);return g.image?g:d(250).then(function(){return l(s)})}catch{return null}}t.default=d},"./util/zoom/changeViewportScale.js":
/*!******************************************!*\
          !*** ./util/zoom/changeViewportScale.js ***!
          \******************************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),t.default=function(r,d,l){var s=l.maxScale,g=l.minScale,f=Math.log(r.scale)/Math.log(1.7),o=Math.pow(1.7,f+d);return r.scale=s&&o>s?s:g&&o<g?g:o,r}},"./util/zoom/correctShift.js":
/*!***********************************!*\
          !*** ./util/zoom/correctShift.js ***!
          \***********************************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),t.default=function(r,d){var s=d.vflip,g=d.rotation;if(r.x*=d.hflip?-1:1,r.y*=s?-1:1,0!==g){var i=g*Math.PI/180,f=Math.cos(i),m=Math.sin(i),n=r.x*m+r.y*f;r.x=r.x*f-r.y*m,r.y=n}return r}},"./util/zoom/index.js":
/*!****************************!*\
          !*** ./util/zoom/index.js ***!
          \****************************/
/*! exports provided: changeViewportScale, correctShift, default */function(b,t,e){"use strict";e.r(t);var r=e(
/*! ./changeViewportScale.js */
"./util/zoom/changeViewportScale.js");e.d(t,"changeViewportScale",function(){return r.default});var d=e(
/*! ./correctShift.js */
"./util/zoom/correctShift.js");e.d(t,"correctShift",function(){return d.default}),t.default={changeViewportScale:r.default,correctShift:d.default}},"./version.js":
/*!********************!*\
          !*** ./version.js ***!
          \********************/
/*! exports provided: default */function(b,t,e){"use strict";e.r(t),t.default="6.0.10"}})}),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("zlib")):"function"==typeof define&&define.amd?define("dicom-parser",["zlib"],e):"object"==typeof exports?exports["dicom-parser"]=e(require("zlib")):t.dicomParser=e(t.zlib)}(this,function(b){return function(t){var r=this.webpackHotUpdate;this.webpackHotUpdate=function(U,F){(function S(p,U){if(T[p]&&P[p]){for(var F in P[p]=!1,U)Object.prototype.hasOwnProperty.call(U,F)&&(y[F]=U[F]);0==--E&&0===M&&H()}})(U,F),r&&r(U,F)};var m,s=!0,g="1c62e16b6d24be6b7eef",i=1e4,f={},o=[],n=[];function a(p){var U=R[p];if(!U)return A;var F=function(Y){return U.hot.active?(R[Y]?-1===R[Y].parents.indexOf(p)&&R[Y].parents.push(p):(o=[p],m=Y),-1===U.children.indexOf(Y)&&U.children.push(Y)):(console.warn("[HMR] unexpected require("+Y+") from disposed module "+p),o=[]),A(Y)},N=function(J){return{configurable:!0,enumerable:!0,get:function(){return A[J]},set:function(ee){A[J]=ee}}};for(var V in A)Object.prototype.hasOwnProperty.call(A,V)&&"e"!==V&&"t"!==V&&Object.defineProperty(F,V,N(V));return F.e=function(Y){return"ready"===v&&h("prepare"),M++,A.e(Y).then(J,function(ee){throw J(),ee});function J(){M--,"prepare"===v&&(O[Y]||K(Y),0===M&&0===E&&H())}},F.t=function(Y,J){return 1&J&&(Y=F(Y)),A.t(Y,-2&J)},F}function u(p){var U={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:m!==p,active:!0,accept:function(F,N){if(void 0===F)U._selfAccepted=!0;else if("function"==typeof F)U._selfAccepted=F;else if("object"==typeof F)for(var V=0;V<F.length;V++)U._acceptedDependencies[F[V]]=N||function(){};else U._acceptedDependencies[F]=N||function(){}},decline:function(F){if(void 0===F)U._selfDeclined=!0;else if("object"==typeof F)for(var N=0;N<F.length;N++)U._declinedDependencies[F[N]]=!0;else U._declinedDependencies[F]=!0},dispose:function(F){U._disposeHandlers.push(F)},addDisposeHandler:function(F){U._disposeHandlers.push(F)},removeDisposeHandler:function(F){var N=U._disposeHandlers.indexOf(F);N>=0&&U._disposeHandlers.splice(N,1)},invalidate:function(){switch(this._selfInvalidated=!0,v){case"idle":(y={})[p]=t[p],h("ready");break;case"ready":_(p);break;case"prepare":case"check":case"dispose":case"apply":(C=C||[]).push(p)}},check:B,apply:W,status:function(F){if(!F)return v;c.push(F)},addStatusHandler:function(F){c.push(F)},removeStatusHandler:function(F){var N=c.indexOf(F);N>=0&&c.splice(N,1)},data:f[p]};return m=void 0,U}var c=[],v="idle";function h(p){v=p;for(var U=0;U<c.length;U++)c[U].call(null,p)}var D,y,j,C,E=0,M=0,O={},P={},T={};function I(p){return+p+""===p?+p:p}function B(p){if("idle"!==v)throw new Error("check() is only allowed in idle status");return s=p,h("check"),function l(p){return p=p||1e4,new Promise(function(U,F){if(typeof XMLHttpRequest>"u")return F(new Error("No browser support"));try{var N=new XMLHttpRequest,V=A.p+""+g+".hot-update.json";N.open("GET",V,!0),N.timeout=p,N.send(null)}catch(Y){return F(Y)}N.onreadystatechange=function(){if(4===N.readyState)if(0===N.status)F(new Error("Manifest request to "+V+" timed out."));else if(404===N.status)U();else if(200!==N.status&&304!==N.status)F(new Error("Manifest request to "+V+" failed."));else{try{var Y=JSON.parse(N.responseText)}catch(J){return void F(J)}U(Y)}}})}(i).then(function(U){if(!U)return h(x()?"ready":"idle"),null;P={},O={},T=U.c,j=U.h,h("prepare");var F=new Promise(function(V,Y){D={resolve:V,reject:Y}});return y={},K("dicomParser"),"prepare"===v&&0===M&&0===E&&H(),F})}function K(p){T[p]?(P[p]=!0,E++,function d(p){var U=document.createElement("script");U.charset="utf-8",U.src=A.p+""+p+"."+g+".hot-update.js",document.head.appendChild(U)}(p)):O[p]=!0}function H(){h("ready");var p=D;if(D=null,p)if(s)Promise.resolve().then(function(){return W(s)}).then(function(N){p.resolve(N)},function(N){p.reject(N)});else{var U=[];for(var F in y)Object.prototype.hasOwnProperty.call(y,F)&&U.push(I(F));p.resolve(U)}}function W(p){if("ready"!==v)throw new Error("apply() is only allowed in ready status");return L(p=p||{})}function L(p){var U,F,N,V,Y;function J(ge){for(var Te=[ge],me={},De=Te.map(function(Ue){return{chain:[Ue],id:Ue}});De.length>0;){var Ce=De.pop(),je=Ce.id,ye=Ce.chain;if((V=R[je])&&(!V.hot._selfAccepted||V.hot._selfInvalidated)){if(V.hot._selfDeclined)return{type:"self-declined",chain:ye,moduleId:je};if(V.hot._main)return{type:"unaccepted",chain:ye,moduleId:je};for(var Le=0;Le<V.parents.length;Le++){var _e=V.parents[Le],Ae=R[_e];if(Ae){if(Ae.hot._declinedDependencies[je])return{type:"declined",chain:ye.concat([_e]),moduleId:je,parentId:_e};if(-1===Te.indexOf(_e)){if(Ae.hot._acceptedDependencies[je]){me[_e]||(me[_e]=[]),ee(me[_e],[je]);continue}delete me[_e],Te.push(_e),De.push({chain:ye.concat([_e]),id:_e})}}}}}return{type:"accepted",moduleId:ge,outdatedModules:Te,outdatedDependencies:me}}function ee(ge,Te){for(var me=0;me<Te.length;me++){var De=Te[me];-1===ge.indexOf(De)&&ge.push(De)}}x();var q={},le=[],Q={},X=function(){console.warn("[HMR] unexpected require("+$.moduleId+") to disposed module")};for(var w in y)if(Object.prototype.hasOwnProperty.call(y,w)){var $;Y=I(w);var k=!1,ae=!1,te=!1,oe="";switch(($=y[w]?J(Y):{type:"disposed",moduleId:w}).chain&&(oe="\nUpdate propagation: "+$.chain.join(" -> ")),$.type){case"self-declined":p.onDeclined&&p.onDeclined($),p.ignoreDeclined||(k=new Error("Aborted because of self decline: "+$.moduleId+oe));break;case"declined":p.onDeclined&&p.onDeclined($),p.ignoreDeclined||(k=new Error("Aborted because of declined dependency: "+$.moduleId+" in "+$.parentId+oe));break;case"unaccepted":p.onUnaccepted&&p.onUnaccepted($),p.ignoreUnaccepted||(k=new Error("Aborted because "+Y+" is not accepted"+oe));break;case"accepted":p.onAccepted&&p.onAccepted($),ae=!0;break;case"disposed":p.onDisposed&&p.onDisposed($),te=!0;break;default:throw new Error("Unexception type "+$.type)}if(k)return h("abort"),Promise.reject(k);if(ae)for(Y in Q[Y]=y[Y],ee(le,$.outdatedModules),$.outdatedDependencies)Object.prototype.hasOwnProperty.call($.outdatedDependencies,Y)&&(q[Y]||(q[Y]=[]),ee(q[Y],$.outdatedDependencies[Y]));te&&(ee(le,[$.moduleId]),Q[Y]=X)}var de,se=[];for(F=0;F<le.length;F++)R[Y=le[F]]&&R[Y].hot._selfAccepted&&Q[Y]!==X&&!R[Y].hot._selfInvalidated&&se.push({module:Y,parents:R[Y].parents.slice(),errorHandler:R[Y].hot._selfAccepted});h("dispose"),Object.keys(T).forEach(function(ge){!1===T[ge]&&function e(p){delete installedChunks[p]}(ge)});for(var ie,fe=le.slice();fe.length>0;)if(Y=fe.pop(),V=R[Y]){var ue={},ve=V.hot._disposeHandlers;for(N=0;N<ve.length;N++)(U=ve[N])(ue);for(f[Y]=ue,V.hot.active=!1,delete R[Y],delete q[Y],N=0;N<V.children.length;N++){var he=R[V.children[N]];he&&(ie=he.parents.indexOf(Y))>=0&&he.parents.splice(ie,1)}}for(Y in q)if(Object.prototype.hasOwnProperty.call(q,Y)&&(V=R[Y]))for(de=q[Y],N=0;N<de.length;N++)(ie=V.children.indexOf(de[N]))>=0&&V.children.splice(ie,1);for(Y in h("apply"),void 0!==j&&(g=j,j=void 0),y=void 0,Q)Object.prototype.hasOwnProperty.call(Q,Y)&&(t[Y]=Q[Y]);var Me=null;for(Y in q)if(Object.prototype.hasOwnProperty.call(q,Y)&&(V=R[Y])){de=q[Y];var Ee=[];for(F=0;F<de.length;F++)if(U=V.hot._acceptedDependencies[de[F]]){if(-1!==Ee.indexOf(U))continue;Ee.push(U)}for(F=0;F<Ee.length;F++){U=Ee[F];try{U(de)}catch(ge){p.onErrored&&p.onErrored({type:"accept-errored",moduleId:Y,dependencyId:de[F],error:ge}),p.ignoreErrored||Me||(Me=ge)}}}for(F=0;F<se.length;F++){var Oe=se[F];o=Oe.parents,m=Y=Oe.module;try{A(Y)}catch(ge){if("function"==typeof Oe.errorHandler)try{Oe.errorHandler(ge)}catch(Te){p.onErrored&&p.onErrored({type:"self-accept-error-handler-errored",moduleId:Y,error:Te,originalError:ge}),p.ignoreErrored||Me||(Me=Te),Me||(Me=ge)}else p.onErrored&&p.onErrored({type:"self-accept-errored",moduleId:Y,error:ge}),p.ignoreErrored||Me||(Me=ge)}}return Me?(h("fail"),Promise.reject(Me)):C?L(p).then(function(ge){return le.forEach(function(Te){ge.indexOf(Te)<0&&ge.push(Te)}),ge}):(h("idle"),new Promise(function(ge){ge(le)}))}function x(){if(C)return y||(y={}),C.forEach(_),C=void 0,!0}function _(p){Object.prototype.hasOwnProperty.call(y,p)||(y[p]=t[p])}var R={};function A(p){if(R[p])return R[p].exports;var U=R[p]={i:p,l:!1,exports:{},hot:u(p),parents:(n=o,o=[],n),children:[]};return t[p].call(U.exports,U,U.exports,a(p)),U.l=!0,U.exports}return A.m=t,A.c=R,A.d=function(p,U,F){A.o(p,U)||Object.defineProperty(p,U,{enumerable:!0,get:F})},A.r=function(p){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(p,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(p,"__esModule",{value:!0})},A.t=function(p,U){if(1&U&&(p=A(p)),8&U||4&U&&"object"==typeof p&&p&&p.__esModule)return p;var F=Object.create(null);if(A.r(F),Object.defineProperty(F,"default",{enumerable:!0,value:p}),2&U&&"string"!=typeof p)for(var N in p)A.d(F,N,function(V){return p[V]}.bind(null,N));return F},A.n=function(p){var U=p&&p.__esModule?function(){return p.default}:function(){return p};return A.d(U,"a",U),U},A.o=function(p,U){return Object.prototype.hasOwnProperty.call(p,U)},A.p="",A.h=function(){return g},a("./index.js")(A.s="./index.js")}({"./alloc.js":
/*!******************!*\
          !*** ./alloc.js ***!
          \******************/
/*! exports provided: default */function(t,e,r){"use strict";function d(l,s){if(typeof Buffer<"u"&&l instanceof Buffer)return Buffer.alloc(s);if(l instanceof Uint8Array)return new Uint8Array(s);throw"dicomParser.alloc: unknown type for byteArray"}r.r(e),r.d(e,"default",function(){return d})},"./bigEndianByteArrayParser.js":
/*!*************************************!*\
          !*** ./bigEndianByteArrayParser.js ***!
          \*************************************/
/*! exports provided: default */function(t,e,r){"use strict";r.r(e),e.default={readUint16:function(l,s){if(s<0)throw"bigEndianByteArrayParser.readUint16: position cannot be less than 0";if(s+2>l.length)throw"bigEndianByteArrayParser.readUint16: attempt to read past end of buffer";return(l[s]<<8)+l[s+1]},readInt16:function(l,s){if(s<0)throw"bigEndianByteArrayParser.readInt16: position cannot be less than 0";if(s+2>l.length)throw"bigEndianByteArrayParser.readInt16: attempt to read past end of buffer";var g=(l[s]<<8)+l[s+1];return 32768&g&&(g=g-65535-1),g},readUint32:function(l,s){if(s<0)throw"bigEndianByteArrayParser.readUint32: position cannot be less than 0";if(s+4>l.length)throw"bigEndianByteArrayParser.readUint32: attempt to read past end of buffer";return 256*(256*(256*l[s]+l[s+1])+l[s+2])+l[s+3]},readInt32:function(l,s){if(s<0)throw"bigEndianByteArrayParser.readInt32: position cannot be less than 0";if(s+4>l.length)throw"bigEndianByteArrayParser.readInt32: attempt to read past end of buffer";return(l[s]<<24)+(l[s+1]<<16)+(l[s+2]<<8)+l[s+3]},readFloat:function(l,s){if(s<0)throw"bigEndianByteArrayParser.readFloat: position cannot be less than 0";if(s+4>l.length)throw"bigEndianByteArrayParser.readFloat: attempt to read past end of buffer";var g=new Uint8Array(4);return g[3]=l[s],g[2]=l[s+1],g[1]=l[s+2],g[0]=l[s+3],new Float32Array(g.buffer)[0]},readDouble:function(l,s){if(s<0)throw"bigEndianByteArrayParser.readDouble: position cannot be less than 0";if(s+8>l.length)throw"bigEndianByteArrayParser.readDouble: attempt to read past end of buffer";var g=new Uint8Array(8);return g[7]=l[s],g[6]=l[s+1],g[5]=l[s+2],g[4]=l[s+3],g[3]=l[s+4],g[2]=l[s+5],g[1]=l[s+6],g[0]=l[s+7],new Float64Array(g.buffer)[0]}}},"./byteArrayParser.js":
/*!****************************!*\
          !*** ./byteArrayParser.js ***!
          \****************************/
/*! exports provided: readFixedString */function(t,e,r){"use strict";function d(l,s,g){if(g<0)throw"dicomParser.readFixedString - length cannot be less than 0";if(s+g>l.length)throw"dicomParser.readFixedString: attempt to read past end of buffer";for(var f,i="",m=0;m<g;m++){if(0===(f=l[s+m]))return s+=g,i;i+=String.fromCharCode(f)}return i}r.r(e),r.d(e,"readFixedString",function(){return d})},"./byteStream.js":
/*!***********************!*\
          !*** ./byteStream.js ***!
          \***********************/
/*! exports provided: default */function(t,e,r){"use strict";r.r(e),r.d(e,"default",function(){return f});var d=r(
/*! ./sharedCopy.js */
"./sharedCopy.js"),l=r(
/*! ./byteArrayParser.js */
"./byteArrayParser.js");function g(m,o){for(var n=0;n<o.length;n++){var a=o[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(m,a.key,a)}}var f=function(){function m(o,n,a){if(function s(m,o){if(!(m instanceof o))throw new TypeError("Cannot call a class as a function")}(this,m),void 0===o)throw"dicomParser.ByteStream: missing required parameter 'byteArrayParser'";if(void 0===n)throw"dicomParser.ByteStream: missing required parameter 'byteArray'";if(!(n instanceof Uint8Array||!(typeof Buffer>"u")&&n instanceof Buffer))throw"dicomParser.ByteStream: parameter byteArray is not of type Uint8Array or Buffer";if(a<0)throw"dicomParser.ByteStream: parameter 'position' cannot be less than 0";if(a>=n.length)throw"dicomParser.ByteStream: parameter 'position' cannot be greater than or equal to 'byteArray' length";this.byteArrayParser=o,this.byteArray=n,this.position=a||0,this.warnings=[]}return function i(m,o,n){o&&g(m.prototype,o),n&&g(m,n),Object.defineProperty(m,"prototype",{writable:!1})}(m,[{key:"seek",value:function(n){if(this.position+n<0)throw"dicomParser.ByteStream.prototype.seek: cannot seek to position < 0";this.position+=n}},{key:"readByteStream",value:function(n){if(this.position+n>this.byteArray.length)throw"dicomParser.ByteStream.prototype.readByteStream: readByteStream - buffer overread";var a=Object(d.default)(this.byteArray,this.position,n);return this.position+=n,new m(this.byteArrayParser,a)}},{key:"getSize",value:function(){return this.byteArray.length}},{key:"readUint16",value:function(){var n=this.byteArrayParser.readUint16(this.byteArray,this.position);return this.position+=2,n}},{key:"readUint32",value:function(){var n=this.byteArrayParser.readUint32(this.byteArray,this.position);return this.position+=4,n}},{key:"readFixedString",value:function(n){var a=Object(l.readFixedString)(this.byteArray,this.position,n);return this.position+=n,a}}]),m}()},"./dataSet.js":
/*!********************!*\
          !*** ./dataSet.js ***!
          \********************/
/*! exports provided: default */function(t,e,r){"use strict";r.r(e),r.d(e,"default",function(){return f});var d=r(
/*! ./byteArrayParser.js */
"./byteArrayParser.js");function s(m,o){for(var n=0;n<o.length;n++){var a=o[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(m,a.key,a)}}function i(m,o){return void 0!==m.parser?m.parser:o}var f=function(){function m(o,n,a){(function l(m,o){if(!(m instanceof o))throw new TypeError("Cannot call a class as a function")})(this,m),this.byteArrayParser=o,this.byteArray=n,this.elements=a}return function g(m,o,n){o&&s(m.prototype,o),n&&s(m,n),Object.defineProperty(m,"prototype",{writable:!1})}(m,[{key:"uint16",value:function(n,a){var u=this.elements[n];if(a=void 0!==a?a:0,u&&0!==u.length)return i(u,this.byteArrayParser).readUint16(this.byteArray,u.dataOffset+2*a)}},{key:"int16",value:function(n,a){var u=this.elements[n];if(a=void 0!==a?a:0,u&&0!==u.length)return i(u,this.byteArrayParser).readInt16(this.byteArray,u.dataOffset+2*a)}},{key:"uint32",value:function(n,a){var u=this.elements[n];if(a=void 0!==a?a:0,u&&0!==u.length)return i(u,this.byteArrayParser).readUint32(this.byteArray,u.dataOffset+4*a)}},{key:"int32",value:function(n,a){var u=this.elements[n];if(a=void 0!==a?a:0,u&&0!==u.length)return i(u,this.byteArrayParser).readInt32(this.byteArray,u.dataOffset+4*a)}},{key:"float",value:function(n,a){var u=this.elements[n];if(a=void 0!==a?a:0,u&&0!==u.length)return i(u,this.byteArrayParser).readFloat(this.byteArray,u.dataOffset+4*a)}},{key:"double",value:function(n,a){var u=this.elements[n];if(a=void 0!==a?a:0,u&&0!==u.length)return i(u,this.byteArrayParser).readDouble(this.byteArray,u.dataOffset+8*a)}},{key:"numStringValues",value:function(n){var a=this.elements[n];if(a&&a.length>0){var c=Object(d.readFixedString)(this.byteArray,a.dataOffset,a.length).match(/\\/g);return null===c?1:c.length+1}}},{key:"string",value:function(n,a){var u=this.elements[n];if(u&&u.Value)return u.Value;if(u&&u.length>0){var c=Object(d.readFixedString)(this.byteArray,u.dataOffset,u.length);return a>=0?c.split("\\")[a].trim():c.trim()}}},{key:"text",value:function(n,a){var u=this.elements[n];if(u&&u.length>0){var c=Object(d.readFixedString)(this.byteArray,u.dataOffset,u.length);return a>=0?c.split("\\")[a].replace(/ +$/,""):c.replace(/ +$/,"")}}},{key:"floatString",value:function(n,a){var u=this.elements[n];if(u&&u.length>0){var c=this.string(n,a=void 0!==a?a:0);if(void 0!==c)return parseFloat(c)}}},{key:"intString",value:function(n,a){var u=this.elements[n];if(u&&u.length>0){var c=this.string(n,a=void 0!==a?a:0);if(void 0!==c)return parseInt(c)}}},{key:"attributeTag",value:function(n){var a=this.elements[n];if(a&&4===a.length){var u=i(a,this.byteArrayParser).readUint16,c=this.byteArray,v=a.dataOffset;return"x".concat("00000000".concat((256*u(c,v)*256+u(c,v+2)).toString(16)).substr(-8))}}}]),m}()},"./findAndSetUNElementLength.js":
/*!**************************************!*\
          !*** ./findAndSetUNElementLength.js ***!
          \**************************************/
/*! exports provided: default */function(t,e,r){"use strict";function d(l,s){if(void 0===l)throw"dicomParser.findAndSetUNElementLength: missing required parameter 'byteStream'";for(var i=l.byteArray.length-8;l.position<=i;)if(65534===l.readUint16()&&57565===l.readUint16())return 0!==l.readUint32()&&l.warnings("encountered non zero length following item delimiter at position ".concat(l.position-4," while reading element of undefined length with tag ").concat(s.tag)),void(s.length=l.position-s.dataOffset);s.length=l.byteArray.length-s.dataOffset,l.seek(l.byteArray.length-l.position)}r.r(e),r.d(e,"default",function(){return d})},"./findEndOfEncapsulatedPixelData.js":
/*!*******************************************!*\
          !*** ./findEndOfEncapsulatedPixelData.js ***!
          \*******************************************/
/*! exports provided: default */function(t,e,r){"use strict";r.r(e),r.d(e,"default",function(){return l});var d=r(
/*! ./readTag.js */
"./readTag.js");function l(s,g,i){if(void 0===s)throw"dicomParser.findEndOfEncapsulatedElement: missing required parameter 'byteStream'";if(void 0===g)throw"dicomParser.findEndOfEncapsulatedElement: missing required parameter 'element'";if(g.encapsulatedPixelData=!0,g.basicOffsetTable=[],g.fragments=[],"xfffee000"!==Object(d.default)(s))throw"dicomParser.findEndOfEncapsulatedElement: basic offset table not found";for(var o=s.readUint32()/4,n=0;n<o;n++){var a=s.readUint32();g.basicOffsetTable.push(a)}for(var u=s.position;s.position<s.byteArray.length;){var c=Object(d.default)(s),v=s.readUint32();if("xfffee0dd"===c)return s.seek(v),void(g.length=s.position-g.dataOffset);if("xfffee000"!==c)return i&&i.push("unexpected tag ".concat(c," while searching for end of pixel data element with undefined length")),v>s.byteArray.length-s.position&&(v=s.byteArray.length-s.position),g.fragments.push({offset:s.position-u-8,position:s.position,length:v}),s.seek(v),void(g.length=s.position-g.dataOffset);g.fragments.push({offset:s.position-u-8,position:s.position,length:v}),s.seek(v)}i&&i.push("pixel data element ".concat(g.tag," missing sequence delimiter tag xfffee0dd"))}},"./findItemDelimitationItem.js":
/*!*************************************!*\
          !*** ./findItemDelimitationItem.js ***!
          \*************************************/
/*! exports provided: default */function(t,e,r){"use strict";function d(l,s){if(void 0===l)throw"dicomParser.readDicomElementImplicit: missing required parameter 'byteStream'";for(var i=l.byteArray.length-8;l.position<=i;)if(65534===l.readUint16()&&57357===l.readUint16())return 0!==l.readUint32()&&l.warnings("encountered non zero length following item delimiter at position ".concat(l.position-4," while reading element of undefined length with tag ").concat(s.tag)),void(s.length=l.position-s.dataOffset);s.length=l.byteArray.length-s.dataOffset,l.seek(l.byteArray.length-l.position)}r.r(e),r.d(e,"default",function(){return d})},"./index.js":
/*!******************!*\
          !*** ./index.js ***!
          \******************/
/*! exports provided: isStringVr, isPrivateTag, parsePN, parseTM, parseDA, explicitElementToString, explicitDataSetToJS, createJPEGBasicOffsetTable, parseDicomDataSetExplicit, parseDicomDataSetImplicit, readFixedString, alloc, version, bigEndianByteArrayParser, ByteStream, sharedCopy, DataSet, findAndSetUNElementLength, findEndOfEncapsulatedElement, findItemDelimitationItemAndSetElementLength, littleEndianByteArrayParser, parseDicom, readDicomElementExplicit, readDicomElementImplicit, readEncapsulatedImageFrame, readEncapsulatedPixelData, readEncapsulatedPixelDataFromFragments, readPart10Header, readSequenceItemsExplicit, readSequenceItemsImplicit, readSequenceItem, readTag, default */function(t,e,r){"use strict";r.r(e);var d=r(
/*! ./util/index.js */
"./util/index.js");r.d(e,"isStringVr",function(){return d.isStringVr}),r.d(e,"isPrivateTag",function(){return d.isPrivateTag}),r.d(e,"parsePN",function(){return d.parsePN}),r.d(e,"parseTM",function(){return d.parseTM}),r.d(e,"parseDA",function(){return d.parseDA}),r.d(e,"explicitElementToString",function(){return d.explicitElementToString}),r.d(e,"explicitDataSetToJS",function(){return d.explicitDataSetToJS}),r.d(e,"createJPEGBasicOffsetTable",function(){return d.createJPEGBasicOffsetTable});var l=r(
/*! ./parseDicomDataSet.js */
"./parseDicomDataSet.js");r.d(e,"parseDicomDataSetExplicit",function(){return l.parseDicomDataSetExplicit}),r.d(e,"parseDicomDataSetImplicit",function(){return l.parseDicomDataSetImplicit});var s=r(
/*! ./byteArrayParser.js */
"./byteArrayParser.js");r.d(e,"readFixedString",function(){return s.readFixedString});var g=r(
/*! ./alloc.js */
"./alloc.js");r.d(e,"alloc",function(){return g.default});var i=r(
/*! ./version.js */
"./version.js");r.d(e,"version",function(){return i.default});var f=r(
/*! ./bigEndianByteArrayParser.js */
"./bigEndianByteArrayParser.js");r.d(e,"bigEndianByteArrayParser",function(){return f.default});var m=r(
/*! ./byteStream.js */
"./byteStream.js");r.d(e,"ByteStream",function(){return m.default});var o=r(
/*! ./sharedCopy.js */
"./sharedCopy.js");r.d(e,"sharedCopy",function(){return o.default});var n=r(
/*! ./dataSet.js */
"./dataSet.js");r.d(e,"DataSet",function(){return n.default});var a=r(
/*! ./findAndSetUNElementLength.js */
"./findAndSetUNElementLength.js");r.d(e,"findAndSetUNElementLength",function(){return a.default});var u=r(
/*! ./findEndOfEncapsulatedPixelData.js */
"./findEndOfEncapsulatedPixelData.js");r.d(e,"findEndOfEncapsulatedElement",function(){return u.default});var c=r(
/*! ./findItemDelimitationItem.js */
"./findItemDelimitationItem.js");r.d(e,"findItemDelimitationItemAndSetElementLength",function(){return c.default});var v=r(
/*! ./littleEndianByteArrayParser.js */
"./littleEndianByteArrayParser.js");r.d(e,"littleEndianByteArrayParser",function(){return v.default});var h=r(
/*! ./parseDicom.js */
"./parseDicom.js");r.d(e,"parseDicom",function(){return h.default});var E=r(
/*! ./readDicomElementExplicit.js */
"./readDicomElementExplicit.js");r.d(e,"readDicomElementExplicit",function(){return E.default});var M=r(
/*! ./readDicomElementImplicit.js */
"./readDicomElementImplicit.js");r.d(e,"readDicomElementImplicit",function(){return M.default});var O=r(
/*! ./readEncapsulatedImageFrame.js */
"./readEncapsulatedImageFrame.js");r.d(e,"readEncapsulatedImageFrame",function(){return O.default});var P=r(
/*! ./readEncapsulatedPixelData.js */
"./readEncapsulatedPixelData.js");r.d(e,"readEncapsulatedPixelData",function(){return P.default});var T=r(
/*! ./readEncapsulatedPixelDataFromFragments.js */
"./readEncapsulatedPixelDataFromFragments.js");r.d(e,"readEncapsulatedPixelDataFromFragments",function(){return T.default});var D=r(
/*! ./readPart10Header.js */
"./readPart10Header.js");r.d(e,"readPart10Header",function(){return D.default});var y=r(
/*! ./readSequenceElementExplicit.js */
"./readSequenceElementExplicit.js");r.d(e,"readSequenceItemsExplicit",function(){return y.default});var j=r(
/*! ./readSequenceElementImplicit.js */
"./readSequenceElementImplicit.js");r.d(e,"readSequenceItemsImplicit",function(){return j.default});var C=r(
/*! ./readSequenceItem.js */
"./readSequenceItem.js");r.d(e,"readSequenceItem",function(){return C.default});var I=r(
/*! ./readTag.js */
"./readTag.js");r.d(e,"readTag",function(){return I.default}),e.default={isStringVr:d.isStringVr,isPrivateTag:d.isPrivateTag,parsePN:d.parsePN,parseTM:d.parseTM,parseDA:d.parseDA,explicitElementToString:d.explicitElementToString,explicitDataSetToJS:d.explicitDataSetToJS,createJPEGBasicOffsetTable:d.createJPEGBasicOffsetTable,parseDicomDataSetExplicit:l.parseDicomDataSetExplicit,parseDicomDataSetImplicit:l.parseDicomDataSetImplicit,readFixedString:s.readFixedString,alloc:g.default,version:i.default,bigEndianByteArrayParser:f.default,ByteStream:m.default,sharedCopy:o.default,DataSet:n.default,findAndSetUNElementLength:a.default,findEndOfEncapsulatedElement:u.default,findItemDelimitationItemAndSetElementLength:c.default,littleEndianByteArrayParser:v.default,parseDicom:h.default,readDicomElementExplicit:E.default,readDicomElementImplicit:M.default,readEncapsulatedImageFrame:O.default,readEncapsulatedPixelData:P.default,readEncapsulatedPixelDataFromFragments:T.default,readPart10Header:D.default,readSequenceItemsExplicit:y.default,readSequenceItemsImplicit:j.default,readSequenceItem:C.default,readTag:I.default,LEI:h.LEI,LEE:h.LEE}},"./littleEndianByteArrayParser.js":
/*!****************************************!*\
          !*** ./littleEndianByteArrayParser.js ***!
          \****************************************/
/*! exports provided: default */function(t,e,r){"use strict";r.r(e),e.default={readUint16:function(l,s){if(s<0)throw"littleEndianByteArrayParser.readUint16: position cannot be less than 0";if(s+2>l.length)throw"littleEndianByteArrayParser.readUint16: attempt to read past end of buffer";return l[s]+256*l[s+1]},readInt16:function(l,s){if(s<0)throw"littleEndianByteArrayParser.readInt16: position cannot be less than 0";if(s+2>l.length)throw"littleEndianByteArrayParser.readInt16: attempt to read past end of buffer";var g=l[s]+(l[s+1]<<8);return 32768&g&&(g=g-65535-1),g},readUint32:function(l,s){if(s<0)throw"littleEndianByteArrayParser.readUint32: position cannot be less than 0";if(s+4>l.length)throw"littleEndianByteArrayParser.readUint32: attempt to read past end of buffer";return l[s]+256*l[s+1]+256*l[s+2]*256+256*l[s+3]*256*256},readInt32:function(l,s){if(s<0)throw"littleEndianByteArrayParser.readInt32: position cannot be less than 0";if(s+4>l.length)throw"littleEndianByteArrayParser.readInt32: attempt to read past end of buffer";return l[s]+(l[s+1]<<8)+(l[s+2]<<16)+(l[s+3]<<24)},readFloat:function(l,s){if(s<0)throw"littleEndianByteArrayParser.readFloat: position cannot be less than 0";if(s+4>l.length)throw"littleEndianByteArrayParser.readFloat: attempt to read past end of buffer";var g=new Uint8Array(4);return g[0]=l[s],g[1]=l[s+1],g[2]=l[s+2],g[3]=l[s+3],new Float32Array(g.buffer)[0]},readDouble:function(l,s){if(s<0)throw"littleEndianByteArrayParser.readDouble: position cannot be less than 0";if(s+8>l.length)throw"littleEndianByteArrayParser.readDouble: attempt to read past end of buffer";var g=new Uint8Array(8);return g[0]=l[s],g[1]=l[s+1],g[2]=l[s+2],g[3]=l[s+3],g[4]=l[s+4],g[5]=l[s+5],g[6]=l[s+6],g[7]=l[s+7],new Float64Array(g.buffer)[0]}}},"./parseDicom.js":
/*!***********************!*\
          !*** ./parseDicom.js ***!
          \***********************/
/*! exports provided: default, LEI, LEE, BEI */function(t,e,r){"use strict";r.r(e),r.d(e,"default",function(){return v}),r.d(e,"LEI",function(){return u}),r.d(e,"LEE",function(){return a}),r.d(e,"BEI",function(){return c});var d=r(
/*! ./alloc.js */
"./alloc.js"),l=r(
/*! ./bigEndianByteArrayParser.js */
"./bigEndianByteArrayParser.js"),s=r(
/*! ./byteStream.js */
"./byteStream.js"),g=r(
/*! ./dataSet.js */
"./dataSet.js"),i=r(
/*! ./littleEndianByteArrayParser.js */
"./littleEndianByteArrayParser.js"),f=r(
/*! ./readPart10Header.js */
"./readPart10Header.js"),m=r(
/*! ./sharedCopy.js */
"./sharedCopy.js"),o=r(
/*! ./byteArrayParser.js */
"./byteArrayParser.js"),n=r(
/*! ./parseDicomDataSet.js */
"./parseDicomDataSet.js"),a="1.2.840.10008.1.2.1",u="1.2.840.10008.1.2",c="1.2.840.10008.1.2.2";function v(h){var E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===h)throw new Error("dicomParser.parseDicom: missing required parameter 'byteArray'");function D(j){var C=function(C){if(void 0===C.elements.x00020010)throw new Error("dicomParser.parseDicom: missing required meta header attribute 0002,0010");var I=C.elements.x00020010;return I&&I.Value||o.readFixedString(h,I.dataOffset,I.length)}(j),I=function O(j){return"1.2.840.10008.1.2"!==j}(C),B=function P(j,C){var I="[object process]"===Object.prototype.toString.call(typeof process<"u"?process:0);if("1.2.840.10008.1.2.1.99"===j){if(E&&E.inflater){var B=E.inflater(h,C);return new s.default(i.default,B,0)}if(!0===I){var S=r(
/*! zlib */
"zlib"),K=Object(m.default)(h,C,h.length-C),H=S.inflateRawSync(K),W=Object(d.default)(h,H.length+C);return h.copy(W,0,0,C),H.copy(W,C),new s.default(i.default,W,0)}if(typeof pako<"u"){var L=h.slice(C),x=pako.inflateRaw(L),_=Object(d.default)(h,x.length+C);return _.set(h.slice(0,C),0),_.set(x,C),new s.default(i.default,_,0)}throw"dicomParser.parseDicom: no inflater available to handle deflate transfer syntax"}return new s.default(j===c?l.default:i.default,h,C)}(C,j.position),K=new g.default(B.byteArrayParser,B.byteArray,{});K.warnings=B.warnings;try{I?n.parseDicomDataSetExplicit(K,B,B.byteArray.length,E):n.parseDicomDataSetImplicit(K,B,B.byteArray.length,E)}catch(W){throw{exception:W,dataSet:K}}return K}return function y(){var j=Object(f.default)(h,E);return function T(j,C){for(var I in j.elements)j.elements.hasOwnProperty(I)&&(C.elements[I]=j.elements[I]);return void 0!==j.warnings&&(C.warnings=j.warnings.concat(C.warnings)),C}(j,D(j))}()}},"./parseDicomDataSet.js":
/*!******************************!*\
          !*** ./parseDicomDataSet.js ***!
          \******************************/
/*! exports provided: parseDicomDataSetExplicit, parseDicomDataSetImplicit */function(t,e,r){"use strict";r.r(e),r.d(e,"parseDicomDataSetExplicit",function(){return s}),r.d(e,"parseDicomDataSetImplicit",function(){return g});var d=r(
/*! ./readDicomElementExplicit.js */
"./readDicomElementExplicit.js"),l=r(
/*! ./readDicomElementImplicit.js */
"./readDicomElementImplicit.js");function s(i,f,m){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(void 0===f)throw"dicomParser.parseDicomDataSetExplicit: missing required parameter 'byteStream'";if((m=void 0===m?f.byteArray.length:m)<f.position||m>f.byteArray.length)throw"dicomParser.parseDicomDataSetExplicit: invalid value for parameter 'maxP osition'";for(var n=i.elements;f.position<m;){var a=Object(d.default)(f,i.warnings,o.untilTag);if(n[a.tag]=a,a.tag===o.untilTag)return}if(f.position>m)throw"dicomParser:parseDicomDataSetExplicit: buffer overrun"}function g(i,f,m){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(void 0===f)throw"dicomParser.parseDicomDataSetImplicit: missing required parameter 'byteStream'";if((m=void 0===m?i.byteArray.length:m)<f.position||m>f.byteArray.length)throw"dicomParser.parseDicomDataSetImplicit: invalid value for parameter 'maxPosition'";for(var n=i.elements;f.position<m;){var a=Object(l.default)(f,o.untilTag,o.vrCallback);if(n[a.tag]=a,a.tag===o.untilTag)return}}},"./readDicomElementExplicit.js":
/*!*************************************!*\
          !*** ./readDicomElementExplicit.js ***!
          \*************************************/
/*! exports provided: default */function(t,e,r){"use strict";r.r(e),r.d(e,"default",function(){return o});var d=r(
/*! ./findEndOfEncapsulatedPixelData.js */
"./findEndOfEncapsulatedPixelData.js"),s=(r(
/*! ./findAndSetUNElementLength.js */
"./findAndSetUNElementLength.js"),r(
/*! ./readSequenceElementImplicit.js */
"./readSequenceElementImplicit.js")),g=r(
/*! ./readTag.js */
"./readTag.js"),i=r(
/*! ./findItemDelimitationItem.js */
"./findItemDelimitationItem.js"),f=r(
/*! ./readSequenceElementExplicit.js */
"./readSequenceElementExplicit.js"),m=function(a){return"OB"===a||"OD"===a||"OL"===a||"OW"===a||"SQ"===a||"OF"===a||"UC"===a||"UR"===a||"UT"===a||"UN"===a?4:2};function o(n,a,u){if(void 0===n)throw"dicomParser.readDicomElementExplicit: missing required parameter 'byteStream'";var c={tag:Object(g.default)(n),vr:n.readFixedString(2)};return 2===m(c.vr)?(c.length=n.readUint16(),c.dataOffset=n.position):(n.seek(2),c.length=n.readUint32(),c.dataOffset=n.position),4294967295===c.length&&(c.hadUndefinedLength=!0),c.tag===u?c:"SQ"===c.vr?(Object(f.default)(n,c,a),c):4294967295===c.length?"x7fe00010"===c.tag?(Object(d.default)(n,c,a),c):"UN"===c.vr?(Object(s.default)(n,c),c):(Object(i.default)(n,c),c):(n.seek(c.length),c)}},"./readDicomElementImplicit.js":
/*!*************************************!*\
          !*** ./readDicomElementImplicit.js ***!
          \*************************************/
/*! exports provided: default */function(t,e,r){"use strict";r.r(e),r.d(e,"default",function(){return f});var d=r(
/*! ./findItemDelimitationItem.js */
"./findItemDelimitationItem.js"),l=r(
/*! ./readSequenceElementImplicit.js */
"./readSequenceElementImplicit.js"),s=r(
/*! ./readTag.js */
"./readTag.js"),g=r(
/*! ./util/util.js */
"./util/util.js"),i=function(o,n){if(void 0!==o.vr)return"SQ"===o.vr;if(n.position+4<=n.byteArray.length){var a=Object(s.default)(n);return n.seek(-4),"xfffee000"===a||"xfffee0dd"===a}return n.warnings.push("eof encountered before finding sequence item tag or sequence delimiter tag in peeking to determine VR"),!1};function f(m,o,n){if(void 0===m)throw"dicomParser.readDicomElementImplicit: missing required parameter 'byteStream'";var a=Object(s.default)(m),u={tag:a,vr:void 0!==n?n(a):void 0,length:m.readUint32(),dataOffset:m.position};return 4294967295===u.length&&(u.hadUndefinedLength=!0),u.tag===o?u:!i(u,m)||Object(g.isPrivateTag)(u.tag)&&!u.hadUndefinedLength?u.hadUndefinedLength?(Object(d.default)(m,u),u):(m.seek(u.length),u):(Object(l.default)(m,u,n),Object(g.isPrivateTag)(u.tag)&&(u.items=void 0),u)}},"./readEncapsulatedImageFrame.js":
/*!***************************************!*\
          !*** ./readEncapsulatedImageFrame.js ***!
          \***************************************/
/*! exports provided: default */function(t,e,r){"use strict";r.r(e),r.d(e,"default",function(){return g});var d=r(
/*! ./readEncapsulatedPixelDataFromFragments.js */
"./readEncapsulatedPixelDataFromFragments.js"),l=function(f,m){for(var o=0;o<f.length;o++)if(f[o].offset===m)return o},s=function(f,m,o,n){if(f===m.length-1)return o.length-n;for(var a=m[f+1],u=n+1;u<o.length;u++)if(o[u].offset===a)return u-n;throw"dicomParser.calculateNumberOfFragmentsForFrame: could not find fragment with offset matching basic offset table"};function g(i,f,m,o,n){if(void 0===i)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'dataSet'";if(void 0===f)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'pixelDataElement'";if(void 0===m)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'frameIndex'";if(void 0===(o=o||f.basicOffsetTable))throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' does not have basicOffsetTable";if("x7fe00010"!==f.tag)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010)";if(!0!==f.encapsulatedPixelData)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(!0!==f.hadUndefinedLength)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have undefined length";if(void 0===f.fragments)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have fragments";if(0===o.length)throw"dicomParser.readEncapsulatedImageFrame: basicOffsetTable has zero entries";if(m<0)throw"dicomParser.readEncapsulatedImageFrame: parameter 'frameIndex' must be >= 0";if(m>=o.length)throw"dicomParser.readEncapsulatedImageFrame: parameter 'frameIndex' must be < basicOffsetTable.length";var u=l(n=n||f.fragments,o[m]);if(void 0===u)throw"dicomParser.readEncapsulatedImageFrame: unable to find fragment that matches basic offset table entry";var c=s(m,o,n,u);return Object(d.default)(i,f,u,c,n)}},"./readEncapsulatedPixelData.js":
/*!**************************************!*\
          !*** ./readEncapsulatedPixelData.js ***!
          \**************************************/
/*! exports provided: default */function(t,e,r){"use strict";r.r(e),r.d(e,"default",function(){return g});var d=r(
/*! ./readEncapsulatedImageFrame.js */
"./readEncapsulatedImageFrame.js"),l=r(
/*! ./readEncapsulatedPixelDataFromFragments.js */
"./readEncapsulatedPixelDataFromFragments.js"),s=!1;function g(i,f,m){if(s||(s=!0,console&&console.log&&console.log("WARNING: dicomParser.readEncapsulatedPixelData() has been deprecated")),void 0===i)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'dataSet'";if(void 0===f)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'element'";if(void 0===m)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'frame'";if("x7fe00010"!==f.tag)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to non pixel data tag (expected tag = x7fe00010)";if(!0!==f.encapsulatedPixelData||!0!==f.hadUndefinedLength||void 0===f.basicOffsetTable||void 0===f.fragments)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(m<0)throw"dicomParser.readEncapsulatedPixelData: parameter 'frame' must be >= 0";return 0!==f.basicOffsetTable.length?Object(d.default)(i,f,m):Object(l.default)(i,f,0,f.fragments.length)}},"./readEncapsulatedPixelDataFromFragments.js":
/*!***************************************************!*\
          !*** ./readEncapsulatedPixelDataFromFragments.js ***!
          \***************************************************/
/*! exports provided: default */function(t,e,r){"use strict";r.r(e),r.d(e,"default",function(){return f});var d=r(
/*! ./alloc.js */
"./alloc.js"),l=r(
/*! ./byteStream.js */
"./byteStream.js"),s=r(
/*! ./readSequenceItem.js */
"./readSequenceItem.js"),g=r(
/*! ./sharedCopy.js */
"./sharedCopy.js"),i=function(o,n,a){for(var u=0,c=n;c<n+a;c++)u+=o[c].length;return u};function f(m,o,n,a,u){if(u=u||o.fragments,void 0===m)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'dataSet'";if(void 0===o)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'pixelDataElement'";if(void 0===n)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'startFragmentIndex'";if(void 0===(a=a||1))throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'numFragments'";if("x7fe00010"!==o.tag)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010";if(!0!==o.encapsulatedPixelData||!0!==o.hadUndefinedLength||void 0===o.basicOffsetTable||void 0===o.fragments||o.fragments.length<=0)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(n<0)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragmentIndex' must be >= 0";if(n>=o.fragments.length)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragmentIndex' must be < number of fragments";if(a<1)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'numFragments' must be > 0";if(n+a>o.fragments.length)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragment' + 'numFragments' < number of fragments";var c=new l.default(m.byteArrayParser,m.byteArray,o.dataOffset),v=Object(s.default)(c);if("xfffee000"!==v.tag)throw"dicomParser.readEncapsulatedPixelData: missing basic offset table xfffee000";c.seek(v.length);var h=c.position;if(1===a)return Object(g.default)(c.byteArray,h+u[n].offset+8,u[n].length);for(var M=i(u,n,a),O=Object(d.default)(c.byteArray,M),P=0,T=n;T<n+a;T++)for(var D=h+u[T].offset+8,y=0;y<u[T].length;y++)O[P++]=c.byteArray[D++];return O}},"./readPart10Header.js":
/*!*****************************!*\
          !*** ./readPart10Header.js ***!
          \*****************************/
/*! exports provided: default */function(t,e,r){"use strict";r.r(e),r.d(e,"default",function(){return i});var d=r(
/*! ./byteStream.js */
"./byteStream.js"),l=r(
/*! ./dataSet.js */
"./dataSet.js"),s=r(
/*! ./littleEndianByteArrayParser.js */
"./littleEndianByteArrayParser.js"),g=r(
/*! ./readDicomElementExplicit.js */
"./readDicomElementExplicit.js");function i(f){var m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===f)throw"dicomParser.readPart10Header: missing required parameter 'byteArray'";var o=m.TransferSyntaxUID,n=new d.default(s.default,f);return function u(){var v=[],h={};if(!function a(){if(n.getSize()<=132&&o)return!1;if(n.seek(128),"DICM"!==n.readFixedString(4)){if(!(m||{}).TransferSyntaxUID)throw"dicomParser.readPart10Header: DICM prefix not found at location 132 - this is not a valid DICOM P10 file.";return n.seek(0),!1}return!0}())return n.position=0,{elements:{x00020010:{tag:"x00020010",vr:"UI",Value:o}},warnings:v};for(;n.position<n.byteArray.length;){var M=n.position,O=Object(g.default)(n,v);if(O.tag>"x0002ffff"){n.position=M;break}O.parser=s.default,h[O.tag]=O}var P=new l.default(n.byteArrayParser,n.byteArray,h);return P.warnings=n.warnings,P.position=n.position,P}()}},"./readSequenceElementExplicit.js":
/*!****************************************!*\
          !*** ./readSequenceElementExplicit.js ***!
          \****************************************/
/*! exports provided: default */function(t,e,r){"use strict";r.r(e),r.d(e,"default",function(){return a});var d=r(
/*! ./dataSet.js */
"./dataSet.js"),l=r(
/*! ./readDicomElementExplicit.js */
"./readDicomElementExplicit.js"),s=r(
/*! ./readSequenceItem.js */
"./readSequenceItem.js"),g=r(
/*! ./readTag.js */
"./readTag.js"),i=r(
/*! ./parseDicomDataSet.js */
"./parseDicomDataSet.js");function m(u,c){var v=Object(s.default)(u);return 4294967295===v.length?(v.hadUndefinedLength=!0,v.dataSet=function f(u,c){for(var v={};u.position<u.byteArray.length;){var h=Object(l.default)(u,c);if(v[h.tag]=h,"xfffee00d"===h.tag)return new d.default(u.byteArrayParser,u.byteArray,v)}return c.push("eof encountered before finding item delimiter tag while reading sequence item of undefined length"),new d.default(u.byteArrayParser,u.byteArray,v)}(u,c),v.length=u.position-v.dataOffset):(v.dataSet=new d.default(u.byteArrayParser,u.byteArray,{}),i.parseDicomDataSetExplicit(v.dataSet,u,u.position+v.length)),v}function a(u,c,v){if(void 0===u)throw"dicomParser.readSequenceItemsExplicit: missing required parameter 'byteStream'";if(void 0===c)throw"dicomParser.readSequenceItemsExplicit: missing required parameter 'element'";c.items=[],4294967295===c.length?function o(u,c,v){for(;u.position+4<=u.byteArray.length;){var h=Object(g.default)(u);if(u.seek(-4),"xfffee0dd"===h)return c.length=u.position-c.dataOffset,u.seek(8),c;var E=m(u,v);c.items.push(E)}v.push("eof encountered before finding sequence delimitation tag while reading sequence of undefined length"),c.length=u.position-c.dataOffset}(u,c,v):function n(u,c,v){for(var h=c.dataOffset+c.length;u.position<h;){var E=m(u,v);c.items.push(E)}}(u,c,v)}},"./readSequenceElementImplicit.js":
/*!****************************************!*\
          !*** ./readSequenceElementImplicit.js ***!
          \****************************************/
/*! exports provided: default */function(t,e,r){"use strict";r.r(e),r.d(e,"default",function(){return a});var d=r(
/*! ./dataSet.js */
"./dataSet.js"),l=r(
/*! ./readDicomElementImplicit.js */
"./readDicomElementImplicit.js"),s=r(
/*! ./readSequenceItem.js */
"./readSequenceItem.js"),g=r(
/*! ./readTag.js */
"./readTag.js"),i=r(
/*! ./parseDicomDataSet.js */
"./parseDicomDataSet.js");function m(u,c){var v=Object(s.default)(u);return 4294967295===v.length?(v.hadUndefinedLength=!0,v.dataSet=function f(u,c){for(var v={};u.position<u.byteArray.length;){var h=Object(l.default)(u,void 0,c);if(v[h.tag]=h,"xfffee00d"===h.tag)return new d.default(u.byteArrayParser,u.byteArray,v)}return u.warnings.push("eof encountered before finding sequence item delimiter in sequence item of undefined length"),new d.default(u.byteArrayParser,u.byteArray,v)}(u,c),v.length=u.position-v.dataOffset):(v.dataSet=new d.default(u.byteArrayParser,u.byteArray,{}),i.parseDicomDataSetImplicit(v.dataSet,u,u.position+v.length,{vrCallback:c})),v}function a(u,c,v){if(void 0===u)throw"dicomParser.readSequenceItemsImplicit: missing required parameter 'byteStream'";if(void 0===c)throw"dicomParser.readSequenceItemsImplicit: missing required parameter 'element'";c.items=[],4294967295===c.length?function o(u,c,v){for(;u.position+4<=u.byteArray.length;){var h=Object(g.default)(u);if(u.seek(-4),"xfffee0dd"===h)return c.length=u.position-c.dataOffset,u.seek(8),c;var E=m(u,v);c.items.push(E)}u.warnings.push("eof encountered before finding sequence delimiter in sequence of undefined length"),c.length=u.byteArray.length-c.dataOffset}(u,c,v):function n(u,c,v){for(var h=c.dataOffset+c.length;u.position<h;){var E=m(u,v);c.items.push(E)}}(u,c,v)}},"./readSequenceItem.js":
/*!*****************************!*\
          !*** ./readSequenceItem.js ***!
          \*****************************/
/*! exports provided: default */function(t,e,r){"use strict";r.r(e),r.d(e,"default",function(){return l});var d=r(
/*! ./readTag.js */
"./readTag.js");function l(s){if(void 0===s)throw"dicomParser.readSequenceItem: missing required parameter 'byteStream'";var g={tag:Object(d.default)(s),length:s.readUint32(),dataOffset:s.position};if("xfffee000"!==g.tag)throw"dicomParser.readSequenceItem: item tag (FFFE,E000) not found at offset ".concat(s.position);return g}},"./readTag.js":
/*!********************!*\
          !*** ./readTag.js ***!
          \********************/
/*! exports provided: default */function(t,e,r){"use strict";function d(l){if(void 0===l)throw"dicomParser.readTag: missing required parameter 'byteStream'";var s=256*l.readUint16()*256,g=l.readUint16();return"x".concat("00000000".concat((s+g).toString(16)).substr(-8))}r.r(e),r.d(e,"default",function(){return d})},"./sharedCopy.js":
/*!***********************!*\
          !*** ./sharedCopy.js ***!
          \***********************/
/*! exports provided: default */function(t,e,r){"use strict";function d(l,s,g){if(typeof Buffer<"u"&&l instanceof Buffer)return l.slice(s,s+g);if(l instanceof Uint8Array)return new Uint8Array(l.buffer,l.byteOffset+s,g);throw"dicomParser.from: unknown type for byteArray"}r.r(e),r.d(e,"default",function(){return d})},"./util/createJPEGBasicOffsetTable.js":
/*!********************************************!*\
          !*** ./util/createJPEGBasicOffsetTable.js ***!
          \********************************************/
/*! exports provided: default */function(t,e,r){"use strict";function d(i,f){return 255===i.byteArray[f]&&217===i.byteArray[f+1]}function l(i,f,m){var o=f.fragments[m];return!(!d(i,o.position+o.length-2)&&!d(i,o.position+o.length-3))}function s(i,f,m){for(var o=m;o<f.fragments.length;o++)if(l(i,f,o))return o}function g(i,f,m){if(void 0===i)throw"dicomParser.createJPEGBasicOffsetTable: missing required parameter dataSet";if(void 0===f)throw"dicomParser.createJPEGBasicOffsetTable: missing required parameter pixelDataElement";if("x7fe00010"!==f.tag)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010'";if(!0!==f.encapsulatedPixelData||!0!==f.hadUndefinedLength||void 0===f.basicOffsetTable||void 0===f.fragments||f.fragments.length<=0)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(m&&m.length<=0)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'fragments' must not be zero length";m=m||f.fragments;for(var o=[],n=0;;){o.push(f.fragments[n].offset);var a=s(i,f,n);if(void 0===a||a===f.fragments.length-1)return o;n=a+1}}r.r(e),r.d(e,"default",function(){return g})},"./util/dataSetToJS.js":
/*!*****************************!*\
          !*** ./util/dataSetToJS.js ***!
          \*****************************/
/*! exports provided: default */function(t,e,r){"use strict";r.r(e),r.d(e,"default",function(){return s});var d=r(
/*! ./elementToString.js */
"./util/elementToString.js"),l=r(
/*! ./util.js */
"./util/util.js");function s(g,i){if(void 0===g)throw"dicomParser.explicitDataSetToJS: missing required parameter dataSet";i=i||{omitPrivateAttibutes:!0,maxElementLength:128};var f={};for(var m in g.elements){var o=g.elements[m];if(!0!==i.omitPrivateAttibutes||!l.isPrivateTag(m))if(o.items){for(var n=[],a=0;a<o.items.length;a++)n.push(s(o.items[a].dataSet,i));f[m]=n}else{var u;u=void 0,o.length<i.maxElementLength&&(u=Object(d.default)(g,o)),f[m]=void 0!==u?u:{dataOffset:o.dataOffset,length:o.length}}}return f}},"./util/elementToString.js":
/*!*********************************!*\
          !*** ./util/elementToString.js ***!
          \*********************************/
/*! exports provided: default */function(t,e,r){"use strict";r.r(e),r.d(e,"default",function(){return l});var d=r(
/*! ./util.js */
"./util/util.js");function l(s,g){if(void 0===s||void 0===g)throw"dicomParser.explicitElementToString: missing required parameters";if(void 0===g.vr)throw"dicomParser.explicitElementToString: cannot convert implicit element to string";var m,i=g.vr,f=g.tag;function o(a,u){for(var c="",v=0;v<a;v++)0!==v&&(c+="/"),c+=u.call(s,f,v).toString();return c}if(!0===d.isStringVr(i))m=s.string(f);else{if("AT"===i){var n=s.uint32(f);return void 0===n?void 0:(n<0&&(n=4294967295+n+1),"x".concat(n.toString(16).toUpperCase()))}"US"===i?m=o(g.length/2,s.uint16):"SS"===i?m=o(g.length/2,s.int16):"UL"===i?m=o(g.length/4,s.uint32):"SL"===i?m=o(g.length/4,s.int32):"FD"===i?m=o(g.length/8,s.double):"FL"===i&&(m=o(g.length/4,s.float))}return m}},"./util/index.js":
/*!***********************!*\
          !*** ./util/index.js ***!
          \***********************/
/*! exports provided: isStringVr, isPrivateTag, parsePN, parseTM, parseDA, explicitElementToString, explicitDataSetToJS, createJPEGBasicOffsetTable */function(t,e,r){"use strict";r.r(e);var d=r(
/*! ./util.js */
"./util/util.js");r.d(e,"isStringVr",function(){return d.isStringVr}),r.d(e,"isPrivateTag",function(){return d.isPrivateTag}),r.d(e,"parsePN",function(){return d.parsePN});var l=r(
/*! ./parseTM.js */
"./util/parseTM.js");r.d(e,"parseTM",function(){return l.default});var s=r(
/*! ./parseDA.js */
"./util/parseDA.js");r.d(e,"parseDA",function(){return s.default});var g=r(
/*! ./elementToString.js */
"./util/elementToString.js");r.d(e,"explicitElementToString",function(){return g.default});var i=r(
/*! ./dataSetToJS.js */
"./util/dataSetToJS.js");r.d(e,"explicitDataSetToJS",function(){return i.default});var f=r(
/*! ./createJPEGBasicOffsetTable.js */
"./util/createJPEGBasicOffsetTable.js");r.d(e,"createJPEGBasicOffsetTable",function(){return f.default})},"./util/parseDA.js":
/*!*************************!*\
          !*** ./util/parseDA.js ***!
          \*************************/
/*! exports provided: default */function(t,e,r){"use strict";function s(g,i){if(g&&8===g.length){var f=parseInt(g.substring(0,4),10),m=parseInt(g.substring(4,6),10),o=parseInt(g.substring(6,8),10);if(i&&!0!==function l(g,i,f){return!isNaN(f)&&i>0&&i<=12&&g>0&&g<=function d(g,i){switch(g){case 2:return i%4==0&&i%100||i%400==0?29:28;case 9:case 4:case 6:case 11:return 30;default:return 31}}(i,f)}(o,m,f))throw"invalid DA '".concat(g,"'");return{year:f,month:m,day:o}}if(i)throw"invalid DA '".concat(g,"'")}r.r(e),r.d(e,"default",function(){return s})},"./util/parseTM.js":
/*!*************************!*\
          !*** ./util/parseTM.js ***!
          \*************************/
/*! exports provided: default */function(t,e,r){"use strict";function d(l,s){if(l.length>=2){var g=parseInt(l.substring(0,2),10),i=l.length>=4?parseInt(l.substring(2,4),10):void 0,f=l.length>=6?parseInt(l.substring(4,6),10):void 0,m=l.length>=8?l.substring(7,13):void 0,o=m?parseInt(m,10)*Math.pow(10,6-m.length):void 0;if(s&&(isNaN(g)||void 0!==i&&isNaN(i)||void 0!==f&&isNaN(f)||void 0!==o&&isNaN(o)||g<0||g>23||i&&(i<0||i>59)||f&&(f<0||f>59)||o&&(o<0||o>999999)))throw"invalid TM '".concat(l,"'");return{hours:g,minutes:i,seconds:f,fractionalSeconds:o}}if(s)throw"invalid TM '".concat(l,"'")}r.r(e),r.d(e,"default",function(){return d})},"./util/util.js":
/*!**********************!*\
          !*** ./util/util.js ***!
          \**********************/
/*! exports provided: isStringVr, isPrivateTag, parsePN */function(t,e,r){"use strict";r.r(e),r.d(e,"isStringVr",function(){return l}),r.d(e,"isPrivateTag",function(){return s}),r.d(e,"parsePN",function(){return g});var d={AE:!0,AS:!0,AT:!1,CS:!0,DA:!0,DS:!0,DT:!0,FL:!1,FD:!1,IS:!0,LO:!0,LT:!0,OB:!1,OD:!1,OF:!1,OW:!1,PN:!0,SH:!0,SL:!1,SQ:!1,SS:!1,ST:!0,TM:!0,UI:!0,UL:!1,UN:void 0,UR:!0,US:!1,UT:!0},l=function(f){return d[f]},s=function(f){var m=parseInt(f[4],16);if(isNaN(m))throw"dicomParser.isPrivateTag: cannot parse last character of group";return m%2==1},g=function(f){if(void 0!==f){var m=f.split("^");return{familyName:m[0],givenName:m[1],middleName:m[2],prefix:m[3],suffix:m[4]}}}},"./version.js":
/*!********************!*\
          !*** ./version.js ***!
          \********************/
/*! exports provided: default */function(t,e,r){"use strict";r.r(e),e.default="1.8.12"},zlib:
/*!***********************!*\
          !*** external "zlib" ***!
          \***********************/
/*! no static exports found */function(t,e){t.exports=b}})}),function(b,t,e,r){"use strict";var u,d=["","webkit","Moz","MS","ms","o"],l=t.createElement("div"),s="function",g=Math.round,i=Math.abs,f=Date.now;function m(z,G,Z){return setTimeout(E(z,Z),G)}function o(z,G,Z){return!!Array.isArray(z)&&(n(z,Z[G],Z),!0)}function n(z,G,Z){var ne;if(z)if(z.forEach)z.forEach(G,Z);else if(z.length!==r)for(ne=0;ne<z.length;)G.call(Z,z[ne],ne,z),ne++;else for(ne in z)z.hasOwnProperty(ne)&&G.call(Z,z[ne],ne,z)}function a(z,G,Z){var ne="DEPRECATED METHOD: "+G+"\n"+Z+" AT \n";return function(){var ce=new Error("get-stack-trace"),Pe=ce&&ce.stack?ce.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Ie=b.console&&(b.console.warn||b.console.log);return Ie&&Ie.call(b.console,ne,Pe),z.apply(this,arguments)}}u="function"!=typeof Object.assign?function(G){if(G===r||null===G)throw new TypeError("Cannot convert undefined or null to object");for(var Z=Object(G),ne=1;ne<arguments.length;ne++){var ce=arguments[ne];if(ce!==r&&null!==ce)for(var Pe in ce)ce.hasOwnProperty(Pe)&&(Z[Pe]=ce[Pe])}return Z}:Object.assign;var c=a(function(G,Z,ne){for(var ce=Object.keys(Z),Pe=0;Pe<ce.length;)(!ne||ne&&G[ce[Pe]]===r)&&(G[ce[Pe]]=Z[ce[Pe]]),Pe++;return G},"extend","Use `assign`."),v=a(function(G,Z){return c(G,Z,!0)},"merge","Use `assign`.");function h(z,G,Z){var ce,ne=G.prototype;(ce=z.prototype=Object.create(ne)).constructor=z,ce._super=ne,Z&&u(ce,Z)}function E(z,G){return function(){return z.apply(G,arguments)}}function M(z,G){return typeof z==s?z.apply(G&&G[0]||r,G):z}function O(z,G){return z===r?G:z}function P(z,G,Z){n(j(G),function(ne){z.addEventListener(ne,Z,!1)})}function T(z,G,Z){n(j(G),function(ne){z.removeEventListener(ne,Z,!1)})}function D(z,G){for(;z;){if(z==G)return!0;z=z.parentNode}return!1}function y(z,G){return z.indexOf(G)>-1}function j(z){return z.trim().split(/\s+/g)}function C(z,G,Z){if(z.indexOf&&!Z)return z.indexOf(G);for(var ne=0;ne<z.length;){if(Z&&z[ne][Z]==G||!Z&&z[ne]===G)return ne;ne++}return-1}function I(z){return Array.prototype.slice.call(z,0)}function B(z,G,Z){for(var ne=[],ce=[],Pe=0;Pe<z.length;){var Ie=G?z[Pe][G]:z[Pe];C(ce,Ie)<0&&ne.push(z[Pe]),ce[Pe]=Ie,Pe++}return Z&&(ne=G?ne.sort(function(xe,Re){return xe[G]>Re[G]}):ne.sort()),ne}function S(z,G){for(var Z,ne,ce=G[0].toUpperCase()+G.slice(1),Pe=0;Pe<d.length;){if((ne=(Z=d[Pe])?Z+ce:G)in z)return ne;Pe++}return r}var K=1;function W(z){var G=z.ownerDocument||z;return G.defaultView||G.parentWindow||b}var x="ontouchstart"in b,_=S(b,"PointerEvent")!==r,R=x&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),A="touch",U="mouse",N=25,V=1,J=4,ee=8,q=1,le=2,Q=4,X=8,w=16,$=le|Q,k=X|w,ae=$|k,te=["x","y"],oe=["clientX","clientY"];function se(z,G){var Z=this;this.manager=z,this.callback=G,this.element=z.element,this.target=z.options.inputTarget,this.domHandler=function(ne){M(z.options.enable,[z])&&Z.handler(ne)},this.init()}function fe(z,G,Z){var ne=Z.pointers.length,ce=Z.changedPointers.length,Pe=G&V&&ne-ce==0,Ie=G&(J|ee)&&ne-ce==0;Z.isFirst=!!Pe,Z.isFinal=!!Ie,Pe&&(z.session={}),Z.eventType=G,function ue(z,G){var Z=z.session,ne=G.pointers,ce=ne.length;Z.firstInput||(Z.firstInput=re(G)),ce>1&&!Z.firstMultiple?Z.firstMultiple=re(G):1===ce&&(Z.firstMultiple=!1);var Pe=Z.firstInput,Ie=Z.firstMultiple,pe=Ie?Ie.center:Pe.center,xe=G.center=de(ne);G.timeStamp=f(),G.deltaTime=G.timeStamp-Pe.timeStamp,G.angle=ge(pe,xe),G.distance=Oe(pe,xe),function ve(z,G){var Z=G.center,ne=z.offsetDelta||{},ce=z.prevDelta||{},Pe=z.prevInput||{};(G.eventType===V||Pe.eventType===J)&&(ce=z.prevDelta={x:Pe.deltaX||0,y:Pe.deltaY||0},ne=z.offsetDelta={x:Z.x,y:Z.y}),G.deltaX=ce.x+(Z.x-ne.x),G.deltaY=ce.y+(Z.y-ne.y)}(Z,G),G.offsetDirection=Ee(G.deltaX,G.deltaY);var Re=Me(G.deltaTime,G.deltaX,G.deltaY);G.overallVelocityX=Re.x,G.overallVelocityY=Re.y,G.overallVelocity=i(Re.x)>i(Re.y)?Re.x:Re.y,G.scale=Ie?function me(z,G){return Oe(G[0],G[1],oe)/Oe(z[0],z[1],oe)}(Ie.pointers,ne):1,G.rotation=Ie?function Te(z,G){return ge(G[1],G[0],oe)+ge(z[1],z[0],oe)}(Ie.pointers,ne):0,G.maxPointers=Z.prevInput?G.pointers.length>Z.prevInput.maxPointers?G.pointers.length:Z.prevInput.maxPointers:G.pointers.length,function he(z,G){var ce,Pe,Ie,pe,Z=z.lastInterval||G,ne=G.timeStamp-Z.timeStamp;if(G.eventType!=ee&&(ne>N||Z.velocity===r)){var xe=G.deltaX-Z.deltaX,Re=G.deltaY-Z.deltaY,We=Me(ne,xe,Re);Pe=We.x,Ie=We.y,ce=i(We.x)>i(We.y)?We.x:We.y,pe=Ee(xe,Re),z.lastInterval=G}else ce=Z.velocity,Pe=Z.velocityX,Ie=Z.velocityY,pe=Z.direction;G.velocity=ce,G.velocityX=Pe,G.velocityY=Ie,G.direction=pe}(Z,G);var We=z.element;D(G.srcEvent.target,We)&&(We=G.srcEvent.target),G.target=We}(z,Z),z.emit("hammer.input",Z),z.recognize(Z),z.session.prevInput=Z}function re(z){for(var G=[],Z=0;Z<z.pointers.length;)G[Z]={clientX:g(z.pointers[Z].clientX),clientY:g(z.pointers[Z].clientY)},Z++;return{timeStamp:f(),pointers:G,center:de(G),deltaX:z.deltaX,deltaY:z.deltaY}}function de(z){var G=z.length;if(1===G)return{x:g(z[0].clientX),y:g(z[0].clientY)};for(var Z=0,ne=0,ce=0;ce<G;)Z+=z[ce].clientX,ne+=z[ce].clientY,ce++;return{x:g(Z/G),y:g(ne/G)}}function Me(z,G,Z){return{x:G/z||0,y:Z/z||0}}function Ee(z,G){return z===G?q:i(z)>=i(G)?z<0?le:Q:G<0?X:w}function Oe(z,G,Z){Z||(Z=te);var ne=G[Z[0]]-z[Z[0]],ce=G[Z[1]]-z[Z[1]];return Math.sqrt(ne*ne+ce*ce)}function ge(z,G,Z){return Z||(Z=te),180*Math.atan2(G[Z[1]]-z[Z[1]],G[Z[0]]-z[Z[0]])/Math.PI}se.prototype={handler:function(){},init:function(){this.evEl&&P(this.element,this.evEl,this.domHandler),this.evTarget&&P(this.target,this.evTarget,this.domHandler),this.evWin&&P(W(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&T(this.element,this.evEl,this.domHandler),this.evTarget&&T(this.target,this.evTarget,this.domHandler),this.evWin&&T(W(this.element),this.evWin,this.domHandler)}};var De={mousedown:V,mousemove:2,mouseup:J},Ce="mousedown",je="mousemove mouseup";function ye(){this.evEl=Ce,this.evWin=je,this.pressed=!1,se.apply(this,arguments)}h(ye,se,{handler:function(G){var Z=De[G.type];Z&V&&0===G.button&&(this.pressed=!0),2&Z&&1!==G.which&&(Z=J),this.pressed&&(Z&J&&(this.pressed=!1),this.callback(this.manager,Z,{pointers:[G],changedPointers:[G],pointerType:U,srcEvent:G}))}});var Le={pointerdown:V,pointermove:2,pointerup:J,pointercancel:ee,pointerout:ee},_e={2:A,3:"pen",4:U,5:"kinect"},Ae="pointerdown",Ue="pointermove pointerup pointercancel";function Ge(){this.evEl=Ae,this.evWin=Ue,se.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}b.MSPointerEvent&&!b.PointerEvent&&(Ae="MSPointerDown",Ue="MSPointerMove MSPointerUp MSPointerCancel"),h(Ge,se,{handler:function(G){var Z=this.store,ne=!1,ce=G.type.toLowerCase().replace("ms",""),Pe=Le[ce],Ie=_e[G.pointerType]||G.pointerType,pe=Ie==A,xe=C(Z,G.pointerId,"pointerId");Pe&V&&(0===G.button||pe)?xe<0&&(Z.push(G),xe=Z.length-1):Pe&(J|ee)&&(ne=!0),!(xe<0)&&(Z[xe]=G,this.callback(this.manager,Pe,{pointers:Z,changedPointers:[G],pointerType:Ie,srcEvent:G}),ne&&Z.splice(xe,1))}});var et={touchstart:V,touchmove:2,touchend:J,touchcancel:ee};function dt(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,se.apply(this,arguments)}function Tt(z,G){var Z=I(z.touches),ne=I(z.changedTouches);return G&(J|ee)&&(Z=B(Z.concat(ne),"identifier",!0)),[Z,ne]}h(dt,se,{handler:function(G){var Z=et[G.type];if(Z===V&&(this.started=!0),this.started){var ne=Tt.call(this,G,Z);Z&(J|ee)&&ne[0].length-ne[1].length==0&&(this.started=!1),this.callback(this.manager,Z,{pointers:ne[0],changedPointers:ne[1],pointerType:A,srcEvent:G})}}});var Ct={touchstart:V,touchmove:2,touchend:J,touchcancel:ee},jt="touchstart touchmove touchend touchcancel";function $e(){this.evTarget=jt,this.targetIds={},se.apply(this,arguments)}function It(z,G){var Z=I(z.touches),ne=this.targetIds;if(G&(2|V)&&1===Z.length)return ne[Z[0].identifier]=!0,[Z,Z];var ce,Pe,Ie=I(z.changedTouches),pe=[],xe=this.target;if(Pe=Z.filter(function(Re){return D(Re.target,xe)}),G===V)for(ce=0;ce<Pe.length;)ne[Pe[ce].identifier]=!0,ce++;for(ce=0;ce<Ie.length;)ne[Ie[ce].identifier]&&pe.push(Ie[ce]),G&(J|ee)&&delete ne[Ie[ce].identifier],ce++;return pe.length?[B(Pe.concat(pe),"identifier",!0),pe]:void 0}h($e,se,{handler:function(G){var Z=Ct[G.type],ne=It.call(this,G,Z);ne&&this.callback(this.manager,Z,{pointers:ne[0],changedPointers:ne[1],pointerType:A,srcEvent:G})}});var yt=2500;function nt(){se.apply(this,arguments);var z=E(this.handler,this);this.touch=new $e(this.manager,z),this.mouse=new ye(this.manager,z),this.primaryTouch=null,this.lastTouches=[]}function Lt(z,G){z&V?(this.primaryTouch=G.changedPointers[0].identifier,ct.call(this,G)):z&(J|ee)&&ct.call(this,G)}function ct(z){var G=z.changedPointers[0];if(G.identifier===this.primaryTouch){var Z={x:G.clientX,y:G.clientY};this.lastTouches.push(Z);var ne=this.lastTouches;setTimeout(function(){var Pe=ne.indexOf(Z);Pe>-1&&ne.splice(Pe,1)},yt)}}function _t(z){for(var G=z.srcEvent.clientX,Z=z.srcEvent.clientY,ne=0;ne<this.lastTouches.length;ne++){var ce=this.lastTouches[ne],Pe=Math.abs(G-ce.x),Ie=Math.abs(Z-ce.y);if(Pe<=25&&Ie<=25)return!0}return!1}h(nt,se,{handler:function(G,Z,ne){var Pe=ne.pointerType==U;if(!(Pe&&ne.sourceCapabilities&&ne.sourceCapabilities.firesTouchEvents)){if(ne.pointerType==A)Lt.call(this,Z,ne);else if(Pe&&_t.call(this,ne))return;this.callback(G,Z,ne)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var vt=S(l.style,"touchAction"),gt=vt!==r,mt="compute",at="manipulation",Ve="none",Ye="pan-x",Xe="pan-y",Je=function At(){if(!gt)return!1;var z={},G=b.CSS&&b.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Z){z[Z]=!G||b.CSS.supports("touch-action",Z)}),z}();function rt(z,G){this.manager=z,this.set(G)}rt.prototype={set:function(z){z==mt&&(z=this.compute()),gt&&this.manager.element.style&&Je[z]&&(this.manager.element.style[vt]=z),this.actions=z.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var z=[];return n(this.manager.recognizers,function(G){M(G.options.enable,[G])&&(z=z.concat(G.getTouchAction()))}),function pt(z){if(y(z,Ve))return Ve;var G=y(z,Ye),Z=y(z,Xe);return G&&Z?Ve:G||Z?G?Ye:Xe:y(z,at)?at:"auto"}(z.join(" "))},preventDefaults:function(z){var G=z.srcEvent,Z=z.offsetDirection;if(!this.manager.session.prevented){var ne=this.actions,ce=y(ne,Ve)&&!Je[Ve],Pe=y(ne,Xe)&&!Je[Xe],Ie=y(ne,Ye)&&!Je[Ye];if(ce&&1===z.pointers.length&&z.distance<2&&z.deltaTime<250)return;return Ie&&Pe||!(ce||Pe&&Z&$||Ie&&Z&k)?void 0:this.preventSrc(G)}G.preventDefault()},preventSrc:function(z){this.manager.session.prevented=!0,z.preventDefault()}};var Ze=1;function He(z){this.options=u({},this.defaults,z||{}),this.id=function H(){return K++}(),this.manager=null,this.options.enable=O(this.options.enable,!0),this.state=Ze,this.simultaneous={},this.requireFail=[]}function Et(z){return 16&z?"cancel":8&z?"end":4&z?"move":2&z?"start":""}function Mt(z){return z==w?"down":z==X?"up":z==le?"left":z==Q?"right":""}function Qe(z,G){var Z=G.manager;return Z?Z.get(z):z}function Se(){He.apply(this,arguments)}function ke(){Se.apply(this,arguments),this.pX=null,this.pY=null}function ot(){Se.apply(this,arguments)}function it(){He.apply(this,arguments),this._timer=null,this._input=null}function lt(){Se.apply(this,arguments)}function st(){Se.apply(this,arguments)}function qe(){He.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Fe(z,G){return(G=G||{}).recognizers=O(G.recognizers,Fe.defaults.preset),new ut(z,G)}function ut(z,G){this.options=u({},Fe.defaults,G||{}),this.options.inputTarget=this.options.inputTarget||z,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=z,this.input=function ie(z){return new(z.options.inputClass||(_?Ge:R?$e:x?nt:ye))(z,fe)}(this),this.touchAction=new rt(this,this.options.touchAction),Ot(this,!0),n(this.options.recognizers,function(Z){var ne=this.add(new Z[0](Z[1]));Z[2]&&ne.recognizeWith(Z[2]),Z[3]&&ne.requireFailure(Z[3])},this)}function Ot(z,G){var ne,Z=z.element;Z.style&&(n(z.options.cssProps,function(ce,Pe){ne=S(Z.style,Pe),G?(z.oldCssProps[ne]=Z.style[ne],Z.style[ne]=ce):Z.style[ne]=z.oldCssProps[ne]||""}),G||(z.oldCssProps={}))}He.prototype={defaults:{},set:function(z){return u(this.options,z),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(z){if(o(z,"recognizeWith",this))return this;var G=this.simultaneous;return G[(z=Qe(z,this)).id]||(G[z.id]=z,z.recognizeWith(this)),this},dropRecognizeWith:function(z){return o(z,"dropRecognizeWith",this)||(z=Qe(z,this),delete this.simultaneous[z.id]),this},requireFailure:function(z){if(o(z,"requireFailure",this))return this;var G=this.requireFail;return-1===C(G,z=Qe(z,this))&&(G.push(z),z.requireFailure(this)),this},dropRequireFailure:function(z){if(o(z,"dropRequireFailure",this))return this;z=Qe(z,this);var G=C(this.requireFail,z);return G>-1&&this.requireFail.splice(G,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(z){return!!this.simultaneous[z.id]},emit:function(z){var G=this,Z=this.state;function ne(ce){G.manager.emit(ce,z)}Z<8&&ne(G.options.event+Et(Z)),ne(G.options.event),z.additionalEvent&&ne(z.additionalEvent),Z>=8&&ne(G.options.event+Et(Z))},tryEmit:function(z){if(this.canEmit())return this.emit(z);this.state=32},canEmit:function(){for(var z=0;z<this.requireFail.length;){if(!(this.requireFail[z].state&(32|Ze)))return!1;z++}return!0},recognize:function(z){var G=u({},z);if(!M(this.options.enable,[this,G]))return this.reset(),void(this.state=32);56&this.state&&(this.state=Ze),this.state=this.process(G),30&this.state&&this.tryEmit(G)},process:function(z){},getTouchAction:function(){},reset:function(){}},h(Se,He,{defaults:{pointers:1},attrTest:function(z){var G=this.options.pointers;return 0===G||z.pointers.length===G},process:function(z){var G=this.state,Z=z.eventType,ne=6&G,ce=this.attrTest(z);return ne&&(Z&ee||!ce)?16|G:ne||ce?Z&J?8|G:2&G?4|G:2:32}}),h(ke,Se,{defaults:{event:"pan",threshold:10,pointers:1,direction:ae},getTouchAction:function(){var z=this.options.direction,G=[];return z&$&&G.push(Xe),z&k&&G.push(Ye),G},directionTest:function(z){var G=this.options,Z=!0,ne=z.distance,ce=z.direction,Pe=z.deltaX,Ie=z.deltaY;return ce&G.direction||(G.direction&$?(ce=0===Pe?q:Pe<0?le:Q,Z=Pe!=this.pX,ne=Math.abs(z.deltaX)):(ce=0===Ie?q:Ie<0?X:w,Z=Ie!=this.pY,ne=Math.abs(z.deltaY))),z.direction=ce,Z&&ne>G.threshold&&ce&G.direction},attrTest:function(z){return Se.prototype.attrTest.call(this,z)&&(2&this.state||!(2&this.state)&&this.directionTest(z))},emit:function(z){this.pX=z.deltaX,this.pY=z.deltaY;var G=Mt(z.direction);G&&(z.additionalEvent=this.options.event+G),this._super.emit.call(this,z)}}),h(ot,Se,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ve]},attrTest:function(z){return this._super.attrTest.call(this,z)&&(Math.abs(z.scale-1)>this.options.threshold||2&this.state)},emit:function(z){1!==z.scale&&(z.additionalEvent=this.options.event+(z.scale<1?"in":"out")),this._super.emit.call(this,z)}}),h(it,He,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(z){var G=this.options,Z=z.pointers.length===G.pointers,ne=z.distance<G.threshold,ce=z.deltaTime>G.time;if(this._input=z,!ne||!Z||z.eventType&(J|ee)&&!ce)this.reset();else if(z.eventType&V)this.reset(),this._timer=m(function(){this.state=8,this.tryEmit()},G.time,this);else if(z.eventType&J)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(z){8===this.state&&(z&&z.eventType&J?this.manager.emit(this.options.event+"up",z):(this._input.timeStamp=f(),this.manager.emit(this.options.event,this._input)))}}),h(lt,Se,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ve]},attrTest:function(z){return this._super.attrTest.call(this,z)&&(Math.abs(z.rotation)>this.options.threshold||2&this.state)}}),h(st,Se,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:$|k,pointers:1},getTouchAction:function(){return ke.prototype.getTouchAction.call(this)},attrTest:function(z){var Z,G=this.options.direction;return G&($|k)?Z=z.overallVelocity:G&$?Z=z.overallVelocityX:G&k&&(Z=z.overallVelocityY),this._super.attrTest.call(this,z)&&G&z.offsetDirection&&z.distance>this.options.threshold&&z.maxPointers==this.options.pointers&&i(Z)>this.options.velocity&&z.eventType&J},emit:function(z){var G=Mt(z.offsetDirection);G&&this.manager.emit(this.options.event+G,z),this.manager.emit(this.options.event,z)}}),h(qe,He,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[at]},process:function(z){var G=this.options,Z=z.pointers.length===G.pointers,ne=z.distance<G.threshold,ce=z.deltaTime<G.time;if(this.reset(),z.eventType&V&&0===this.count)return this.failTimeout();if(ne&&ce&&Z){if(z.eventType!=J)return this.failTimeout();var Pe=!this.pTime||z.timeStamp-this.pTime<G.interval,Ie=!this.pCenter||Oe(this.pCenter,z.center)<G.posThreshold;if(this.pTime=z.timeStamp,this.pCenter=z.center,Ie&&Pe?this.count+=1:this.count=1,this._input=z,0==this.count%G.taps)return this.hasRequireFailures()?(this._timer=m(function(){this.state=8,this.tryEmit()},G.interval,this),2):8}return 32},failTimeout:function(){return this._timer=m(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Fe.VERSION="2.0.7",Fe.defaults={domEvents:!1,touchAction:mt,enable:!0,inputTarget:null,inputClass:null,preset:[[lt,{enable:!1}],[ot,{enable:!1},["rotate"]],[st,{direction:$}],[ke,{direction:$},["swipe"]],[qe],[qe,{event:"doubletap",taps:2},["tap"]],[it]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},ut.prototype={set:function(z){return u(this.options,z),z.touchAction&&this.touchAction.update(),z.inputTarget&&(this.input.destroy(),this.input.target=z.inputTarget,this.input.init()),this},stop:function(z){this.session.stopped=z?2:1},recognize:function(z){var G=this.session;if(!G.stopped){this.touchAction.preventDefaults(z);var Z,ne=this.recognizers,ce=G.curRecognizer;(!ce||ce&&8&ce.state)&&(ce=G.curRecognizer=null);for(var Pe=0;Pe<ne.length;)Z=ne[Pe],2===G.stopped||ce&&Z!=ce&&!Z.canRecognizeWith(ce)?Z.reset():Z.recognize(z),!ce&&14&Z.state&&(ce=G.curRecognizer=Z),Pe++}},get:function(z){if(z instanceof He)return z;for(var G=this.recognizers,Z=0;Z<G.length;Z++)if(G[Z].options.event==z)return G[Z];return null},add:function(z){if(o(z,"add",this))return this;var G=this.get(z.options.event);return G&&this.remove(G),this.recognizers.push(z),z.manager=this,this.touchAction.update(),z},remove:function(z){if(o(z,"remove",this))return this;if(z=this.get(z)){var G=this.recognizers,Z=C(G,z);-1!==Z&&(G.splice(Z,1),this.touchAction.update())}return this},on:function(z,G){if(z!==r&&G!==r){var Z=this.handlers;return n(j(z),function(ne){Z[ne]=Z[ne]||[],Z[ne].push(G)}),this}},off:function(z,G){if(z!==r){var Z=this.handlers;return n(j(z),function(ne){G?Z[ne]&&Z[ne].splice(C(Z[ne],G),1):delete Z[ne]}),this}},emit:function(z,G){this.options.domEvents&&function Rt(z,G){var Z=t.createEvent("Event");Z.initEvent(z,!0,!0),Z.gesture=G,G.target.dispatchEvent(Z)}(z,G);var Z=this.handlers[z]&&this.handlers[z].slice();if(Z&&Z.length){G.type=z,G.preventDefault=function(){G.srcEvent.preventDefault()};for(var ne=0;ne<Z.length;)Z[ne](G),ne++}},destroy:function(){this.element&&Ot(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},u(Fe,{INPUT_START:V,INPUT_MOVE:2,INPUT_END:J,INPUT_CANCEL:ee,STATE_POSSIBLE:Ze,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:q,DIRECTION_LEFT:le,DIRECTION_RIGHT:Q,DIRECTION_UP:X,DIRECTION_DOWN:w,DIRECTION_HORIZONTAL:$,DIRECTION_VERTICAL:k,DIRECTION_ALL:ae,Manager:ut,Input:se,TouchAction:rt,TouchInput:$e,MouseInput:ye,PointerEventInput:Ge,TouchMouseInput:nt,SingleTouchInput:dt,Recognizer:He,AttrRecognizer:Se,Tap:qe,Pan:ke,Swipe:st,Pinch:ot,Rotate:lt,Press:it,on:P,off:T,each:n,merge:v,extend:c,assign:u,inherit:h,bindFn:E,prefixed:S}),(typeof b<"u"?b:typeof self<"u"?self:{}).Hammer=Fe,"function"==typeof define&&define.amd?define(function(){return Fe}):typeof module<"u"&&module.exports?module.exports=Fe:b.Hammer=Fe}(window,document),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("cornerstoneWADOImageLoader",[],e):"object"==typeof exports?exports.cornerstoneWADOImageLoader=e():t.cornerstoneWADOImageLoader=e()}(this,function(){return function(b){var t={};function e(r){if(t[r])return t[r].exports;var d=t[r]={i:r,l:!1,exports:{}};return b[r].call(d.exports,d,d.exports,e),d.l=!0,d.exports}return e.m=b,e.c=t,e.d=function(r,d,l){e.o(r,d)||Object.defineProperty(r,d,{configurable:!1,enumerable:!0,get:l})},e.r=function(r){Object.defineProperty(r,"__esModule",{value:!0})},e.n=function(r){var d=r&&r.__esModule?function(){return r.default}:function(){return r};return e.d(d,"a",d),d},e.o=function(r,d){return Object.prototype.hasOwnProperty.call(r,d)},e.p="",e(e.s="./imageLoader/index.js")}({"./externalModules.js":
/*!****************************!*\
          !*** ./externalModules.js ***!
          \****************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=function l(f){return f&&f.__esModule?f:{default:f}}(e(
/*! ./imageLoader/registerLoaders.js */
"./imageLoader/registerLoaders.js")),s=void 0,g=void 0;t.default={set cornerstone(f){(0,d.default)(s=f)},get cornerstone(){if(!s){if(!window||!window.cornerstone)throw new Error("cornerstoneWADOImageLoader requires a copy of Cornerstone to work properly. Please add cornerstoneWADOImageLoader.external.cornerstone = cornerstone; to your application.");s=window.cornerstone,(0,d.default)(s)}return s},set dicomParser(f){g=f},get dicomParser(){if(!g){if(!window||!window.dicomParser)throw new Error("cornerstoneWADOImageLoader requires a copy of dicomParser to work properly. Please add cornerstoneWADOImageLoader.external.dicomParser = dicomParser; to your application.");g=window.dicomParser}return g}}},"./imageLoader/colorSpaceConverters/convertPALETTECOLOR.js":
/*!*****************************************************************!*\
          !*** ./imageLoader/colorSpaceConverters/convertPALETTECOLOR.js ***!
          \*****************************************************************/
/*! no static exports found */function(b,t,e){"use strict";function r(d,l){for(var s=d.length,g=new Uint8ClampedArray(s),i=0;i<s;++i)g[i]=d[i]>>l;return g}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(d,l){for(var s=d.columns*d.rows,g=d.pixelData,f=d.greenPaletteColorLookupTableData,m=d.bluePaletteColorLookupTableData,o=d.redPaletteColorLookupTableData.length,n=0,a=0,u=d.redPaletteColorLookupTableDescriptor[1],c=8===d.redPaletteColorLookupTableDescriptor[2]?0:8,v=r(d.redPaletteColorLookupTableData,c),h=r(f,c),E=r(m,c),M=0;M<s;++M){var O=g[n++];O<u?O=0:O>u+o-1?O=o-1:O-=u,l[a++]=v[O],l[a++]=h[O],l[a++]=E[O],l[a++]=255}}},"./imageLoader/colorSpaceConverters/convertRGBColorByPixel.js":
/*!********************************************************************!*\
          !*** ./imageLoader/colorSpaceConverters/convertRGBColorByPixel.js ***!
          \********************************************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(r,d){if(void 0===r)throw new Error("decodeRGB: rgbBuffer must not be undefined");if(r.length%3!=0)throw new Error("decodeRGB: rgbBuffer length must be divisible by 3");for(var l=r.length/3,s=0,g=0,i=0;i<l;i++)d[g++]=r[s++],d[g++]=r[s++],d[g++]=r[s++],d[g++]=255}},"./imageLoader/colorSpaceConverters/convertRGBColorByPlane.js":
/*!********************************************************************!*\
          !*** ./imageLoader/colorSpaceConverters/convertRGBColorByPlane.js ***!
          \********************************************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(r,d){if(void 0===r)throw new Error("decodeRGB: rgbBuffer must not be undefined");if(r.length%3!=0)throw new Error("decodeRGB: rgbBuffer length must be divisible by 3");for(var l=r.length/3,s=0,g=0,i=l,f=2*l,m=0;m<l;m++)d[s++]=r[g++],d[s++]=r[i++],d[s++]=r[f++],d[s++]=255}},"./imageLoader/colorSpaceConverters/convertYBRFullByPixel.js":
/*!*******************************************************************!*\
          !*** ./imageLoader/colorSpaceConverters/convertYBRFullByPixel.js ***!
          \*******************************************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(r,d){if(void 0===r)throw new Error("decodeRGB: ybrBuffer must not be undefined");if(r.length%3!=0)throw new Error("decodeRGB: ybrBuffer length must be divisble by 3");for(var l=r.length/3,s=0,g=0,i=0;i<l;i++){var f=r[s++],m=r[s++],o=r[s++];d[g++]=f+1.402*(o-128),d[g++]=f-.34414*(m-128)-.71414*(o-128),d[g++]=f+1.772*(m-128),d[g++]=255}}},"./imageLoader/colorSpaceConverters/convertYBRFullByPlane.js":
/*!*******************************************************************!*\
          !*** ./imageLoader/colorSpaceConverters/convertYBRFullByPlane.js ***!
          \*******************************************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(r,d){if(void 0===r)throw new Error("decodeRGB: ybrBuffer must not be undefined");if(r.length%3!=0)throw new Error("decodeRGB: ybrBuffer length must be divisble by 3");for(var l=r.length/3,s=0,g=0,i=l,f=2*l,m=0;m<l;m++){var o=r[g++],n=r[i++],a=r[f++];d[s++]=o+1.402*(a-128),d[s++]=o-.34414*(n-128)-.71414*(a-128),d[s++]=o+1.772*(n-128),d[s++]=255}}},"./imageLoader/colorSpaceConverters/index.js":
/*!***************************************************!*\
          !*** ./imageLoader/colorSpaceConverters/index.js ***!
          \***************************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(
/*! ./convertRGBColorByPixel.js */
"./imageLoader/colorSpaceConverters/convertRGBColorByPixel.js");Object.defineProperty(t,"convertRGBColorByPixel",{enumerable:!0,get:function(){return i(r).default}});var d=e(
/*! ./convertRGBColorByPlane.js */
"./imageLoader/colorSpaceConverters/convertRGBColorByPlane.js");Object.defineProperty(t,"convertRGBColorByPlane",{enumerable:!0,get:function(){return i(d).default}});var l=e(
/*! ./convertYBRFullByPixel.js */
"./imageLoader/colorSpaceConverters/convertYBRFullByPixel.js");Object.defineProperty(t,"convertYBRFullByPixel",{enumerable:!0,get:function(){return i(l).default}});var s=e(
/*! ./convertYBRFullByPlane.js */
"./imageLoader/colorSpaceConverters/convertYBRFullByPlane.js");Object.defineProperty(t,"convertYBRFullByPlane",{enumerable:!0,get:function(){return i(s).default}});var g=e(
/*! ./convertPALETTECOLOR.js */
"./imageLoader/colorSpaceConverters/convertPALETTECOLOR.js");function i(f){return f&&f.__esModule?f:{default:f}}Object.defineProperty(t,"convertPALETTECOLOR",{enumerable:!0,get:function(){return i(g).default}})},"./imageLoader/configure.js":
/*!**********************************!*\
          !*** ./imageLoader/configure.js ***!
          \**********************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(
/*! ./internal/index.js */
"./imageLoader/internal/index.js");t.default=function d(l){(0,r.setOptions)(l)}},"./imageLoader/convertColorSpace.js":
/*!******************************************!*\
          !*** ./imageLoader/convertColorSpace.js ***!
          \******************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function s(g,i){var f=i.data;if("RGB"===g.photometricInterpretation)d(g,f);else if("YBR_RCT"===g.photometricInterpretation)d(g,f);else if("YBR_ICT"===g.photometricInterpretation)d(g,f);else if("PALETTE COLOR"===g.photometricInterpretation)(0,r.convertPALETTECOLOR)(g,f);else if("YBR_FULL_422"===g.photometricInterpretation)d(g,f);else{if("YBR_FULL"!==g.photometricInterpretation)throw new Error("No color space conversion for photometric interpretation "+g.photometricInterpretation);!function l(g,i){0===g.planarConfiguration?(0,r.convertYBRFullByPixel)(g.pixelData,i):(0,r.convertYBRFullByPlane)(g.pixelData,i)}(g,f)}};var r=e(
/*! ./colorSpaceConverters/index.js */
"./imageLoader/colorSpaceConverters/index.js");function d(g,i){0===g.planarConfiguration?(0,r.convertRGBColorByPixel)(g.pixelData,i):(0,r.convertRGBColorByPlane)(g.pixelData,i)}},"./imageLoader/createImage.js":
/*!************************************!*\
          !*** ./imageLoader/createImage.js ***!
          \************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=h(e(
/*! ../externalModules.js */
"./externalModules.js")),s=h(e(
/*! ./getImageFrame.js */
"./imageLoader/getImageFrame.js")),i=h(e(
/*! ./decodeImageFrame.js */
"./imageLoader/decodeImageFrame.js")),m=h(e(
/*! ./isColorImage.js */
"./imageLoader/isColorImage.js")),n=h(e(
/*! ./convertColorSpace.js */
"./imageLoader/convertColorSpace.js")),u=h(e(
/*! ../shared/getMinMax.js */
"./shared/getMinMax.js")),v=h(e(
/*! ./isJPEGBaseline8BitColor.js */
"./imageLoader/isJPEGBaseline8BitColor.js"));function h(D){return D&&D.__esModule?D:{default:D}}var E="";t.default=function T(D,y,j,C){if(!y||!y.length)return Promise.reject(new Error("The file does not contain image data."));var I=d.default.cornerstone,B=document.createElement("canvas"),S=(0,s.default)(D),K=(0,i.default)(S,j,y,B,C);return new Promise(function(H,W){K.then(function(L){var x=I.metaData.get("imagePlaneModule",D)||{},_=I.metaData.get("voiLutModule",D)||{},R=I.metaData.get("modalityLutModule",D)||{},A=I.metaData.get("sopCommonModule",D)||{},p=(0,m.default)(L.photometricInterpretation);if(!(0,v.default)(L,j)&&(function P(D){D.pixelData=32===D.bitsAllocated?new Float32Array(D.pixelData):16===D.bitsAllocated?0===D.pixelRepresentation?new Uint16Array(D.pixelData):new Int16Array(D.pixelData):new Uint8Array(D.pixelData)}(L),p)){B.height=L.rows,B.width=L.columns;var F=B.getContext("2d").createImageData(L.columns,L.rows);(0,n.default)(L,F),L.imageData=F,L.pixelData=F.data;var N=(0,u.default)(L.pixelData);L.smallestPixelValue=N.min,L.largestPixelValue=N.max}var V={imageId:D,color:p,columnPixelSpacing:x.pixelSpacing?x.pixelSpacing[1]:void 0,columns:L.columns,height:L.rows,intercept:R.rescaleIntercept?R.rescaleIntercept:0,invert:"MONOCHROME1"===L.photometricInterpretation,minPixelValue:L.smallestPixelValue,maxPixelValue:L.largestPixelValue,rowPixelSpacing:x.pixelSpacing?x.pixelSpacing[0]:void 0,rows:L.rows,sizeInBytes:L.pixelData.length,slope:R.rescaleSlope?R.rescaleSlope:1,width:L.columns,windowCenter:_.windowCenter?_.windowCenter[0]:void 0,windowWidth:_.windowWidth?_.windowWidth[0]:void 0,decodeTimeInMS:L.decodeTimeInMS,floatPixelData:void 0};if(L.pixelData instanceof Float32Array){var Y=L.pixelData,J=function O(D){for(var y=(0,u.default)(D),I=Math.abs(y.max-y.min)/65535,B=y.min,S=D.length,K=new Uint16Array(S),H=65535,W=0,L=0;L<S;L++){var x=Math.floor((D[L]-B)/I);K[L]=x,H=Math.min(H,x),W=Math.max(W,x)}return{min:H,max:W,intPixelData:K,slope:I,intercept:B}}(Y);V.minPixelValue=J.min,V.maxPixelValue=J.max,V.slope=J.slope,V.intercept=J.intercept,V.floatPixelData=Y,V.getPixelData=function(){return J.intPixelData}}else V.getPixelData=function(){return L.pixelData};if(V.color&&(V.getCanvas=function(){return E===D||(B.height=V.rows,B.width=V.columns,B.getContext("2d").putImageData(L.imageData,0,0),E=D),B}),R.modalityLUTSequence&&R.modalityLUTSequence.length>0&&function M(D){return"1.2.840.10008.5.1.4.1.1.12.1"!==D&&"1.2.840.10008.5.1.4.1.1.12.2.1"!==D}(A.sopClassUID)&&(V.modalityLUT=R.modalityLUTSequence[0]),_.voiLUTSequence&&_.voiLUTSequence.length>0&&(V.voiLUT=_.voiLUTSequence[0]),V.color&&(V.windowWidth=255,V.windowCenter=127),void 0===V.windowCenter||void 0===V.windowWidth){var ee=V.maxPixelValue*V.slope+V.intercept,q=V.minPixelValue*V.slope+V.intercept;V.windowWidth=ee-q,V.windowCenter=(ee+q)/2}H(V)},W)})}},"./imageLoader/decodeImageFrame.js":
/*!*****************************************!*\
          !*** ./imageLoader/decodeImageFrame.js ***!
          \*****************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(
/*! ./internal/options.js */
"./imageLoader/internal/options.js"),l=u(e(
/*! ./webWorkerManager.js */
"./imageLoader/webWorkerManager.js")),g=u(e(
/*! ./decodeJPEGBaseline8BitColor.js */
"./imageLoader/decodeJPEGBaseline8BitColor.js")),f=u(e(
/*! ../shared/decodeImageFrame.js */
"./shared/decodeImageFrame.js")),o=u(e(
/*! ../shared/calculateMinMax.js */
"./shared/calculateMinMax.js")),n=e(
/*! ../shared/decoders/decodeJPEG2000.js */
"./shared/decoders/decodeJPEG2000.js"),a=e(
/*! ../shared/decoders/decodeJPEGLS.js */
"./shared/decoders/decodeJPEGLS.js");function u(E){return E&&E.__esModule?E:{default:E}}var c=!1;function v(E,M,O,P){var T=P.priority||void 0,D=P.transferPixelData?[O.buffer]:void 0,y=(0,r.getOptions)(),j=y.strict,C=y.decodeConfig;return!1===y.useWebWorkers?(!1===c&&((0,n.initializeJPEG2000)(C),(0,a.initializeJPEGLS)(C),c=!0),new Promise(function(B,S){try{var H=f.default.apply(void 0,[E,M,O,C,P]);(0,o.default)(H,j),B(H)}catch(W){S(W)}})):l.default.addTask("decodeTask",{imageFrame:E,transferSyntax:M,pixelData:O,options:P},T,D).promise}t.default=function h(E,M,O,P){var T=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return"1.2.840.10008.1.2"===M||"1.2.840.10008.1.2.1"===M||"1.2.840.10008.1.2.2"===M||"1.2.840.10008.1.2.1.99"===M||"1.2.840.10008.1.2.5"===M?v(E,M,O,T):"1.2.840.10008.1.2.4.50"===M?8!==E.bitsAllocated||3!==E.samplesPerPixel&&4!==E.samplesPerPixel?v(E,M,O,T):(0,g.default)(E,O,P):"1.2.840.10008.1.2.4.51"===M||"1.2.840.10008.1.2.4.57"===M||"1.2.840.10008.1.2.4.70"===M||"1.2.840.10008.1.2.4.80"===M||"1.2.840.10008.1.2.4.81"===M||"1.2.840.10008.1.2.4.90"===M||"1.2.840.10008.1.2.4.91"===M?v(E,M,O,T):new Promise(function(D,y){y(new Error("No decoder for transfer syntax "+M))})}},"./imageLoader/decodeJPEGBaseline8BitColor.js":
/*!****************************************************!*\
          !*** ./imageLoader/decodeJPEGBaseline8BitColor.js ***!
          \****************************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=function l(f){return f&&f.__esModule?f:{default:f}}(e(
/*! ../shared/getMinMax.js */
"./shared/getMinMax.js"));t.default=function i(f,m,o){var n=(new Date).getTime(),a=new Blob([m],{type:"image/jpeg"});return new Promise(function(u,c){var v=new FileReader;void 0===v.readAsBinaryString?v.readAsArrayBuffer(a):v.readAsBinaryString(a),v.onload=function(){var h=new Image;h.onload=function(){o.height=h.height,o.width=h.width,f.rows=h.height,f.columns=h.width;var E=o.getContext("2d");E.drawImage(this,0,0);var M=E.getImageData(0,0,h.width,h.height),O=(new Date).getTime();f.pixelData=M.data,f.imageData=M,f.decodeTimeInMS=O-n;var P=(0,d.default)(f.pixelData);f.smallestPixelValue=P.min,f.largestPixelValue=P.max,u(f)},h.onerror=function(E){c(E)},h.src=void 0===v.readAsBinaryString?"data:image/jpeg;base64,"+window.btoa(function s(f){return function g(f){var m=void 0;try{return decodeURIComponent(escape(f))}catch(o){if((m=o)instanceof URIError)return f;throw m}}(String.fromCharCode.apply(null,Array.prototype.slice.apply(new Uint8Array(f))))}(v.result)):"data:image/jpeg;base64,"+window.btoa(v.result)},v.onerror=function(h){c(h)}})}},"./imageLoader/getImageFrame.js":
/*!**************************************!*\
          !*** ./imageLoader/getImageFrame.js ***!
          \**************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=function l(g){return g&&g.__esModule?g:{default:g}}(e(
/*! ../externalModules.js */
"./externalModules.js"));t.default=function s(g){var f=d.default.cornerstone.metaData.get("imagePixelModule",g);return{samplesPerPixel:f.samplesPerPixel,photometricInterpretation:f.photometricInterpretation,planarConfiguration:f.planarConfiguration,rows:f.rows,columns:f.columns,bitsAllocated:f.bitsAllocated,bitsStored:f.bitsStored,pixelRepresentation:f.pixelRepresentation,smallestPixelValue:f.smallestPixelValue,largestPixelValue:f.largestPixelValue,redPaletteColorLookupTableDescriptor:f.redPaletteColorLookupTableDescriptor,greenPaletteColorLookupTableDescriptor:f.greenPaletteColorLookupTableDescriptor,bluePaletteColorLookupTableDescriptor:f.bluePaletteColorLookupTableDescriptor,redPaletteColorLookupTableData:f.redPaletteColorLookupTableData,greenPaletteColorLookupTableData:f.greenPaletteColorLookupTableData,bluePaletteColorLookupTableData:f.bluePaletteColorLookupTableData,pixelData:void 0}}},"./imageLoader/index.js":
/*!******************************!*\
          !*** ./imageLoader/index.js ***!
          \******************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(
/*! ./colorSpaceConverters/index.js */
"./imageLoader/colorSpaceConverters/index.js");Object.keys(r).forEach(function(O){"default"===O||"__esModule"===O||Object.defineProperty(t,O,{enumerable:!0,get:function(){return r[O]}})});var d=e(
/*! ./wadouri/index.js */
"./imageLoader/wadouri/index.js");Object.defineProperty(t,"wadouri",{enumerable:!0,get:function(){return M(d).default}});var l=e(
/*! ./wadors/index.js */
"./imageLoader/wadors/index.js");Object.defineProperty(t,"wadors",{enumerable:!0,get:function(){return M(l).default}});var s=e(
/*! ./configure.js */
"./imageLoader/configure.js");Object.defineProperty(t,"configure",{enumerable:!0,get:function(){return M(s).default}});var g=e(
/*! ./convertColorSpace.js */
"./imageLoader/convertColorSpace.js");Object.defineProperty(t,"convertColorSpace",{enumerable:!0,get:function(){return M(g).default}});var i=e(
/*! ./createImage.js */
"./imageLoader/createImage.js");Object.defineProperty(t,"createImage",{enumerable:!0,get:function(){return M(i).default}});var f=e(
/*! ./decodeImageFrame.js */
"./imageLoader/decodeImageFrame.js");Object.defineProperty(t,"decodeImageFrame",{enumerable:!0,get:function(){return M(f).default}});var m=e(
/*! ./decodeJPEGBaseline8BitColor.js */
"./imageLoader/decodeJPEGBaseline8BitColor.js");Object.defineProperty(t,"decodeJPEGBaseline8BitColor",{enumerable:!0,get:function(){return M(m).default}});var o=e(
/*! ./getImageFrame.js */
"./imageLoader/getImageFrame.js");Object.defineProperty(t,"getImageFrame",{enumerable:!0,get:function(){return M(o).default}});var n=e(
/*! ../shared/getMinMax.js */
"./shared/getMinMax.js");Object.defineProperty(t,"getMinMax",{enumerable:!0,get:function(){return M(n).default}});var a=e(
/*! ./isColorImage.js */
"./imageLoader/isColorImage.js");Object.defineProperty(t,"isColorImage",{enumerable:!0,get:function(){return M(a).default}});var u=e(
/*! ./isJPEGBaseline8BitColor.js */
"./imageLoader/isJPEGBaseline8BitColor.js");Object.defineProperty(t,"isJPEGBaseline8BitColor",{enumerable:!0,get:function(){return M(u).default}});var c=e(
/*! ./webWorkerManager.js */
"./imageLoader/webWorkerManager.js");Object.defineProperty(t,"webWorkerManager",{enumerable:!0,get:function(){return M(c).default}});var v=e(
/*! ../version.js */
"./version.js");Object.defineProperty(t,"version",{enumerable:!0,get:function(){return M(v).default}});var h=e(
/*! ./internal/index.js */
"./imageLoader/internal/index.js");Object.defineProperty(t,"internal",{enumerable:!0,get:function(){return h.internal}});var E=e(
/*! ../externalModules.js */
"./externalModules.js");function M(O){return O&&O.__esModule?O:{default:O}}Object.defineProperty(t,"external",{enumerable:!0,get:function(){return M(E).default}})},"./imageLoader/internal/index.js":
/*!***************************************!*\
          !*** ./imageLoader/internal/index.js ***!
          \***************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.internal=t.xhrRequest=t.getOptions=t.setOptions=void 0;var d=function s(i){return i&&i.__esModule?i:{default:i}}(e(
/*! ./xhrRequest.js */
"./imageLoader/internal/xhrRequest.js")),l=e(
/*! ./options.js */
"./imageLoader/internal/options.js"),g={xhrRequest:d.default,setOptions:l.setOptions,getOptions:l.getOptions};t.setOptions=l.setOptions,t.getOptions=l.getOptions,t.xhrRequest=d.default,t.internal=g},"./imageLoader/internal/options.js":
/*!*****************************************!*\
          !*** ./imageLoader/internal/options.js ***!
          \*****************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setOptions=function d(s){r=Object.assign(r,s)},t.getOptions=function l(){return r};var r={beforeSend:function(){},imageCreated:function(){},strict:!1,useWebWorkers:!0,decodeConfig:{usePDFJS:!1}}},"./imageLoader/internal/xhrRequest.js":
/*!********************************************!*\
          !*** ./imageLoader/internal/xhrRequest.js ***!
          \********************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=function s(i){return i&&i.__esModule?i:{default:i}}(e(
/*! ../../externalModules.js */
"./externalModules.js")),l=e(
/*! ./options.js */
"./imageLoader/internal/options.js");t.default=function g(i,f){var m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=d.default.cornerstone,a=(0,l.getOptions)();return new Promise(function(u,c){var v=new XMLHttpRequest;v.open("get",i,!0),v.responseType="arraybuffer",a.beforeSend(v,f),Object.keys(m).forEach(function(h){v.setRequestHeader(h,m[h])}),o.deferred={resolve:u,reject:c},o.url=i,o.imageId=f,v.onloadstart=function(h){a.onloadstart&&a.onloadstart(h,o),n.triggerEvent(n.events,"cornerstoneimageloadstart",{url:i,imageId:f})},v.onloadend=function(h){a.onloadend&&a.onloadend(h,o),n.triggerEvent(n.events,"cornerstoneimageloadend",{url:i,imageId:f})},v.onreadystatechange=function(h){a.onreadystatechange?a.onreadystatechange(h,o):4===v.readyState&&(200===v.status?u(v.response,v):c(v))},v.onprogress=function(h){var E=h.loaded,M=void 0,O=void 0;h.lengthComputable&&(M=h.total,O=Math.round(E/M*100)),a.onprogress&&a.onprogress(h,o),n.triggerEvent(n.events,"cornerstoneimageloadprogress",{url:i,imageId:f,loaded:E,total:M,percentComplete:O})},v.send()})}},"./imageLoader/isColorImage.js":
/*!*************************************!*\
          !*** ./imageLoader/isColorImage.js ***!
          \*************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(r){return"RGB"===r||"PALETTE COLOR"===r||"YBR_FULL"===r||"YBR_FULL_422"===r||"YBR_PARTIAL_422"===r||"YBR_PARTIAL_420"===r||"YBR_RCT"===r||"YBR_ICT"===r}},"./imageLoader/isJPEGBaseline8BitColor.js":
/*!************************************************!*\
          !*** ./imageLoader/isJPEGBaseline8BitColor.js ***!
          \************************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function r(d,l){if(l=l||d.transferSyntax,8===d.bitsAllocated&&"1.2.840.10008.1.2.4.50"===l&&(3===d.samplesPerPixel||4===d.samplesPerPixel))return!0}},"./imageLoader/registerLoaders.js":
/*!****************************************!*\
          !*** ./imageLoader/registerLoaders.js ***!
          \****************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=g(e(
/*! ./wadors/index.js */
"./imageLoader/wadors/index.js")),s=g(e(
/*! ./wadouri/index.js */
"./imageLoader/wadouri/index.js"));function g(f){return f&&f.__esModule?f:{default:f}}t.default=function i(f){d.default.register(f),s.default.register(f)}},"./imageLoader/wadors/findIndexOfString.js":
/*!*************************************************!*\
          !*** ./imageLoader/wadors/findIndexOfString.js ***!
          \*************************************************/
/*! no static exports found */function(b,t,e){"use strict";function r(s,g,i){if(i+s.length>g.length)return!1;for(var f=i,m=0;m<s.length;m++)if(s[m]!==g[f++])return!1;return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function l(s,g,i){i=i||0;for(var f=function d(s){for(var g=new Uint8Array(s.length),i=0,f=s.length;i<f;i++)g[i]=s.charCodeAt(i);return g}(g),m=i;m<s.length;m++)if(f[0]===s[m]&&r(f,s,m))return m;return-1}},"./imageLoader/wadors/getPixelData.js":
/*!********************************************!*\
          !*** ./imageLoader/wadors/getPixelData.js ***!
          \********************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(
/*! ../internal/index.js */
"./imageLoader/internal/index.js"),l=function s(o){return o&&o.__esModule?o:{default:o}}(e(
/*! ./findIndexOfString.js */
"./imageLoader/wadors/findIndexOfString.js"));function i(o){for(var n=0;n<o.length;n++)if("Content-Type:"===o[n].substr(0,13))return o[n].substr(13).trim()}t.default=function m(o,n){var u={accept:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/octet-stream"};return new Promise(function(c,v){(0,r.xhrRequest)(o,n,u).then(function(E){var M=new Uint8Array(E),O=(0,l.default)(M,"\r\n\r\n");-1===O&&v(new Error("invalid response - no multipart mime header"));var P=function f(o,n,a){a=a||o.length-n;for(var u="",c=n=n||0;c<n+a;c++)u+=String.fromCharCode(o[c]);return u}(M,0,O),T=P.split("\r\n"),D=function g(o){for(var n=0;n<o.length;n++)if("--"===o[n].substr(0,2))return o[n]}(T);D||v(new Error("invalid response - no boundary marker"));var y=O+4,j=(0,l.default)(M,D,y);-1===j&&v(new Error("invalid response - terminating boundary not found"));var C=j-y-2;c({contentType:i(T),imageFrame:{pixelData:new Uint8Array(E,y,C)}})})})}},"./imageLoader/wadors/index.js":
/*!*************************************!*\
          !*** ./imageLoader/wadors/index.js ***!
          \*************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(
/*! ./metaData/index.js */
"./imageLoader/wadors/metaData/index.js"),l=u(e(
/*! ./findIndexOfString.js */
"./imageLoader/wadors/findIndexOfString.js")),g=u(e(
/*! ./getPixelData.js */
"./imageLoader/wadors/getPixelData.js")),f=u(e(
/*! ./metaDataManager.js */
"./imageLoader/wadors/metaDataManager.js")),o=u(e(
/*! ./loadImage.js */
"./imageLoader/wadors/loadImage.js")),a=u(e(
/*! ./register.js */
"./imageLoader/wadors/register.js"));function u(v){return v&&v.__esModule?v:{default:v}}t.default={metaData:{getNumberString:r.getNumberString,getNumberValue:r.getNumberValue,getNumberValues:r.getNumberValues,getValue:r.getValue,metaDataProvider:r.metaDataProvider},findIndexOfString:l.default,getPixelData:g.default,loadImage:o.default,metaDataManager:f.default,register:a.default}},"./imageLoader/wadors/loadImage.js":
/*!*****************************************!*\
          !*** ./imageLoader/wadors/loadImage.js ***!
          \*****************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTransferSyntaxForContentType=m;var d=f(e(
/*! ./metaDataManager.js */
"./imageLoader/wadors/metaDataManager.js")),s=f(e(
/*! ./getPixelData.js */
"./imageLoader/wadors/getPixelData.js")),i=f(e(
/*! ../createImage.js */
"./imageLoader/createImage.js"));function f(n){return n&&n.__esModule?n:{default:n}}function m(n){var a="1.2.840.10008.1.2";return n&&n.split(";").forEach(function(c){var v=c.split("=");2===v.length&&"transfer-syntax"===v[0].trim()&&(a=v[1].trim()||a)}),a}t.default=function o(n,a){var u=(new Date).getTime(),c=n.substring(7);return{promise:new Promise(function(h,E){if(void 0===d.default.get(n)){var O=new Error("no metadata for imageId "+n);return E(O)}(0,s.default)(c,n,'multipart/related; type="application/octet-stream"').then(function(T){var D=m(T.contentType);(0,i.default)(n,T.imageFrame.pixelData,D,a).then(function(C){var I=(new Date).getTime();C.loadTimeInMS=I-u,h(C)},E)},E)}),cancelFn:void 0}}},"./imageLoader/wadors/metaData/getNumberString.js":
/*!********************************************************!*\
          !*** ./imageLoader/wadors/metaData/getNumberString.js ***!
          \********************************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=function l(g){return g&&g.__esModule?g:{default:g}}(e(
/*! ./getValue.js */
"./imageLoader/wadors/metaData/getValue.js"));t.default=function s(g,i,f){var m=(0,d.default)(g,i,f);if(void 0!==m)return parseFloat(m)}},"./imageLoader/wadors/metaData/getNumberValue.js":
/*!*******************************************************!*\
          !*** ./imageLoader/wadors/metaData/getNumberValue.js ***!
          \*******************************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=function l(g){return g&&g.__esModule?g:{default:g}}(e(
/*! ./getValue.js */
"./imageLoader/wadors/metaData/getValue.js"));t.default=function s(g,i){var f=(0,d.default)(g,i);if(void 0!==f)return parseFloat(f)}},"./imageLoader/wadors/metaData/getNumberValues.js":
/*!********************************************************!*\
          !*** ./imageLoader/wadors/metaData/getNumberValues.js ***!
          \********************************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function r(d,l){if(d&&d.Value&&!(l&&d.Value.length<l)){for(var s=[],g=0;g<d.Value.length;g++)s.push(parseFloat(d.Value[g]));return s}}},"./imageLoader/wadors/metaData/getValue.js":
/*!*************************************************!*\
          !*** ./imageLoader/wadors/metaData/getValue.js ***!
          \*************************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function r(d,l,s){return l=l||0,!d||!d.Value||d.Value.length<=l?s:d.Value[l]}},"./imageLoader/wadors/metaData/index.js":
/*!**********************************************!*\
          !*** ./imageLoader/wadors/metaData/index.js ***!
          \**********************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(
/*! ./getNumberString.js */
"./imageLoader/wadors/metaData/getNumberString.js");Object.defineProperty(t,"getNumberString",{enumerable:!0,get:function(){return i(r).default}});var d=e(
/*! ./getNumberValue.js */
"./imageLoader/wadors/metaData/getNumberValue.js");Object.defineProperty(t,"getNumberValue",{enumerable:!0,get:function(){return i(d).default}});var l=e(
/*! ./getNumberValues.js */
"./imageLoader/wadors/metaData/getNumberValues.js");Object.defineProperty(t,"getNumberValues",{enumerable:!0,get:function(){return i(l).default}});var s=e(
/*! ./getValue.js */
"./imageLoader/wadors/metaData/getValue.js");Object.defineProperty(t,"getValue",{enumerable:!0,get:function(){return i(s).default}});var g=e(
/*! ./metaDataProvider.js */
"./imageLoader/wadors/metaData/metaDataProvider.js");function i(f){return f&&f.__esModule?f:{default:f}}Object.defineProperty(t,"metaDataProvider",{enumerable:!0,get:function(){return i(g).default}})},"./imageLoader/wadors/metaData/metaDataProvider.js":
/*!*********************************************************!*\
          !*** ./imageLoader/wadors/metaData/metaDataProvider.js ***!
          \*********************************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=a(e(
/*! ../../../externalModules.js */
"./externalModules.js")),s=a(e(
/*! ./getNumberValues.js */
"./imageLoader/wadors/metaData/getNumberValues.js")),i=a(e(
/*! ./getValue.js */
"./imageLoader/wadors/metaData/getValue.js")),m=a(e(
/*! ./getNumberValue.js */
"./imageLoader/wadors/metaData/getNumberValue.js")),n=a(e(
/*! ../metaDataManager.js */
"./imageLoader/wadors/metaDataManager.js"));function a(c){return c&&c.__esModule?c:{default:c}}t.default=function u(c,v){var h=d.default.dicomParser,E=n.default.get(v);if(E){if("generalSeriesModule"===c)return{modality:(0,i.default)(E["00080060"]),seriesInstanceUID:(0,i.default)(E["0020000e"]),seriesNumber:(0,m.default)(E["00200011"]),studyInstanceUID:(0,i.default)(E["0020000d"]),seriesDate:h.parseDA((0,i.default)(E["00080021"])),seriesTime:h.parseTM((0,i.default)(E["00080031"],0,""))};if("patientStudyModule"===c)return{patientAge:(0,m.default)(E["00101010"]),patientSize:(0,m.default)(E["00101020"]),patientWeight:(0,m.default)(E["00101030"])};if("imagePlaneModule"===c){var M=(0,s.default)(E["00200037"],6),O=(0,s.default)(E["00200032"],3),P=(0,s.default)(E["00280030"],2),T=1,D=1;P&&(D=P[0],T=P[1]);var y=null,j=null;return M&&(y=[parseFloat(M[0]),parseFloat(M[1]),parseFloat(M[2])],j=[parseFloat(M[3]),parseFloat(M[4]),parseFloat(M[5])]),{frameOfReferenceUID:(0,i.default)(E["00200052"]),rows:(0,m.default)(E["00280010"]),columns:(0,m.default)(E["00280011"]),imageOrientationPatient:M,rowCosines:y,columnCosines:j,imagePositionPatient:O,sliceThickness:(0,m.default)(E["00180050"]),sliceLocation:(0,m.default)(E["00201041"]),pixelSpacing:P,rowPixelSpacing:D,columnPixelSpacing:T}}if("imagePixelModule"===c)return{samplesPerPixel:(0,m.default)(E["00280002"]),photometricInterpretation:(0,i.default)(E["00280004"]),rows:(0,m.default)(E["00280010"]),columns:(0,m.default)(E["00280011"]),bitsAllocated:(0,m.default)(E["00280100"]),bitsStored:(0,m.default)(E["00280101"]),highBit:(0,i.default)(E["00280102"]),pixelRepresentation:(0,m.default)(E["00280103"]),planarConfiguration:(0,m.default)(E["00280006"]),pixelAspectRatio:(0,i.default)(E["00280034"]),smallestPixelValue:(0,m.default)(E["00280106"]),largestPixelValue:(0,m.default)(E["00280107"]),redPaletteColorLookupTableDescriptor:(0,s.default)(E["00281101"]),greenPaletteColorLookupTableDescriptor:(0,s.default)(E["00281102"]),bluePaletteColorLookupTableDescriptor:(0,s.default)(E["00281103"]),redPaletteColorLookupTableData:(0,s.default)(E["00281201"]),greenPaletteColorLookupTableData:(0,s.default)(E["00281202"]),bluePaletteColorLookupTableData:(0,s.default)(E["00281203"])};if("voiLutModule"===c)return{windowCenter:(0,s.default)(E["00281050"],1),windowWidth:(0,s.default)(E["00281051"],1)};if("modalityLutModule"===c)return{rescaleIntercept:(0,m.default)(E["00281052"]),rescaleSlope:(0,m.default)(E["00281053"]),rescaleType:(0,i.default)(E["00281054"])};if("sopCommonModule"===c)return{sopClassUID:(0,i.default)(E["00080016"]),sopInstanceUID:(0,i.default)(E["00080018"])};if("petIsotopeModule"===c){var C=(0,i.default)(E["00540016"]);return void 0===C?void 0:{radiopharmaceuticalInfo:{radiopharmaceuticalStartTime:h.parseTM((0,i.default)(C["00181072"],0,"")),radionuclideTotalDose:(0,m.default)(C["00181074"]),radionuclideHalfLife:(0,m.default)(C["00181075"])}}}}}},"./imageLoader/wadors/metaDataManager.js":
/*!***********************************************!*\
          !*** ./imageLoader/wadors/metaDataManager.js ***!
          \***********************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=[];t.default={add:function d(i,f){r[i]=f},get:function l(i){return r[i]},remove:function s(i){r[i]=void 0},purge:function g(){r=[]}}},"./imageLoader/wadors/register.js":
/*!****************************************!*\
          !*** ./imageLoader/wadors/register.js ***!
          \****************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(g){g.registerImageLoader("wadors",d.default),g.metaData.addProvider(l.metaDataProvider)};var d=function s(g){return g&&g.__esModule?g:{default:g}}(e(
/*! ./loadImage.js */
"./imageLoader/wadors/loadImage.js")),l=e(
/*! ./metaData/index.js */
"./imageLoader/wadors/metaData/index.js")},"./imageLoader/wadouri/dataSetCacheManager.js":
/*!****************************************************!*\
          !*** ./imageLoader/wadouri/dataSetCacheManager.js ***!
          \****************************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInfo=u;var d=function s(v){return v&&v.__esModule?v:{default:v}}(e(
/*! ../../externalModules.js */
"./externalModules.js")),l=e(
/*! ../internal/index.js */
"./imageLoader/internal/index.js"),g=0,i={},f={};function u(){return{cacheSizeInBytes:g,numberOfDataSetsCached:Object.keys(i).length}}t.default={isLoaded:function m(v){return void 0!==i[v]},load:function n(v){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.xhrRequest,E=arguments[2],M=d.default.cornerstone,O=d.default.dicomParser;if(i[v])return new Promise(function(D){i[v].cacheCount++,D(i[v].dataSet)});if(f[v])return f[v].cacheCount++,f[v];var P=h(v,E),T=new Promise(function(D,y){P.then(function(j){var C=new Uint8Array(j),I=void 0;try{I=O.parseDicom(C)}catch(B){return y(B)}i[v]={dataSet:I,cacheCount:T.cacheCount},g+=I.byteArray.length,D(I),M.triggerEvent(M.events,"datasetscachechanged",{uri:v,action:"loaded",cacheInfo:u()})},y).then(function(){delete f[v]},function(){delete f[v]})});return T.cacheCount=1,f[v]=T,T},unload:function a(v){var h=d.default.cornerstone;i[v]&&(i[v].cacheCount--,0===i[v].cacheCount&&(g-=i[v].dataSet.byteArray.length,delete i[v],h.triggerEvent(h.events,"datasetscachechanged",{uri:v,action:"unloaded",cacheInfo:u()})))},getInfo:u,purge:function c(){i={},f={}},get:function o(v){if(i[v])return i[v].dataSet}}},"./imageLoader/wadouri/fileManager.js":
/*!********************************************!*\
          !*** ./imageLoader/wadouri/fileManager.js ***!
          \********************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=[];t.default={add:function d(i){return"dicomfile:"+(r.push(i)-1)},get:function l(i){return r[i]},remove:function s(i){r[i]=void 0},purge:function g(){r=[]}}},"./imageLoader/wadouri/getEncapsulatedImageFrame.js":
/*!**********************************************************!*\
          !*** ./imageLoader/wadouri/getEncapsulatedImageFrame.js ***!
          \**********************************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function g(i,f){var m=d.default.dicomParser;if(i.elements.x7fe00010&&i.elements.x7fe00010.basicOffsetTable.length)return m.readEncapsulatedImageFrame(i,i.elements.x7fe00010,f);if(function s(i){return i.intString("x00280008")!==i.elements.x7fe00010.fragments.length}(i)){var o=m.createJPEGBasicOffsetTable(i,i.elements.x7fe00010);return m.readEncapsulatedImageFrame(i,i.elements.x7fe00010,f,o)}return m.readEncapsulatedPixelDataFromFragments(i,i.elements.x7fe00010,f)};var d=function l(i){return i&&i.__esModule?i:{default:i}}(e(
/*! ../../externalModules.js */
"./externalModules.js"))},"./imageLoader/wadouri/getPixelData.js":
/*!*********************************************!*\
          !*** ./imageLoader/wadouri/getPixelData.js ***!
          \*********************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=g(e(
/*! ./getEncapsulatedImageFrame.js */
"./imageLoader/wadouri/getEncapsulatedImageFrame.js")),s=g(e(
/*! ./getUncompressedImageFrame.js */
"./imageLoader/wadouri/getUncompressedImageFrame.js"));function g(f){return f&&f.__esModule?f:{default:f}}t.default=function i(f){var m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=f.elements.x7fe00010||f.elements.x7fe00008;return o?o.encapsulatedPixelData?(0,d.default)(f,m):(0,s.default)(f,m):null}},"./imageLoader/wadouri/getUncompressedImageFrame.js":
/*!**********************************************************!*\
          !*** ./imageLoader/wadouri/getUncompressedImageFrame.js ***!
          \**********************************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=function l(g){return g&&g.__esModule?g:{default:g}}(e(
/*! ./unpackBinaryFrame.js */
"./imageLoader/wadouri/unpackBinaryFrame.js"));t.default=function s(g,i){var f=g.elements.x7fe00010||g.elements.x7fe00008,m=g.uint16("x00280100"),o=g.uint16("x00280010"),n=g.uint16("x00280011"),a=g.uint16("x00280002"),u=f.dataOffset,c=o*n*a,v=void 0;if(8===m){if((v=u+i*c)>=g.byteArray.length)throw new Error("frame exceeds size of pixelData");return new Uint8Array(g.byteArray.buffer,v,c)}if(16===m){if((v=u+i*c*2)>=g.byteArray.length)throw new Error("frame exceeds size of pixelData");return new Uint8Array(g.byteArray.buffer,v,2*c)}if(1===m){if((v=u+i*c*.125)>=g.byteArray.length)throw new Error("frame exceeds size of pixelData");return(0,d.default)(g.byteArray,v,c)}if(32===m){if((v=u+i*c*4)>=g.byteArray.length)throw new Error("frame exceeds size of pixelData");return new Uint8Array(g.byteArray.buffer,v,4*c)}throw new Error("unsupported pixel format")}},"./imageLoader/wadouri/index.js":
/*!**************************************!*\
          !*** ./imageLoader/wadouri/index.js ***!
          \**************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(
/*! ./metaData/index.js */
"./imageLoader/wadouri/metaData/index.js"),l=P(e(
/*! ./dataSetCacheManager.js */
"./imageLoader/wadouri/dataSetCacheManager.js")),g=P(e(
/*! ./fileManager.js */
"./imageLoader/wadouri/fileManager.js")),f=P(e(
/*! ./getEncapsulatedImageFrame.js */
"./imageLoader/wadouri/getEncapsulatedImageFrame.js")),o=P(e(
/*! ./getUncompressedImageFrame.js */
"./imageLoader/wadouri/getUncompressedImageFrame.js")),a=P(e(
/*! ./loadFileRequest.js */
"./imageLoader/wadouri/loadFileRequest.js")),u=e(
/*! ./loadImage.js */
"./imageLoader/wadouri/loadImage.js"),v=P(e(
/*! ./parseImageId.js */
"./imageLoader/wadouri/parseImageId.js")),E=P(e(
/*! ./unpackBinaryFrame.js */
"./imageLoader/wadouri/unpackBinaryFrame.js")),O=P(e(
/*! ./register.js */
"./imageLoader/wadouri/register.js"));function P(D){return D&&D.__esModule?D:{default:D}}t.default={metaData:{getImagePixelModule:r.getImagePixelModule,getLUTs:r.getLUTs,getModalityLUTOutputPixelRepresentation:r.getModalityLUTOutputPixelRepresentation,getNumberValues:r.getNumberValues,metaDataProvider:r.metaDataProvider},dataSetCacheManager:l.default,fileManager:g.default,getEncapsulatedImageFrame:f.default,getUncompressedImageFrame:o.default,loadFileRequest:a.default,loadImageFromPromise:u.loadImageFromPromise,getLoaderForScheme:u.getLoaderForScheme,loadImage:u.loadImage,parseImageId:v.default,unpackBinaryFrame:E.default,register:O.default}},"./imageLoader/wadouri/loadFileRequest.js":
/*!************************************************!*\
          !*** ./imageLoader/wadouri/loadFileRequest.js ***!
          \************************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=g(e(
/*! ./parseImageId.js */
"./imageLoader/wadouri/parseImageId.js")),s=g(e(
/*! ./fileManager.js */
"./imageLoader/wadouri/fileManager.js"));function g(f){return f&&f.__esModule?f:{default:f}}t.default=function i(f){var m=(0,d.default)(f),o=parseInt(m.url,10),n=s.default.get(o);return new Promise(function(a,u){var c=new FileReader;c.onload=function(v){a(v.target.result)},c.onerror=u,c.readAsArrayBuffer(n)})}},"./imageLoader/wadouri/loadImage.js":
/*!******************************************!*\
          !*** ./imageLoader/wadouri/loadImage.js ***!
          \******************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadImage=t.getLoaderForScheme=t.loadImageFromPromise=void 0;var d=u(e(
/*! ../createImage.js */
"./imageLoader/createImage.js")),s=u(e(
/*! ./parseImageId.js */
"./imageLoader/wadouri/parseImageId.js")),i=u(e(
/*! ./dataSetCacheManager.js */
"./imageLoader/wadouri/dataSetCacheManager.js")),m=u(e(
/*! ./loadFileRequest.js */
"./imageLoader/wadouri/loadFileRequest.js")),n=u(e(
/*! ./getPixelData.js */
"./imageLoader/wadouri/getPixelData.js")),a=e(
/*! ../internal/index.js */
"./imageLoader/internal/index.js");function u(O){return O&&O.__esModule?O:{default:O}}function v(O,P){var T=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,D=arguments[3],y=arguments[4],j=arguments[5],C=(new Date).getTime(),I={cancelFn:void 0};return I.promise=new Promise(function(B,S){O.then(function(K){var H=(0,n.default)(K,T),W=K.string("x00020010"),L=(new Date).getTime(),x=(0,d.default)(P,H,W,y);(function c(O,P){O.decache=function(){var T=(0,s.default)(P);i.default.unload(T.url)}})(I,P),x.then(function(_){_.data=K,_.sharedCacheKey=D;var R=(new Date).getTime();_.loadTimeInMS=L-C,_.totalTimeInMS=R-C,void 0!==j&&void 0!==j.imageDoneCallback&&j.imageDoneCallback(_),B(_)},function(_){S({error:_,dataSet:K})})},function(K){S({error:K})})}),I}function E(O){return"dicomweb"===O||"wadouri"===O?a.xhrRequest:"dicomfile"===O?m.default:void 0}t.loadImageFromPromise=v,t.getLoaderForScheme=E,t.loadImage=function M(O){var P=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},T=(0,s.default)(O),D=P.loader;return void 0===D&&(D=E(T.scheme)),i.default.isLoaded(T.url)?function h(O,P){var T=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,D=arguments[3],y=arguments[4],j=(new Date).getTime();return{promise:new Promise(function(I,B){var S=(new Date).getTime(),K=void 0;try{var H=(0,n.default)(O,T),W=O.string("x00020010");K=(0,d.default)(P,H,W,y)}catch(L){return void B({error:L,dataSet:O})}K.then(function(L){L.data=O,L.sharedCacheKey=D;var x=(new Date).getTime();L.loadTimeInMS=S-j,L.totalTimeInMS=x-j,I(L)},B)}),cancelFn:void 0}}(i.default.get(T.url,D,O),O,T.frame,T.url,P):v(i.default.load(T.url,D,O),O,T.frame,T.url,P)}},"./imageLoader/wadouri/metaData/getImagePixelModule.js":
/*!*************************************************************!*\
          !*** ./imageLoader/wadouri/metaData/getImagePixelModule.js ***!
          \*************************************************************/
/*! no static exports found */function(b,t,e){"use strict";function r(i,f){if(i.elements[f]&&6===i.elements[f].length)return[i.uint16(f,0),i.uint16(f,1),i.uint16(f,2)]}function d(i,f,m){for(var o=[],n=i.elements[f],a=0;a<m[0];a++)o[a]=16===m[2]?i.uint16(f,a):i.byteArray[a+n.dataOffset];return o}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function g(i){var f={samplesPerPixel:i.uint16("x00280002"),photometricInterpretation:i.string("x00280004"),rows:i.uint16("x00280010"),columns:i.uint16("x00280011"),bitsAllocated:i.uint16("x00280100"),bitsStored:i.uint16("x00280101"),highBit:i.uint16("x00280102"),pixelRepresentation:i.uint16("x00280103"),planarConfiguration:i.uint16("x00280006"),pixelAspectRatio:i.string("x00280034")};return function s(i,f){0===i.uint16("x00280103")?(f.smallestPixelValue=i.uint16("x00280106"),f.largestPixelValue=i.uint16("x00280107")):(f.smallestPixelValue=i.int16("x00280106"),f.largestPixelValue=i.int16("x00280107"))}(i,f),"PALETTE COLOR"===f.photometricInterpretation&&i.elements.x00281101&&function l(i,f){f.redPaletteColorLookupTableDescriptor=r(i,"x00281101"),f.greenPaletteColorLookupTableDescriptor=r(i,"x00281102"),f.bluePaletteColorLookupTableDescriptor=r(i,"x00281103"),0===f.redPaletteColorLookupTableDescriptor[0]&&(f.redPaletteColorLookupTableDescriptor[0]=65536,f.greenPaletteColorLookupTableDescriptor[0]=65536,f.bluePaletteColorLookupTableDescriptor[0]=65536);var n=i.elements.x00281201.length===f.redPaletteColorLookupTableDescriptor[0]?8:16;f.redPaletteColorLookupTableDescriptor[2]!==n&&(f.redPaletteColorLookupTableDescriptor[2]=n,f.greenPaletteColorLookupTableDescriptor[2]=n,f.bluePaletteColorLookupTableDescriptor[2]=n),f.redPaletteColorLookupTableData=d(i,"x00281201",f.redPaletteColorLookupTableDescriptor),f.greenPaletteColorLookupTableData=d(i,"x00281202",f.greenPaletteColorLookupTableDescriptor),f.bluePaletteColorLookupTableData=d(i,"x00281203",f.bluePaletteColorLookupTableDescriptor)}(i,f),f}},"./imageLoader/wadouri/metaData/getLUTs.js":
/*!*************************************************!*\
          !*** ./imageLoader/wadouri/metaData/getLUTs.js ***!
          \*************************************************/
/*! no static exports found */function(b,t,e){"use strict";function r(l,s){var g=s.uint16("x00283002",0);0===g&&(g=65535);for(var m={id:"1",firstValueMapped:0===l?s.uint16("x00283002",1):s.int16("x00283002",1),numBitsPerEntry:s.uint16("x00283002",2),lut:[]},o=0;o<g;o++)m.lut[o]=0===l?s.uint16("x00283006",o):s.int16("x00283006",o);return m}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function d(l,s){if(s&&s.items.length){for(var g=[],i=0;i<s.items.length;i++){var m=r(l,s.items[i].dataSet);m&&g.push(m)}return g}}},"./imageLoader/wadouri/metaData/getModalityLUTOutputPixelRepresentation.js":
/*!*********************************************************************************!*\
          !*** ./imageLoader/wadouri/metaData/getModalityLUTOutputPixelRepresentation.js ***!
          \*********************************************************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function d(l){var s=l.string("x00080016");if("1.2.840.10008.5.1.4.1.1.2"===s||"1.2.840.10008.5.1.4.1.1.2.1"===s)return 1;var g=l.floatString("x00281052"),i=l.floatString("x00281053");if(void 0!==g&&void 0!==i){var f=function r(l){var s=l.uint16("x00280103"),g=l.uint16("x00280101");return 0===s?0:-1<<g-1}(l);return f*i+g<0?1:0}return l.elements.x00283000&&l.elements.x00283000.length>0?0:l.uint16("x00280103")}},"./imageLoader/wadouri/metaData/getNumberValues.js":
/*!*********************************************************!*\
          !*** ./imageLoader/wadouri/metaData/getNumberValues.js ***!
          \*********************************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function r(d,l,s){var g=[],i=d.string(l);if(i){var f=i.split("\\");if(!(s&&f.length<s)){for(var m=0;m<f.length;m++)g.push(parseFloat(f[m]));return g}}}},"./imageLoader/wadouri/metaData/index.js":
/*!***********************************************!*\
          !*** ./imageLoader/wadouri/metaData/index.js ***!
          \***********************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(
/*! ./getImagePixelModule.js */
"./imageLoader/wadouri/metaData/getImagePixelModule.js");Object.defineProperty(t,"getImagePixelModule",{enumerable:!0,get:function(){return i(r).default}});var d=e(
/*! ./getLUTs.js */
"./imageLoader/wadouri/metaData/getLUTs.js");Object.defineProperty(t,"getLUTs",{enumerable:!0,get:function(){return i(d).default}});var l=e(
/*! ./getModalityLUTOutputPixelRepresentation.js */
"./imageLoader/wadouri/metaData/getModalityLUTOutputPixelRepresentation.js");Object.defineProperty(t,"getModalityLUTOutputPixelRepresentation",{enumerable:!0,get:function(){return i(l).default}});var s=e(
/*! ./getNumberValues.js */
"./imageLoader/wadouri/metaData/getNumberValues.js");Object.defineProperty(t,"getNumberValues",{enumerable:!0,get:function(){return i(s).default}});var g=e(
/*! ./metaDataProvider.js */
"./imageLoader/wadouri/metaData/metaDataProvider.js");function i(f){return f&&f.__esModule?f:{default:f}}Object.defineProperty(t,"metaDataProvider",{enumerable:!0,get:function(){return i(g).default}})},"./imageLoader/wadouri/metaData/metaDataProvider.js":
/*!**********************************************************!*\
          !*** ./imageLoader/wadouri/metaData/metaDataProvider.js ***!
          \**********************************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=h(e(
/*! ../../../externalModules.js */
"./externalModules.js")),s=h(e(
/*! ./getNumberValues.js */
"./imageLoader/wadouri/metaData/getNumberValues.js")),i=h(e(
/*! ../parseImageId.js */
"./imageLoader/wadouri/parseImageId.js")),m=h(e(
/*! ../dataSetCacheManager.js */
"./imageLoader/wadouri/dataSetCacheManager.js")),n=h(e(
/*! ./getImagePixelModule.js */
"./imageLoader/wadouri/metaData/getImagePixelModule.js")),u=h(e(
/*! ./getLUTs.js */
"./imageLoader/wadouri/metaData/getLUTs.js")),v=h(e(
/*! ./getModalityLUTOutputPixelRepresentation.js */
"./imageLoader/wadouri/metaData/getModalityLUTOutputPixelRepresentation.js"));function h(M){return M&&M.__esModule?M:{default:M}}t.default=function E(M,O){var P=d.default.dicomParser,T=(0,i.default)(O),D=m.default.get(T.url);if(D){if("generalSeriesModule"===M)return{modality:D.string("x00080060"),seriesInstanceUID:D.string("x0020000e"),seriesNumber:D.intString("x00200011"),studyInstanceUID:D.string("x0020000d"),seriesDate:P.parseDA(D.string("x00080021")),seriesTime:P.parseTM(D.string("x00080031")||"")};if("patientStudyModule"===M)return{patientAge:D.intString("x00101010"),patientSize:D.floatString("x00101020"),patientWeight:D.floatString("x00101030")};if("imagePlaneModule"===M){var y=(0,s.default)(D,"x00200037",6),j=(0,s.default)(D,"x00200032",3),C=(0,s.default)(D,"x00280030",2),I=1,B=1;C&&(B=C[0],I=C[1]);var S=null,K=null;return y&&(S=[parseFloat(y[0]),parseFloat(y[1]),parseFloat(y[2])],K=[parseFloat(y[3]),parseFloat(y[4]),parseFloat(y[5])]),{frameOfReferenceUID:D.string("x00200052"),rows:D.uint16("x00280010"),columns:D.uint16("x00280011"),imageOrientationPatient:y,rowCosines:S,columnCosines:K,imagePositionPatient:j,sliceThickness:D.floatString("x00180050"),sliceLocation:D.floatString("x00201041"),pixelSpacing:C,rowPixelSpacing:B,columnPixelSpacing:I}}if("imagePixelModule"===M)return(0,n.default)(D);if("modalityLutModule"===M)return{rescaleIntercept:D.floatString("x00281052"),rescaleSlope:D.floatString("x00281053"),rescaleType:D.string("x00281054"),modalityLUTSequence:(0,u.default)(D.uint16("x00280103"),D.elements.x00283000)};if("voiLutModule"===M){var H=(0,v.default)(D);return{windowCenter:(0,s.default)(D,"x00281050",1),windowWidth:(0,s.default)(D,"x00281051",1),voiLUTSequence:(0,u.default)(H,D.elements.x00283010)}}if("sopCommonModule"===M)return{sopClassUID:D.string("x00080016"),sopInstanceUID:D.string("x00080018")};if("petIsotopeModule"===M){var W=D.elements.x00540016;if(void 0===W)return;var L=W.items[0].dataSet;return{radiopharmaceuticalInfo:{radiopharmaceuticalStartTime:P.parseTM(L.string("x00181072")||""),radionuclideTotalDose:L.floatString("x00181074"),radionuclideHalfLife:L.floatString("x00181075")}}}}}},"./imageLoader/wadouri/parseImageId.js":
/*!*********************************************!*\
          !*** ./imageLoader/wadouri/parseImageId.js ***!
          \*********************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function r(d){var l=d.indexOf(":"),s=d.substring(l+1),g=s.indexOf("frame="),i=void 0;if(-1!==g){var f=s.substr(g+6);i=parseInt(f,10),s=s.substr(0,g-1)}return{scheme:d.substr(0,l),url:s,frame:i}}},"./imageLoader/wadouri/register.js":
/*!*****************************************!*\
          !*** ./imageLoader/wadouri/register.js ***!
          \*****************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(l){l.registerImageLoader("dicomweb",r.loadImage),l.registerImageLoader("wadouri",r.loadImage),l.registerImageLoader("dicomfile",r.loadImage),l.metaData.addProvider(d.metaDataProvider)};var r=e(
/*! ./loadImage.js */
"./imageLoader/wadouri/loadImage.js"),d=e(
/*! ./metaData/index.js */
"./imageLoader/wadouri/metaData/index.js")},"./imageLoader/wadouri/unpackBinaryFrame.js":
/*!**************************************************!*\
          !*** ./imageLoader/wadouri/unpackBinaryFrame.js ***!
          \**************************************************/
/*! no static exports found */function(b,t,e){"use strict";function r(l,s){return l&1<<s}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function d(l,s,g){for(var i=new Uint8Array(g),f=0;f<g;f++){var m=Math.floor(f/8);i[f]=r(l[m+s],f%8)?1:0}return i}},"./imageLoader/webWorkerManager.js":
/*!*****************************************!*\
          !*** ./imageLoader/webWorkerManager.js ***!
          \*****************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(
/*! ./internal/options.js */
"./imageLoader/internal/options.js"),d=0,l=[],s=[],g=(0,r.getOptions)(),i={maxWebWorkers:navigator.hardwareConcurrency||1,startWebWorkersOnDemand:!0,webWorkerPath:"../../dist/cornerstoneWADOImageLoaderWebWorker.js",webWorkerTaskPaths:[],taskConfiguration:{decodeTask:{loadCodecsOnStartup:!0,initializeCodecsOnStartup:!1,codecsPath:"../dist/cornerstoneWADOImageLoaderCodecs.js",usePDFJS:!1,strict:g.strict}}},f=void 0,m={maxWebWorkers:0,numWebWorkers:0,numTasksQueued:0,numTasksExecuting:0,numTasksCompleted:0,totalTaskTimeInMS:0,totalTimeDelayedInMS:0};function o(){if(l.length){for(var O=0;O<s.length;O++)if("ready"===s[O].status){s[O].status="busy";var P=l.shift();P.start=(new Date).getTime();var T=(new Date).getTime();return m.totalTimeDelayedInMS+=T-P.added,s[O].task=P,s[O].worker.postMessage({taskType:P.taskType,workerIndex:O,data:P.data},P.transferList),void m.numTasksExecuting++}s.length<f.maxWebWorkers&&a()}}function n(O){if("initialize"===O.data.taskType)s[O.data.workerIndex].status="ready",o();else{var P=s[O.data.workerIndex].task.start;s[O.data.workerIndex].task.deferred.resolve(O.data.result),s[O.data.workerIndex].task=void 0,m.numTasksExecuting--,s[O.data.workerIndex].status="ready",m.numTasksCompleted++;var T=(new Date).getTime();m.totalTaskTimeInMS+=T-P,o()}}function a(){if(!(s.length>=f.maxWebWorkers)){var O=new Worker(f.webWorkerPath);s.push({worker:O,status:"initializing"}),O.addEventListener("message",n),O.postMessage({taskType:"initialize",workerIndex:s.length-1,config:f})}}function u(O){if(O=O||i,f)throw new Error("WebWorkerManager already initialized");if((f=O).maxWebWorkers=f.maxWebWorkers||navigator.hardwareConcurrency||1,!f.startWebWorkersOnDemand)for(var P=0;P<f.maxWebWorkers;P++)a()}t.default={initialize:u,loadWebWorkerTask:function c(O,P){f.webWorkerTaskPaths.push(O),P&&(f.taskConfiguration=Object.assign(f.taskConfiguration,P));for(var T=0;T<s.length;T++)s[T].worker.postMessage({taskType:"loadWebWorkerTask",workerIndex:s.length-1,sourcePath:O,config:f})},addTask:function v(O,P){var T=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,D=arguments[3];f||u();var y={},j=new Promise(function(B,S){y={resolve:B,reject:S}}),C=void 0;for(C=0;C<l.length&&!(l[C].priority<T);C++);var I=d++;return l.splice(C,0,{taskId:I,taskType:O,status:"ready",added:(new Date).getTime(),data:P,deferred:y,priority:T,transferList:D}),o(),{taskId:I,promise:j}},getStatistics:function M(){return m.maxWebWorkers=f.maxWebWorkers,m.numWebWorkers=s.length,m.numTasksQueued=l.length,m},setTaskPriority:function h(O){for(var P=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,T=0;T<l.length;T++)if(l[T].taskId===O){var D=l.splice(T,1)[0];for(D.priority=P,T=0;T<l.length&&!(l[T].priority<P);T++);return l.splice(T,0,D),!0}return!1},cancelTask:function E(O,P){for(var T=0;T<l.length;T++)if(l[T].taskId===O)return l.splice(T,1).deferred.reject(P),!0;return!1}}},"./shared/calculateMinMax.js":
/*!***********************************!*\
          !*** ./shared/calculateMinMax.js ***!
          \***********************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function s(i){var f=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],m=(0,d.default)(i.pixelData),o=!(g(i.smallestPixelValue)&&g(i.largestPixelValue));!0!==f||o?(i.smallestPixelValue=m.min,i.largestPixelValue=m.max):(i.smallestPixelValue!==m.min&&console.warn("Image smallestPixelValue tag is incorrect. Rendering performance will suffer considerably."),i.largestPixelValue!==m.max&&console.warn("Image largestPixelValue tag is incorrect. Rendering performance will suffer considerably."))};var d=function l(i){return i&&i.__esModule?i:{default:i}}(e(
/*! ./getMinMax.js */
"./shared/getMinMax.js"));function g(i){return"number"==typeof i}},"./shared/decodeImageFrame.js":
/*!************************************!*\
          !*** ./shared/decodeImageFrame.js ***!
          \************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=h(e(
/*! ./decoders/decodeLittleEndian.js */
"./shared/decoders/decodeLittleEndian.js")),s=h(e(
/*! ./decoders/decodeBigEndian.js */
"./shared/decoders/decodeBigEndian.js")),i=h(e(
/*! ./decoders/decodeRLE.js */
"./shared/decoders/decodeRLE.js")),m=h(e(
/*! ./decoders/decodeJPEGBaseline.js */
"./shared/decoders/decodeJPEGBaseline.js")),n=h(e(
/*! ./decoders/decodeJPEGLossless.js */
"./shared/decoders/decodeJPEGLossless.js")),u=h(e(
/*! ./decoders/decodeJPEGLS.js */
"./shared/decoders/decodeJPEGLS.js")),v=h(e(
/*! ./decoders/decodeJPEG2000.js */
"./shared/decoders/decodeJPEG2000.js"));function h(M){return M&&M.__esModule?M:{default:M}}t.default=function E(M,O,P,T,D){var y=(new Date).getTime();if("1.2.840.10008.1.2"===O)M=(0,d.default)(M,P);else if("1.2.840.10008.1.2.1"===O)M=(0,d.default)(M,P);else if("1.2.840.10008.1.2.2"===O)M=(0,s.default)(M,P);else if("1.2.840.10008.1.2.1.99"===O)M=(0,d.default)(M,P);else if("1.2.840.10008.1.2.5"===O)M=(0,i.default)(M,P);else if("1.2.840.10008.1.2.4.50"===O)M=(0,m.default)(M,P);else if("1.2.840.10008.1.2.4.51"===O)M=(0,m.default)(M,P);else if("1.2.840.10008.1.2.4.57"===O)M=(0,n.default)(M,P);else if("1.2.840.10008.1.2.4.70"===O)M=(0,n.default)(M,P);else if("1.2.840.10008.1.2.4.80"===O)M=(0,u.default)(M,P);else if("1.2.840.10008.1.2.4.81"===O)M=(0,u.default)(M,P);else if("1.2.840.10008.1.2.4.90"===O)M=(0,v.default)(M,P,T,D);else{if("1.2.840.10008.1.2.4.91"!==O)throw new Error("no decoder for transfer syntax "+O);M=(0,v.default)(M,P,T,D)}var j=void 0!==M.pixelRepresentation&&1===M.pixelRepresentation,C=j&&void 0!==M.bitsStored?32-M.bitsStored:void 0;if(j&&void 0!==C)for(var I=0;I<M.pixelData.length;I++)M.pixelData[I]=M.pixelData[I]<<C>>C;var B=(new Date).getTime();return M.decodeTimeInMS=B-y,M}},"./shared/decoders/decodeBigEndian.js":
/*!********************************************!*\
          !*** ./shared/decoders/decodeBigEndian.js ***!
          \********************************************/
/*! no static exports found */function(b,t,e){"use strict";function r(l){return(255&l)<<8|l>>8&255}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function d(l,s){if(16===l.bitsAllocated){var g=s.buffer,i=s.byteOffset,f=s.length;i%2&&(g=g.slice(i),i=0),l.pixelData=0===l.pixelRepresentation?new Uint16Array(g,i,f/2):new Int16Array(g,i,f/2);for(var m=0;m<l.pixelData.length;m++)l.pixelData[m]=r(l.pixelData[m])}else 8===l.bitsAllocated&&(l.pixelData=s);return l}},"./shared/decoders/decodeJPEG2000.js":
/*!*******************************************!*\
          !*** ./shared/decoders/decodeJPEG2000.js ***!
          \*******************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=void 0;function g(f){if(!f.usePDFJS&&typeof OpenJPEG>"u")throw new Error("OpenJPEG decoder not loaded");if(!(d||(d=OpenJPEG())&&d._jp2_decode))throw new Error("OpenJPEG failed to initialize")}t.default=function i(f,m,o){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return g(o),n.usePDFJS||o.usePDFJS?function r(f,m){var o=new JpxImage;o.parse(m);var n=o.tiles.length;if(1!==n)throw new Error("JPEG2000 decoder returned a tileCount of "+n+", when 1 is expected");return f.columns=o.width,f.rows=o.height,f.pixelData=o.tiles[0].items,f}(f,m):function s(f,m){var a=function l(f,m,o){var n=d._malloc(f.length);d.writeArrayToMemory(f,n);var a=d._malloc(4),u=d._malloc(4),c=d._malloc(4),v=d._malloc(4),h=d._malloc(4),E=(new Date).getTime();if(0!==d.ccall("jp2_decode","number",["number","number","number","number","number","number","number"],[n,f.length,a,u,c,v,h]))return console.log("[opj_decode] decoding failed!"),d._free(n),d._free(d.getValue(a,"*")),d._free(c),d._free(v),d._free(u),void d._free(h);var O=d.getValue(a,"*"),P={length:d.getValue(u,"i32"),sx:d.getValue(c,"i32"),sy:d.getValue(v,"i32"),nbChannels:d.getValue(h,"i32"),perf_timetodecode:void 0,pixelData:void 0},T=P.sx*P.sy*P.nbChannels,D=new Int32Array(d.HEAP32.buffer,O,T);if(1===m)if(Uint8Array.from)P.pixelData=Uint8Array.from(D);else{P.pixelData=new Uint8Array(T);for(var y=0;y<T;y++)P.pixelData[y]=D[y]}else if(o)if(Int16Array.from)P.pixelData=Int16Array.from(D);else{P.pixelData=new Int16Array(T);for(var j=0;j<T;j++)P.pixelData[j]=D[j]}else if(Uint16Array.from)P.pixelData=Uint16Array.from(D);else{P.pixelData=new Uint16Array(T);for(var C=0;C<T;C++)P.pixelData[C]=D[C]}var I=(new Date).getTime();return P.perf_timetodecode=I-E,d._free(n),d._free(a),d._free(O),d._free(u),d._free(c),d._free(v),d._free(h),P}(m,f.bitsAllocated<=8?1:2,1===f.pixelRepresentation);return f.columns=a.sx,f.rows=a.sy,f.pixelData=a.pixelData,a.nbChannels>1&&(f.photometricInterpretation="RGB"),f}(f,m)},t.initializeJPEG2000=g},"./shared/decoders/decodeJPEGBaseline.js":
/*!***********************************************!*\
          !*** ./shared/decoders/decodeJPEGBaseline.js ***!
          \***********************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function r(d,l){if(typeof JpegImage>"u")throw new Error("No JPEG Baseline decoder loaded");var s=new JpegImage;return s.parse(l),s.colorTransform=!1,8===d.bitsAllocated?(d.pixelData=s.getData(d.columns,d.rows),d):16===d.bitsAllocated?(d.pixelData=s.getData16(d.columns,d.rows),d):void 0}},"./shared/decoders/decodeJPEGLS.js":
/*!*****************************************!*\
          !*** ./shared/decoders/decodeJPEGLS.js ***!
          \*****************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=void 0;function l(){if(typeof CharLS>"u")throw new Error("No JPEG-LS decoder loaded");if(!(r||(r=CharLS())&&r._jpegls_decode))throw new Error("JPEG-LS failed to initialize")}t.default=function s(g,i){l();var f=function d(g,i){var f=r._malloc(g.length);r.writeArrayToMemory(g,f);var m=r._malloc(4),o=r._malloc(4),n=r._malloc(4),a=r._malloc(4),u=r._malloc(4),c=r._malloc(4),v=r._malloc(4),h=r._malloc(4),E=r._malloc(4),O={result:r.ccall("jpegls_decode","number",["number","number","number","number","number","number","number","number","number","number","number"],[f,g.length,m,o,n,a,u,c,h,v,E]),width:r.getValue(n,"i32"),height:r.getValue(a,"i32"),bitsPerSample:r.getValue(u,"i32"),stride:r.getValue(c,"i32"),components:r.getValue(h,"i32"),allowedLossyError:r.getValue(v,"i32"),interleaveMode:r.getValue(E,"i32"),pixelData:void 0},P=r.getValue(m,"*");return O.bitsPerSample<=8?(O.pixelData=new Uint8Array(O.width*O.height*O.components),O.pixelData.set(new Uint8Array(r.HEAP8.buffer,P,O.pixelData.length))):i?(O.pixelData=new Int16Array(O.width*O.height*O.components),O.pixelData.set(new Int16Array(r.HEAP16.buffer,P,O.pixelData.length))):(O.pixelData=new Uint16Array(O.width*O.height*O.components),O.pixelData.set(new Uint16Array(r.HEAP16.buffer,P,O.pixelData.length))),r._free(f),r._free(P),r._free(m),r._free(o),r._free(n),r._free(a),r._free(u),r._free(c),r._free(h),r._free(E),O}(i,1===g.pixelRepresentation);if(0!==f.result&&6!==f.result)throw new Error("JPEG-LS decoder failed to decode frame (error code "+f.result+")");return g.columns=f.width,g.rows=f.height,g.pixelData=f.pixelData,g},t.initializeJPEGLS=l},"./shared/decoders/decodeJPEGLossless.js":
/*!***********************************************!*\
          !*** ./shared/decoders/decodeJPEGLossless.js ***!
          \***********************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function r(d,l){if(typeof jpeg>"u"||typeof jpeg.lossless>"u"||typeof jpeg.lossless.Decoder>"u")throw new Error("No JPEG Lossless decoder loaded");var s=d.bitsAllocated<=8?1:2,g=l.buffer,f=(new jpeg.lossless.Decoder).decode(g,l.byteOffset,l.length,s);return 0===d.pixelRepresentation?16===d.bitsAllocated?(d.pixelData=new Uint16Array(f.buffer),d):(d.pixelData=new Uint8Array(f.buffer),d):(d.pixelData=new Int16Array(f.buffer),d)}},"./shared/decoders/decodeLittleEndian.js":
/*!***********************************************!*\
          !*** ./shared/decoders/decodeLittleEndian.js ***!
          \***********************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function r(d,l){var s=l.buffer,g=l.byteOffset,i=l.length;return 16===d.bitsAllocated?(g%2&&(s=s.slice(g),g=0),d.pixelData=0===d.pixelRepresentation?new Uint16Array(s,g,i/2):new Int16Array(s,g,i/2)):8===d.bitsAllocated||1===d.bitsAllocated?d.pixelData=l:32===d.bitsAllocated&&(g%2&&(s=s.slice(g),g=0),d.pixelData=new Float32Array(s,g,i/4)),d}},"./shared/decoders/decodeRLE.js":
/*!**************************************!*\
          !*** ./shared/decoders/decodeRLE.js ***!
          \**************************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function r(g,i){if(8===g.bitsAllocated)return g.planarConfiguration?function l(g,i){for(var f=i,m=g.rows*g.columns,o=new ArrayBuffer(m*g.samplesPerPixel),n=new DataView(f.buffer,f.byteOffset),a=new Int8Array(f.buffer,f.byteOffset),u=new Int8Array(o),c=0,v=n.getInt32(0,!0),h=0;h<v;++h){c=h*m;var E=n.getInt32(4*(h+1),!0),M=n.getInt32(4*(h+2),!0);0===M&&(M=f.length);for(var O=m*v;E<M;){var P=a[E++];if(P>=0&&P<=127)for(var T=0;T<P+1&&c<O;++T)u[c]=a[E++],c++;else if(P<=-1&&P>=-127)for(var D=a[E++],y=0;y<1-P&&c<O;++y)u[c]=D,c++}}return g.pixelData=new Uint8Array(o),g}(g,i):function d(g,i){for(var f=i,m=g.rows*g.columns,o=new ArrayBuffer(m*g.samplesPerPixel),n=new DataView(f.buffer,f.byteOffset),a=new Int8Array(f.buffer,f.byteOffset),u=new Int8Array(o),c=0,v=n.getInt32(0,!0),h=0;h<v;++h){c=h;var E=n.getInt32(4*(h+1),!0),M=n.getInt32(4*(h+2),!0);0===M&&(M=f.length);for(var O=m*v;E<M;){var P=a[E++];if(P>=0&&P<=127)for(var T=0;T<P+1&&c<O;++T)u[c]=a[E++],c+=g.samplesPerPixel;else if(P<=-1&&P>=-127)for(var D=a[E++],y=0;y<1-P&&c<O;++y)u[c]=D,c+=g.samplesPerPixel}}return g.pixelData=new Uint8Array(o),g}(g,i);if(16===g.bitsAllocated)return function s(g,i){for(var f=i,m=g.rows*g.columns,o=new ArrayBuffer(m*g.samplesPerPixel*2),n=new DataView(f.buffer,f.byteOffset),a=new Int8Array(f.buffer,f.byteOffset),u=new Int8Array(o),c=n.getInt32(0,!0),v=0;v<c;++v){var h=0,E=0===v?1:0,M=n.getInt32(4*(v+1),!0),O=n.getInt32(4*(v+2),!0);for(0===O&&(O=f.length);M<O;){var P=a[M++];if(P>=0&&P<=127)for(var T=0;T<P+1&&h<m;++T)u[2*h+E]=a[M++],h++;else if(P<=-1&&P>=-127)for(var D=a[M++],y=0;y<1-P&&h<m;++y)u[2*h+E]=D,h++}}return g.pixelData=0===g.pixelRepresentation?new Uint16Array(o):new Int16Array(o),g}(g,i);throw new Error("unsupported pixel format for RLE")}},"./shared/getMinMax.js":
/*!*****************************!*\
          !*** ./shared/getMinMax.js ***!
          \*****************************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function r(d){for(var l=d[0],s=d[0],g=void 0,i=d.length,f=1;f<i;f++)g=d[f],l=Math.min(l,g),s=Math.max(s,g);return{min:l,max:s}}},"./version.js":
/*!********************!*\
          !*** ./version.js ***!
          \********************/
/*! no static exports found */function(b,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="2.1.4"}})});